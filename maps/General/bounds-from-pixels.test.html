<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>geometry.component.boundsFromPixels</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <!-- YUI -->
    <script type="text/javascript" src="../../../../test/yui3combo/combo.js"></script>
    <link rel="stylesheet" href="../../../../test/yui3combo/combo.css"/>
    <script type="text/javascript" src="../../../../test/run-test-case.js"></script>
    <script type="text/javascript">
        initAPI({
            lang: "ru-RU",
            mode: "debug",
            load: "Map,Polyline,geometry.component.boundsFromPixels"
        });
    </script>
</head>

<body class="yui3-skin-sam"><div id="map"></div></body>

<script type="text/javascript">
    function getTestCase (Y) {
        var map;

        return {
            name: "geometry.component.boundsFromPixels",

            setUp: function () {
                map = new ymaps.Map('map', {
                    center: [45.55878700224406, 82.04074630752471],
                    zoom: 2,
                    type: 'yandex#map',
                    behaviors: ['default', 'scrollZoom']
                });
            },

            tearDown: function () {
                map.destroy();
            },

            testDifferentZooms: function () {
                var realPath = [[52.10185770394246,23.77110855944982],[52.10136047065441,23.76915458450366],[52.10175885603082,23.7655017992593],[52.10135233756706,23.76340924006921],[52.10106310611178,23.76340540742777],[52.10088493261125,23.76234608282521],[52.10006698889141,23.761407034219],[52.09954271261656,23.75985362107158],[52.09943151835151,23.7591861608346],[52.09906878032187,23.75942544358358],[52.10126232455318,23.77088754898074],[52.10179839887295,23.7706776226932],[52.10201653559479,23.77123389640933],[52.10164003837514,23.77059642007186],[52.10132470240489,23.77108430693091],[52.09906444318891,23.75964830666401],[52.09935021055119,23.75888745012411],[52.09875947875663,23.75816258855686],[52.09544282561035,23.74149399189826],[52.09339602196616,23.73073551792042],[52.090603188976,23.71676660823173],[52.08998180385576,23.71330499972497],[52.08997484914232,23.71271977463362],[52.08981264962365,23.71176307190141],[52.09093406511163,23.71116509332267],[52.09121724538931,23.71113736603423],[52.09204955922588,23.709800937862],[52.0921699923213,23.70977071259353],[52.09203010794491,23.70984624592674],[52.09147882994623,23.71056221673936],[52.09098018828026,23.70939869488987],[52.0928862902255,23.70724804721143],[52.09263673872479,23.70668310742873],[52.09216627543697,23.70715494986565],[52.09266572279476,23.70670365532034],[52.09289259868363,23.70720587928575],[52.0941918357795,23.70563621913632],[52.09474517643859,23.70490916495895],[52.09453869331531,23.70404914794621],[52.09475581507639,23.70409967253206],[52.09506988453024,23.70465321868839],[52.09528005528183,23.70434476344758],[52.09562657482905,23.70473494537699],[52.0948506330942,23.70376362308659],[52.094350343815,23.70214930930358],[52.09456322156575,23.70206630493297],[52.09472062822302,23.70163925747507],[52.09467530220264,23.70146957600411],[52.09454493282303,23.70134071127974],[52.09430987920334,23.699942569089],[52.09318122958652,23.69398173186786],[52.09301780750693,23.69400920900401],[52.092702708309,23.69301159349634],[52.08976355939902,23.69456719199836],[52.09042387610177,23.6941696196136],[52.0903030850241,23.69244888722453],[52.08726912626424,23.69336510450479],[52.0876990734485,23.6956220037284],[52.08638122348753,23.69644148994734],[52.08448483070825,23.69732880351209],[52.08508982929991,23.7016124063579],[52.08542880540124,23.70150186416204],[52.08504368960578,23.70163895997934],[52.08445578713123,23.69717564716844],[52.0840046172768,23.69431352618574],[52.0834719647999,23.69434929947893],[52.08371420850349,23.68688105520601],[52.08358537636894,23.6894977005831],[52.08361791178011,23.69457952184386],[52.08400593569781,23.69679915544458],[52.08441047029986,23.6972815991061],[52.0850746708627,23.70167483333633],[52.08582986790882,23.70122983261248],[52.08684965531733,23.70225666068375],[52.08696082276613,23.70269224208849],[52.08737706649809,23.70255406352874],[52.08751804106225,23.70324598014],[52.08770723627614,23.70337787392506],[52.08799031396177,23.70322720488389],[52.08951738099788,23.71129059636731],[52.09034451813277,23.71540234542774],[52.09138493735691,23.72066334578322],[52.09224215864806,23.7250568363974],[52.0937039112551,23.73243595832446],[52.09314952042657,23.73280687462733],[52.09196756842855,23.73325524208875],[52.09032201994558,23.73336362906856],[52.08734973316518,23.73469987410352],[52.08061188349758,23.73830638738947],[52.08015170531912,23.73864928694994],[52.08120183547994,23.74686688164973],[52.08039743378067,23.74710327417727],[52.08024015679324,23.74699693975792],[52.07900581517664,23.74729860432824],[52.07970656504848,23.75374782762212],[52.08191600692083,23.75318605393933],[52.08236171429795,23.75756689927171],[52.08281511482678,23.7573008298376],[52.0837973671426,23.76783408236716],[52.08392337532947,23.7677659071334],[52.08398009686071,23.76845668575239],[52.08398702312937,23.76916795908754],[52.08441468649944,23.76978034786838],[52.08478342552049,23.77141799330408],[52.08485311984936,23.77179174992578],[52.08607662022843,23.77230374252315],[52.08681292579207,23.77227687331711],[52.08823774894385,23.7713831941323],[52.09030347663917,23.76992396838109],[52.09052781177267,23.76975320217099],[52.09064198379141,23.76959022895951],[52.09149165251631,23.76891690589848],[52.09213468362184,23.76847239108788],[52.09240075470449,23.76822786435504],[52.09284334578253,23.76762224276356],[52.09312820368348,23.76747317664769],[52.09425146753055,23.76658068114607],[52.09578139159207,23.76551844083931],[52.09600728856987,23.76542494874231],[52.09618764320256,23.76608522819914],[52.09768118864024,23.76528805526783],[52.0988119868841,23.76597255990922],[52.09905605492481,23.76665490729194],[52.10001105483208,23.76737564913954],[52.10025790881303,23.76803951072569],[52.10085050635195,23.77101642356388],[52.10123129670024,23.77078180842309],[52.10179355218025,23.7707317075211],[52.10191897313766,23.77120504188283]],
                    polyline = new ymaps.Polyline(realPath, {}, {
                        strokeColor: '#000000',
                        strokeWidth: 4,
                        strokeOpacity: 0.8
                    }),
                    geoBounds = [];

                map.geoObjects.add(polyline);

                map.setZoom(0);
                geoBounds.push(polyline.geometry.getBounds());

                map.setZoom(5);
                geoBounds.push(polyline.geometry.getBounds());

                map.setZoom(10);
                geoBounds.push(polyline.geometry.getBounds());

                map.setZoom(16);
                geoBounds.push(polyline.geometry.getBounds());

                geoBounds = geoBounds.join(';').split(';');

                Y.assert(
                    geoBounds[0] == geoBounds[1] &&
                    geoBounds[0] == geoBounds[2] &&
                    geoBounds[0] == geoBounds[3],
                    'Географические границы различаются на разных масштабах: ' + geoBounds.join('; ')
                );
            }
        }
    }
    ymaps.ready(runTestCase);
</script>
</html>
