<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>multiRouter.service</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- YUI -->
    <script type="text/javascript" src="../../../test/yui3combo/combo.js"></script>
    <link rel="stylesheet" href="../../../test/yui3combo/combo.css" />
    <script type="text/javascript" src="../../../test/run-test-case.js"></script>
    <script type="text/javascript" src="../MultiRoute/testMultiJson.js"></script>
    <!-- Code -->
    <script type="text/javascript">
        initAPI({
            lang: "ru-RU",
            mode: "debug",
            load: "multiRouter.service"
        });
    </script>
</head>

<body class="yui3-skin-sam"></body>

<script type="text/javascript">
    function getTestCase(Y) {
        return {
            name: "multiRouter.service",
//            debug: true,

            tearDown: function () {
            },

            testFirstViaError: function () {
                try {
                    ymaps.multiRouter.service.route(['Москва', 'Тверь', 'Питер'], {
                        viaIndexes: [0]
                    });
                    Y.fail("Нет ошибки.");
                } catch (e) {
                    Y.assert(
                        e.message == 'multiRouter.service: Недопустимый индекс транзитной точки.',
                        e.message
                    );
                }
            },

            testLastViaError: function () {
                try {
                    ymaps.multiRouter.service.route(['Москва', 'Тверь', 'Питер'], {
                        viaIndexes: [2]
                    });
                    Y.fail("Нет ошибки.");
                } catch (e) {
                    Y.assert(
                        e.message == 'multiRouter.service: Недопустимый индекс транзитной точки.',
                        e.message
                    );
                }
            }//,

//            testNativeJson: function () {
//                ymaps.multiRouter.service.route(['Москва', 'Питер']).then(function (json) {
//                    this.resume(function () {
//                        Y.assert(json.routes.length == 1);
//                    });
//                }, function (err) {
//                    console.error(err.message);
//                }, this);
//                this.wait();
//            }
        }}
    ymaps.ready(runTestCase);
</script>
</html>
