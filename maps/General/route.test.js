ymaps.modules.define(util.testfile(), [
    "route", "Map", "multiRouter.service", "vow", "util.array"
], function (provide, route, Map, multiRouterService, vow, array) {
    describe("route", function () {
        var map,
            routeStub,
            successRequests = {
                "Тест": {
                    points: ["59.89399,30.514692", "59.939095,30.315868"],
                    result: {"type":"FeatureCollection","features":[{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"index":0,"request":[59.89399,30.514692]},"geometry":{"type":"Point","coordinates":[59.89399,30.514692]}},{"type":"Feature","properties":{"index":1,"request":[59.939095,30.315868]},"geometry":{"type":"Point","coordinates":[59.939095,30.315868]}}],"properties":{"name":"waypoints"}},{"type":"FeatureCollection","features":[],"properties":{"name":"viapoints"}},{"type":"FeatureCollection","features":[{"type":"FeatureCollection","features":[{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"index":0,"type":"driving","action":{"value":"none","text":"прямо"},"distance":{"value":267.07,"text":"270 м"},"duration":{"value":267.07,"text":"4 мин"},"durationInTraffic":{"value":267.07,"text":"4 мин"},"text":"Прямо","lodIndex":0,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.895272,30.513414],[59.894276999999995,30.509447],[59.89429,30.509173]]}},{"type":"Feature","properties":{"index":1,"type":"driving","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":62.7,"text":"62 м"},"duration":{"value":62.7,"text":"1 мин"},"durationInTraffic":{"value":62.7,"text":"1 мин"},"text":"Круговое движение","lodIndex":2,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.89429,30.509173],[59.89432,30.509065],[59.894332,30.508928],[59.894312,30.508783],[59.894273999999996,30.508684000000002],[59.894217,30.508620000000004],[59.894146,30.508604000000005],[59.894075,30.508644000000004],[59.894018,30.508754000000003]]}},{"type":"Feature","properties":{"index":2,"type":"driving","action":{"value":"leave roundabout 1","text":"1-й съезд"},"distance":{"value":467.19,"text":"470 м"},"duration":{"value":467.19,"text":"8 мин"},"durationInTraffic":{"value":467.19,"text":"8 мин"},"text":"1-й съезд","lodIndex":10,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.894018,30.508754000000003],[59.893889,30.508858000000004],[59.893186,30.508703000000004],[59.893082,30.508719000000003],[59.892954,30.508824000000004],[59.892739000000006,30.509101000000005],[59.891186000000005,30.508711000000005],[59.890877,30.508647000000007],[59.890295,30.508467000000007],[59.889959000000005,30.508102000000008]]}},{"type":"Feature","properties":{"index":3,"type":"driving","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":83.6,"text":"83 м"},"duration":{"value":16.72,"text":"1 мин"},"durationInTraffic":{"value":16.72,"text":"1 мин"},"text":"Круговое движение","lodIndex":19,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.889959000000005,30.508102000000008],[59.889945000000004,30.50802700000001],[59.889856,30.50782300000001],[59.889788,30.50775000000001],[59.889714000000005,30.50771300000001],[59.88964000000001,30.50771000000001],[59.88952900000001,30.50778800000001],[59.88946200000001,30.507898000000008],[59.889387000000006,30.508136000000007]]}},{"type":"Feature","properties":{"index":4,"type":"driving","action":{"value":"leave roundabout 2","text":"2-й съезд"},"distance":{"value":161.19,"text":"160 м"},"duration":{"value":32.24,"text":"1 мин"},"durationInTraffic":{"value":32.24,"text":"1 мин"},"text":"2-й съезд","lodIndex":27,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.889387000000006,30.508136000000007],[59.889284,30.508205000000007],[59.889076,30.508268000000008],[59.888969,30.508250000000007],[59.888837,30.508271000000008],[59.888697,30.508333000000007],[59.888622,30.508387000000006],[59.888463,30.508432000000006],[59.888335000000005,30.508381000000007],[59.888274,30.508306000000008],[59.888108,30.507981000000008],[59.888052,30.507904000000007]]}},{"type":"Feature","properties":{"index":5,"type":"driving","street":"Р-21 Кола","action":{"value":"none","text":"прямо"},"distance":{"value":424.66,"text":"420 м"},"duration":{"value":23.59,"text":"1 мин"},"durationInTraffic":{"value":23.59,"text":"1 мин"},"text":"Р-21 Кола","lodIndex":38,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.888052,30.507904000000007],[59.886668,30.502425000000006],[59.886376,30.501095000000007]]}},{"type":"Feature","properties":{"index":6,"type":"driving","street":"Мурманское шоссе","action":{"value":"none","text":"прямо"},"distance":{"value":740.35,"text":"740 м"},"duration":{"value":41.13,"text":"1 мин"},"durationInTraffic":{"value":61.96,"text":"1 мин"},"text":"Мурманское шоссе","lodIndex":40,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.886376,30.501095000000007],[59.886224,30.500317000000006],[59.885798,30.497688000000007],[59.885658,30.496615000000006],[59.885491,30.495228000000004],[59.885232,30.492817000000006],[59.884826000000004,30.488263000000007]]}},{"type":"Feature","properties":{"index":7,"type":"driving","street":"Народная улица","action":{"value":"none","text":"прямо"},"distance":{"value":1687.77,"text":"1,7 км"},"duration":{"value":153.43,"text":"3 мин"},"durationInTraffic":{"value":213.73,"text":"4 мин"},"text":"Народная улица","lodIndex":46,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.884826000000004,30.488263000000007],[59.884593,30.486009000000006],[59.884307,30.483545000000007],[59.883992,30.481197000000005],[59.883596,30.478729000000005],[59.883013999999996,30.475489000000003],[59.88265499999999,30.473697000000005],[59.88217499999999,30.471574000000004],[59.88039899999999,30.464223000000004],[59.87940999999999,30.460248000000004]]}},{"type":"Feature","properties":{"index":8,"type":"driving","street":"Октябрьская набережная","action":{"value":"exit right","text":"съезд направо"},"distance":{"value":314.83,"text":"310 м"},"duration":{"value":26.24,"text":"1 мин"},"durationInTraffic":{"value":41.96,"text":"1 мин"},"text":"Съезд направо, Октябрьская набережная","lodIndex":55,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.87940999999999,30.460248000000004],[59.87946099999999,30.459906000000004],[59.87962399999999,30.459061000000002],[59.879653999999995,30.458774000000002],[59.87963499999999,30.458597],[59.87878499999999,30.455098]]}},{"type":"Feature","properties":{"index":9,"type":"driving","street":"Октябрьская набережная","action":{"value":"right","text":"направо"},"distance":{"value":4969.1,"text":"5 км"},"duration":{"value":351.27,"text":"6 мин"},"durationInTraffic":{"value":395.66,"text":"7 мин"},"text":"Направо, Октябрьская набережная","lodIndex":60,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.87878499999999,30.455098],[59.879293999999994,30.454568],[59.88169299999999,30.452292999999997],[59.88339499999999,30.45058],[59.88371699999999,30.450270999999997],[59.88387099999999,30.450149999999997],[59.88425099999999,30.449948999999997],[59.88456999999999,30.449800999999997],[59.88563099999999,30.449363999999996],[59.88769699999999,30.448762999999996],[59.89434199999999,30.446724999999997],[59.895209999999985,30.446505],[59.895423999999984,30.446419],[59.89572899999998,30.446268999999997],[59.89597199999998,30.446118999999996],[59.89623899999998,30.445911999999996],[59.89734899999998,30.444964999999996],[59.89851899999998,30.444036999999998],[59.89871699999998,30.443838999999997],[59.90053999999998,30.441663],[59.90110199999998,30.440970999999998],[59.90241299999998,30.439200999999997],[59.90414199999998,30.436913999999998],[59.904432999999976,30.436504999999997],[59.90453299999998,30.436335999999997],[59.90584699999998,30.433795999999997],[59.90646699999998,30.43256],[59.90808499999998,30.428766999999997],[59.90876599999998,30.427236999999998],[59.90937699999998,30.425800999999996],[59.90996399999998,30.424472999999995],[59.91147099999998,30.420821999999994],[59.91222699999998,30.418797999999995],[59.91265799999998,30.417786999999997],[59.91280299999998,30.417486999999998],[59.91304499999998,30.417051999999998],[59.913142999999984,30.416904],[59.91337699999998,30.416629999999998],[59.91410599999998,30.415843999999996],[59.91458799999998,30.415363999999997],[59.91504999999998,30.414947999999995],[59.91566299999998,30.414362999999994],[59.91592599999998,30.414079999999995],[59.91643699999998,30.413479999999996]]}},{"type":"Feature","properties":{"index":10,"type":"driving","street":"Малоохтинский проспект","action":{"value":"none","text":"прямо"},"distance":{"value":1409.1,"text":"1,4 км"},"duration":{"value":93.94,"text":"2 мин"},"durationInTraffic":{"value":106.55,"text":"2 мин"},"text":"Малоохтинский проспект","lodIndex":103,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.91643699999998,30.413479999999996],[59.91668699999998,30.413199999999996],[59.91707799999998,30.412820999999997],[59.91751699999998,30.412453999999997],[59.918472999999985,30.411694999999998],[59.91874399999998,30.411445999999998],[59.91910999999998,30.411064999999997],[59.91930199999998,30.410835999999996],[59.91964299999998,30.410396999999996],[59.91986899999998,30.410074999999996],[59.92062299999998,30.408926999999995],[59.92347399999998,30.404468999999995],[59.92474899999998,30.402502999999996],[59.92520999999998,30.401907999999995],[59.92545499999998,30.401668999999995],[59.92617599999998,30.401063999999995],[59.92711599999998,30.400323999999994]]}},{"type":"Feature","properties":{"index":11,"type":"driving","street":"мост Александра Невского","action":{"value":"exit right","text":"съезд направо"},"distance":{"value":199.31,"text":"200 м"},"duration":{"value":18.12,"text":"1 мин"},"durationInTraffic":{"value":20.87,"text":"1 мин"},"text":"Съезд направо, мост Александра Невского","lodIndex":119,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.92711599999998,30.400323999999994],[59.92765899999998,30.403719999999993]]}},{"type":"Feature","properties":{"index":12,"type":"driving","action":{"value":"right","text":"направо"},"distance":{"value":43.35,"text":"43 м"},"duration":{"value":23.94,"text":"1 мин"},"durationInTraffic":{"value":68.7,"text":"1 мин"},"text":"Направо","lodIndex":120,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.92765899999998,30.403719999999993],[59.92763299999998,30.403884999999992],[59.92756599999998,30.40402299999999],[59.92753399999998,30.404043999999992],[59.92745999999998,30.40404699999999],[59.927368999999985,30.40397799999999]]}},{"type":"Feature","properties":{"index":13,"type":"driving","street":"мост Александра Невского","action":{"value":"none","text":"прямо"},"distance":{"value":885.62,"text":"890 м"},"duration":{"value":91.23,"text":"2 мин"},"durationInTraffic":{"value":95.31,"text":"2 мин"},"text":"мост Александра Невского","lodIndex":125,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.927368999999985,30.40397799999999],[59.92587899999999,30.396838999999993],[59.924359999999986,30.389320999999992]]}},{"type":"Feature","properties":{"index":14,"type":"driving","street":"площадь Александра Невского","action":{"value":"none","text":"прямо"},"distance":{"value":227.97,"text":"230 м"},"duration":{"value":17.54,"text":"1 мин"},"durationInTraffic":{"value":34.02,"text":"1 мин"},"text":"площадь Александра Невского","lodIndex":127,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.924359999999986,30.389320999999992],[59.92430899999999,30.389083999999993],[59.924078999999985,30.387596999999992],[59.923690999999984,30.385470999999992]]}},{"type":"Feature","properties":{"index":15,"type":"driving","street":"Невский проспект","action":{"value":"none","text":"прямо"},"distance":{"value":1469.27,"text":"1,5 км"},"duration":{"value":183.66,"text":"3 мин"},"durationInTraffic":{"value":266.64,"text":"4 мин"},"text":"Невский проспект","lodIndex":130,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.923690999999984,30.385470999999992],[59.92370099999999,30.38520399999999],[59.92372299999999,30.385069999999992],[59.92382299999999,30.384686999999992],[59.92627799999999,30.37790099999999],[59.92628399999999,30.37770399999999],[59.93015399999999,30.366835999999992],[59.93035899999999,30.365712999999992],[59.93060999999999,30.363417999999992]]}},{"type":"Feature","properties":{"index":16,"type":"driving","action":{"value":"none","text":"прямо"},"distance":{"value":70.91,"text":"70 м"},"duration":{"value":14.18,"text":"1 мин"},"durationInTraffic":{"value":26.25,"text":"1 мин"},"text":"Прямо","lodIndex":138,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.93060999999999,30.363417999999992],[59.93094099999999,30.36233499999999]]}},{"type":"Feature","properties":{"index":17,"type":"driving","street":"Невский проспект","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":35.81,"text":"35 м"},"duration":{"value":7.16,"text":"1 мин"},"durationInTraffic":{"value":19.42,"text":"1 мин"},"text":"Круговое движение, Невский проспект","lodIndex":139,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.93094099999999,30.36233499999999],[59.93099899999999,30.36215099999999],[59.931020999999994,30.36199299999999],[59.93101599999999,30.361734999999992]]}},{"type":"Feature","properties":{"index":18,"type":"driving","street":"Невский проспект","action":{"value":"leave roundabout 2","text":"2-й съезд"},"distance":{"value":2396.21,"text":"2,4 км"},"duration":{"value":299.53,"text":"5 мин"},"durationInTraffic":{"value":483.12,"text":"8 мин"},"text":"2-й съезд, Невский проспект","lodIndex":142,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.93101599999999,30.361734999999992],[59.93099899999999,30.361148999999994],[59.931129999999996,30.360023999999996],[59.933508999999994,30.341087999999996],[59.93607299999999,30.320106999999997]]}},{"type":"Feature","properties":{"index":19,"type":"driving","street":"набережная реки Мойки","action":{"value":"right","text":"направо"},"distance":{"value":450.71,"text":"450 м"},"duration":{"value":110.14,"text":"2 мин"},"durationInTraffic":{"value":111.71,"text":"2 мин"},"text":"Направо, набережная реки Мойки","lodIndex":146,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.93607299999999,30.320106999999997],[59.936527999999996,30.320204999999998],[59.93702699999999,30.320216],[59.93737999999999,30.3202],[59.939010999999994,30.319674],[59.94009199999999,30.319810999999998]]}},{"type":"Feature","properties":{"index":20,"type":"driving","street":"набережная реки Мойки","action":{"value":"back","text":"разворот"},"distance":{"value":150.77,"text":"150 м"},"duration":{"value":110.15,"text":"2 мин"},"durationInTraffic":{"value":156.94,"text":"3 мин"},"text":"Разворот, набережная реки Мойки","lodIndex":151,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.94009199999999,30.319810999999998],[59.940113999999994,30.319211999999997],[59.939063999999995,30.318972999999996]]}}],"properties":{"index":0,"type":"driving","distance":{"value":16517.51,"text":"17 км"},"duration":{"value":2411.19,"text":"40 мин"},"durationInTraffic":{"value":2972.35,"text":"50 мин"},"coordinates":[[59.895272,30.513414],[59.894276999999995,30.509447],[59.89429,30.509173],[59.89432,30.509065],[59.894332,30.508928],[59.894312,30.508783],[59.894273999999996,30.508684000000002],[59.894217,30.508620000000004],[59.894146,30.508604000000005],[59.894075,30.508644000000004],[59.894018,30.508754000000003],[59.893889,30.508858000000004],[59.893186,30.508703000000004],[59.893082,30.508719000000003],[59.892954,30.508824000000004],[59.892739000000006,30.509101000000005],[59.891186000000005,30.508711000000005],[59.890877,30.508647000000007],[59.890295,30.508467000000007],[59.889959000000005,30.508102000000008],[59.889945000000004,30.50802700000001],[59.889856,30.50782300000001],[59.889788,30.50775000000001],[59.889714000000005,30.50771300000001],[59.88964000000001,30.50771000000001],[59.88952900000001,30.50778800000001],[59.88946200000001,30.507898000000008],[59.889387000000006,30.508136000000007],[59.889284,30.508205000000007],[59.889076,30.508268000000008],[59.888969,30.508250000000007],[59.888837,30.508271000000008],[59.888697,30.508333000000007],[59.888622,30.508387000000006],[59.888463,30.508432000000006],[59.888335000000005,30.508381000000007],[59.888274,30.508306000000008],[59.888108,30.507981000000008],[59.888052,30.507904000000007],[59.886668,30.502425000000006],[59.886376,30.501095000000007],[59.886224,30.500317000000006],[59.885798,30.497688000000007],[59.885658,30.496615000000006],[59.885491,30.495228000000004],[59.885232,30.492817000000006],[59.884826000000004,30.488263000000007],[59.884593,30.486009000000006],[59.884307,30.483545000000007],[59.883992,30.481197000000005],[59.883596,30.478729000000005],[59.883013999999996,30.475489000000003],[59.88265499999999,30.473697000000005],[59.88217499999999,30.471574000000004],[59.88039899999999,30.464223000000004],[59.87940999999999,30.460248000000004],[59.87946099999999,30.459906000000004],[59.87962399999999,30.459061000000002],[59.879653999999995,30.458774000000002],[59.87963499999999,30.458597],[59.87878499999999,30.455098],[59.879293999999994,30.454568],[59.88169299999999,30.452292999999997],[59.88339499999999,30.45058],[59.88371699999999,30.450270999999997],[59.88387099999999,30.450149999999997],[59.88425099999999,30.449948999999997],[59.88456999999999,30.449800999999997],[59.88563099999999,30.449363999999996],[59.88769699999999,30.448762999999996],[59.89434199999999,30.446724999999997],[59.895209999999985,30.446505],[59.895423999999984,30.446419],[59.89572899999998,30.446268999999997],[59.89597199999998,30.446118999999996],[59.89623899999998,30.445911999999996],[59.89734899999998,30.444964999999996],[59.89851899999998,30.444036999999998],[59.89871699999998,30.443838999999997],[59.90053999999998,30.441663],[59.90110199999998,30.440970999999998],[59.90241299999998,30.439200999999997],[59.90414199999998,30.436913999999998],[59.904432999999976,30.436504999999997],[59.90453299999998,30.436335999999997],[59.90584699999998,30.433795999999997],[59.90646699999998,30.43256],[59.90808499999998,30.428766999999997],[59.90876599999998,30.427236999999998],[59.90937699999998,30.425800999999996],[59.90996399999998,30.424472999999995],[59.91147099999998,30.420821999999994],[59.91222699999998,30.418797999999995],[59.91265799999998,30.417786999999997],[59.91280299999998,30.417486999999998],[59.91304499999998,30.417051999999998],[59.913142999999984,30.416904],[59.91337699999998,30.416629999999998],[59.91410599999998,30.415843999999996],[59.91458799999998,30.415363999999997],[59.91504999999998,30.414947999999995],[59.91566299999998,30.414362999999994],[59.91592599999998,30.414079999999995],[59.91643699999998,30.413479999999996],[59.91668699999998,30.413199999999996],[59.91707799999998,30.412820999999997],[59.91751699999998,30.412453999999997],[59.918472999999985,30.411694999999998],[59.91874399999998,30.411445999999998],[59.91910999999998,30.411064999999997],[59.91930199999998,30.410835999999996],[59.91964299999998,30.410396999999996],[59.91986899999998,30.410074999999996],[59.92062299999998,30.408926999999995],[59.92347399999998,30.404468999999995],[59.92474899999998,30.402502999999996],[59.92520999999998,30.401907999999995],[59.92545499999998,30.401668999999995],[59.92617599999998,30.401063999999995],[59.92711599999998,30.400323999999994],[59.92765899999998,30.403719999999993],[59.92763299999998,30.403884999999992],[59.92756599999998,30.40402299999999],[59.92753399999998,30.404043999999992],[59.92745999999998,30.40404699999999],[59.927368999999985,30.40397799999999],[59.92587899999999,30.396838999999993],[59.924359999999986,30.389320999999992],[59.92430899999999,30.389083999999993],[59.924078999999985,30.387596999999992],[59.923690999999984,30.385470999999992],[59.92370099999999,30.38520399999999],[59.92372299999999,30.385069999999992],[59.92382299999999,30.384686999999992],[59.92627799999999,30.37790099999999],[59.92628399999999,30.37770399999999],[59.93015399999999,30.366835999999992],[59.93035899999999,30.365712999999992],[59.93060999999999,30.363417999999992],[59.93094099999999,30.36233499999999],[59.93099899999999,30.36215099999999],[59.931020999999994,30.36199299999999],[59.93101599999999,30.361734999999992],[59.93099899999999,30.361148999999994],[59.931129999999996,30.360023999999996],[59.933508999999994,30.341087999999996],[59.93607299999999,30.320106999999997],[59.936527999999996,30.320204999999998],[59.93702699999999,30.320216],[59.93737999999999,30.3202],[59.939010999999994,30.319674],[59.94009199999999,30.319810999999998],[59.940113999999994,30.319211999999997],[59.939063999999995,30.318972999999996]],"encodedCoordinates":"BpnRAejtkQOB8P__Hfz__-7-__8NAAAAlP___x4AAAB3____DAAAAG_____s____nf___9r____A____x_____D___-5____KAAAALn___9uAAAAx____2gAAAB_____Zf___0H9__8QAAAAmP___2kAAACA____FQEAACn___96_v__7_n__8D____L_v__TP___7r9__-T_v__sP7__7X____y____NP___6f___-3____vP___9v___-2_____f___7b___9OAAAAkf___24AAAC9____7gAAALX___9FAAAAmf___z8AAAAw____7v___5X___8VAAAAfP___z4AAAB0____NgAAALX___8tAAAAYf___83___-A____tf___8P___-7_v__Wv___7P____I____mer__5j6___O-v__3P7___b8__9o____u_X__1b-___P-___dP___5X6__9Z____lfb___3-__827v__av7__zL3__8X____YPb__-L-___U9v__xf7__1z2__90_v__WPP__7r9__8A-f__mf7__7X3__8g_v__SeP__xD5__958P__I_z__6r-__8zAAAAs_z__6MAAADh_v__HgAAAE_____t____VfL__678___u_f___QEAAB33__9fCQAAT_n__6YGAADL_v__QgEAAIf___-aAAAAN____3wBAABs____PwEAAEv-__8lBAAAp_3__xIIAAAK-P__9RkAACT___9kAwAAqv___9YAAABq____MQEAAGr____zAAAAMf___wsBAABN_P__VgQAAGD8__-SBAAAOv___8YAAACA9___HwcAAEz9__8yAgAAFvn__x8FAAAR9___wQYAAGf-__8jAQAAV____2QAAAAU9v__IgUAACz7__9sAgAAL_H__1IGAAAG-v__qQIAAGT6__9jAgAA0Pr__0sCAAC98f__4wUAABj4___0AgAADfz__68BAADU_v__kQAAAE3-___yAAAAbP___2IAAADu_v__6gAAAO78___ZAgAAIP7__-IBAABg_v__zgEAALf9__9lAgAA5f7__wcBAACo_f___wEAAOj-___6AAAAhf7__4cBAACR_v__twEAAAn9__-8AwAAB____w8BAACD_v__bgEAABv____AAAAASf7__1UBAAC-_v__4gAAAIT7___yAgAAlu7__yMLAABS-P__-wQAAK39___NAQAAEf____UAAACj_f__0QIAABz9__-sAwAARA0AAB8CAAClAAAA5v___4oAAAC9____FQAAAOD___8DAAAAtv___7v___-l____HeT__y76__-i4v__Efr__xP____N____Mfr__xr___-y9___fP7___X-__8KAAAAev___xYAAACB_v__ZAAAAH7l__-XCQAAO____wYAAACM1f__Hg8AAJ37___NAAAACff___sAAADF-___SwEAAEj___86AAAAYv___xYAAAD-_v__-____7b9___v____m_v__4MAAAAItv__SwkAAAuu__8ECgAAYgAAAMcBAAALAAAA8wEAAPD___9hAQAA8v3__18GAACJAAAAOQQAAKn9__8WAAAAEf___-b7__8="}}],"properties":{"index":0,"type":"driving","blocked":false,"distance":{"value":16517.51,"text":"17 км"},"duration":{"value":2411.19,"text":"40 мин"},"durationInTraffic":{"value":2972.35,"text":"50 мин"},"boundedBy":[[59.878786,30.318976],[59.940115,30.513414]]}},{"type":"FeatureCollection","features":[{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"index":0,"type":"driving","action":{"value":"none","text":"прямо"},"distance":{"value":267.07,"text":"270 м"},"duration":{"value":267.07,"text":"4 мин"},"durationInTraffic":{"value":267.07,"text":"4 мин"},"text":"Прямо","lodIndex":0,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.895272,30.513414],[59.894276999999995,30.509447],[59.89429,30.509173]]}},{"type":"Feature","properties":{"index":1,"type":"driving","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":62.7,"text":"62 м"},"duration":{"value":62.7,"text":"1 мин"},"durationInTraffic":{"value":62.7,"text":"1 мин"},"text":"Круговое движение","lodIndex":2,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.89429,30.509173],[59.89432,30.509065],[59.894332,30.508928],[59.894312,30.508783],[59.894273999999996,30.508684000000002],[59.894217,30.508620000000004],[59.894146,30.508604000000005],[59.894075,30.508644000000004],[59.894018,30.508754000000003]]}},{"type":"Feature","properties":{"index":2,"type":"driving","action":{"value":"leave roundabout 1","text":"1-й съезд"},"distance":{"value":467.19,"text":"470 м"},"duration":{"value":467.19,"text":"8 мин"},"durationInTraffic":{"value":467.19,"text":"8 мин"},"text":"1-й съезд","lodIndex":10,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.894018,30.508754000000003],[59.893889,30.508858000000004],[59.893186,30.508703000000004],[59.893082,30.508719000000003],[59.892954,30.508824000000004],[59.892739000000006,30.509101000000005],[59.891186000000005,30.508711000000005],[59.890877,30.508647000000007],[59.890295,30.508467000000007],[59.889959000000005,30.508102000000008]]}},{"type":"Feature","properties":{"index":3,"type":"driving","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":83.6,"text":"83 м"},"duration":{"value":16.72,"text":"1 мин"},"durationInTraffic":{"value":16.72,"text":"1 мин"},"text":"Круговое движение","lodIndex":19,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.889959000000005,30.508102000000008],[59.889945000000004,30.50802700000001],[59.889856,30.50782300000001],[59.889788,30.50775000000001],[59.889714000000005,30.50771300000001],[59.88964000000001,30.50771000000001],[59.88952900000001,30.50778800000001],[59.88946200000001,30.507898000000008],[59.889387000000006,30.508136000000007]]}},{"type":"Feature","properties":{"index":4,"type":"driving","action":{"value":"leave roundabout 2","text":"2-й съезд"},"distance":{"value":161.19,"text":"160 м"},"duration":{"value":32.24,"text":"1 мин"},"durationInTraffic":{"value":32.24,"text":"1 мин"},"text":"2-й съезд","lodIndex":27,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.889387000000006,30.508136000000007],[59.889284,30.508205000000007],[59.889076,30.508268000000008],[59.888969,30.508250000000007],[59.888837,30.508271000000008],[59.888697,30.508333000000007],[59.888622,30.508387000000006],[59.888463,30.508432000000006],[59.888335000000005,30.508381000000007],[59.888274,30.508306000000008],[59.888108,30.507981000000008],[59.888052,30.507904000000007]]}},{"type":"Feature","properties":{"index":5,"type":"driving","street":"Р-21 Кола","action":{"value":"none","text":"прямо"},"distance":{"value":424.66,"text":"420 м"},"duration":{"value":23.59,"text":"1 мин"},"durationInTraffic":{"value":23.59,"text":"1 мин"},"text":"Р-21 Кола","lodIndex":38,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.888052,30.507904000000007],[59.886668,30.502425000000006],[59.886376,30.501095000000007]]}},{"type":"Feature","properties":{"index":6,"type":"driving","street":"Мурманское шоссе","action":{"value":"none","text":"прямо"},"distance":{"value":740.35,"text":"740 м"},"duration":{"value":41.13,"text":"1 мин"},"durationInTraffic":{"value":61.96,"text":"1 мин"},"text":"Мурманское шоссе","lodIndex":40,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.886376,30.501095000000007],[59.886224,30.500317000000006],[59.885798,30.497688000000007],[59.885658,30.496615000000006],[59.885491,30.495228000000004],[59.885232,30.492817000000006],[59.884826000000004,30.488263000000007]]}},{"type":"Feature","properties":{"index":7,"type":"driving","street":"Народная улица","action":{"value":"none","text":"прямо"},"distance":{"value":1945.32,"text":"1,9 км"},"duration":{"value":176.85,"text":"3 мин"},"durationInTraffic":{"value":237.15,"text":"4 мин"},"text":"Народная улица","lodIndex":46,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.884826000000004,30.488263000000007],[59.884593,30.486009000000006],[59.884307,30.483545000000007],[59.883992,30.481197000000005],[59.883596,30.478729000000005],[59.883013999999996,30.475489000000003],[59.88265499999999,30.473697000000005],[59.88217499999999,30.471574000000004],[59.88039899999999,30.464223000000004],[59.87954599999999,30.460806000000005],[59.87883499999999,30.457850000000004],[59.878399999999985,30.456112000000005]]}},{"type":"Feature","properties":{"index":8,"type":"driving","street":"Володарский мост","action":{"value":"none","text":"прямо"},"distance":{"value":467.43,"text":"470 м"},"duration":{"value":38.95,"text":"1 мин"},"durationInTraffic":{"value":38.95,"text":"1 мин"},"text":"Володарский мост","lodIndex":57,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.878399999999985,30.456112000000005],[59.87804999999999,30.454734000000006],[59.87713399999999,30.450937000000007],[59.87659299999999,30.448582000000005]]}},{"type":"Feature","properties":{"index":9,"type":"driving","street":"проспект Обуховской Обороны","action":{"value":"exit right","text":"съезд направо"},"distance":{"value":291.03,"text":"290 м"},"duration":{"value":46.46,"text":"1 мин"},"durationInTraffic":{"value":57.03,"text":"1 мин"},"text":"Съезд направо, проспект Обуховской Обороны","lodIndex":60,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.87659299999999,30.448582000000005],[59.876529999999995,30.447627000000004],[59.876552999999994,30.447504000000006],[59.87661799999999,30.447378000000004],[59.87672599999999,30.447303000000005],[59.87679099999999,30.447298000000004],[59.87684999999999,30.447336000000004],[59.87691199999999,30.447406000000004],[59.87700099999999,30.447621000000005],[59.877765999999994,30.450229000000004]]}},{"type":"Feature","properties":{"index":10,"type":"driving","street":"проспект Обуховской Обороны","action":{"value":"left","text":"налево"},"distance":{"value":5944.69,"text":"5,9 км"},"duration":{"value":580.43,"text":"10 мин"},"durationInTraffic":{"value":627.61,"text":"10 мин"},"text":"Налево, проспект Обуховской Обороны","lodIndex":69,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.877765999999994,30.450229000000004],[59.878643,30.449237000000004],[59.878947,30.448839000000003],[59.879619,30.447894],[59.879872,30.447447],[59.880245,30.44696],[59.880266,30.44688],[59.88238,30.444943],[59.882957999999995,30.444516],[59.883720999999994,30.444032],[59.887739999999994,30.442033],[59.88825299999999,30.441765],[59.889571999999994,30.441043],[59.89030199999999,30.440622],[59.89096299999999,30.44019],[59.891020999999995,30.44021],[59.89137699999999,30.440092],[59.89166899999999,30.439923],[59.892708999999996,30.439261000000002],[59.892747,30.439149],[59.893003,30.438956],[59.893216,30.438763],[59.893625,30.438309],[59.894109,30.437728],[59.894777,30.436773],[59.897939,30.431632999999998],[59.899604000000004,30.428887],[59.901889000000004,30.425159999999998],[59.902796,30.42371],[59.906189000000005,30.418066],[59.908385,30.414505],[59.909465000000004,30.412338],[59.910616000000005,30.409888],[59.911305000000006,30.408381],[59.911537,30.40797],[59.911627,30.407958999999998],[59.913974,30.40467],[59.914297000000005,30.404305],[59.916441000000006,30.402021],[59.91715200000001,30.401210000000003],[59.91909000000001,30.397727000000003],[59.92036600000001,30.395536000000003],[59.92140200000001,30.393704000000003],[59.92172000000001,30.393182000000003]]}},{"type":"Feature","properties":{"index":11,"type":"driving","street":"Синопская набережная","action":{"value":"none","text":"прямо"},"distance":{"value":536.56,"text":"540 м"},"duration":{"value":35.77,"text":"1 мин"},"durationInTraffic":{"value":36.1,"text":"1 мин"},"text":"Синопская набережная","lodIndex":112,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.92172000000001,30.393182000000003],[59.92188200000001,30.392969000000004],[59.92197900000001,30.392888000000003],[59.922729000000004,30.392416000000004],[59.922944,30.392343000000004],[59.926273,30.390114000000004]]}},{"type":"Feature","properties":{"index":12,"type":"driving","street":"Херсонская улица","action":{"value":"slight left","text":"левее"},"distance":{"value":103.89,"text":"100 м"},"duration":{"value":12.99,"text":"1 мин"},"durationInTraffic":{"value":15.18,"text":"1 мин"},"text":"Левее, Херсонская улица","lodIndex":117,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.926273,30.390114000000004],[59.92637,30.389870000000005],[59.926418,30.389704000000005],[59.926445,30.389538000000005],[59.926513,30.388366000000005]]}},{"type":"Feature","properties":{"index":13,"type":"driving","street":"площадь Александра Невского","action":{"value":"exit left","text":"съезд налево"},"distance":{"value":275.61,"text":"280 м"},"duration":{"value":58.37,"text":"1 мин"},"durationInTraffic":{"value":87.2,"text":"1 мин"},"text":"Съезд налево, площадь Александра Невского","lodIndex":121,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.926513,30.388366000000005],[59.924473,30.387864000000004],[59.924251,30.387778000000004],[59.924081,30.387600000000006]]}},{"type":"Feature","properties":{"index":14,"type":"driving","street":"площадь Александра Невского","action":{"value":"none","text":"прямо"},"distance":{"value":126.53,"text":"130 м"},"duration":{"value":9.73,"text":"1 мин"},"durationInTraffic":{"value":21.05,"text":"1 мин"},"text":"площадь Александра Невского","lodIndex":124,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.924081,30.387600000000006],[59.923693,30.385474000000006]]}},{"type":"Feature","properties":{"index":15,"type":"driving","street":"Невский проспект","action":{"value":"none","text":"прямо"},"distance":{"value":1469.27,"text":"1,5 км"},"duration":{"value":183.66,"text":"3 мин"},"durationInTraffic":{"value":266.64,"text":"4 мин"},"text":"Невский проспект","lodIndex":125,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.923693,30.385474000000006],[59.923703,30.385207000000005],[59.923725000000005,30.385073000000006],[59.92382500000001,30.384690000000006],[59.926280000000006,30.377904000000004],[59.926286000000005,30.377707000000004],[59.930156000000004,30.366839000000006],[59.930361000000005,30.365716000000006],[59.930612,30.363421000000006]]}},{"type":"Feature","properties":{"index":16,"type":"driving","action":{"value":"none","text":"прямо"},"distance":{"value":70.91,"text":"70 м"},"duration":{"value":14.18,"text":"1 мин"},"durationInTraffic":{"value":26.25,"text":"1 мин"},"text":"Прямо","lodIndex":133,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.930612,30.363421000000006],[59.930943000000006,30.362338000000005]]}},{"type":"Feature","properties":{"index":17,"type":"driving","street":"Невский проспект","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":35.81,"text":"35 м"},"duration":{"value":7.16,"text":"1 мин"},"durationInTraffic":{"value":19.42,"text":"1 мин"},"text":"Круговое движение, Невский проспект","lodIndex":134,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.930943000000006,30.362338000000005],[59.93100100000001,30.362154000000004],[59.93102300000001,30.361996000000005],[59.93101800000001,30.361738000000006]]}},{"type":"Feature","properties":{"index":18,"type":"driving","street":"Невский проспект","action":{"value":"leave roundabout 2","text":"2-й съезд"},"distance":{"value":2396.21,"text":"2,4 км"},"duration":{"value":299.53,"text":"5 мин"},"durationInTraffic":{"value":483.12,"text":"8 мин"},"text":"2-й съезд, Невский проспект","lodIndex":137,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.93101800000001,30.361738000000006],[59.93100100000001,30.361152000000008],[59.93113200000001,30.36002700000001],[59.93351100000001,30.34109100000001],[59.93607500000001,30.32011000000001]]}},{"type":"Feature","properties":{"index":19,"type":"driving","street":"набережная реки Мойки","action":{"value":"right","text":"направо"},"distance":{"value":450.71,"text":"450 м"},"duration":{"value":110.14,"text":"2 мин"},"durationInTraffic":{"value":111.71,"text":"2 мин"},"text":"Направо, набережная реки Мойки","lodIndex":141,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.93607500000001,30.32011000000001],[59.93653000000001,30.32020800000001],[59.93702900000001,30.320219000000012],[59.93738200000001,30.320203000000014],[59.93901300000001,30.319677000000013],[59.94009400000001,30.31981400000001]]}},{"type":"Feature","properties":{"index":20,"type":"driving","street":"набережная реки Мойки","action":{"value":"back","text":"разворот"},"distance":{"value":150.77,"text":"150 м"},"duration":{"value":110.15,"text":"2 мин"},"durationInTraffic":{"value":156.94,"text":"3 мин"},"text":"Разворот, набережная реки Мойки","lodIndex":146,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.94009400000001,30.31981400000001],[59.94011600000001,30.31921500000001],[59.93906600000001,30.31897600000001]]}}],"properties":{"index":0,"type":"driving","distance":{"value":16471.51,"text":"16 км"},"duration":{"value":2595.02,"text":"43 мин"},"durationInTraffic":{"value":3115.83,"text":"52 мин"},"coordinates":[[59.895272,30.513414],[59.894276999999995,30.509447],[59.89429,30.509173],[59.89432,30.509065],[59.894332,30.508928],[59.894312,30.508783],[59.894273999999996,30.508684000000002],[59.894217,30.508620000000004],[59.894146,30.508604000000005],[59.894075,30.508644000000004],[59.894018,30.508754000000003],[59.893889,30.508858000000004],[59.893186,30.508703000000004],[59.893082,30.508719000000003],[59.892954,30.508824000000004],[59.892739000000006,30.509101000000005],[59.891186000000005,30.508711000000005],[59.890877,30.508647000000007],[59.890295,30.508467000000007],[59.889959000000005,30.508102000000008],[59.889945000000004,30.50802700000001],[59.889856,30.50782300000001],[59.889788,30.50775000000001],[59.889714000000005,30.50771300000001],[59.88964000000001,30.50771000000001],[59.88952900000001,30.50778800000001],[59.88946200000001,30.507898000000008],[59.889387000000006,30.508136000000007],[59.889284,30.508205000000007],[59.889076,30.508268000000008],[59.888969,30.508250000000007],[59.888837,30.508271000000008],[59.888697,30.508333000000007],[59.888622,30.508387000000006],[59.888463,30.508432000000006],[59.888335000000005,30.508381000000007],[59.888274,30.508306000000008],[59.888108,30.507981000000008],[59.888052,30.507904000000007],[59.886668,30.502425000000006],[59.886376,30.501095000000007],[59.886224,30.500317000000006],[59.885798,30.497688000000007],[59.885658,30.496615000000006],[59.885491,30.495228000000004],[59.885232,30.492817000000006],[59.884826000000004,30.488263000000007],[59.884593,30.486009000000006],[59.884307,30.483545000000007],[59.883992,30.481197000000005],[59.883596,30.478729000000005],[59.883013999999996,30.475489000000003],[59.88265499999999,30.473697000000005],[59.88217499999999,30.471574000000004],[59.88039899999999,30.464223000000004],[59.87954599999999,30.460806000000005],[59.87883499999999,30.457850000000004],[59.878399999999985,30.456112000000005],[59.87804999999999,30.454734000000006],[59.87713399999999,30.450937000000007],[59.87659299999999,30.448582000000005],[59.876529999999995,30.447627000000004],[59.876552999999994,30.447504000000006],[59.87661799999999,30.447378000000004],[59.87672599999999,30.447303000000005],[59.87679099999999,30.447298000000004],[59.87684999999999,30.447336000000004],[59.87691199999999,30.447406000000004],[59.87700099999999,30.447621000000005],[59.877765999999994,30.450229000000004],[59.878643,30.449237000000004],[59.878947,30.448839000000003],[59.879619,30.447894],[59.879872,30.447447],[59.880245,30.44696],[59.880266,30.44688],[59.88238,30.444943],[59.882957999999995,30.444516],[59.883720999999994,30.444032],[59.887739999999994,30.442033],[59.88825299999999,30.441765],[59.889571999999994,30.441043],[59.89030199999999,30.440622],[59.89096299999999,30.44019],[59.891020999999995,30.44021],[59.89137699999999,30.440092],[59.89166899999999,30.439923],[59.892708999999996,30.439261000000002],[59.892747,30.439149],[59.893003,30.438956],[59.893216,30.438763],[59.893625,30.438309],[59.894109,30.437728],[59.894777,30.436773],[59.897939,30.431632999999998],[59.899604000000004,30.428887],[59.901889000000004,30.425159999999998],[59.902796,30.42371],[59.906189000000005,30.418066],[59.908385,30.414505],[59.909465000000004,30.412338],[59.910616000000005,30.409888],[59.911305000000006,30.408381],[59.911537,30.40797],[59.911627,30.407958999999998],[59.913974,30.40467],[59.914297000000005,30.404305],[59.916441000000006,30.402021],[59.91715200000001,30.401210000000003],[59.91909000000001,30.397727000000003],[59.92036600000001,30.395536000000003],[59.92140200000001,30.393704000000003],[59.92172000000001,30.393182000000003],[59.92188200000001,30.392969000000004],[59.92197900000001,30.392888000000003],[59.922729000000004,30.392416000000004],[59.922944,30.392343000000004],[59.926273,30.390114000000004],[59.92637,30.389870000000005],[59.926418,30.389704000000005],[59.926445,30.389538000000005],[59.926513,30.388366000000005],[59.924473,30.387864000000004],[59.924251,30.387778000000004],[59.924081,30.387600000000006],[59.923693,30.385474000000006],[59.923703,30.385207000000005],[59.923725000000005,30.385073000000006],[59.92382500000001,30.384690000000006],[59.926280000000006,30.377904000000004],[59.926286000000005,30.377707000000004],[59.930156000000004,30.366839000000006],[59.930361000000005,30.365716000000006],[59.930612,30.363421000000006],[59.930943000000006,30.362338000000005],[59.93100100000001,30.362154000000004],[59.93102300000001,30.361996000000005],[59.93101800000001,30.361738000000006],[59.93100100000001,30.361152000000008],[59.93113200000001,30.36002700000001],[59.93351100000001,30.34109100000001],[59.93607500000001,30.32011000000001],[59.93653000000001,30.32020800000001],[59.93702900000001,30.320219000000012],[59.93738200000001,30.320203000000014],[59.93901300000001,30.319677000000013],[59.94009400000001,30.31981400000001],[59.94011600000001,30.31921500000001],[59.93906600000001,30.31897600000001]],"encodedCoordinates":"BpnRAejtkQOB8P__Hfz__-7-__8NAAAAlP___x4AAAB3____DAAAAG_____s____nf___9r____A____x_____D___-5____KAAAALn___9uAAAAx____2gAAAB_____Zf___0H9__8QAAAAmP___2kAAACA____FQEAACn___96_v__7_n__8D____L_v__TP___7r9__-T_v__sP7__7X____y____NP___6f___-3____vP___9v___-2_____f___7b___9OAAAAkf___24AAAC9____7gAAALX___9FAAAAmf___z8AAAAw____7v___5X___8VAAAAfP___z4AAAB0____NgAAALX___8tAAAAYf___83___-A____tf___8P___-7_v__Wv___7P____I____mer__5j6___O-v__3P7___b8__9o____u_X__1b-___P-___dP___5X6__9Z____lfb___3-__827v__av7__zL3__8X____YPb__-L-___U9v__xf7__1z2__90_v__WPP__7r9__8A-f__mf7__7X3__8g_v__SeP__xD5__-n8v__q_z__3T0__85_f__Nvn__03-__-e-v__ov7__yvx__9s_P__zfb__-P9__9F_P__wf___4X___8XAAAAgv___0EAAAC1____bAAAAPv___9BAAAAJgAAADsAAABGAAAAPgAAANcAAABZAAAAMAoAAP0CAAAg_P__bQMAAHL-__8wAQAAT_z__6ACAABB_v___QAAABn-__91AQAAsP___xUAAABv-P__QggAAFX-__9CAgAAHP7___sCAAAx-P__sw8AAPT-__8BAgAALv3__ycFAABb_v__2gIAAFD-__-VAgAAFAAAADoAAACK____ZAEAAFf___8kAQAAav3__xAEAACQ____JgAAAD____8AAQAAP____9UAAAA6_v__mQEAALv9___kAQAARfz__5wCAADs6___WgwAAEb1__-BBgAAcfH__-0IAABW-v__iwMAAPTp__9BDQAAF_L__5QIAACJ9___OAQAAG72__9_BAAAHfr__7ECAABl_v__6AAAAPX___9aAAAAJ_P__ysJAACT_v__QwEAABT3__9gCAAA1fz__8cCAABl8v__kgcAAHH3___8BAAA2Pj__wwEAAD2_f__PgEAACv___-iAAAAr____2EAAAAo_v__7gIAALf____XAAAAS_f__wENAAAM____YQAAAFr___8wAAAAWv___xsAAABs-___RAAAAAr-__8I-P__qv___yL___9O____Vv___7L3__98_v__9f7__woAAAB6____FgAAAIH-__9kAAAAfuX__5cJAAA7____BgAAAIzV__8eDwAAnfv__80AAAAJ9___-wAAAMX7__9LAQAASP___zoAAABi____FgAAAP7-___7____tv3__-____-b-___gwAAAAi2__9LCQAAC67__wQKAABiAAAAxwEAAAsAAADzAQAA8P___2EBAADy_f__XwYAAIkAAAA5BAAAqf3__xYAAAAR____5vv__w=="}}],"properties":{"index":1,"type":"driving","blocked":false,"distance":{"value":16471.51,"text":"16 км"},"duration":{"value":2595.02,"text":"43 мин"},"durationInTraffic":{"value":3115.83,"text":"52 мин"},"boundedBy":[[59.87653,30.318976],[59.940115,30.513414]]}},{"type":"FeatureCollection","features":[{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"index":0,"type":"driving","action":{"value":"none","text":"прямо"},"distance":{"value":267.07,"text":"270 м"},"duration":{"value":267.07,"text":"4 мин"},"durationInTraffic":{"value":267.07,"text":"4 мин"},"text":"Прямо","lodIndex":0,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.895272,30.513414],[59.894276999999995,30.509447],[59.89429,30.509173]]}},{"type":"Feature","properties":{"index":1,"type":"driving","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":62.7,"text":"62 м"},"duration":{"value":62.7,"text":"1 мин"},"durationInTraffic":{"value":62.7,"text":"1 мин"},"text":"Круговое движение","lodIndex":2,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.89429,30.509173],[59.89432,30.509065],[59.894332,30.508928],[59.894312,30.508783],[59.894273999999996,30.508684000000002],[59.894217,30.508620000000004],[59.894146,30.508604000000005],[59.894075,30.508644000000004],[59.894018,30.508754000000003]]}},{"type":"Feature","properties":{"index":2,"type":"driving","action":{"value":"leave roundabout 1","text":"1-й съезд"},"distance":{"value":467.19,"text":"470 м"},"duration":{"value":467.19,"text":"8 мин"},"durationInTraffic":{"value":467.19,"text":"8 мин"},"text":"1-й съезд","lodIndex":10,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.894018,30.508754000000003],[59.893889,30.508858000000004],[59.893186,30.508703000000004],[59.893082,30.508719000000003],[59.892954,30.508824000000004],[59.892739000000006,30.509101000000005],[59.891186000000005,30.508711000000005],[59.890877,30.508647000000007],[59.890295,30.508467000000007],[59.889959000000005,30.508102000000008]]}},{"type":"Feature","properties":{"index":3,"type":"driving","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":83.6,"text":"83 м"},"duration":{"value":16.72,"text":"1 мин"},"durationInTraffic":{"value":16.72,"text":"1 мин"},"text":"Круговое движение","lodIndex":19,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.889959000000005,30.508102000000008],[59.889945000000004,30.50802700000001],[59.889856,30.50782300000001],[59.889788,30.50775000000001],[59.889714000000005,30.50771300000001],[59.88964000000001,30.50771000000001],[59.88952900000001,30.50778800000001],[59.88946200000001,30.507898000000008],[59.889387000000006,30.508136000000007]]}},{"type":"Feature","properties":{"index":4,"type":"driving","action":{"value":"leave roundabout 2","text":"2-й съезд"},"distance":{"value":161.19,"text":"160 м"},"duration":{"value":32.24,"text":"1 мин"},"durationInTraffic":{"value":32.24,"text":"1 мин"},"text":"2-й съезд","lodIndex":27,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.889387000000006,30.508136000000007],[59.889284,30.508205000000007],[59.889076,30.508268000000008],[59.888969,30.508250000000007],[59.888837,30.508271000000008],[59.888697,30.508333000000007],[59.888622,30.508387000000006],[59.888463,30.508432000000006],[59.888335000000005,30.508381000000007],[59.888274,30.508306000000008],[59.888108,30.507981000000008],[59.888052,30.507904000000007]]}},{"type":"Feature","properties":{"index":5,"type":"driving","street":"Р-21 Кола","action":{"value":"none","text":"прямо"},"distance":{"value":424.66,"text":"420 м"},"duration":{"value":23.59,"text":"1 мин"},"durationInTraffic":{"value":23.59,"text":"1 мин"},"text":"Р-21 Кола","lodIndex":38,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.888052,30.507904000000007],[59.886668,30.502425000000006],[59.886376,30.501095000000007]]}},{"type":"Feature","properties":{"index":6,"type":"driving","street":"Мурманское шоссе","action":{"value":"none","text":"прямо"},"distance":{"value":649.84,"text":"650 м"},"duration":{"value":36.1,"text":"1 мин"},"durationInTraffic":{"value":56.93,"text":"1 мин"},"text":"Мурманское шоссе","lodIndex":40,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.886376,30.501095000000007],[59.886224,30.500317000000006],[59.885798,30.497688000000007],[59.885658,30.496615000000006],[59.885491,30.495228000000004],[59.885232,30.492817000000006],[59.884965,30.489856000000007]]}},{"type":"Feature","properties":{"index":7,"type":"driving","street":"проспект Большевиков","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":37.1,"text":"37 м"},"duration":{"value":3.37,"text":"1 мин"},"durationInTraffic":{"value":4.99,"text":"1 мин"},"text":"Круговое движение, проспект Большевиков","lodIndex":46,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.884965,30.489856000000007],[59.885025,30.48981600000001],[59.885079,30.48975400000001],[59.885144999999994,30.489636000000008],[59.885214,30.48944400000001]]}},{"type":"Feature","properties":{"index":8,"type":"driving","street":"проспект Большевиков","action":{"value":"leave roundabout 1","text":"1-й съезд"},"distance":{"value":4122.76,"text":"4,1 км"},"duration":{"value":374.8,"text":"6 мин"},"durationInTraffic":{"value":579.05,"text":"10 мин"},"text":"1-й съезд, проспект Большевиков","lodIndex":50,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.885214,30.48944400000001],[59.885357,30.48939300000001],[59.885466,30.48938000000001],[59.885737,30.48943900000001],[59.88796,30.489955000000013],[59.89566,30.491832000000013],[59.896011,30.49188600000001],[59.896218000000005,30.49188600000001],[59.89647300000001,30.491856000000013],[59.896744000000005,30.491790000000012],[59.897059000000006,30.49166100000001],[59.897218,30.49157500000001],[59.897452,30.49142500000001],[59.897686,30.49124300000001],[59.898058,30.49091000000001],[59.917253,30.47294400000001],[59.918785,30.47153000000001],[59.919612,30.47080200000001],[59.91968,30.47075500000001],[59.919807999999996,30.470718000000012]]}},{"type":"Feature","properties":{"index":9,"type":"driving","street":"улица Коллонтай","action":{"value":"left","text":"налево"},"distance":{"value":1949.15,"text":"1,9 км"},"duration":{"value":217.2,"text":"4 мин"},"durationInTraffic":{"value":243.2,"text":"4 мин"},"text":"Налево, улица Коллонтай","lodIndex":69,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.919807999999996,30.470718000000012],[59.912361999999995,30.439189000000013]]}},{"type":"Feature","properties":{"index":10,"type":"driving","street":"Дальневосточный проспект","action":{"value":"right","text":"направо"},"distance":{"value":1180.68,"text":"1,2 км"},"duration":{"value":127.33,"text":"2 мин"},"durationInTraffic":{"value":139.58,"text":"2 мин"},"text":"Направо, Дальневосточный проспект","lodIndex":70,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.912361999999995,30.439189000000013],[59.918119999999995,30.425824000000013],[59.918361999999995,30.425234000000014],[59.918676999999995,30.424703000000015],[59.919472999999996,30.423637000000014]]}},{"type":"Feature","properties":{"index":11,"type":"driving","street":"Новочеркасский проспект","action":{"value":"none","text":"прямо"},"distance":{"value":1243.88,"text":"1,2 км"},"duration":{"value":155.48,"text":"3 мин"},"durationInTraffic":{"value":198.67,"text":"3 мин"},"text":"Новочеркасский проспект","lodIndex":74,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.919472999999996,30.423637000000014],[59.919745999999996,30.423271000000014],[59.920294,30.422604000000014],[59.92048,30.422355000000014],[59.92077,30.421929000000013],[59.921389,30.421073000000014],[59.922201,30.419982000000015],[59.922302,30.419865000000016],[59.924149,30.417299000000014],[59.924521,30.416816000000015],[59.925826,30.415297000000017],[59.927652,30.413222000000015],[59.928989,30.412111000000014]]}},{"type":"Feature","properties":{"index":12,"type":"driving","street":"Заневский проспект","action":{"value":"left","text":"налево"},"distance":{"value":489.01,"text":"490 м"},"duration":{"value":84.46,"text":"1 мин"},"durationInTraffic":{"value":98.22,"text":"2 мин"},"text":"Налево, Заневский проспект","lodIndex":86,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.928989,30.412111000000014],[59.927994,30.407009000000013],[59.927369999999996,30.403984000000012]]}},{"type":"Feature","properties":{"index":13,"type":"driving","street":"мост Александра Невского","action":{"value":"none","text":"прямо"},"distance":{"value":885.62,"text":"890 м"},"duration":{"value":71.23,"text":"1 мин"},"durationInTraffic":{"value":75.31,"text":"1 мин"},"text":"мост Александра Невского","lodIndex":88,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.927369999999996,30.403984000000012],[59.92588,30.396845000000013],[59.924361,30.389327000000012]]}},{"type":"Feature","properties":{"index":14,"type":"driving","street":"площадь Александра Невского","action":{"value":"none","text":"прямо"},"distance":{"value":227.97,"text":"230 м"},"duration":{"value":17.54,"text":"1 мин"},"durationInTraffic":{"value":34.02,"text":"1 мин"},"text":"площадь Александра Невского","lodIndex":90,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.924361,30.389327000000012],[59.92431,30.389090000000014],[59.92408,30.387603000000013],[59.923691999999996,30.385477000000012]]}},{"type":"Feature","properties":{"index":15,"type":"driving","street":"Невский проспект","action":{"value":"none","text":"прямо"},"distance":{"value":1469.27,"text":"1,5 км"},"duration":{"value":183.66,"text":"3 мин"},"durationInTraffic":{"value":266.64,"text":"4 мин"},"text":"Невский проспект","lodIndex":93,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.923691999999996,30.385477000000012],[59.923702,30.38521000000001],[59.923724,30.385076000000012],[59.923824,30.384693000000013],[59.926279,30.37790700000001],[59.926285,30.37771000000001],[59.930155,30.366842000000013],[59.93036,30.365719000000013],[59.930611,30.363424000000013]]}},{"type":"Feature","properties":{"index":16,"type":"driving","action":{"value":"none","text":"прямо"},"distance":{"value":70.91,"text":"70 м"},"duration":{"value":14.18,"text":"1 мин"},"durationInTraffic":{"value":26.25,"text":"1 мин"},"text":"Прямо","lodIndex":101,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.930611,30.363424000000013],[59.930942,30.36234100000001]]}},{"type":"Feature","properties":{"index":17,"type":"driving","street":"Невский проспект","action":{"value":"enter roundabout","text":"круговое движение"},"distance":{"value":35.81,"text":"35 м"},"duration":{"value":7.16,"text":"1 мин"},"durationInTraffic":{"value":19.42,"text":"1 мин"},"text":"Круговое движение, Невский проспект","lodIndex":102,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.930942,30.36234100000001],[59.931000000000004,30.36215700000001],[59.931022000000006,30.36199900000001],[59.931017000000004,30.361741000000013]]}},{"type":"Feature","properties":{"index":18,"type":"driving","street":"Невский проспект","action":{"value":"leave roundabout 2","text":"2-й съезд"},"distance":{"value":2396.21,"text":"2,4 км"},"duration":{"value":299.53,"text":"5 мин"},"durationInTraffic":{"value":483.12,"text":"8 мин"},"text":"2-й съезд, Невский проспект","lodIndex":105,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.931017000000004,30.361741000000013],[59.931000000000004,30.361155000000014],[59.93113100000001,30.360030000000016],[59.933510000000005,30.341094000000016],[59.936074000000005,30.320113000000017]]}},{"type":"Feature","properties":{"index":19,"type":"driving","street":"набережная реки Мойки","action":{"value":"right","text":"направо"},"distance":{"value":450.71,"text":"450 м"},"duration":{"value":110.14,"text":"2 мин"},"durationInTraffic":{"value":111.71,"text":"2 мин"},"text":"Направо, набережная реки Мойки","lodIndex":109,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.936074000000005,30.320113000000017],[59.93652900000001,30.32021100000002],[59.937028000000005,30.32022200000002],[59.937381,30.32020600000002],[59.939012000000005,30.31968000000002],[59.940093000000005,30.31981700000002]]}},{"type":"Feature","properties":{"index":20,"type":"driving","street":"набережная реки Мойки","action":{"value":"back","text":"разворот"},"distance":{"value":150.77,"text":"150 м"},"duration":{"value":110.15,"text":"2 мин"},"durationInTraffic":{"value":156.94,"text":"3 мин"},"text":"Разворот, набережная реки Мойки","lodIndex":114,"viaPoints":[]},"geometry":{"type":"LineString","coordinates":[[59.940093000000005,30.31981700000002],[59.940115000000006,30.319218000000017],[59.93906500000001,30.318979000000017]]}}],"properties":{"index":0,"type":"driving","distance":{"value":16826.13,"text":"17 км"},"duration":{"value":2681.86,"text":"45 мин"},"durationInTraffic":{"value":3363.58,"text":"56 мин"},"coordinates":[[59.895272,30.513414],[59.894276999999995,30.509447],[59.89429,30.509173],[59.89432,30.509065],[59.894332,30.508928],[59.894312,30.508783],[59.894273999999996,30.508684000000002],[59.894217,30.508620000000004],[59.894146,30.508604000000005],[59.894075,30.508644000000004],[59.894018,30.508754000000003],[59.893889,30.508858000000004],[59.893186,30.508703000000004],[59.893082,30.508719000000003],[59.892954,30.508824000000004],[59.892739000000006,30.509101000000005],[59.891186000000005,30.508711000000005],[59.890877,30.508647000000007],[59.890295,30.508467000000007],[59.889959000000005,30.508102000000008],[59.889945000000004,30.50802700000001],[59.889856,30.50782300000001],[59.889788,30.50775000000001],[59.889714000000005,30.50771300000001],[59.88964000000001,30.50771000000001],[59.88952900000001,30.50778800000001],[59.88946200000001,30.507898000000008],[59.889387000000006,30.508136000000007],[59.889284,30.508205000000007],[59.889076,30.508268000000008],[59.888969,30.508250000000007],[59.888837,30.508271000000008],[59.888697,30.508333000000007],[59.888622,30.508387000000006],[59.888463,30.508432000000006],[59.888335000000005,30.508381000000007],[59.888274,30.508306000000008],[59.888108,30.507981000000008],[59.888052,30.507904000000007],[59.886668,30.502425000000006],[59.886376,30.501095000000007],[59.886224,30.500317000000006],[59.885798,30.497688000000007],[59.885658,30.496615000000006],[59.885491,30.495228000000004],[59.885232,30.492817000000006],[59.884965,30.489856000000007],[59.885025,30.48981600000001],[59.885079,30.48975400000001],[59.885144999999994,30.489636000000008],[59.885214,30.48944400000001],[59.885357,30.48939300000001],[59.885466,30.48938000000001],[59.885737,30.48943900000001],[59.88796,30.489955000000013],[59.89566,30.491832000000013],[59.896011,30.49188600000001],[59.896218000000005,30.49188600000001],[59.89647300000001,30.491856000000013],[59.896744000000005,30.491790000000012],[59.897059000000006,30.49166100000001],[59.897218,30.49157500000001],[59.897452,30.49142500000001],[59.897686,30.49124300000001],[59.898058,30.49091000000001],[59.917253,30.47294400000001],[59.918785,30.47153000000001],[59.919612,30.47080200000001],[59.91968,30.47075500000001],[59.919807999999996,30.470718000000012],[59.912361999999995,30.439189000000013],[59.918119999999995,30.425824000000013],[59.918361999999995,30.425234000000014],[59.918676999999995,30.424703000000015],[59.919472999999996,30.423637000000014],[59.919745999999996,30.423271000000014],[59.920294,30.422604000000014],[59.92048,30.422355000000014],[59.92077,30.421929000000013],[59.921389,30.421073000000014],[59.922201,30.419982000000015],[59.922302,30.419865000000016],[59.924149,30.417299000000014],[59.924521,30.416816000000015],[59.925826,30.415297000000017],[59.927652,30.413222000000015],[59.928989,30.412111000000014],[59.927994,30.407009000000013],[59.927369999999996,30.403984000000012],[59.92588,30.396845000000013],[59.924361,30.389327000000012],[59.92431,30.389090000000014],[59.92408,30.387603000000013],[59.923691999999996,30.385477000000012],[59.923702,30.38521000000001],[59.923724,30.385076000000012],[59.923824,30.384693000000013],[59.926279,30.37790700000001],[59.926285,30.37771000000001],[59.930155,30.366842000000013],[59.93036,30.365719000000013],[59.930611,30.363424000000013],[59.930942,30.36234100000001],[59.931000000000004,30.36215700000001],[59.931022000000006,30.36199900000001],[59.931017000000004,30.361741000000013],[59.931000000000004,30.361155000000014],[59.93113100000001,30.360030000000016],[59.933510000000005,30.341094000000016],[59.936074000000005,30.320113000000017],[59.93652900000001,30.32021100000002],[59.937028000000005,30.32022200000002],[59.937381,30.32020600000002],[59.939012000000005,30.31968000000002],[59.940093000000005,30.31981700000002],[59.940115000000006,30.319218000000017],[59.93906500000001,30.318979000000017]],"encodedCoordinates":"BpnRAejtkQOB8P__Hfz__-7-__8NAAAAlP___x4AAAB3____DAAAAG_____s____nf___9r____A____x_____D___-5____KAAAALn___9uAAAAx____2gAAAB_____Zf___0H9__8QAAAAmP___2kAAACA____FQEAACn___96_v__7_n__8D____L_v__TP___7r9__-T_v__sP7__7X____y____NP___6f___-3____vP___9v___-2_____f___7b___9OAAAAkf___24AAAC9____7gAAALX___9FAAAAmf___z8AAAAw____7v___5X___8VAAAAfP___z4AAAB0____NgAAALX___8tAAAAYf___83___-A____tf___8P___-7_v__Wv___7P____I____mer__5j6___O-v__3P7___b8__9o____u_X__1b-___P-___dP___5X6__9Z____lfb___3-__9v9P__9f7__9j___88AAAAwv___zYAAACK____QgAAAED___9FAAAAzf___48AAADz____bQAAADsAAAAPAQAABAIAAK8IAABVBwAAFB4AADYAAABfAQAAAAAAAM8AAADi_____wAAAL7___8PAQAAf____zsBAACq____nwAAAGr____qAAAASv___-oAAACz_v__dAEAANK5___7SgAAevr___wFAAAo_f__OwMAANH___9EAAAA2____4AAAADXhP__6uL__8vL__9-FgAAsv3___IAAADt_f__OwEAANb7__8cAwAAkv7__xEBAABl_f__JAIAAAf___-6AAAAVv7__yIBAACo_P__awIAAL37__8sAwAAi____2UAAAD69f__NwcAAB3-__90AQAAEfr__xkFAADl9___IgcAAKn7__85BQAAEuz__x38__8v9P__kP3__x3k__8u-v__ouL__xH6__8T____zf___zH6__8a____svf__3z-___1_v__CgAAAHr___8WAAAAgf7__2QAAAB-5f__lwkAADv___8GAAAAjNX__x4PAACd-___zQAAAAn3___7AAAAxfv__0sBAABI____OgAAAGL___8WAAAA_v7___v___-2_f__7____5v7__-DAAAACLb__0sJAAALrv__BAoAAGIAAADHAQAACwAAAPMBAADw____YQEAAPL9__9fBgAAiQAAADkEAACp_f__FgAAABH____m-___"}}],"properties":{"index":2,"type":"driving","blocked":false,"distance":{"value":16826.13,"text":"17 км"},"duration":{"value":2681.86,"text":"45 мин"},"durationInTraffic":{"value":3363.58,"text":"56 мин"},"boundedBy":[[59.884967,30.318976],[59.940115,30.513414]]}}],"properties":{"name":"routes"}}],"properties":{"waypoints":[{"request":[59.89399,30.514692],"coordinates":[30.514692,59.89399]},{"request":[59.939095,30.315868],"coordinates":[30.315868,59.939095]}],"params":{"routingMode":"auto","viaIndexes":[],"avoidTrafficJams":false,"results":3,"searchCoordOrder":"latlong","boundedBy":null,"strictBounds":false,"mapStateAutoApply":true,"multiRoute":true}}}
                }
            };

        before(function () {
            map = new Map('map', {
                type: null,
                center: [45, 54],
                zoom: 9
            });

            routeStub = sinon.stub(multiRouterService, "route");
            registerSuccessRequests();
        });

        after(function () {
            multiRouterService.route.restore();
        });

        afterEach(function () {
            routeStub.reset();
        });

        function registerSuccessRequests () {
            for (var name in successRequests) {
                if (successRequests.hasOwnProperty(name)) {
                    var request = successRequests[name];
                    routeStub.withArgs(request.points).returns(vow.resolve(request.result));
                }
            }
        }

        it("Проверка работы опции mapStateAutoApply для режима мультимаршрутизации", function (done) {
            this.timeout(10000);

            route([[59.89399, 30.514692], [59.939095, 30.315868]],{
                mapStateAutoApply: true,
                multiRoute: true
            }).done(function (route) {
                map.events.add("boundschange", function () {
                    expect(map.getZoom()).to.be(11);
                    expect(array.map(map.getCenter(), Math.round)).to.eql([60,30]);
                    done();
                });
                map.geoObjects.add(route);
            }, function (e) {
                expect().fail(e.message);
            });
        });
    });

    provide();
});
