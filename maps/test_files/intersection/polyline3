// ---------------------
// READ POLYLINE
// ---------------------
read_polyline 14  -1 -1  1 1  1 -1  -1 1  0 2  2 2  1 0  1 0  0 0  0 1  1 0  -1 0  -2 0  0 0

// ----------------------
// INTERSECTION WITH LINE
// ----------------------
line  0 0  0 1
6
1  0 0
1  0 0
1  0 2
2  0 0  0 1
1  0 0
1  0 0

line  5 5  6 6
7
2  -1 -1  1 1
1  0 0
1  2 2
1  0 0
1  0.5 0.5
1  0 0 
1  0 0

line -100 0 -90 0
5
1  0 0
1  1 0
1  0 0
3  1 0  1 0  0 0
4  1 0  -1 0  -2 0  0 0

line  1 1  -1 1
4
1  1 1
1  -1 1
1  1.5 1
1  0 1

// -------------------------
// INTERSECTION WITH SEGMENT
// -------------------------

segment  0 0  0 0
5
1  0 0
1  0 0
1  0 0
1  0 0 
1  0 0

segment  1 0  1 0
3
1  1 0
2  1 0  1 0
1  1 0

segment  -1 0  1 0
6
1  0 0
1  1 0
1  0 0
3  1 0  1 0  0 0
2  1 0  -1 0
2  -1 0  0 0

// -------------------------
// INTERSECTION WITH POLYLINE
// -------------------------

polyline 0
0

polyline 3  0 0  0 0  0 0
5
1  0 0
1  0 0
1  0 0
1  0 0
1  0 0

polyline 1  1 0
3
1  1 0
2  1 0  1 0
1  1 0

polyline  2  0 0  1 0
6
1  0 0
1  1 0
1  0 0
3  1 0  1 0  0 0
2  1 0  0 0
1  0 0

// same polyline
polyline 14  -1 -1  1 1  1 -1  -1 1  0 2  2 2  1 0  1 0  0 0  0 1  1 0  -1 0  -2 0  0 0
1
14  -1 -1  1 1  1 -1  -1 1  0 2  2 2  1 0  1 0  0 0  0 1  1 0  -1 0  -2 0  0 0

polyline 8  0 0  1 1  1 0  0 1  0 0  0 1  1 0  0 0
4
3  0 0  1 1  1 0
1  0 0
6  1 0  1 0  0 0  0 1  1 0  0 0
1  0 0


// ---------------------
// READ POLYLINE
// ---------------------
read_polyline 9  0 0  0 5  0 5  4 5  1 5  5 5  5 0  0 0  5 5

// ----------------------
// INTERSECTION WITH LINE
// ----------------------

line  -1 -1  -2  -2
3
1  0 0
1  5 5
2  0 0  5 5

line 0 100  0 -100
2
3  0 0  0 5  0 5
1  0 0

line -1000 5  1000 6
0

// -------------------------
// INTERSECTION WITH SEGMENT
// -------------------------

segment 0 2  2 0
3
1  0 2
1  2 0
1  1 1

segment 0 5  5 5
2
5  0 5  0 5  4 5  1 5  5 5
1  5 5

segment  5 5  5 5
2
1  5 5
1  5 5

segment 0 0  1 1
2
1  0 0
2  0 0  1 1

segment 1 2  3 4
0

// --------------------------
// INTERSECTION WITH POLYLINE
// --------------------------
polyline 0
0

polyline 1  0 5
1 
2  0 5  0 5

polyline 1  1 6
0

polyline  8  -1 0  0 1  0 3  -1 3  0 5  -2 5  0 2  0 4
2
2  0 1  0 4
2  0 5  0 5

polyline  3  2 6  2 5  3 5
3
2  2 5  3 5
2  3 5  2 5
2  2 5  3 5

polyline  3  2 6  2 5  4 5
2
3  2 5  4 5  2 5
2  2 5  4 5

polyline  3  2 6  2 5  5 5
3
3  2 5  4 5  2 5
2  2 5  5 5
1  5 5

polyline 3  4 5  5 5  4 4
3
1  4 5
2  4 5  5 5
2  4 4  5 5

polyline 3  0 4  0 5  1 5
2
4  0 4  0 5  0 5  1 5
1  1 5


polyline 6  0 0  0 5  5 5  0 0  5 5  0 5
2
6  0 0  0 5  0 5  4 5  1 5  5 5 
2  0 0  5 5

polyline 6  0 0  0 5  5 5  0 0  5 0  5 5
1
9  0 0  0 5  0 5  4 5  1 5  5 5  5 0  0 0  5 5


// ------------------------------
// INTERSECTION WITH BOUNDING BOX
// ------------------------------
bounding_box  0 0  1 1
2
2  0 0  0 1
3  1 0  0 0  1 1

bounding_box  4 4  5 5
3
1  4 5
3  4 5  5 5  5 4
2  4 4  5 5

bounding_box 1 2  4 3
1
2  2 2  3 3


// ------------ Additional test ---------------------

// ---------------------
// READ POLYLINE
// ---------------------
read_polyline 9  0 0  0 0  2 0  1 1  3 1  2 0  4 0  4 0  4 0

// --------------------------
// INTERSECTION WITH SEGMENT
// --------------------------
segment  1 0  3 0
2
2  1 0  2 0
2  2 0  3 0

segment  1 0  2 0
2
2  1 0  2 0
1  2 0

segment  -10 0  10 0
2
3  0 0  0 0  2 0
4  2 0  4 0  4 0  4 0


// ----------- Test that caused bug because of precision
read_polyline 2
37.5477857499802994 55.9220066063385985
37.5477000690480978 55.9217501692836976
polyline
9
37.5477857499802994 55.9220066063385985
37.5487620806036020 55.9219070869200010
37.5487934009442981 55.9218973353765989
37.5488175212068995 55.9218644650770997
37.5488243612812980 55.9218237530383036
37.5487588405682970 55.9216803045841004
37.5487206801531030 55.9216627127175983
37.5486655995538001 55.9216588924011972
37.5477000690480978 55.9217501692836976

2
1  37.5477857499802994 55.9220066063385985
1  37.5477000690480978 55.9217501692836976
