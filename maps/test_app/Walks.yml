Components:
  - mobile_app_test
Feature:
  - Walks

specs:
  Фотографирование неточностей. Базовый сценарий:
    - description: Полный пешеходный сценарий
    - info: Залогиниться в приложении.
    - do: |
        Зайти в раздел "Фотографирование неточностей".
        При необходимости дать приложению доступ к камере и геолокации.
    - assert: Открылся экран с картой
    - do: Лонгтап в любое место карты.
    - assert: |
        - Открылось стандартное приложение камеры
        - В настройках камеры НЕ доступны режим съемки видео / панорам
    - do: |
        Сделать фотографию.
        Подтвердить ее выбор.
    - assert: |
        - Открылся экран редактирования неточности
        - В месте лонгтапа появился синий пин
        - Внизу экрана есть карточка с только что сделанной фотографией
        - Есть инпут для ввода комментария с плейсхолдером "Оставьте комментарий"
        - Есть кнопки "Удалить" и "Сохранить"
    - do: |
        Добавить любой комментарий.
        Тапнуть по кнопке "Сохранить".
    - assert: |
        * Синий пин сменился на синий кружок
        * Синий кружок сохранился в том же месте, где был синий пин
        * В левом верхнем углу экрана появился крестик закрытия
    - do: Тапнуть по синему кружку.
    - assert: |
        - Открылась карточка только что сфотографированной неточности
        - Синий кружок сменился на синий пин
        - В карточке есть кнопка "Редактировать", снятая фотография и написанный комментарий
    - do: Тапнуть по кнопке "Редактировать".
    - assert: Открылся экран редактирования неточности
    - do: |
        Тапнуть по крестику в углу сделанной фотографии.
        Сделать новую фотографию.
        Подтвердить ее выбор.
    - assert: Фотография заменилась на новую
    - do: |
        Изменить комментарий.
        Тапнуть по кнопке "Сохранить".
    - assert: Синий пин сменился на синий кружок
    - do: |
        Тапнуть кнопку "Назад" на смартфоне.
        Тапнуть по крестику закрытия в левом верхнем углу экрана.
    - assert: Экран пешеходного сценария закрылся.
    - do: Зайти в раздел "Выгрузка данных".
    - assert: |
        - Открылся экран выгрузки с надписью "Выгрузка остановлена" и кнопкой "Начать выгрузку"
        - Число фотографий с заездов совпадает с числом фотографий в счетчике на экране заезда, а число пешеходных фотографий неточностей совпадает с числом сделанных пешеходных фотографий
    - do: Тапнуть по кнопке "Начать выгрузку".
    - assert: |
        - Есть надпись "Выгрузка запущена"
        - Во время выгрузки число фотографий с заездов и пешеходных фотографий уменьшается до 0
    - do: Дождаться окончания выгрузки.
    - assert: По завершении выгрузки на экране надпись "Выгрузка остановлена"
    - do: |
        По завершении выгрузки вернуться на главный экран приложения кнопкой "Назад" на смартфоне.
        Зайти в раздел "Фотографирование неточностей".
    - assert: |
        * Открылся экран с картой
        * Метка сфотографированной ранее неточности не отображается

    - Test_type:
      - Acceptance
    - OS:
      - Android


  Фотографирование неточностей. Несколько пешеходных фото:
    - description: Добавление нескольких фото у неточности.
    - info: |
        Залогиниться в приложении одним из тестовых логинов:
        **login:** assessor-mirrors / **pass:** assessortest123
        **login:** asessor.serp / **pass:** Asessor.Test
    - do: |
        Зайти в раздел "Фотографирование неточностей".
        При необходимости дать приложению доступ к камере и геолокации.
    - assert: |
        - Открылся экран с картой
        - Текущее местоположение отмечено красной меткой Я со стрелочкой 
    - do: Лонгтап в любое место карты.
    - assert: |
        - Открылось стандартное приложение камеры
        - В настройках камеры НЕ доступны режим съемки видео / панорам
    - do: |
        Сделать фотографию.
        Подтвердить ее выбор.
    - assert: |
        - Открылся экран редактирования неточности
        - В месте лонгтапа появился синий пин
        - Внизу экрана есть карточка с только что сделанной фотографией
        - Есть инпут для ввода комментария с плейсхолдером "Оставьте комментарий"
        - Есть кнопки "Удалить" и "Сохранить"
    - do: Добавить ещё 4 фотографии.
    - assert: |
        - Фотографии успешно добавились
        - Внизу экрана есть карточки с добавленными фото
    - do: Добавить ещё одну фотографию.
    - assert: |
        - При попытке добавить шестую фотографию появляется хинт "Слишком много фотографий"
        - Камера не открывается
    - do: |
        Добавить любой комментарий.
        Тапнуть по кнопке "Сохранить".
    - assert: |
        - Синий пин сменился на синий кружок
        - Синий кружок сохранился в том же месте, где был синий пин
        - В левом верхнем углу экрана появился крестик закрытия
    - do: |
        Тапнуть по синему кружку.
        Тапнуть по кнопке "Редактировать".
        Удалить несколько фотографий.
    - assert: Удаленные фотографии пропадаю из карточки неточности 
    - do: |
        Добавить несколько фотографий.
        Тапнуть по кнопке "Сохранить".
    - assert: |
        - Синий пин сменился на синий кружок
        - Синий кружок сохранился в том же месте, где был синий пин
        - В левом верхнем углу экрана появился крестик закрытия
    - do: |
        Тапнуть по крестику закрытия в левом верхнем углу экрана.
        Перейти в раздел "Выгрузка данных".
    - assert: |
        - Открывается экран выгрузки 
        - В пункте "Пешеходные фотография неточностей" отображается количество фото (значения не нулевые)
    - do: |
        Тапнуть по кнопке "Начать выгрузку".
        Дождаться окончания выгрузки.
    - assert: |
        - Выгрузка успешно завершилась 
        - В пункте "Пешеходные фотография неточностей" нет фото на выгрузку (нулевое значение)

    - Test_type:
      - Acceptance
    - OS:
      - Android
