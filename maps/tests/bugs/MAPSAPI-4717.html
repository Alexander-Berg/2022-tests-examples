<!DOCTYPE html>
<html><head>
        <title>API 2.0</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="helper.js"></script>
        <script type="text/javascript">
            Api('init');
            function init(ym){
                var factoryStatic = ym.geoObject.overlayFactory.staticGraphics;
                var factoryInteractive = ym.geoObject.overlayFactory.interactive;

                var map = new ym.Map('map', {
                    center: [56, 63],
                    zoom: 3
                },{
                    geoObjectDraggable: true
                });

                var geometryPoint = {
                        type: 'Point',
                        coordinates: [60, 60]
                    };

                var point = new ym.GeoObject({
                        geometry: geometryPoint,
                        properties: {}
                    }, {
                        overlayFactory: factoryStatic
                });

//                map.geoObjects.add(point);

                var button = new ym.control.Button('change factory');
                button.events.add('click', function(e){
                    point.options.set({overlayFactory: factoryInteractive});
                });
                map.controls.add(button);


                var geometryPoint2 = {
                        type: 'Point',
                        coordinates: [60, 80]
                    };
                // https://jira.yandex-team.ru/browse/MAPSAPI-4699
                var point2 = new ym.GeoObject({
                        geometry: geometryPoint2,
                        properties: {}
                    }, {
                        overlayFactory: factoryStatic,
                        iconShadow: true,
                        iconImageHref: "http://l2ru.info/images/pin/8.gif",
                        // iconImageSize: [12, 12],
                        iconImageSize: [11, 11],
                        iconImageOffset: [-6, -6],
                        iconOffset: [20, -20],
                        iconShadowImageHref: 'http://drupal.org/files/issues/drop_shadow.png',
                        // iconShadowImageSize: [16, 16],
                        iconShadowImageSize: [34, 34],
                        iconShadowImageOffset: [20, -20]
                });

//                map.geoObjects.add(point2);


                var geometryPoint3 = {
                        type: 'Point',
                        coordinates: [60, 65]
                    };
                // https://jira.yandex-team.ru/browse/MAPSAPI-4699
                var point3 = new ym.GeoObject({
                        geometry: geometryPoint3,
                        properties: {}
                    }, {
                        iconShadow: true,
                        iconImageHref: "http://l2ru.info/images/pin/8.gif",
                        iconImageSize: [12, 12],
                        iconImageOffset: [-6, -6],
                        iconOffset: [20, -20],
                        iconShadowImageHref: 'http://drupal.org/files/issues/drop_shadow.png',
                        iconShadowImageSize: [16, 16],
                        iconShadowImageOffset: [20, -20]
                });

                map.geoObjects.add(point3);



                var button2 = new ym.control.Button('change factory image point');
                button2.events.add('select', function(e){
                    point2.options.set({overlayFactory: factoryInteractive});
                });
                button2.events.add('deselect', function(e){
                    point2.options.set({overlayFactory: factoryStatic});
                });
                map.controls.add(button2);
            }
        </script>
    </head>
<body style="position: relative; padding: 0pt; margin: 0pt;">    
    <div id="map" style="height: 500px; width: 760px; overflow: hidden;
position: relative;">
    </div>
<input type="button" value="kill map" onclick="myMap.destroy()">
<div id="log"></div>
</body></html>
