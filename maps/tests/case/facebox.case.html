<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<title>Example</title>
<link rel="stylesheet" href="http://ruseller.com/lessons/les262/style.css" type="text/css"/>
<script type="text/javascript" src="http://ruseller.com/lessons/les262/jquery.js"></script>
<script type="text/javascript" src="http://ruseller.com/lessons/les262/facebox.js"></script>
<script src="http://localhost:8080/2.0/?ns=ym&load=package.full,templateLayoutFactory,control.TrafficControl,util.cursor.Manager&mode=debug&lang=ru-RU"></script>

 <script type="text/javascript">
    jQuery(document).ready(function($) {
      $('a[rel*=facebox]').facebox({
        loading_image : 'http://ruseller.com/lessons/les262/floading.gif',
        close_image   : 'http://ruseller.com/lessons/les262/fcloselabel.gif'
      }) 
    })
    
    
    window.onload = function () {
        ym.ready(function() {
            var map = new ym.Map('map', {
                center: [57, 54.5],
                zoom: 0},
                    {
                        projection: ym.projection.sphericalMercator
                    });
            window.myMap = map;

            map.container.fitToViewport(true);

            var layout = ym.templateLayoutFactory.createClass('<img src="https://jira.yandex-team.ru/images/icons/bug.gif">ooops',
            {
              init: function () {}
            });

            var t = Math.round(new Date().getTime() / 1000);
            var tc = new ym.control.TrafficControl({}, {trafficControlServices: ['traffic#eventsLayout', layout]})
            //tc.getData().set('trafficArchiveTimeStamp', t);
            //tc.getData().set('trafficArchiveTimeStamp', t + 3600);

            map.controls.add(new ym.control.ToolBar([new ym.control.MapTools(),
                 tc]), {left: '5px', top: '5px'});

            map.controls.add(new ym.control.TypeSelector());
            map.controls.add(new ym.control.MiniMap());
            map.controls.add(new ym.control.ScaleLine());
            map.controls.add(new ym.control.ZoomControl());
            map.controls.add(new ym.control.SmallZoomControl(), { left: '5px', bottom: '155px' });

            //map.events.add('mapchange', function(){alert('map change')});
            //window.setInterval(getCursor, 200);
        })
    }

    function getCursor(){
        var cursor = myMap.cursors;
        // document.getElementById("log").innerHTML = cursor.getCurrent();
    }
  </script>
	</head>
	<body>
		<a href="stairs.jpg" rel="facebox">Появление изображения в facebox</a>
        
        <br/>
                <br/>
                        <br/>
        
       <a href="#info" rel="facebox">Появление произвольного блока в facebox</a> 
          <div id="info" style="display:none;">!!</div><br><br><br>
          
        
      <a href="../../src/traffic/traffic.case.html" rel="facebox">Загрузка внешнего файла в facebox</a>
	</body>
</html>
