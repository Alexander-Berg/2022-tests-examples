import numpy as np

from scipy.spatial import distance

from maps.geoq.hypotheses.lib.frechet_distance import (
    frechet_distance
)


def test_frechet_distance():
    test_data = [{'a': [[-1.518973798891584, -0.4070536282465467],
                        [-1.6607044943549603, -1.0665511373370404]],
                  'b': [[-1.518973798891584, -0.4070536282465467],
                        [-1.6607044943549603, -1.0665511373370404]],
                  'ans': 0.0},
                 {'a': [[-0.44872705628065324, -0.3201461887282317],
                        [-0.3372863082278442, -0.22360330587268404],
                        [0.16453682154549132, -2.1431331454010696],
                        [2.060680324946492, 0.22043297814742]],
                  'b': [[-0.48543177192124876, -0.627849897768485],
                        [0.5905508183131963, -1.7253182681788357],
                        [1.5377022029874976, 0.5074613761214994],
                        [0.2213954347649672, 0.19416149432655078]],
                  'ans': 1.8394725053971897},
                 {'a': [[-0.34553061811235386, -0.9769426110381007],
                        [-0.5784378570437191, -1.1328441721804572],
                        [0.12137254466030006, 0.8199461764406345],
                        [0.7071915279481147, 0.2333526908259506],
                        [-1.2723851335278917, -1.5194466644283384],
                        [0.3202916162631848, -0.10422341886174723]],
                  'b': [[0.19131231801778775, -0.49998387183714904],
                        [0.7263832996736315, 0.4482584689234979],
                        [-0.3063508031704182, 1.2795899162889854],
                        [-0.44712204873758826, -0.5713419312578829],
                        [-1.1476222682005424, -0.898903799996466],
                        [-0.3767731633873388, -2.6987645305995667]],
                  'ans': 2.6865485083145164}]

    for test in test_data:
        assert(
            np.allclose(
                test['ans'],
                frechet_distance(test['a'], test['b'], distance.euclidean)
            )
        )
