<!DOCTYPE html>
<!--
Title:
Кластер: пользовательские иконки кластеров

Description:
Проверка пользовательских иконок кластеров.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
smoke, regress

Estimated time:
120000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась корректно, на спане три ряда кластерных меток.
  В верхнем ряду метка в виде круговой диаграммы и иконка силуэта кота со значением кластеризации "102".
  В среднем ряду кластер со значением "4" и значением "11", с иконками в виде силуэта кота разных размеров.
  В нижнем ряду 5 кластеров со значениями от 5 до 30, с иконками в виде силуэта кота, иконка увеличивается в зависимости от значения кластеризации.
-->
<html>
<head>
    <title>API 2.0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="../../helper.js"></script>
    <script type="text/javascript">
        Api('init');
        function init(ymaps) {
            var myMap = new ymaps.Map('map', {
                center: [33.7610, -37.2654],
                zoom: 7
            });
            
            var x = myMap.getCenter()[0], y = myMap.getCenter()[1], i = 0;
            // одна иконка и не указываем массив
            var cluster = new ymaps.Clusterer();
            cluster.options.set({
                clusterIcons: [
                    {
                        href: 'http://chart.googleapis.com/chart?cht=pc&chs=65x65&chd=t:1|1,2&chco=FFFFFF,0A6CC8|E666DD&chf=a,s,000000b2|bg,s,00000000',
                        size: [65, 65],
                        offset: [-20, -20]
                    }
                ]
            });
            for (i = 0; i < 102; i++) {
                cluster.add(new ymaps.Placemark([x + 1, y - 2]));
            }
            myMap.geoObjects.add(cluster);
            // одна иконка и пустой массив
            cluster = new ymaps.Clusterer();
            cluster.options.set({
                clusterIcons: [
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [50, 40],
                        offset: [-20, -20]
                    }
                ],
                clusterNumbers: []
            });
            for (i = 0; i < 102; i++) {
                cluster.add(new ymaps.Placemark([x + 1, y - 1]));
            }
            myMap.geoObjects.add(cluster);
            // две иконки и одна граница
            cluster = new ymaps.Clusterer();
            cluster.options.set({
                clusterIcons: [
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [40, 30],
                        offset: [-20, -20]
                    },
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [50, 40],
                        offset: [-20, -20]
                    }
                ],
                clusterNumbers: [5]
            });
            for (i = 0; i < 4; i++) {
                cluster.add(new ymaps.Placemark([x, y - 2]));
            }
            for (i = 0; i < 11; i++) {
                cluster.add(new ymaps.Placemark([x, y - 1]));
            }
            myMap.geoObjects.add(cluster);
            // 5 иконок и 4 границы
            cluster = new ymaps.Clusterer();
            cluster.options.set({
                clusterIcons: [
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [30, 20],
                        offset: [-20, -20]
                    },
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [40, 30],
                        offset: [-20, -20]
                    },
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [50, 40],
                        offset: [-20, -20]
                    },
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [60, 50],
                        offset: [-20, -20]
                    },
                    {
                        href: 'http://img-fotki.yandex.ru/get/4137/120160451.0/0_98fc8_da9343ed_orig',
                        size: [70, 60],
                        offset: [-20, -20]
                    }
                ],
                clusterNumbers: [5, 10, 15, 20]
            });
            for (i = 0; i < 5; i++) {
                cluster.add(new ymaps.Placemark([x - 1, y - 2]));
            }
            for (i = 0; i < 10; i++) {
                cluster.add(new ymaps.Placemark([x - 1, y - 1]));
            }
            for (i = 0; i < 15; i++) {
                cluster.add(new ymaps.Placemark([x - 1, y]));
            }
            for (i = 0; i < 20; i++) {
                cluster.add(new ymaps.Placemark([x - 1, y + 1]));
            }
            for (i = 0; i < 30; i++) {
                cluster.add(new ymaps.Placemark([x - 1, y + 2]));
            }
            myMap.geoObjects.add(cluster);
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;">
</div>
<p><a href="https://tech.yandex.ru/maps/archive/doc/jsapi/2.0/ref/reference/Clusterer-docpage/" target="_blank">Docs</a></p>
</body>
</html>
