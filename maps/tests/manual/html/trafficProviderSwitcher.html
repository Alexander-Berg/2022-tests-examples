<!DOCTYPE html>
<!--
Title:
Пробки: показ исторических пробок

Description:
Проверка опции показа исторических пробок.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components:
regress_v1.1

Estimated time:
240000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть страницу и элементы на ней.

  Expectation:
  Карта отобразилась корректно со спаном Санкт-Петербурга.
  На карте пробочные разноцветные линии, а также иконки дорожных событий(ДТП, Перекрытия, Ремонт, Развод моста).
  Контрол пробок развернут, в контроле: иконка светофора, пробочный бал, текущее время, чек-бокс "Дорожные события" включен.
  Сверху имеются радиобаттон "Сейчас"(включен), "Обычно".
  Балл пробок должен соотвествовать цвету иконки светофора.

Step:
  Action:
  Поводить курсором по иконкам дорожных событий, затем выполнить клик во все виды иконок ДС.

  Expectation:
  При наведении курсор - перекрестье, появляется хинт с обозначением ДС(ДТП, Перекрытие движения и т.д.).
  По клику открывается балун с соотвествующей ДС информацией.
  В балуне заголовок, сроки, описание, ссылка на источник.

Step:
  Action:
  Выполнить клик в радиобаттон "Обычно".

  Expectation:
  Иконки ДС пропадают, происходит смена пробочных линий, на линии прогноза пробок.
  В контроле появляется выпадающий список дней недели, время, балл пробок, временная шкала с ползунком, текст "На основе статистики Яндекс.Пробок". 

Step:
  Action:
  Выполнить клик в выпадающий список дней недели, выбрать "Пятница", поставить ползунок на примерно 18:30.

  Expectation:
  Слой пробок корректно обновляется, может изменится значение пробочного балла, цвет иконки светофора.

Step:
  Action:
  Выполнить клик в выпадающий список дней недели, выбрать "Воскресенье", поставить ползунок на примерно 00:00.

  Expectation:
  Слой пробок обновляется, может изменится значение пробочного балла, цвет иконки светофора.

Step:
  Action:
  Выполнить клик в радиобаттон "Сейчас".

  Expectation:
  В контроле: иконка светофора, пробочный бал, текущее время, чек-бокс "Дорожные события" включен.
  Сверху имеются радиобаттон "Сейчас"(включен), "Обычно".
  Балл пробок должен соотвествовать цвету иконки светофора.

Step:
  Action:
  Выполнить клик в радиобаттон "Обычно".

  Expectation:
  Иконки ДС пропадают, происходит смена пробочных линий, на линии прогноза пробок.
  В контроле появляется выпадающий список дней недели, время, балл пробок, временная шкала с ползунком, текст "На основе статистики Яндекс.Пробок". 

Step:
  Action:
  Выполнить клик в контрол пробок.

  Expectation:
  Контрол пробок сворачивается до кнопки с серой иконкой светофора, и надписью "Пробки".
  Со спана карты пропадают пробочные линии.

Step:
  Action:
  Выполнить клик в контрол пробок.

  Expectation:
  На карте появляются пробочные разноцветные линии.
  Контрол пробок разворачивается, в контроле появляется выпадающий список дней недели, время, балл пробок, временная шкала с ползунком, текст "На основе статистики Яндекс.Пробок". 
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Примеры. Простой вызов карты.</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="/1.1/index.xml?counters=all&modules=traffic" type="text/javascript"></script>
    <script type="text/javascript">
    
        YMaps.jQuery(function () {
                // Создание экземпляра карты и его привязка к созданному контейнеру
            var map = new YMaps.Map(YMaps.jQuery("#YMapsID")[0]),
                traffic = new YMaps.Traffic.Control({           // Настройки элемента управления
                    showInfoSwitcher: true,                     // Показать в кнопке переключатель "Дорожные события"
                    showProviderSwitcher: true,                 // Показать в пробках "Исторические пробки"
                    infoLayerOptions: {                         // Опции слоя дорожных событий
                        cursor: YMaps.Cursor.CROSSHAIR        
                    }
                }, {                                            // Начальное состояние элемента управления
                    shown: true,                                // Немедленно включить показ пробок
                    infoLayerShown: true                        // Показывать слой дорожных событий
                });
        
            // Выставляет центр карты в центр Санкт-Петербурга
            map.setCenter(new YMaps.GeoPoint(30.313,59.939), 9);
        
            // добавление элемента управления "Пробки" на карту
            map.addControl(traffic);
        })
    
    
    </script>
</head>

<body>
    <div id="YMapsID" style="width:600px;height:400px"></div>
</body>

</html>

