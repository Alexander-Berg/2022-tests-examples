<!DOCTYPE html>
<!--
Title:
Пробки: задаем параметры слоя

Description:
Проверка задания параметров слоя.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components:
regress_v1.1

Estimated time:
240000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть страницу и элементы на ней.

  Expectation:
  Карта отобразилась корректно со спаном Санкт-Петербурга.
  На карте пробочные разноцветные линии, а также иконки дорожных событий(ДТП, Перекрытия, Ремонт, Развод моста).
  Контрол пробок развернут, в контроле: иконка светофора, пробочный бал, текущее время, чек-бокс "Дорожные события" включен.
  Балл пробок должен соотвествовать цвету иконки светофора.

Step:
  Action:
  Поводить курсором по иконкам дорожных событий, затем выполнить клик во все виды иконок ДС.

  Expectation:
  При наведении курсор - стрелка со знаком вопроса, появляется хинт с обозначением ДС(ДТП, Перекрытие движения и т.д.).
  По клику открывается балун с соотвествующей ДС информацией.
  В балуне заголовок, сроки, описание, ссылка на источник.

Step:
  Action:
  Выполнить клик в чек-бокс "Дорожные события".

  Expectation:
  Иконки ДС пропадают с карты, пробочные линии без изменений.
  Бал пробок соответствует иконке светофора.

Step:
  Action:
  Выполнить клик в контрол пробок.

  Expectation:
  Контрол пробок сворачивается до кнопки с серой иконкой светофора, и надписью "Пробки".
  Со спана карты пропадают пробочные линии.

Step:
  Action:
  Выполнить клик в контрол пробок.

  Expectation:
  На карте появляются пробочные разноцветные линии, иконки ДС отсутсвуют.
  Контрол пробок разворачивается, в контроле: иконка светофора, пробочный бал, текущее время, чек-бокс "Дорожные события" выключен.
  Балл пробок должен соответствовать цвету иконки светофора.

Step:
  Action:
  Выполнить клик в чек-бокс "Дорожные события".

  Expectation:
  На карте появляются иконки ДС, пробочные линии без изменений.
  Бал пробок соответствует иконке светофора.

Step:
  Action:
  Поводить курсором по иконкам дорожных событий, затем выполнить клик во все виды иконок ДС.

  Expectation:
  При наведении курсор рука с пальцем, появляется хинт с обозначением ДС(ДТП, Перекрытие движения и т.д.).
  По клику открывается балун с соотвествующей ДС информацией.
  В балуне заголовок, сроки, описание, ссылка на источник.

Step:
  Action:
  Выполнить клик в контрол пробок.

  Expectation:
  Контрол пробок сворачивается до кнопки с серой иконкой светофора, и надписью "Пробки".
  Со спана карты пропадают пробочные линии, иконки ДС.

Step:
  Action:
  Выполнить клик в контрол пробок.

  Expectation:
  На карте появляются пробочные разноцветные линии, а также иконки дорожных событий(ДТП, Перекрытия, Ремонт, Развод моста).
  Контрол пробок разворачивается, в контроле: иконка светофора, пробочный бал, текущее время, чек-бокс "Дорожные события" включен.
  Балл пробок должен соотвествовать цвету иконки светофора.

Step:
  Action:
  Поводить курсором по иконкам дорожных событий, затем выполнить клик во все виды иконок ДС.

  Expectation:
  При наведении курсор рука с пальцем, появляется хинт с обозначением ДС(ДТП, Перекрытие движения и т.д.).
  По клику открывается балун с соотвествующей ДС информацией.
  В балуне заголовок, сроки, описание, ссылка на источник.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Подключение слоя пробок</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="/1.1/index.xml?counters=all&modules=traffic" type="text/javascript"></script>
    <script type="text/javascript">
        // Создание обработчика для события window.onLoad
        YMaps.jQuery(function () {
                // Создание экземпляра карты и его привязка к созданному контейнеру
            var map = new YMaps.Map(YMaps.jQuery("#YMapsID")[0]),

                traffic = new YMaps.Traffic.Control({           // Настройки элемента управления
                    showInfoSwitcher: true,                     // Показать в кнопке переключатель "Дорожные события"
                    infoLayerOptions: {                         // Опции слоя дорожных событий
                        cursor: YMaps.Cursor.HELP        
                    }
                }, {                                            // Начальное состояние элемента управления
                    shown: true,                                // Немедленно включить показ пробок
                    infoLayerShown: true                        // Показывать слой дорожных событий
                });
        
            // Выставляет центр карты в центр Санкт-Петербурга
            map.setCenter(new YMaps.GeoPoint(30.313,59.939), 9);
        
            // добавление элемента управления "Пробки" на карту
            map.addControl(traffic);
        })
    </script>
</head>

<body>
    <div id="YMapsID" style="width:600px;height:400px"></div>
</body>

</html>
