<!DOCTYPE html>
<!--
Title:
Базовые работа с картой: пользовательские координаты(Черное море)

Description:
Проверка задания пользовательских координат.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components:
regress_v1.1

Estimated time:
180000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней. 

  Expectation:
  На странице контейнер с изображением географической карты Черного моря.
  В контейнере контрол зума "+/-", контрол драга(активен), контрол магнифайера(лупа), контрол линейки, миникарта слева внизу.

Step:
  Action:
  Выполнить два клика в контрол призума "+".

  Expectation:
  Происходит корректный призум карты, контрол "+" становится неактивным.

Step:
  Action:
  Выполнить клик в контрол призума магнифайером(лупа), затем выделить ЛКМ область на карте.

  Expectation:
  После клика в контрол курсор в контейнере - лупа с "+", контрол становится активным.
  При выделении области она выделяется красной рамкой, после отпускания ЛКМ происходит призум области карты.

Step:
  Action:
  Выполнить клик в контрол драга(руку).
  Зажав на спане карты ЛКМ выполнить статичный драг карты в разные стороны с различным усилием.

  Expectation:
  Драг карты корректный, карта после остановки драга отображается корректно, не мигает цветами не пропадает.
  Драг также отображается на миникарте.
  (При драге по краям карты могут мелькать серые тайлы). 

Step:
  Action:
  Выполнить клик в контрол линейки.
  Выполнить два клика в карту на расстоянии друг от друга.

  Expectation:
  По клику в контрол курсор на карте - стрелка, контрол становится активным. 
  При первом клике на карте появляется красная метка измерителя с треугольником, после второго клика появляется красная метка с квадратом, между меток появляется красная линия измерителя.
  На второй метке появляется балун с номером метки "2)", расстоянием между точками, кнопкой закрытия.

Step:
  Action:
  Выполнить три клика в контрол отзума "-".

  Expectation:
  Происходит корректный отзум карты, контрол "-" становится неактивным.
  Метки, линия и балун измерителя не пропадают.

Step:
  Action:
  Зажав на спане карты ЛКМ выполнить статичный драг карты в разные стороны с различным усилием.

  Expectation:
  Драг карты корректный, карта после остановки драга отображается корректно, не мигает цветами не пропадает.
  Элементы на карте не пропадают.
  (При драге по краям карты могут мелькать серые тайлы). 

Step:
  Action:
  Навести курсор а затем выполнить клик в кнопку закрытия балуна измерителя.

  Expectation:
  При наведении курсора крестик выделяется красным, появляется хинт "Удалить путь".
  По клику метки, линия, балун измерителя пропадают с карты.

Step:
  Action:
  Зажав на миникарте ЛКМ выполнить статичный драг карты в разные стороны с различным усилием.

  Expectation:
  Драг карты корректный, карта в миникарте и в контейнере драгается, карта не мигает цветами не пропадает.
  (При драге по краям карты могут мелькать серые тайлы).

Step:
  Action:
  Навести курсор и выполнить клик в кнопку сворачивания миникарты.

  Expectation:
  При наведении курсор становится рукой с пальцем, появляется хинт "Скрыть обзорную карту".
  По клику миникарта сворачивается в квадратную кнопку слева снизу.
  
Step:
  Action:
  Навести курсор и выполнить клик в кнопку разворачивания миникарты.

  Expectation:
  При наведении курсор становится рукой с пальцем, появляется хинт "Показать обзорную карту".
  По клику миникарта разворачивается в прежний вид миникарты.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Примеры. Пользовательские координатные системы. Карта дна Черного моря.</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="/1.1/index.xml?counters=all" type="text/javascript"></script>
    <script type="text/javascript">
        YMaps.jQuery(function () {
                // Создаем декартову систему координат:
            var myCoordSystem = new YMaps.CartesianCoordSystem(
                    new YMaps.Point(26.94, 38.39),  // координаты левого нижнего угла
                    new YMaps.Point(43.25, 50.36),  // координаты правого верхнего угла
                    new YMaps.Point(77180, 111100), // масштаб
                    4                               // максимальный уровень масштаба, считая с 0
                ),

                // Создаем карту
                map = new YMaps.Map(YMaps.jQuery("#YMapsID")[0], {
                    coordSystem: myCoordSystem // передаем нашу систему координат
                }),

                // Создаем собственный источник тайлов
                myData = new YMaps.TileDataSource("../images/tiles/black_sea/", false, true),

                // Создаем собственный тип карты
                myType = new YMaps.MapType(["blacksea"], "Рельеф", {textColor: "#706f60", minZoom:0, maxZoom: 3}),

                // Создаем миникарту
                miniMap = new YMaps.MiniMap();

            // Указываем правило получения URL картинки по тайловым координатом и уровню масштаба
            myData.getTileUrl = function (tile, zoom) {
                return this.getTileUrlTemplate() + "tile-" + zoom + "-" + tile.x + "-" + tile.y + ".png";
            }

            // Добавим в список слоев новый слой, использующий наш источник данных
            YMaps.Layers.add("blacksea", function () { return new YMaps.Layer(myData) });

            // Выставим карте и миникарте наш тип
            map.setType(myType);
            miniMap.setType(myType);

            // Добавим миникарту
            map.addControl(miniMap);

            // Добавим панель инструментов и ползунок масштаба
            map.addControl(new YMaps.ToolBar());
            map.addControl(new YMaps.Zoom({ noTips: true }));

            // Выставим центр карты и масштаб
            map.setCenter(new YMaps.Point(33.6,44.6), 1);

            // Включим масштабирование колесом мыши
            map.enableScrollZoom();
        });
    </script>
</head>

<body>
    <div id="YMapsID" style="height: 600px; width: 900px;"></div> 
</body>

</html>
