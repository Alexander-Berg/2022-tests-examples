<!DOCTYPE HTML>
<!--
Title:
Опции драга карты

Description:
Проверяем опции, применяемые к событию драга карты.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components:
behavior

Estimated time:
300000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась, со спаном Москвы.
  Сверху имеются кнопки "inertAuto", "duration", "inertia", "action", "cursor", "tremor". 
  Курсор на карте в виде руки.
  
Step:
  Action:
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.
 
  Expectation:
  Захват и перемещение спана карты корректное: карта не мигает, не пропадает.

Step:
  Action:
  Выполнить клик в кнопку "tremor".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится активной - окрашена в желтый.
  Драг карты происходит при значительном смещение курсора после нажатия кнопки мыши.

Step:
  Action:
  Выполнить клик в кнопку "tremor".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится неактивной - окрашена в белый.
  Захват и перемещение спана карты корректное: карта не мигает, не пропадает.
  Драг карты происходит даже при минимальном смещении курсора после нажатия кнопки мыши(аналогично шагу 2).

Step:
  Action:
  Выполнить клик в кнопку "cursor".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится активной - окрашена в желтый.
  Курсор на спане карты - рука с пальцем.
  Захват и перемещение спана карты корректное: карта не мигает, не пропадает.
  После нажатии ЛКМ и драге курсор меняется на кулак, по окончании драга - рука с пальцем.

Step:
  Action:
  Выполнить клик в кнопку "cursor".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится неактивной - окрашена в белый.
  Курсор на спане карты - перекрестье стрелок.
  Захват и перемещение спана карты корректное: карта не мигает, не пропадает.
  После нажатии ЛКМ и драге курсор меняется на кулак, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "action".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится активной - окрашена в желтый.
  Курсор на спане карты - перекрестье стрелок.
  Захват и перемещение спана карты корректное: карта не мигает, не пропадает.
  После нажатии ЛКМ и драге курсор меняется на перекрестье, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "action".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится неактивной - окрашена в белый.
  Курсор на спане карты - перекрестье стрелок.
  Захват и перемещение спана карты корректное: карта не мигает, не пропадает.
  После нажатии ЛКМ и драге курсор меняется на стрелку со знаком вопроса, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "inertia".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится активной - окрашена в желтый.
  Курсор на спане карты - перекрестье стрелок.
  Работает только статичный драг карты. Инертный драг не происходит.
  После нажатии ЛКМ и драге курсор меняется на стрелку со знаком вопроса, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "inertia".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится неактивной - окрашена в белый.
  Курсор на спане карты - перекрестье стрелок.
  Захват и перемещение спана карты корректное: карта не мигает, не пропадает(работает и статичный и инертный драг карты).
  После нажатии ЛКМ и драге курсор меняется на стрелку со знаком вопроса, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "duration".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится активной - окрашена в желтый.
  Курсор на спане карты - перекрестье стрелок.
  Cтатичный драг работает корректно, инертный драг затормаживается после отжатия клавиши, анимация отсуствует.
  После нажатии ЛКМ и драге курсор меняется на стрелку со знаком вопроса, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "duration".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится неактивной - окрашена в белый.
  Курсор на спане карты - перекрестье стрелок.
  Cтатичный драг работает корректно, инерция для инертного драга автоматическая (в зависимости от силы драга).
  После нажатии ЛКМ и драге курсор меняется на стрелку со знаком вопроса, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "inertAuto".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится активной - окрашена в желтый.
  Курсор на спане карты - перекрестье стрелок.
  Cтатичный и инертный драг работают корректно, при инертном драге карта продолжает немного смещаться в направлении драга.
  После нажатии ЛКМ и драге курсор меняется на стрелку со знаком вопроса, по окончании драга - перекрестье стрелок.

Step:
  Action:
  Выполнить клик в кнопку "inertAuto".
  Зажав на спане карты ЛКМ выполнить статичный и инертный драг карты.

  Expectation:
  Кнопка становится активной - окрашена в желтый.
  Курсор на спане карты - перекрестье стрелок.
  Cтатичный и инертный драг работают корректно, при инертном драге карта смещаться меньше чем на предыдущем шаге, смещение установлено по дефолту.
  После нажатии ЛКМ и драге курсор меняется на стрелку со знаком вопроса, по окончании драга - перекрестье стрелок.
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            ymaps = ym;

            var map = myMap = new ym.Map('map', {
                center: [55.72725771214265, 37.640390506634006],
                zoom: 10,
                controls: ['fullscreenControl']
            });

            addGrid(myMap);
            var log = new Log();
            __log__("Проверяем опции драга");

            var tremorButton = new ymaps.control.Button('tremor');
            tremorButton.events
                    .add('select', function () {
                        map.behaviors.get('drag').options.set('tremor', 100);
                    })
                    .add('deselect', function () {
                        map.behaviors.get('drag').options.set('tremor', 20);
                    });

            var cursorButton = new ymaps.control.Button('cursor');
            cursorButton.events
                    .add('select', function () {
                        map.behaviors.get('drag').options.set('cursor', 'pointer');
                    })
                    .add('deselect', function () {
                        map.behaviors.get('drag').options.set('cursor', 'move');
                    });

            var actionCursorButton = new ymaps.control.Button('action');
            actionCursorButton.events
                    .add('select', function () {
                        map.behaviors.get('drag').options.set('actionCursor', 'crosshair');
                    })
                    .add('deselect', function () {
                        map.behaviors.get('drag').options.set('actionCursor', 'help');
                    });

            var inertiaButton = new ymaps.control.Button('inertia');
            inertiaButton.events
                    .add('select', function () {
                        map.behaviors.get('drag').options.set('inertia', false);
                    })
                    .add('deselect', function () {
                        map.behaviors.get('drag').options.set('inertia', true);
                    });

            var inertiaDurationButton = new ymaps.control.Button('duration');
            inertiaDurationButton.events
                    .add('select', function () {
                        map.behaviors.get('drag').options.set('inertiaDuration', 100);
                    })
                    .add('deselect', function () {
                        map.behaviors.get('drag').options.set('inertiaDuration', 10000);
                    });

            var inertiaDurationAutoButton = new ymaps.control.Button('inertAuto');
            inertiaDurationAutoButton.events
                    .add('select', function () {
                        map.behaviors.get('drag').options.set('inertiaDuration', "auto");
                    })
                    .add('deselect', function () {
                        map.behaviors.get('drag').options.unset('inertiaDuration');
                    });


            map.controls
                    .add(tremorButton)
                    .add(cursorButton)
                    .add(actionCursorButton)
                    .add(inertiaButton)
                    .add(inertiaDurationButton)
                    .add(inertiaDurationAutoButton)

        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>