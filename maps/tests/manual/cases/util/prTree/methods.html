<!DOCTYPE HTML>
<!--(skip)(description)

-->
<!--(version)

-->
<!--(commands)

-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script type=text/javascript>

    Api("init", "util.PrTree");

        if (!Array.prototype.indexOf) {
            Array.prototype.indexOf = function (elt /*, from*/) {
                var len = this.length >>> 0;

                var from = Number(arguments[1]) || 0;
                from = (from < 0)
                        ? Math.ceil(from)
                        : Math.floor(from);
                if (from < 0)
                    from += len;

                for (; from < len; from++) {
                    if (from in this &&
                            this[from] === elt)
                        return from;
                }
                return -1;
            };
        }

        function init(ymaps) {
            var data = [
                {bbox: [
                    [0, 0],
                    [0, 0]
                ], id: 1},
                {bbox: [
                    [10, 10],
                    [10, 10]
                ], id: 2},
                {bbox: [
                    [20, 20],
                    [20, 20]
                ], id: 3},
                {bbox: [
                    [25, 0],
                    [25, 0]
                ], id: 4},
                {bbox: [
                    [35, 10],
                    [35, 10]
                ], id: 5},
                {bbox: [
                    [45, 20],
                    [45, 20]
                ], id: 6},
                {bbox: [
                    [0, 25],
                    [0, 25]
                ], id: 7},
                {bbox: [
                    [10, 35],
                    [10, 35]
                ], id: 8},
                {bbox: [
                    [20, 45],
                    [20, 45]
                ], id: 9},
                {bbox: [
                    [25, 25],
                    [25, 25]
                ], id: 10},
                {bbox: [
                    [35, 35],
                    [35, 35]
                ], id: 11},
                {bbox: [
                    [45, 45],
                    [45, 45]
                ], id: 12},
                {bbox: [
                    [50, 0],
                    [50, 0]
                ], id: 13},
                {bbox: [
                    [60, 10],
                    [60, 10]
                ], id: 14},
                {bbox: [
                    [70, 20],
                    [70, 20]
                ], id: 15},
                {bbox: [
                    [75, 0],
                    [75, 0]
                ], id: 16},
                {bbox: [
                    [85, 10],
                    [85, 10]
                ], id: 17},
                {bbox: [
                    [95, 20],
                    [95, 20]
                ], id: 18},
                {bbox: [
                    [50, 25],
                    [50, 25]
                ], id: 19},
                {bbox: [
                    [60, 35],
                    [60, 35]
                ], id: 20},
                {bbox: [
                    [70, 45],
                    [70, 45]
                ], id: 21},
                {bbox: [
                    [75, 25],
                    [75, 25]
                ], id: 22},
                {bbox: [
                    [85, 35],
                    [85, 35]
                ], id: 23},
                {bbox: [
                    [95, 45],
                    [95, 45]
                ], id: 24},
                {bbox: [
                    [0, 50],
                    [0, 50]
                ], id: 25},
                {bbox: [
                    [10, 60],
                    [10, 60]
                ], id: 26},
                {bbox: [
                    [20, 70],
                    [20, 70]
                ], id: 27},
                {bbox: [
                    [25, 50],
                    [25, 50]
                ], id: 28},
                {bbox: [
                    [35, 60],
                    [35, 60]
                ], id: 29},
                {bbox: [
                    [45, 70],
                    [45, 70]
                ], id: 30},
                {bbox: [
                    [0, 75],
                    [0, 75]
                ], id: 31},
                {bbox: [
                    [10, 85],
                    [10, 85]
                ], id: 32},
                {bbox: [
                    [20, 95],
                    [20, 95]
                ], id: 33},
                {bbox: [
                    [25, 75],
                    [25, 75]
                ], id: 34},
                {bbox: [
                    [35, 85],
                    [35, 85]
                ], id: 35},
                {bbox: [
                    [45, 95],
                    [45, 95]
                ], id: 36},
                {bbox: [
                    [50, 50],
                    [50, 50]
                ], id: 37},
                {bbox: [
                    [60, 60],
                    [60, 60]
                ], id: 38},
                {bbox: [
                    [70, 70],
                    [70, 70]
                ], id: 39},
                {bbox: [
                    [75, 50],
                    [75, 50]
                ], id: 40},
                {bbox: [
                    [85, 60],
                    [85, 60]
                ], id: 41},
                {bbox: [
                    [95, 70],
                    [95, 70]
                ], id: 42},
                {bbox: [
                    [50, 75],
                    [50, 75]
                ], id: 43},
                {bbox: [
                    [60, 85],
                    [60, 85]
                ], id: 44},
                {bbox: [
                    [70, 95],
                    [70, 95]
                ], id: 45},
                {bbox: [
                    [75, 75],
                    [75, 75]
                ], id: 46},
                {bbox: [
                    [85, 85],
                    [85, 85]
                ], id: 47},
                {bbox: [
                    [95, 95],
                    [95, 95]
                ], id: 48}
            ];

            var tree = new ymaps.util.PrTree();
            console.log(tree);
            validateClass(tree, ymaps.util.PrTree);
            for (var i = 0; i < data.length; i++) {
                tree.insert(data[i]);
            }

            var treeItems = tree.getAll();
            for (var j = 0; j < data.length; j++) {
                if (treeItems.indexOf(data[j]) == -1) {
                    throw new Error('Элемент не вставился в дерево.');
                }
            }

            var searchResult = tree.search([
                [0, 0],
                [25, 25]
            ]);
            __log__("search: " + searchResult);
            validateValue(searchResult.length, 6);


            __log__("getAll: " + tree.getAll());
            validateValue(tree.getAll().length, tree.getLength());

            __log__("getRoot: " + tree.getRoot());
            validateValue(tree.getRoot().bbox, [
                [0, 0],
                [95, 95]
            ]);
            __log__("getLength: " + tree.getLength());
            validateValue(tree.getLength(), 48);

            __log__("getBounds: " + tree.getBounds());
            validateValue(tree.getBounds(), tree.getRoot().bbox);

            for (var n = 0; n < data.length; n++) {
                if ((n % 2) == 0) {
                    tree.remove(data[n]);
                }
            }
            __log__("remove: " + tree.getAll().length);
            validateValue(tree.getAll().length, 24);

            __log__("removeAll: " + tree.removeAll());
            validateValue(tree.removeAll(), tree);

            __log__("getAll: " + tree.getAll());
            validateValue(tree.getAll(), []);

        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
</body>
</html>