<!DOCTYPE HTML>
<!--
Title:
Ссылка: появление геоссылки с задержкой

Description:
Проверка работы геоссылки после появления с задержкой.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
geolink

Estimated time:
180000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть открывшееся окно. 

  Expectation:
  В появившемся окне окне сверху справа черный прямоугольный блок, чуть ниже слева серый прямоугольный блок.
  При загрузке страницы в черном блоке появляется ссылка: ярлык с ПИНом(запятой) Яндекс.Карт текстовая ссылка "ул. Строительная"; в сером блоке появляется ссылка: ярлык с ПИНом(запятой) Яндекс.Карт текстовая ссылка "Москва".
  Через 5 секунд геоссылка "Москва" пропадает из серого блока и появляется в черном блоке ниже ссылки "ул. Строительная". 

Step:
  Action:
  Навести курсор и выполнить клик по ссылке "ул. Строительная".

  Expectation:
  При наведении на ссылку ховер - текст ссылки окрашивается красным, хинт "Показать на карте".
  Под ссылкой появляется окошко, со спиннером (дождитесь прогрузки).
  После прогрузки в окошке появляется блок с картой. Сверху имеется панель с надписью: "Вот это ирония", за ним кнопка закрытия блока - крестик.
  В центре окошка карта, в центре спана которой синяя метка(карта отображена корректно).
  Внизу блока кнопки "Подробнее о месте", "Как добраться".

Step:
  Action:
  Закрыть открытый блок с картой кликом в крестик.

  Expectation:
  Блок закрывается.
  Страница со ссылкой без изменений: ссылка, блоки с текстом не пропадают.

Step:
  Action:
  Навести курсор и выполнить клик по ссылке "Москва".

  Expectation:
  При наведении на ссылку ховер - текст ссылки окрашивается красным, хинт "Показать на карте".
  Под ссылкой появляется окошко, со спиннером (дождитесь прогрузки).
  После прогрузки в окошке появляется блок с картой. Сверху имеется панель с надписью: "Москва", за ним кнопка закрытия блока - крестик.
  В центре окошка карта со спаном Москвы, на спане имеется синяя метка(карта отображена корректно).
  Внизу блока кнопки "Подробнее о месте", "Как добраться".

Step:
  Action:
  Навести курсор на ссылку "Москва" и выполнить клик в ссылку.

  Expectation:
  При наведении на ссылку ховер - текст ссылки окрашивается красным
  Блок с картой закрывается, страница со ссылками без изменений: ссылка, блоки не пропадают.
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <!-- <script src="https://api-maps.tst.c.maps.yandex.ru/2.1-dev/?lang=ru-RU&mode=debug&load=Geolink" type="text/javascript"></script> -->
    <script src="../../helper.js"></script>

    <script type=text/javascript>
       Api('init', "Geolink");
        function init(ymaps) {
          setTimeout(function(){
              var first = document.getElementById('first');
              var second = document.getElementById('second');
              first.innerHTML += '<span class="ymaps-geolink" data-description="Москва">Москва</span>';
              second.innerHTML = '';
          },5000)
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<h3>Через 5 секунд одна геоссылка удаляется и одна добавляется, проверить, что ничего не ломается.</h3>
<div id="first" style="background-color: #000; width: 400px; height: 80px; margin-left: 200px; font-size: 15px;">
    <p>
        <span class="ymaps-geolink" data-description="Вот это ирония!" data-bounds="[[55.6673,37.0959],[55.8585,38.0847]]">ул. Строительная</span>
    </p>
</div>
<br>
<div id="second" style="background-color: #555; width: 200px; height: 20px;">
    <p>
        <span class="ymaps-geolink" data-description="Москва">Москва</span>
    </p>
</div>
</body>
</html>