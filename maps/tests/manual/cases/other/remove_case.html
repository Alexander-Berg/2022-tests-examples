<!DOCTYPE HTML>
<!--(skip)(screenshot)
geoobject
-->
<!--(description)

-->
<!--(version)

-->
<!--(commands)

-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <base href="https://jsapi.sergeiiak.alexa.maps.dev.yandex.ru/api/2.1/smoke/geoobject/">
    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            //ymaps = ym;
            var myMap = new ymaps.Map("map", {
                        center: [55.76, 37.64],
                        zoom: 10
                    }),

            // Создаем геообъект с типом геометрии "Точка".
                    myGeoObject = new ymaps.GeoObject({
                        // Описание геометрии.
                        geometry: {
                            type: "Point",
                            coordinates: [55.8, 37.8]
                        },
                        // Свойства.
                        properties: {
                            // Контент метки.
                            iconContent: 'Я тащусь',
                            hintContent: 'Ну давай уже тащи',
                            balloonContent: 'Ну давай уже тащи'
                        }
                    }, {
                        // Опции.
                        // Иконка метки будет растягиваться под размер ее содержимого.
                        preset: 'islands#blackStretchyIcon',
                        // Метку можно перемещать.
                        draggable: true
                    });

            myGeoObject.events.add('dragend', function (e) {
                log.info('[dragend event] new position is ' + myGeoObject.geometry.getCoordinates());

            });

            myMap.geoObjects
                    .add(myGeoObject)
                    .add(new ymaps.Placemark([55.684758, 37.738521], {
                        balloonContent: 'цвет <strong>воды пляжа бонди</strong>'
                    }, {
                        preset: 'islands#icon',
                        iconColor: '#0095b6',
                        cursor: 'help'
                    }))
                    .add(new ymaps.Placemark([55.833436, 37.715175], {
                        balloonContent: '<strong>серобуромалиновый</strong> цвет'
                    }, {
                        preset: 'islands#dotIcon',
                        iconColor: '#735184'
                    }))
                    .add(new ymaps.Placemark([55.687086, 37.529789], {
                        balloonContent: 'цвет <strong>влюбленной жабы</strong>'
                    }, {
                        preset: 'islands#circleIcon',
                        iconColor: '#3caa3c'
                    }))
                    .add(new ymaps.Placemark([55.782392, 37.614924], {
                        balloonContent: 'цвет <strong>детской неожиданности</strong>'
                    }, {
                        preset: 'islands#circleDotIcon',
                        iconColor: 'yellow'
                    }))
                    .add(new ymaps.Placemark([55.642063, 37.656123], {
                        balloonContent: 'своя картинка <strong>иконка-кнопка</strong>'
                    }, {
                        // Опции.
                        // Необходимо указать данный тип макета.
                        iconLayout: 'default#image',
                        // Своё изображение иконки метки.
                        iconImageHref: '../../../img/myIcon.gif',
                        // Размеры метки.
                        iconImageSize: [30, 42],
                        // Смещение левого верхнего угла иконки относительно
                        // её "ножки" (точки привязки).
                        iconImageOffset: [-3, -42]
                    }))
                    .add(new ymaps.Placemark([55.826479, 37.487208], {
                        balloonContent: 'цвет <strong>фэйсбука</strong>'
                    }, {
                        preset: 'islands#dotIcon',
                        iconColor: '#3b5998'
                    }))
                    .add(new ymaps.Placemark([55.694843, 37.435023], {
                        balloonContent: 'цвет <strong>вконтакте</strong>'
                    }, {
                        preset: 'islands#circleIcon',
                        iconColor: '#4d7198'
                    }))
                    .add(new ymaps.Placemark([55.790139, 37.814052], {
                        balloonContent: 'цвет <strong>твиттера</strong>'
                    }, {
                        preset: 'islands#circleDotIcon',
                        iconColor: '#1faee9'
                    }));
            addGrid(myMap);
            var log = new Log();
            log.info('Test script: метки имеют балуны с описанием');
            log.info('Stretch метка: нет балуна, есть хинт, есть iconContent, драгается');
            log.info('метка-кнопка на карте');
            log.info('курсор помощи над кнопкой цвета тиффани');
            log.info('При переходе на БЯК открывается только um');

            /*   setInterval(function () {
             __log__(window.devicePixelRatio);
             }, 1000) */
            myGeoObject.events
                    // Можно слушать сразу несколько событий, указывая их имена в массиве.
                    .add(['balloonopen'], function (e) {
                        __log__("fsdfsdf");
                        var target = e.get('target'),
                                type = e.get('type');
                        target.options.set('preset', 'islands#violetIcon');

                    });
            myMap.state.set('mapSid', "93jfWjoXws37exPmKH-OFIuj3IQduHal");
            myMap.state.set('mapSourceType', "mymaps");
        }
    </script>
</head>
<body>
<div id="map" style="height: 512px; width: 512px;"></div>
<script type="text/javascript" charset="utf-8" async src="https://api-maps.tst.c.maps.yandex.ru/services/constructor/1.0/js/?sid=MsGSLtdsdbOGNbYpb16EPuvpE_zaDgKf&width=500&height=400&lang=ru_RU&sourceType=constructor&scroll=true"></script>
</body>
</html>