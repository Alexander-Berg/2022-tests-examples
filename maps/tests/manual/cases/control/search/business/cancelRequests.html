<!DOCTYPE HTML>
<!--
Title:
Контрол: поиск со сменой центра спана

Description:
Проверка работы поиска со сменой спана карты.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
control

Estimated time:
240000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась корректно.
  На карте спан Новгородской области(Окуловка, Валдай, Бологое), на спане имеется кнопка "Найти", кнопки "1000", "10", контрол фулскрин. 

Step:
  Action:
  Выполнить клик в контрол фулскрин.

  Expectation:
  Контейнер с картой разворачивается на всю страницу, контрол фулскрин меняет вид, стрелки внутри контрола направлены внутрь.
  Вместо кнопки "Найти" - поисковый инпут с подсказкой "Адрес или объект", желтой кнопкой "Найти".

Step:
  Action:
  Навести курсор в область поискового инпута, выполнить клик.

  Expectation:
  При наведении в область инпута курсор - каретка.
  По клику в инпуте появляется каретка ввода, поле инпута обведено желтой рамкой.

Step:
  Action:
  Ввести в поле "кафе", выполнить клик в "Найти".

  Expectation:
  При вводе значений, или после ввода под инпутом выпадает саджест с поисковыми подсказками.
  После клика в "Найти" на карте появляются синие метки организаций, под инпутом появляется панель со сниппетами организаций по запросу.
  Справа в инпуте появляются кнопка в виде иконки из трех строк, кнопка стирания запроса - крестик.

Step:
  Action:
  Выполнить клик в кнопку "1000".

  Expectation:
  По клику происходит смена спана на спан Москвы, на карте появляются метки, в панели меняются сниппеты организаций, но сниппеты соотвествуют запросу "кафе".
  Через секунду спан вновь меняется на первоначальный, на карте метки, в панели меняются сниппеты организаций, но сниппеты соотвествуют запросу "кафе".

Step:
  Action:
  Выполнить клик в кнопку "1000".

  Expectation:
  По клику происходит смена спана на спан Санкт-Петербурга, на карте появляются метки, в панели меняются сниппеты организаций, но сниппеты соотвествуют запросу "кафе".
  Через секунду спан вновь меняется на первоначальный, на карте метки, в панели меняются сниппеты организаций, но сниппеты соотвествуют запросу "кафе".

Step:
  Action:
  Выполнить клик в кнопку "1000".

  Expectation:
  По клику происходит смена спана на спан Санкт-Петербурга, на карте появляются метки, в панели меняются сниппеты организаций, но сниппеты соотвествуют запросу "кафе".
  Через секунду спан вновь меняется на первоначальный, на карте метки, в панели меняются сниппеты организаций, но сниппеты соотвествуют запросу "кафе".

Step:
  Action:
  Ввести в поле "магазины", выполнить клик в "Найти".

  Expectation:
  При вводе значений, или после ввода под инпутом выпадает саджест с поисковыми подсказками.
  После клика в "Найти" на карте появляются синие метки организаций, под инпутом появляется панель со сниппетами организаций по запросу.
  Справа в инпуте появляются кнопка в виде иконки из трех строк, кнопка стирания запроса - крестик.

Step:
  Action:
  Зажав ЛКМ на спане карты переместить спан карты.

  Expectation:
  Захват карты корректный, перемещение и драг карты корректный: карта не мигает, не пропадает.
  Панель со сниппетами при начале драга пропадает.
  После остановки спана на нем появляются метки организаций по поисковому запросу.

Step:
  Action:
  Выполнить клик в кнопку "Найти".

  Expectation:
  Под поисковым инпутом появляется панель со сниппетами организаций по запросу. Спан карты без изменений(метки на месте).

Step:
  Action:
  Выполнить клик в кнопку "10".

  Expectation:
  По клику происходит проимигивание спана(спан меняется на пол секунды), потом возвращается на первоначальный(Новгородской области), на карте появляются метки, сниппеты в панели соотвествуют запросу "магазины".

Step:
  Action:
  Выполнить клик в кнопку "10".

  Expectation:
  По клику происходит проимигивание спана(спан меняется на пол секунды), потом возвращается на первоначальный(Новгородской области), на карте появляются метки, сниппеты в панели соотвествуют запросу "магазины".
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            ymaps = ym;

            var map = myMap = new ym.Map('map', {
                center: [58.21754045, 33.67603794],
                zoom: 8,
                behaviors: ['default', 'scrollZoom'],
                controls: ['fullscreenControl']
            });

            addGrid(myMap);
            var log = new Log();
            __log__('Test case: перейди в фулскрин, поищи ППО, кликни по кнопке, проверь что вернулись правильные результаты');

            var search = new ymaps.control.SearchControl();
            map.controls.add(search);
            search.options.set('provider', 'yandex#search');

            var setCenterButton = new ymaps.control.Button('10');
            setCenterButton.events
                    .add('select', function () {
                        map.setCenter([55.76173788, 37.60012034]);
                        setTimeout(function () {
                            map.setCenter([57.63304619, 33.85181919]);
                        }, 10);
                    })
                    .add('deselect', function () {

                        map.setCenter([59.91622596, 30.28322581]);
                        setTimeout(function () {
                            map.setCenter([57.63304619, 33.85181919]);
                        }, 10);
                    });
            map.controls.add(setCenterButton);

            var setCenterButton = new ymaps.control.Button('1000');
            setCenterButton.events
                    .add('select', function () {
                        map.setCenter([55.76173788, 37.60012034]);
                        setTimeout(function () {
                            map.setCenter([57.63304619, 33.85181919]);
                        }, 1000);
                    })
                    .add('deselect', function () {

                        map.setCenter([59.91622596, 30.28322581]);
                        setTimeout(function () {
                            map.setCenter([57.63304619, 33.85181919]);
                        }, 1000);
                    });
            map.controls.add(setCenterButton);
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>