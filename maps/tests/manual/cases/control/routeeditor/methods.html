<!DOCTYPE HTML>
<!--
Title:
Контрол: методы контрола маршрутов

Description:
Проверка работы методов контрола маршрутов.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
control

Estimated time:
180000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась корректно. 
  На карте спан Московской области, сверху слева имеются контрол маршрутов с иконкой в виде изогнутой стрелки.
  Сверху справа имеется кнопко "getRoute".

Step:
  Action:
  Скролом мыши выполнить призум карты на 4 значения к центру Москвы.

  Expectation:
  Призум карты корректный, карта не мигает, не пропадает. 
  На спане карты должны отображаться иконки метро с подписями.

Step:
  Action:
  Выполнить клик в контрол маршрутов.

  Expectation:
  Контрол становится активным, окрашен желтым.
  
Step:
  Action:
  Выполнить клик в спан карты в иконку метро "Маяковская"(ближе в левому углу спана).

  Expectation:
  На спане карты в месте клика появляется синяя метка коллекций с цифрой "1".

Step:
  Action:
  Выполнить клик в спан карты в иконку метро "Баррикадная"(ближе в левому углу спана).

  Expectation:
  На спане карты в месте клика появляется синяя метка коллекций с цифрой "2".
  Между метками "1" и "2" появляется фиолетовая маршрутная линия.
  Контрол маршрутов становится неактивным, фон окрашен в белый.
 
Step:
  Action:
  Выполнить клик в кнопку "getRoute".

  Expectation:
  Спан карты ез изменений, под контейнером с картой появляется блок информациио маршруте: human time(время пути): 6 мин, length: 2988.9429111480713(точное расстояние), humanlength: 3.0 км(приблизительное расстояние).
  Проверить соответствие данных маршрута на карте и в логах под контейнером, данные могут совпадать не точно, но должны примерно соответствовать указанным в шаге.

Step:
  Action:
  Выполнить клик в спан карты в иконку метро "Маяковская"(ближе к левому верхнему углу спана).

  Expectation:
  На спане карты в месте клика появляется синяя метка коллекций с цифрой "1".

Step:
  Action:
  Выполнить клик в спан карты в иконку метро "Баррикадная"(ближе к левому верхнему углу спана).

  Expectation:
  На спане карты в месте клика появляется синяя метка коллекций с цифрой "2".
  Между метками "1" и "2" появляется фиолетовая маршрутная линия.

Step:
  Action:
  Выполнить клик в контрол маршрутов.

  Expectation:
  Предыдущий маршрут и метки пропадают со спана карты.
  Контрол становится активным, окрашен желтым.
  
Step:
  Action:
  Выполнить клик в спан карты в иконку метро "Красные ворота"(ближе к правому верхнему углу спана).

  Expectation:
  На спане карты в месте клика появляется синяя метка коллекций с цифрой "1".

Step:
  Action:
  Выполнить клик в спан карты в иконку метро "Парк культуры"(ближе к левому нижнему углу спана).

  Expectation:
  На спане карты в месте клика появляется синяя метка коллекций с цифрой "2".
  Между метками "1" и "2" появляется фиолетовая маршрутная линия.
  Контрол маршрутов становится неактивным, фон окрашен в белый.
 
Step:
  Action:
  Выполнить клик в кнопку "getRoute".

  Expectation:
  Спан карты ез изменений, под контейнером с картой появляется блок информациио маршруте: human time(время пути): 11 мин, length: 6574.280973911285(точное расстояние), humanlength: 6.6 км(приблизительное расстояние).
  Проверить соответствие данных маршрута на карте и в логах под контейнером, данные могут совпадать не точно, но должны примерно соответствовать указанным в шаге.
-->
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            var myMap = new ym.Map('map', {
                        center: [55.73259667357658, 37.70153663432529],
                        zoom: 9,
                        behaviors: ['default', 'scrollZoom'],
                        controls: ['rulerControl']
                    }),
                    log = new Log();

            addGrid(myMap);

            log.info('Create a route, then click getRoute button. Check human time, length and human length');

            var route1 = new ymaps.control.RouteEditor({data: {title: 'route1'}});

            var getButton = new ymaps.control.Button('getRoute');
            getButton.events
                    .add('click', function () {
                        log.info('human time: ' + route1.getRoute().getHumanTime());
                        log.info('length: ' + route1.getRoute().getLength());
                        log.info('humanlength: ' + route1.getRoute().getHumanLength());
                    });

            myMap.controls
                    .add(route1)
                    .add(getButton, {float: 'right', selectOnClick: false});
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>