<!doctype html>
<!--
Title:
Контрол: выравнивание попапа выпадающего списка

Description:
Проверка выравнивания попапа выпадающего списка.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
control

Estimated time:
240000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась корректно. 
  На спане 5 контролов выпадающих списков: "bottom", "top", "left", "topright", "bottomright". 
  В верхнем левом углу кнопка "popupFloat".

Step:
  Action:
  Выполнить клик в кнопку "popupFloat".

  Expectation:
  Кнопка активна - фон кнопки окрашен желтым, спан карты и контролы без изменений.

Step:
  Action:
  Выполнить клик в контрол "top".

  Expectation:
  Под контролом открывается пустой выпадающий список, при этом список равняется по правому краю контрола списка. 

Step:
  Action:
  Навести курсор на пустое значение в списке, выполнить клик в него.

  Expectation:
  Значение в выпадающем списке при наведении курсора подсвечивается желтым фоном, по клику в нем появляется галка.

Step:
  Action:
  Выполнить клик в контрол "left".

  Expectation:
  Предыдущий список свернулся.
  Под контролом открывается пустой выпадающий список, при этом список равняется по правому краю контрола списка. 

Step:
  Action:
  Выполнить клик в контрол "topright".

  Expectation:
  Предыдущий список свернулся.
  Под контролом открывается выпадающий список со значениями вида "Пункт № (номер)", при этом список равняется по правому краю контрола списка. 

Step:
  Action:
  Выполнить клик в контрол "bottomright".

  Expectation:
  Предыдущий список свернулся.
  Под контролом открывается пустой выпадающий список, при этом список равняется по правому краю контрола списка.  
  
Step:
  Action:
  Выполнить клик в контрол "bottom".

  Expectation:
  Предыдущий список свернулся.
  Контрол кликабелен, стрелка внутри контрола меняет направление, открытый список не видно(контрол у нижней границы контейнера).   

Step:
  Action:
  Выполнить клик в кнопку "popupFl...".

  Expectation:
  Кнопка неактивна - фон кнопки окрашен белым, спан карты и контролы без изменений.

Step:
  Action:
  Выполнить клик в контрол "top".

  Expectation:
  Под контролом открывается выпадающий список с галкой, при этом список равняется по левому краю контрола списка.  
  
Step:
  Action:
  Навести курсор на значение с галкой в списке, выполнить клик в него.

  Expectation:
  Значение в выпадающем списке при наведении курсора подсвечивается желтым фоном, по клику галка пропадает.

Step:
  Action:
  Выполнить клик в контрол "left".

  Expectation:
  Предыдущий список свернулся.
  Под контролом открывается пустой выпадающий список, при этом список равняется по левому краю контрола списка. 

Step:
  Action:
  Выполнить клик в контрол "topright".

  Expectation:
  Предыдущий список свернулся.
  Под контролом открывается выпадающий список со значениями вида "Пункт № (номер)", при этом список равняется по левому краю контрола списка. 

Step:
  Action:
  Выполнить клик в контрол "bottomright".

  Expectation:
  Предыдущий список свернулся.
  Под контролом открывается пустой выпадающий список, при этом список равняется по левому краю контрола списка.  
  
Step:
  Action:
  Выполнить клик в контрол "bottom".

  Expectation:
  Предыдущий список свернулся.
  Контрол кликабелен, стрелка внутри контрола меняет направление, открытый список не видно(контрол у нижней границы контейнера).   
-->
<html>
<head>
    <title>API 2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script type="text/javascript">
        Api('init');
        function init(ym) {
            var map = myMap = new ym.Map('map', {
                        center: [34.8006, -37.5181],
                        zoom: 5,
                        controls: ["fullscreenControl"]
                    }),
                    log = new Log(),
                    listBoxItems1 = [
                        new ym.control.ListBoxItem({
                            data: {
                                content: ""
                            }
                        })
                    ],
                    listBoxItems2 = [
                        new ym.control.ListBoxItem({
                            data: {
                                content: ""
                            }
                        })
                    ],
                    listBoxItems3 = [
                        new ym.control.ListBoxItem({
                            data: {
                                content: ""
                            }
                        })
                    ],
                    listBoxItems4 = [
                        new ym.control.ListBoxItem({
                            data: {
                                content: ""
                            }
                        })
                    ],
                    listBoxItems5 = [
                        new ym.control.ListBoxItem({
                            data: {
                                content: ""
                            }
                        })
                    ], i = 0;

            addGrid(map);

            log.info('left - 250; top - 50; bottomright - 100, 100; topright - 192, 192; bottom - 0');

            var listBoxLeft = new ym.control.ListBox({
                data: {
                    content: 'left'
                },
                items: listBoxItems1,
                options: {
                    float: 'none',
                    popupFloat: 'right',
                    position: {
                        left: 250
                    }
                }
            });

            var listBoxTop = new ym.control.ListBox({
                data: {
                    content: 'top'
                },
                items: listBoxItems2,
                options: {
                    float: 'none',
                    popupFloat: 'right',
                    position: {
                        top: 50
                    }
                }
            });

            var listBox = new ym.control.ListBox({
                data: {
                    content: 'bottomright'
                },
                items: listBoxItems3,
                options: {
                    float: 'none',
                    popupFloat: 'left',
                    position: {
                        bottom: 100,
                        right: 100
                    }
                }
            });

            var items = [new ym.control.ListBoxItem({
                data: {
                    content: "Пункт №1000"
                }
            })];
            for (i = 0; i < 101; i++) {
                items.push(new ym.control.ListBoxItem({
                    data: {
                        content: "Пункт №" + i
                    }
                }))
            }

            var listBoxCenter = new ym.control.ListBox({
                data: {
                    content: 'topright'
                },
                items: items,
                options: {
                    float: 'none',
                    popupFloat: 'right',
                    position: {
                        top: 192,
                        right: 192
                    }
                }
            });

            var listBoxBottom = new ym.control.ListBox({
                data: {
                    content: 'bottom'
                },
                items: listBoxItems4,
                options: {
                    float: 'none',
                    popupFloat: 'right',
                    position: {
                        bottom: 0
                    }
                }
            });


            map.controls.add(listBox).add(listBoxLeft).add(listBoxTop).add(listBoxCenter).add(listBoxBottom);
            var popupButton = new ym.control.Button({data: {content: 'popupFloat'}, options: {selectOnClick: true}});

            popupButton.events
                    .add('select', function () {
                        listBox.options.set('popupFloat', 'right');
                        listBoxLeft.options.set('popupFloat', 'right');
                        listBoxTop.options.set('popupFloat', 'right');
                        listBoxCenter.options.set('popupFloat', 'right');
                        listBoxBottom.options.set('popupFloat', 'right');
                    })
                    .add('deselect', function () {
                        listBox.options.set('popupFloat', 'left');
                        listBoxLeft.options.set('popupFloat', 'left');
                        listBoxTop.options.set('popupFloat', 'left');
                        listBoxCenter.options.set('popupFloat', 'left');
                        listBoxBottom.options.set('popupFloat', 'left');
                    });

            map.controls
                    .add(popupButton);
        }

    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;">
</div>
</body>
</html>
