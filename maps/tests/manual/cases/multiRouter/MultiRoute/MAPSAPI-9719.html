<!DOCTYPE HTML>
<!--(skip)(description)

-->
<!--(version)

-->
<!--(commands)

-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api("", "package.full,multiRouter.MultiRouteJsonView,multiRouter.MultiRouteJsonModel,multiRouter.service.yMapsJsonToGeoJson");

        function init(ymaps) {

            var map = myMap = new ymaps.Map('map', {
                center: [55.72725771214265, 37.640390506634006],
                zoom: 10,
                behaviors: ['default', 'scrollZoom'],
                controls: ['fullscreenControl']
            });

            addGrid(myMap);
            var log = new Log();

            var problemJson = {
                "data": {
                    "data": {
                        "type": "FeatureCollection",
                        "properties": {
                            "RouterMetaData": {
                                "Waypoints": [
                                    {
                                        "address": "",
                                        "name": "парк имени 50-летия Октября",
                                        "coordinates": [37.50814, 55.679656]
                                    },
                                    {
                                        "address": "",
                                        "name": "улица Удальцова, 57",
                                        "coordinates": [37.503376, 55.676965]
                                    }
                                ]
                            }
                        },
                        "features": [
                            {
                                "type": "FeatureCollection",
                                "properties": {
                                    "RouteMetaData": {
                                        "type": "masstransit",
                                        "Duration": {"value": 507, "text": "8 мин"}
                                    }, "boundedBy": [
                                        [37.503376, 55.676965],
                                        [37.50814, 55.679656]
                                    ]
                                },
                                "features": [
                                    {
                                        "type": "FeatureCollection",
                                        "properties": {
                                            "PathMetaData": {
                                                "Duration": {"value": 507, "text": "8 мин"},
                                                "Distance": {"value": 423, "text": "423 м"}
                                            }, "encodedCoordinates": "LFQ8AqiaUQNk7f__ffX__w=="
                                        },
                                        "features": [
                                            {
                                                "type": "FeatureCollection",
                                                "properties": {
                                                    "SegmentMetaData": {
                                                        "Walk": true,
                                                        "Duration": {"value": 494, "text": "8 мин"},
                                                        "Distance": {"value": 423, "text": "423 м"}
                                                    }
                                                },
                                                "features": [
                                                    {
                                                        "type": "Feature",
                                                        "properties": null,
                                                        "geometry": {"type": "LineString", "lodIndex": 0}
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                }
            };

            var multiRoute = new ymaps.multiRouter.MultiRouteJsonView(
                    new ymaps.multiRouter.MultiRouteJsonModel(
                            ymaps.multiRouter.service.yMapsJsonToGeoJson(problemJson.data.data)
                    ), {
                        wayPointDraggable: true,
                        viaPointDraggable: true,
                        boundsAutoApply: true,
                        zoomMargin: 30
                    }
            );

            map.geoObjects.add(multiRoute);
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>