<!DOCTYPE HTML>
<!--(skip)(description)
GeoObject state: set
-->
<!--(version)
2.1
-->
<!--(commands)
click(52);
click(54);
click(73);
click(75);
click(77);
click(116);
click(118);
click(137);
click(139);
click(141);
test();
click(4);
click(2);
test();
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script src="../geoCS.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            ymaps = ym; // hack

            var map = myMap = new ym.Map('map', {
                center: [55.73259667357658, 37.70153663432529],
                zoom: 9,
                behaviors: ['default', 'scrollZoom'],
                controls: ['fullscreenControl']
            });

            geoCSSource(ym, myMap, this);
            addGrid(myMap);
            var log = new Log();

            geoObjectPlacemark.properties.set('balloonContent', 'text');
            geoObjectPolyline.properties.set('balloonContent', 'text');
            geoObjectPolygon.properties.set('balloonContent', 'text');
            geoObjectRectangle.properties.set('balloonContent', 'text');
            geoObjectCircle.properties.set('balloonContent', 'text');
            placemark.properties.set('balloonContent', 'text');
            polyline.properties.set('balloonContent', 'text');
            polygon.properties.set('balloonContent', 'text');
            rectangle.properties.set('balloonContent', 'text');
            circle.properties.set('balloonContent', 'text');

            var manager = new ymaps.option.Manager({
                key1: '123'
            });

            var button = new ymaps.control.Button('check');
            button.events.add('click', function () {
                log.info('');
                log.info('old value: (false, one - true)');
                log.info(geoObjectPlacemark.state.get('active'));
                log.info(geoObjectPolyline.state.get('active'));
                log.info(geoObjectPolygon.state.get('active'));
                log.info(geoObjectRectangle.state.get('active'));
                log.info(geoObjectCircle.state.get('active'));
                log.info(placemark.state.get('active'));
                log.info(polyline.state.get('active'));
                log.info(polygon.state.get('active'));
                log.info(rectangle.state.get('active'));
                log.info(circle.state.get('active'));
                log.info('');
                log.info('after unset: (undefined)');
                geoObjectPlacemark.state.unset('active');
                geoObjectPolyline.state.unset('active');
                geoObjectPolygon.state.unset('active');
                geoObjectRectangle.state.unset('active');
                geoObjectCircle.state.unset('active');
                placemark.state.unset('active');
                polyline.state.unset('active');
                polygon.state.unset('active');
                rectangle.state.unset('active');
                circle.state.unset('active');
                log.info(geoObjectPlacemark.state.get('active'));
                log.info(geoObjectPolyline.state.get('active'));
                log.info(geoObjectPolygon.state.get('active'));
                log.info(geoObjectRectangle.state.get('active'));
                log.info(geoObjectCircle.state.get('active'));
                log.info(placemark.state.get('active'));
                log.info(polyline.state.get('active'));
                log.info(polygon.state.get('active'));
                log.info(rectangle.state.get('active'));
                log.info(circle.state.get('active'));
                log.info('');
                log.info('after set: (true)');
                geoObjectPlacemark.state.set('active', true);
                geoObjectPolyline.state.set('active', true);
                geoObjectPolygon.state.set('active', true);
                geoObjectRectangle.state.set('active', true);
                geoObjectCircle.state.set('active', true);
                placemark.state.set('active', true);
                polyline.state.set('active', true);
                polygon.state.set('active', true);
                rectangle.state.set('active', true);
                circle.state.set('active', true);
                log.info(geoObjectPlacemark.state.get('active'));
                log.info(geoObjectPolyline.state.get('active'));
                log.info(geoObjectPolygon.state.get('active'));
                log.info(geoObjectRectangle.state.get('active'));
                log.info(geoObjectCircle.state.get('active'));
                log.info(placemark.state.get('active'));
                log.info(polyline.state.get('active'));
                log.info(polygon.state.get('active'));
                log.info(rectangle.state.get('active'));
                log.info(circle.state.get('active'));
                log.info('');
                log.info('after unsetAll: (undefined)');
                log.info(geoObjectPlacemark.state.unsetAll());
                log.info(geoObjectPolyline.state.unsetAll());
                log.info(geoObjectPolygon.state.unsetAll());
                log.info(geoObjectRectangle.state.unsetAll());
                log.info(geoObjectCircle.state.unsetAll());
                log.info(placemark.state.unsetAll());
                log.info(polyline.state.unsetAll());
                log.info(polygon.state.unsetAll());
                log.info(rectangle.state.unsetAll());
                log.info(circle.state.unsetAll());
                log.info(geoObjectPlacemark.state.get('active'));
                log.info(geoObjectPolyline.state.get('active'));
                log.info(geoObjectPolygon.state.get('active'));
                log.info(geoObjectRectangle.state.get('active'));
                log.info(geoObjectCircle.state.get('active'));
                log.info(placemark.state.get('active'));
                log.info(polyline.state.get('active'));
                log.info(polygon.state.get('active'));
                log.info(rectangle.state.get('active'));
                log.info(circle.state.get('active'));
            });

            var clearButton = new ymaps.control.Button('clear');
            clearButton.events.add('click', function () {
                log.clear();
            });

            addListener(geoObjectPlacemark);
            addListener(geoObjectPolyline);
            addListener(geoObjectPolygon);
            addListener(geoObjectRectangle);
            addListener(geoObjectCircle);
            addListener(placemark);
            addListener(polyline);
            addListener(polygon);
            addListener(rectangle);
            addListener(circle);

            myMap.controls.add(clearButton);
            myMap.controls.add(button);
            myMap.controls.add(new ymaps.control.ZoomControl());

            myMap.geoObjects
                    .add(geoObjectPlacemark)
                    .add(geoObjectPolyline)
                    .add(geoObjectPolygon)
                    .add(geoObjectRectangle)
                    .add(geoObjectCircle)
                    .add(placemark)
                    .add(polyline)
                    .add(polygon)
                    .add(rectangle)
                    .add(circle);

            function addListener(object) {
                object.events
                        .add('editorstatechange', function (e) {
                            log.info('editorstatechange (' + object.options.get('id') + ')');
                            log.info('originalEvent: ' + e.get('originalEvent'));
                        })
                        .add('geometrychange', function (e) {
                            log.info('geometrychange (' + object.options.get('id') + ')');
                            log.info('originalEvent: ' + e.get('originalEvent'));
                        })
                        .add('mapchange', function (e) {
                            log.info('mapchange (' + object.options.get('id') + ')');
                            log.info('oldMap: ' + e.get('oldMap'));
                            log.info('newMap: ' + e.get('newMap'));
                        })
                        .add('optionschange', function (e) {
                            log.info('optionschange (' + object.options.get('id') + ')')
                        })
                        .add('overlaychange', function (e) {
                            log.info('overlaychange (' + object.options.get('id') + ')');
                            log.info('oldOverlay: ' + e.get('oldOverlay'));
                            log.info('newOverlay: ' + e.get('newOverlay'));
                        })
                        .add('parentchange', function (e) {
                            log.info('parentchange (' + object.options.get('id') + ')');
                            log.info('oldParent: ' + e.get('oldParent'));
                            log.info('newParent: ' + e.get('newParent'));
                        })
                        .add('propertieschange', function (e) {
                            log.info('propertieschange (' + object.options.get('id') + ')');
                            log.info('originalEvent: ' + e.get('originalEvent'));
                        })
                        .add('pixelgeometrychange', function (e) {
                            log.info('pixelgeometrychange (' + object.options.get('id') + ')');
                            log.info('oldPixelGeometry: ' + e.get('oldPixelGeometry'));
                            log.info('newPixelGeometry: ' + e.get('newPixelGeometry'));
                        });
            }

            //TODO: дописать тест
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>