<!DOCTYPE HTML>
<!--
Title:
Геообъект: изменение геометрии при зуме в режиме фрейминга

Description:
Проверка изменения геометрии при зуме в режиме фрейминга.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
geoobject

Estimated time:
180000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней. 

  Expectation:
  Карта отобразилась корректно.
  На карте спан Москвы, на спане синий полупрозрачный многоугольник в режиме масштабирования: многоугольник описан внутри прямоугольной области с метками масштабирования и поворотной кнопкой.
  В контейнере дефолтный набор контролов.

Step:
  Action:
  Навести курсор на белую метку на масштабирования, переместить метку в сторону увеличения линии.
   
  Expectation:
  При наведении курсора на метку - курсор палец, метка увеличивается в размерах.
  По клику метка становится желтой, курсор - кулак.
  При перемещении курсора весь объект корректно увеличивается в размерах.
  Под контейнером при увеличении добавляются строки: "geometrychange".

Step:
  Action:
  Выполнить клик в контрол масштабирования "+".

  Expectation:
  Происходит корректный призум: карта и объекты на ней не пропадают, не мигает цветами.
  Под контейнером с картой не добавляются события "geometrychange".

Step:
  Action:
  Выполнить 5 кликов в контрол масштабирования "-".

  Expectation:
  Происходит корректный отзум: карта и объекты на ней не пропадают, не мигает цветами.
  Под контейнером с картой не добавляются события "geometrychange". 

Step:
  Action:
  Скролом мыши выполнить максимальный призум области многоугольника.

  Expectation:
  Происходит корректный призум: карта и объекты на ней не пропадают, не мигает цветами.
  Под контейнером с картой не добавляются события "geometrychange".

Step:
  Action:
  Скролом мыши выполнить отзум области многоугольника для отображения области масштабирования.

  Expectation:
  Происходит корректный отзум: карта и объекты на ней не пропадают, не мигает цветами.
  Под контейнером с картой не добавляются события "geometrychange".

Step:
  Action:
  Навести курсор на кнопку поворота рамки многоугольника, зажать ЛКМ и повернуть рамку, затем выполнить драг многоугольника.

  Expectation:
  При наведении на кнопку, кнопка увеличивается, по клику становится желтой при перемещении курсор - кулак.
  Поворот и драг фигуры корректный: со спана ничего не пропадает, область с рамкой не мигает цветами.
  Под контейнером при повороте и драге добавляются строки: "geometrychange".
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            var map = new ymaps.Map("map", {
                        center: [55.73, 37.75],
                        zoom: 10
                    }),
                    geoObject = new ymaps.GeoObject({
                        geometry: {
                            type: "Polygon",
                            coordinates: [
                                [
                                    [55.75, 37.80],
                                    [55.80, 37.90],
                                    [55.75, 38.00],
                                    [55.70, 38.00],
                                    [55.70, 37.80]
                                ]
                            ]
                        }
                    });

            map.geoObjects.add(geoObject);
            __log__("Кидалось geometrychange при зумин/зумаут в сафари");
            geoObject.events.add('geometrychange', function () {
                __log__('geometrychange');
            });

            geoObject.editor.startFraming();
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>