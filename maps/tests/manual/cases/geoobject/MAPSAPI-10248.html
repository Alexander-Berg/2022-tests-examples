<!DOCTYPE HTML>
<!--
Title:
Геообъект: добавление в объект фонового изображения

Description:
Проверка добавления в объект фонового изображения.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
geoobject

Estimated time:
60000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней. 
  
  Expectation:
  Карта отобразилась корректно.
  На карте спан Москвы, в центре спана шесть прямоугольников с фоновыми изображениями: в двух верхних красный треугольник с восклицательным знаком, в остальных изображение темного прямоугольника и надписью "Works".
  (для просмотра надписи выполните призум области прямоугольников)
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            var myMap = new ymaps.Map('map', {
                center: [55.73259667357658, 37.70153663432529],
                zoom: 9
            });
            __log__('На карте отображаются 6 rectangle с изображениями');
            ymaps.load(['graphics.render.detect.all'], function () {

                var canvasElement = document.createElement('canvas'),
                        canvas = canvasElement.getContext('2d');
                canvas.width = canvas.height = 256;
                canvas.font = "32px Arial";
                canvas.fillColor = 'rgba(255,255,255,0.5)';
                canvas.fillRect(0, 0, 128, 128);
                canvas.fillText('IT WORKS!', 100, 100);
                document.body.appendChild(canvasElement);

                // Создаем прямоугольник с помощью вспомогательного класса.
                var myRectangle = new ymaps.Rectangle([
                    // Задаем координаты диагональных углов прямоугольника.
                    [55.61, 37.60],
                    [55.71, 37.69]
                ], {}, {
                    fillColor: '#7df9ff33',
                    fillOpacity: 0.5,
                    strokeColor: '#0000FF',
                    strokeOpacity: 0.5,
                    strokeWidth: 2,
                    borderRadius: 6,

                    //renderType:'SVG',
                    fillImageHref: canvasElement.toDataURL()
                });
                myMap.geoObjects.add(myRectangle);

                // Создаем прямоугольник с помощью вспомогательного класса.
                var myRectangle = new ymaps.Rectangle([
                    // Задаем координаты диагональных углов прямоугольника.
                    [55.71, 37.60],
                    [55.81, 37.69]
                ], {}, {
                    fillColor: '#7df9ff33',
                    fillOpacity: 0.5,
                    strokeColor: '#0000FF',
                    strokeOpacity: 0.5,
                    strokeWidth: 2,
                    borderRadius: 6,

                    //renderType:'SVG',
                    fillImageHref: canvasElement
                });
                myMap.geoObjects.add(myRectangle);

                var myRectangle = new ymaps.Rectangle([
                    // Задаем координаты диагональных углов прямоугольника.
                    [55.81, 37.60],
                    [55.91, 37.69]
                ], {hintContent: 'uri'}, {
                    fillColor: '#7df9ff33',
                    fillOpacity: 0.5,
                    strokeColor: '#0000FF',
                    strokeOpacity: 0.5,
                    strokeWidth: 2,
                    borderRadius: 6,

                    //renderType:'SVG',
                    fillImageHref: 'https://yabs.yandex.ru/resource/B7Chkc531Hif0Bf2oiL87i_banana_20141031_15.svg'
                });
                myMap.geoObjects.add(myRectangle);


                var myRectangle = new ymaps.Rectangle([
                    // Задаем координаты диагональных углов прямоугольника.
                    [55.61, 37.69],
                    [55.71, 37.79]
                ], {hintContent: 'dataUri'}, {
                    fillColor: '#7df9ff33',
                    fillOpacity: 0.5,
                    strokeColor: '#0000FF',
                    strokeOpacity: 0.5,
                    strokeWidth: 2,
                    borderRadius: 6,

                    renderType: 'SVG',
                    fillImageHref: canvasElement.toDataURL()
                });
                myMap.geoObjects.add(myRectangle);

                // Создаем прямоугольник с помощью вспомогательного класса.
                var myRectangle = new ymaps.Rectangle([
                    // Задаем координаты диагональных углов прямоугольника.
                    [55.71, 37.69],
                    [55.81, 37.79]
                ], {hintContent: 'canvas'}, {
                    fillColor: '#7df9ff33',
                    fillOpacity: 0.5,
                    strokeColor: '#0000FF',
                    strokeOpacity: 0.5,
                    strokeWidth: 2,
                    borderRadius: 6,

                    renderType: 'SVG',
                    fillImageHref: canvasElement
                });
                myMap.geoObjects.add(myRectangle);

                var myRectangle = new ymaps.Rectangle([
                    // Задаем координаты диагональных углов прямоугольника.
                    [55.81, 37.69],
                    [55.91, 37.79]
                ], {hintContent: 'url'}, {
                    fillColor: '#7df9ff33',
                    fillOpacity: 0.5,
                    strokeColor: '#0000FF',
                    strokeOpacity: 0.5,
                    strokeWidth: 2,
                    borderRadius: 6,

                    renderType: 'SVG',
                    fillImageHref: 'https://yabs.yandex.ru/resource/B7Chkc531Hif0Bf2oiL87i_banana_20141031_15.svg'
                });
                myMap.geoObjects.add(myRectangle);


            });

        }
    </script>
</head>
<body>
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>