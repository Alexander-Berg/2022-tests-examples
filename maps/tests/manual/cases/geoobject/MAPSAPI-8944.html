<!DOCTYPE HTML>
<!--(skip)(description)
GeoObject: MAPSAPI-4915 - iconContent + interactive overlay
-->
<!--(version)
2.1
-->
<!--(commands)
click(5);
test();
click(7);
test();
click(10);
test();
click(12);
test();
-->
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>


    <script src="../../helper.js"></script>
    <script src="https://api-maps.tst.c.maps.yandex.ru/2.1.45/?lang=ru-RU&load=package.full&onload=init1&mode=debug"></script>
    <script src="https://api-maps.tst.c.maps.yandex.ru/2.1.46/?lang=en-US&load=package.full&onload=init2&mode=debug"></script>
    <script src="https://api-maps.tst.c.maps.yandex.ru/2.1.45/?lang=ru-RU&load=package.full&onload=init3&mode=debug"></script>
    <script src="https://api-maps.tst.c.maps.yandex.ru/2.1.46/?lang=en-US&load=package.full&onload=init4&mode=debug"></script>
    <script type=text/javascript>
        function init1(ymaps) {

            var map = new ymaps.Map("map1", {
                center: [82.7143624008497, 130.12401629918395],
                zoom: 7,
                behaviors: ['default', 'scrollZoom'],
                controls: ['fullscreenControl']
            });

            var myPolygon = new ymaps.GeoObject({
                // Описываем геометрию геообъекта.
                geometry: {
                    // Тип геометрии - "Многоугольник".
                    type: "Polygon",
                    // Указываем координаты вершин многоугольника.
                    coordinates: [
                        // Координаты вершин внешнего контура.
                        [
                            [82.7143624008497, 130.12401629918395],
                            [82.84691377961904, 130.94799090855898],
                            [82.67804443530538,130.67882586949645],
                            [82.54523210459159,129.41265155309017],
                            [82.67804443530503,129.25197650426207],
                            [82.7171486563273, 133.22216083043398],
                            [82.47649166239395, 133.26610614293395],
                            [82.47936839282679, 130.45360614293395],
                            [82.7143624008497, 130.12401629918395],
                            [82.6387313541816, 132.38719989293395],
                            [82.54808269418567, 130.91503192418398],
                            [82.35175160349229, 134.43065692418392],
                            [82.67804443530673, 131.00292254918392],
                            [82.55947421544175, 132.67284442418395],
                            [82.42741948237456, 129.64061786168398]
                        ]
                    ],
                    // Задаем правило заливки внутренних контуров по алгоритму "nonZero".
                    fillRule: "nonZero"
                },
                // Описываем свойства геообъекта.
                properties: {
                    // Содержимое балуна.
                    balloonContent: "Многоугольник"
                }
            }, {
                // Описываем опции геообъекта.
                // Цвет заливки.
                fillColor: '#00FF00',
                // Цвет обводки.
                strokeColor: '#0000FF',
                // Общая прозрачность (как для заливки, так и для обводки).
                opacity: 0.5,
                // Ширина обводки.
                strokeWidth: 1,
                // Стиль обводки.
                interactivityModel: 'default#silent'
            });

            map.geoObjects.add(myPolygon);

            coordinates = myPolygon.geometry.getCoordinates();
            myPolygon.editor.startDrawing().then(function () {
                try {
                    __log__('drawing started')
                } catch (e) {
                    __log__(e)
                }
            });
setInterval(function(){
    window.coordinates = myPolygon.geometry.getCoordinates();
    center = map.getCenter();
    zoom = map.getZoom();
    myPolygon2.geometry.setCoordinates(window.coordinates);
    myPolygon3.geometry.setCoordinates(window.coordinates);
    myPolygon4.geometry.setCoordinates(window.coordinates);
    myMap2.setCenter(center, zoom);
    myMap3.setCenter(center, zoom);
    myMap4.setCenter(center, zoom);
},3000)
            setInterval(function(){
                __log__(myPolygon.geometry.getCoordinates());
            },10000)
        }

        function init2(ymaps) {

            var map = myMap2 = new ymaps.Map("map2", {
                center: [82.7143624008497, 130.12401629918395],
                zoom: 7,
                behaviors: ['default', 'scrollZoom'],
                controls: ['fullscreenControl']
            });
            myPolygon2 = new ymaps.GeoObject({
                // Описываем геометрию геообъекта.
                geometry: {
                    // Тип геометрии - "Многоугольник".
                    type: "Polygon",
                    // Указываем координаты вершин многоугольника.
                    coordinates: [
                        // Координаты вершин внешнего контура.
                        [
                            [82.7143624008497, 130.12401629918395],
                            [82.84691377961904, 130.94799090855898],
                            [82.67804443530538,130.67882586949645],
                            [82.54523210459159,129.41265155309017],
                            [82.67804443530503,129.25197650426207],
                            [82.7171486563273, 133.22216083043398],
                            [82.47649166239395, 133.26610614293395],
                            [82.47936839282679, 130.45360614293395],
                            [82.7143624008497, 130.12401629918395],
                            [82.6387313541816, 132.38719989293395],
                            [82.54808269418567, 130.91503192418398],
                            [82.35175160349229, 134.43065692418392],
                            [82.67804443530673, 131.00292254918392],
                            [82.55947421544175, 132.67284442418395],
                            [82.42741948237456, 129.64061786168398]
                        ]
                    ],
                    // Задаем правило заливки внутренних контуров по алгоритму "nonZero".
                    fillRule: "nonZero"
                },
                // Описываем свойства геообъекта.
                properties: {
                    // Содержимое балуна.
                    balloonContent: "Многоугольник"
                }
            }, {
                // Описываем опции геообъекта.
                // Цвет заливки.
                fillColor: '#00FF00',
                // Цвет обводки.
                strokeColor: '#0000FF',
                // Общая прозрачность (как для заливки, так и для обводки).
                opacity: 0.5,
                // Ширина обводки.
                strokeWidth: 1,
                // Стиль обводки.
                interactivityModel: 'default#silent'
            });

            map.geoObjects.add(myPolygon2);

        }
        function init3(ymaps) {

            var map = myMap3 = new ymaps.Map("map3", {
                center: [82.7143624008497, 130.12401629918395],
                zoom: 7,
                behaviors: ['default', 'scrollZoom'],
                controls: ['fullscreenControl']
            });
            myPolygon3 = new ymaps.GeoObject({
                // Описываем геометрию геообъекта.
                geometry: {
                    // Тип геометрии - "Многоугольник".
                    type: "Polygon",
                    // Указываем координаты вершин многоугольника.
                    coordinates: [
                        // Координаты вершин внешнего контура.
                        [
                            [82.7143624008497, 130.12401629918395],
                            [82.84691377961904, 130.94799090855898],
                            [82.67804443530538,130.67882586949645],
                            [82.54523210459159,129.41265155309017],
                            [82.67804443530503,129.25197650426207],
                            [82.7171486563273, 133.22216083043398],
                            [82.47649166239395, 133.26610614293395],
                            [82.47936839282679, 130.45360614293395],
                            [82.7143624008497, 130.12401629918395],
                            [82.6387313541816, 132.38719989293395],
                            [82.54808269418567, 130.91503192418398],
                            [82.35175160349229, 134.43065692418392],
                            [82.67804443530673, 131.00292254918392],
                            [82.55947421544175, 132.67284442418395],
                            [82.42741948237456, 129.64061786168398]
                        ]
                    ]
                },
                // Описываем свойства геообъекта.
                properties: {
                    // Содержимое балуна.
                    balloonContent: "Многоугольник"
                }
            }, {
                // Описываем опции геообъекта.
                // Цвет заливки.
                fillColor: '#00FF00',
                // Цвет обводки.
                strokeColor: '#0000FF',
                // Общая прозрачность (как для заливки, так и для обводки).
                opacity: 0.5,
                // Ширина обводки.
                strokeWidth: 1,
                // Стиль обводки.
                interactivityModel: 'default#silent'
            });

            map.geoObjects.add(myPolygon3);

        }
        function init4(ymaps) {

            var map = myMap4 = new ymaps.Map("map4", {
                center: [82.7143624008497, 130.12401629918395],
                zoom: 7,
                behaviors: ['default', 'scrollZoom'],
                controls: ['fullscreenControl']
            });
            myPolygon4 = new ymaps.GeoObject({
                // Описываем геометрию геообъекта.
                geometry: {
                    // Тип геометрии - "Многоугольник".
                    type: "Polygon",
                    // Указываем координаты вершин многоугольника.
                    coordinates: [
                        // Координаты вершин внешнего контура.
                        [
                            [82.7143624008497, 130.12401629918395],
                            [82.84691377961904, 130.94799090855898],
                            [82.67804443530538,130.67882586949645],
                            [82.54523210459159,129.41265155309017],
                            [82.67804443530503,129.25197650426207],
                            [82.7171486563273, 133.22216083043398],
                            [82.47649166239395, 133.26610614293395],
                            [82.47936839282679, 130.45360614293395],
                            [82.7143624008497, 130.12401629918395],
                            [82.6387313541816, 132.38719989293395],
                            [82.54808269418567, 130.91503192418398],
                            [82.35175160349229, 134.43065692418392],
                            [82.67804443530673, 131.00292254918392],
                            [82.55947421544175, 132.67284442418395],
                            [82.42741948237456, 129.64061786168398]
                        ]
                    ]
                },
                // Описываем свойства геообъекта.
                properties: {
                    // Содержимое балуна.
                    balloonContent: "Многоугольник"
                }
            }, {
                // Описываем опции геообъекта.
                // Цвет заливки.
                fillColor: '#00FF00',
                // Цвет обводки.
                strokeColor: '#0000FF',
                // Общая прозрачность (как для заливки, так и для обводки).
                opacity: 0.5,
                // Ширина обводки.
                strokeWidth: 1,
                // Стиль обводки.
                interactivityModel: 'default#silent'
            });

            map.geoObjects.add(myPolygon4);

        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<p>В тесте подключены несколько версий АПИ, метки не должны дублироваться. Смотреть по тени или изменению цвета.</p>
<div id="map1" style="height: 512px; width: 512px; border: 1px solid black"></div>
<div id="map2"
     style="height: 512px; width: 512px; margin-left: 522px; margin-top: -514px; border: 1px solid black"></div>
<div id="map3" style="height: 512px; width: 512px; margin-top: 10px; border: 1px solid black"></div>
<div id="map4"
     style="height: 512px; width: 512px; margin-top: -514px; margin-left: 522px; border: 1px solid black"></div>
</body>
</html>