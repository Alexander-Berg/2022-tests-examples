<!DOCTYPE HTML>
<!--
Title:
Вектор: слой пробок на векторной карте

Description:
Проверка корректности работы слоя пробок на векторной карте.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components:
vector

Estimated time:
240000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть страницу и элементы на ней. 

  Expectation:
  Карта отобразилась корректно со спаном Москвы с отображением пробочных линий.
  В контроле пробок иконка светофора, бал пробок, текущее время, шестеренка настроек, под контейнером строка: "Вектор показался".

Step:
  Action:
  Выполнить даблклик в спан карты, затем статичный и инертный драг спана карты. 

  Expectation:
  Драг карты корректный: карта не пропадает, не мигает цветами, нет странных визуальных эффектов, подписи на карте выглядят корректно, не слипаются.
  Пробочный слой не пропадает.
  При драге спана, когда центр спана перемещается за пределы МКАД, в контроле пробок перестает отображаться информация о бале пробок, текущем времени.

Step:
  Action:
  Выполнить клик в шестеренку настроек, клик в чек-бокс дорожных событий. 

  Expectation:
  На пробочных линиях на спане карты появляются иконки ДС.

Step:
  Action:
  Выполнить даблклик в спан карты, затем статичный и инертный драг спана карты. 

  Expectation:
  Призум даблкликом и драг карты корректный: карта не пропадает, не мигает цветами, нет странных визуальных эффектов, подписи на карте выглядят корректно, не слипаются.
  Пробочный слой и метки дорожных событий не пропадает.
  При драге спана, когда центр спана перемещается за пределы МКАД, в контроле пробок перестает отображаться информация о бале пробок, текущем времени.

Step:
  Action:
  Последовательно навести курсор и выполнить клик в разные типы ДС(дорожные работы, ДТП, перекрытие, развод моста, прочее).

  Expectation:
  При наведении на иконку появляется хинт с обозначением ДС, например "Дорожные работы".
  По клику спан карты может сметится, на иконке открывается балун с соотвествующей информацией о дорожном событии со ссылкой на источник.

Step:
  Action:
  Выполнить даблклик в спан карты, затем статичный и инертный драг спана карты. 
  Повторять указанный шаг до максимального призума спана карты.

  Expectation:
  Призум даблкликом и драг карты корректный: карта не пропадает, не мигает цветами, нет странных визуальных эффектов, подписи на карте выглядят корректно, не слипаются.
  Пробочный слой и метки дорожных событий не пропадает.
  При драге спана, когда центр спана перемещается за пределы МКАД, в контроле пробок перестает отображаться информация о бале пробок, текущем времени.
  Объекты на карте имеют векторное отображение.
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="../../helper.js"></script>
    <!-- <script type="text/javascript" src="https://api-maps.tst.c.maps.yandex.ru/2.1.77/?lang=ru-RU&mode=debug"></script> -->
    <script type=text/javascript>
        // addLinks();

        window.onerror = function(err) {
            __log__(err);
        };

        Api('init', undefined, undefined, undefined, undefined, 'ymaps', undefined);

        function init(ymaps) {
            var map = new ymaps.Map('map', {
                center: [55.753930, 37.621401],
                zoom: 10.77,
                controls: []
            }, { vector: true });

            map.layers.events.add('vectorreveal', () => __log__('Вектор показался'));
            map.layers.events.add('vectorerror', () => __log__('Вектор упал'));

            const traffic = new ymaps.control.TrafficControl();
            map.controls.add(traffic);
            traffic.showTraffic();
        }
    </script>
    <style>
        html, body, #map {
            width: 100%;
            height: 95%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="map"></div>
</body>
</html>
