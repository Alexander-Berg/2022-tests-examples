<!DOCTYPE HTML>
<!--
Title:
Вектор: проверка недоступности запросов и наличия метрик 

Description:
Проверка недоступности запросов и наличия метрик.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components:
vector

Estimated time:
240000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть страницу и элементы на ней. 

  Expectation:
  Карта отобразилась корректно со спаном центра Москвы(проверте что отображается векторная карта).

Step:
  Action:
  Тест описан по интерфейсу инструментов разработчика браузера Chrome, некоторые шаги в других браузерах могут не совпадать(для Safari ставим кейсу Skipped).
  Откройте инструменты разработчика Windows: Ctrl + Shift + I если у вас MacOS: ⌥ + ⌘ + I.
  В инструментах разработчика перейдите на вкладку Network, поставьте галочку в чек-бокс "Disable cache", затем обновите страницу тестового стенда.

  Expectation:
  После обновления страницы во вкладке Network появится список запросов или запрашиваемых ресурсов.

Step:
  Action:
  Найдите в списке запросов запрос начинающийся на "tiles?..."(их много выберите произвольно), выполните по нему клик правой кнопкой мыши, в контекстном меню выберите: "Block request URL". 

  Expectation:
  Указанными действиями вы заблокировали один из тайловых запросов стенда. Заблокированный запрос также должен отобразится во вкладке Network request blocking.

Step:
  Action:
  Найдите в списке запросов запрос начинающийся на "glyphs?..."(их много выберите произвольно), запрос начинающийся на "icons?...", а также запрос начинающийся на "meshes?...". 
  Заблокируйте несколько запросов "glyphs?...", "icons?...", "meshes?...", аналогично блокировке запроса "tiles?..." из предыдущего шага.

  Expectation:
  Указанными действиями вы заблокировали несколько запросов стенда. Заблокированные запросы также должен отобразится во вкладке Network request blocking.

Step:
  Action:
  Выполнить плавный и резкий зум/отзум карты, зум магнифайером, произвести статичный и инертный дрга карты. 

  Expectation:
  Происходит корректный призум, с каждым зумом карта может детализироваться, могут появляться новые подписи, метки, меняться оттенки цветовой схемы.
  Драг карты корректный: карта не пропадает, не мигает цветами, нет странных визуальных эффектов, подписи на карте выглядят корректно, не слипаются.
  На карте корректно отображается векторное отображение зданий, объектов.

Step:
  Action:
  Во вкладке Network найдите иконку перечеркнутого круга, с хинтом "Clear", выполните клик в нее и очистите содержимое вкладки запросов.

  Expectation:
  Таблица со списком запросов очистится.

Step:
  Action:
  Во вкладке Network поставьте галочку в чек-бокс "Preserve log", затем обновите страницу тестового стенда.

  Expectation:
  Тестовый стенд перезагружается, в таблице появляются запросы стенда. Вверху таблицы должно быть 4 запроса "counter", выполните скриншот списка запросов с указанными запросами, так чтобы на скриншоте отображалась колнка Size с размером запросов. 
  Выполненный скриншот залейте на Я.Диск, или другой файлообменник, при выставлении оценки кейсу приложите ссылку на скриншот в комментарий к тест-кейсу.
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <script src="../../helper.js"></script>
    <!-- <script type="text/javascript" src="https://api-maps.tst.c.maps.yandex.ru/2.1.77/?lang=ru_RU&mode=debug&apikey=b027f76e-cc66-f012-4f64-696c7961c395"></script> -->
    <script type=text/javascript>

        Api('init', undefined, undefined, undefined, undefined, 'ymaps', undefined);

        window.onerror = function(err) {
            __log__(err);
        };

        function init(ymaps) {
            var map = new ymaps.Map('map', {
                center: [55.754021, 37.620926],
                zoom: 18,
                controls: ['default']
            }, {
                vector: true
            });
        }
    </script>
    <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="map"></div>
</body>
</html>
