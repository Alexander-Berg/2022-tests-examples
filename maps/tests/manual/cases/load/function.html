<!DOCTYPE HTML>
<!--
Title:
Загрузка карты: добавление элементов по событию

Description:
Проверка добавления элементов по событию в load.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
internal

Estimated time:
60000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней. 
  
  Expectation:
  Карта отобразилась корректно. 
  На карте спан Москвы, в контейнере отсутсвуют контролы.

Step:
  Action:
  Выполнить клик ЛКМ в спан карты. 
  
  Expectation:
  В контейнере с картой появляются контрол "Найти", контрол пробок.
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../helper.js"></script>
    <script src="https://api-maps.tst.c.maps.yandex.ru/2.1.78/?load=Map&lang=ru-RU&mode=debug"
            type="text/javascript"></script>
    <script type=text/javascript>

        addLinks();

        var map;
        console.log('Click the map - traffic and search controls will appear');
        ymaps.ready(function () {
            map = new ymaps.Map('map', {
                center: [55.72725771214265, 37.640390506634006],
                zoom: 10
            });

            map.events.once('click', function () {
                ymaps.load(function () {
                    map.controls
                            .add(new ymaps.control.TrafficControl())
                            .add(new ymaps.control.SearchControl());
                });
            })
        });


    </script>
</head>
<body style="padding: 0; margin: 0;">
<h3 style="color: red;">Жёсткая ссылка</h3>

<div id="map" style="height: 512px; width: 512px; border: 1px black solid;"></div>
<div class="drag white" id="w"></div>
</body>
</html>