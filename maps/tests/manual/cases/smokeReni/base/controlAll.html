<!DOCTYPE HTML>
<!--
Title:
Базовая проверка контролов

Description:
Бзовая проверка контролов карты
Памятка по терминам:https://wiki.yandex-team.ru/eva/search/assessors-testing/maps-api/#kontrol

Components: 
smoke

Estimated time: 
720000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась корректно.
  Снизу-слева контрол маршрутов(стрелка змейкой), слева контролы масштабирования "+\-" со шкалой и скролл кнопкой в среднем положении, сверху слева-направо: контрол местоположения, кнопка "Найти", контрол пробок, контрол слоев, кнопка разворачивания экрана.
  Справка под кнопкой разворачивания экрана кнопка "Город".
  Снизу справа контролы масштабирования "+/-".

Step:
  Action:
  Выполнить максимальный отзум карты кликом в контрол масштабирования "-", расположенный слева.

  Expectation:
  Контрол масштабирования "-" стал неактивным(дублирующий контрол справа также неактивен).
  Отзум карты корректный: карта не мигала, не пропадала.

Step:
  Action:
  Выполнить максимальный призум карты кликом в контрол масштабирования "+", расположенный слева.

  Expectation:
  Контрол масштабирования "+" стал неактивным.
  Карта отобразилась корректно.
  Призум карты корректный: карта не мигала, не пропадала, постепенно прорисовывались элементы карты.

Step:
  Action:
  Выполнить 9 кликов в контрол масштабирования "-", расположенный справа снизу.

  Expectation:
  Карта отобразилась корректно.
  Отзум карты корректный: карта не мигала, не пропадала.

Step:
  Action:
  Выполнить клик в кнопку "Город", в выпавшем списке клик в Москва.

  Expectation:
  Происходит смена спана карты на спан Москвы.

Step:
  Action:
  Выполнить клик в кнопку "Найти".

  Expectation:
  Сверху по всей длине контейнера выпадает поисковый инпут с кнопкой "Найти".
  Инпут активный, в поле мигает каретка.

Step:
  Action:
  Вбить в поисковый инпут запрос "Пушкин, улица Ленинградская, д.36", клик в "Найти".

  Expectation:
  Перед сменой спана под инпутом может появится строка "Идет запрос к серверу...".
  Смена спана карты, на спан с поисковым запросом.
  Область видимости призумлена.
  На карте открыт балун "Ленинградская улица, 36; Россия, Санкт-Петебург, Пушкин".

Step:
  Action:
  Выполнить клик в кнопку "Город", в выпавшем списке клик в Новосибирск.

  Expectation:
  Происходит смена спана карты на спан Большевистской улицы Новосибирска, со значением зума аналогичному предыдущему спану.

Step:
  Action:
  Выполнить клик в контрол маршрутов.

  Expectation:
  Контрол маршрутов стал активным, окрашен желтым.

Step:
  Action:
  Выполнить поочередно два клика ЛКМ в разные места текущего спана карты.

  Expectation:
  При клике в спан карты появляется метка "1", после второго клика метка с цифрой "2", между метками появляется фиолетовая нитка маршрута.

Step:
  Action:
  Выполнить четыре клика ЛКМ в контрол масшаибрования "-".

  Expectation:
  Карта отобразилась корректно.
  Отзум карты корректный: карта не мигала, не пропадала.

Step:
  Action:
  Выполнить клик в кнопку "Город", в выпавшем списке клик в Нью-Йорк.

  Expectation:
  Происходит смена спана карты на спан Нью-Йорка, со значением зума аналогичному предыдущему спану.
  В списке значений под кнопкой "Город" напротив Нью-Йорк выставлена галка.

Step:
  Action:
  Выполнить клик в кнопку "Город", в выпавшем списке клик в Москва.

  Expectation:
  Происходит смена спана карты на спан Москвы, со значением зума аналогичному предыдущему спану.
  В списке значений под кнопкой "Город" напротив Нью-Йорк галка не пропала.

Step:
  Action:
  Выполнить клик в кнопку "Пробки".

  Expectation:
  На спане карты появляются пробочные линии с участками окрашенными красным, желтым, зеленым цветом.
  Контрол пробок стал активным, окрашен желтым. 

Step:
  Action:
  Выполнить клик в контрол "Слои", в выпавшем списке значений выбрать "Спутник".

  Expectation:
  Спан карты не меняется, схема меняется на спутниковый снимок, также на спане пробочные линии с участками окрашенными красным, желтым, зеленым цветом.

Step:
  Action:
  Выполнить клик в кнопку разворачивания экрана.

  Expectation:
  Карта разворачивается на всю ширину окна браузера, при этом в левой части появляется поисковый инпут с введенным значением "Пушкин, улица Ленинградская, д.36" и кнопкой "Найти".
  Кнопка разворачивания экрана видоизменилась, стрелки развернулись внутрь, кнопка окрашена желтым.

Step:
  Action:
  Выполнить клик в кнопку разворачивания(сворачивания) экрана.

  Expectation:
  Карта свернулась до первоначальных размеров.

Step:
  Action:
  Выполнить клик в кнопку "Найти".

  Expectation:
  Сверху по всей длине контейнера выпадает поисковый инпут с кнопкой "Найти".
  В инпуте введены данные запроса: "Пушкин, улица Ленинградская, д.36".

Step:
  Action:
  Стереть данные запроса "Пушкин, улица Ленинградская, д.36", ввести "ле", клик в "Найти".

  Expectation:
  Все пространство карты заслоняется панелью со сниппетами по запросу "Ле".

Step:
  Action:
  Нажать в крестик в поисковом инпуте.

  Expectation:
  Запрос "ле" пропадает из инпута, панель со сниппетами пропадает, в области видимости гибридная карта с панорамными линиями.
  Инпут активный, каретка мигает в инпуте.

Step:
  Action:
  Ввести в поисковый инпут 1000 пустых значений или текст с 1000 символов, клик в "Найти".

  Expectation:
  Под инпутом появляется плашка с текстом "Сервер не смог обработать запрос".
  Карта не пропадает.
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="../../../helper.js"></script>
       <script type=text/javascript>

           window.jsErrors = [];
           window.onerror = function (errorMessage) {
               window.jsErrors[window.jsErrors.length] = errorMessage;
               console.log(window.jsErrors[window.jsErrors.length])
           };

           Api('init');

           function init(ymaps) {
               ymaps = ym;

               var log = new Log();

               var myMap = new ym.Map('map', {
                   center: [60.685579, 56.837108],
                   zoom: 9,
                   behaviors: ['default', 'scrollZoom']
               }, {
                   backgroundVisible: false,
                   minZoom: 4,
               });

               addGrid(myMap);
               __log__("Проверь плашки 'Сервер не смог обработать запрос' и 'Идет запрос к серверу...'");
               __log__("Проверь саджест на запросе 'ле'");
               __log__("При клике на городе - карта должна на нем центрироваться, при этом только Нью Йорк выделится галочкой");
               myMap.controls.add(new ymaps.control.ZoomControl({options: {size: 'small'}}), {float: 'none', position: {bottom: 75, right: 10}});
               myMap.controls.add(new ymaps.control.RouteEditor({options: {}}), {float: 'none', position: {bottom: 35, left: 10}});

               var myListBox =  new ymaps.control.ListBox({
                   data: {
                       content: 'Город',
                       title: 'Город'
                   },
                   items: [
                       new ymaps.control.ListBoxItem({data: {content: 'Москва'}, options: {selectOnClick: false}}),
                       new ymaps.control.ListBoxItem({data: {content: 'Новосибирск'}, options: {selectOnClick: false}}),
                       new ymaps.control.ListBoxItem({options: {type: 'separator'}}),
                       new ymaps.control.ListBoxItem({data: {content: 'Нью-Йорк'}})
                   ],
                   options: {
                       float: 'none',
                       position: {
                           top: 60,
                           right: 9
                       }
                   }
               });

               myListBox.get(0).events.add('click', function () {
                   myMap.setCenter([55.75399400, 37.62209300]);
               });
               myListBox.get(1).events.add('click', function () {
                   myMap.setCenter([55.00081759, 82.95627700]);
               });
               myListBox.get(3).events.add('click', function(){myMap.setCenter ([40.695537, -73.97552])});
               myMap.controls.add(myListBox);

           }
       </script>
   </head>
   <body style="position: relative; padding: 0; margin: 0;">
   <div id="map" style="height: 512px; width: 512px;"></div>
   </body>
   </html>
