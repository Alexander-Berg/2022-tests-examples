<!DOCTYPE HTML>
<!--
Title:
Поведение карты

Description:
Поведение карты: Замедление скрол зума и линейка.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
smoke

Estimated time: 
480000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась корректно.
  На карте спан Санкт-Петербурга.
  На карте имеются контролы: масштабирования - "+/-", местоположения, кнопки "Найти", "Пробки", "Слои", кнопка разворачивания экрана.
  Справа в нижнем углу активна (окрашена желтым) кнопка линейки.

Step:
  Action:
  Кликнуть в любое место на карте.

  Expectation:
  В месте клика появляется белая круглая метка с серым контуром.

Step:
  Action:
  Кликнуть в другое место на карте на удалении от первой метки.

  Expectation:
  В месте клика появляется еще одна белая круглая метка с серым контуром, над которой появляется балун с расстоянием между метками.
  Между метками появляется прямая серая линия линейки.

Step:
  Action:
  Провести курсором по линии.
  Навести курсор на центр линии, зажать ЛКМ и переставить серую метку в сторону от линии.

  Expectation:
  Курсор меняется на палец, на линии к пальцу прилипает серая метка с хинтом с расстоянием от первой метки, при перемещении курсора данные в хинте меняются.
  В месте клика появляется еще одна круглая белая метка с сервым контуром, хинт пропадает, при перетаскивании метки линия разделилась на два отрезка, расстоянии между отрезками меняется и отражается в балуне у конечной метки.

Step:
  Action:
  Навести курсор на метку созданную на предыдущем шаге.
  Дабл-клик по указанной метке.

  Expectation:
  Курсор меняется на палец, появляется хинт с расстоянием от первой метки. Балун с расстоянием на последней метке не пропадает.
  Метка пропадает, линия измерителя перестраивается между двумя метками. Балун с расстоянием на последней метке не пропадает.

Step:
  Action:
  Кликнуть в крестик балуна с расстоянием на последней метке.

  Expectation:
  Метки измерения расстояний и линия измерения на карте пропадают.

Step:
  Action:
  Выставить на карте 4 метки линейки, кликом ЛКМ в разные места карты.

  Expectation:
  При каждом клике на карте появляется круглая белая метка с серым контуром.
  Начиная со второй метки между метками появляется прямая серая линия измерителя.
  Начиная со второй метки - появляется балун с расстоянием, который перемещается к крайней метке при выставлении 3 и 4 метки.

Step:
  Action:
  Кликнуть в крестик балуна с расстоянием на последней метке.

  Expectation:
  Появляется диалоговое окно удаления всех меток и подсказкой для удаления одной метки. В окне имеются кнопки "Да", "Нет".

Step:
  Action:
  Кликнуть на кнопку "Да" в диалоговом окне.

  Expectation:
  Элементы линейки пропали с карты, остальные элементы на карте без изменений.

Step:
  Action:
  Выполнить максимальный отзум карты скроллом мыши.

  Expectation:
  Скорость отзума замедленная, слои подгружаются также замедленно, но корректно: нет странных визуальных эффектов на карте.
  Карта не дрожит и не мигает цветами (небольшое дрожание карты при отзуме присутсвует).
  При отзуме постепенно меняется отрисовка карты (пропадает цветовая рельефность, подписи).

Step:
  Action:
  Выполнить максимальный зум карты скроллом мыши.

  Expectation:
  Скорость зума замедленная, слои подгружаются также замедленно, но корректно: нет странных визуальных эффектов на карте.
  Карта не дрожит и не мигает цветами (небольшое дрожание карты при отзуме присутсвует).
  При зуме постепенно меняется отрисовка карты: появляются подписи, рельефность, метки организаций - ПОИ, подписи дорог, иконки остановок, стрелки направления движений на некоторых дорогах.

Step:
  Action:
  Выполнить максимальный отзум карты скроллом на тачпаде.

  Expectation:
  Скорость отзума замедленная, слои подгружаются также замедленно, но корректно: нет странных визуальных эффектов на карте.
  Карта не дрожит и не мигает цветами (небольшое дрожание карты при отзуме присутсвует).
  При отзуме постепенно меняется отрисовка карты (пропадает цветовая рельефность, подписи).

Step:
  Action:
  Выполнить максимальный зум карты скроллом на тачпаде.

  Expectation:
  Скорость зума замедленная, слои подгружаются также замедленно, но корректно: нет странных визуальных эффектов на карте.
  Карта не дрожит и не мигает цветами (небольшое дрожание карты при отзуме присутсвует).
  При зуме постепенно меняется отрисовка карты: появляются подписи, рельефность, метки организаций - ПОИ, подписи дорог, иконки остановок, стрелки направления движений на некоторых дорогах.

Step:
  Action:
  Кликом в контрол масштабирования "-" максимально отзумится (пока кнопка "-" не перестанет быть активной).

  Expectation:
  Отзум работает корректно: нет странных визуальных эффектов на карте.
  Карта не дрожит и не мигает цветами.
  Нет заметных тормозов при масштабировании карты.
  При отзуме постепенно меняется отрисовка карты (пропадает цветовая рельефность, подписи).
  Скорость отзума выше, чем при скролах.

Step:
  Action:
  Кликом в контрол масштабирования "+" максимально призумится (пока кнопка "+" не перестанет быть активной).

  Expectation:
  Зум работает корректно: нет странных визуальных эффектов на карте.
  Карта не дрожит и не мигает цветами.
  Нет заметных тормозов при масштабировании карты.
  При зуме постепенно меняется отрисовка карты: появляются подписи, рельефность, метки организаций - ПОИ, подписи дорог, иконки остановок, стрелки направления движений на некоторых дорогах.
  Скорость зума выше чем при скролах, аналогична скорости отзума.
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>


    <script src="../../../helper.js"></script>

    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            ymaps = ym;

            var myMap = new ymaps.Map('map', {
                // Санкт-Петербург
                center: [59.93772, 30.313622],
                zoom: 10
            }, {
                backgroundVisible: false
            });

            myMap.behaviors
                // Отключаем часть включенных по умолчанию поведений:
                //  - drag - перемещение карты при нажатой левой кнопки мыши;
                //  - magnifier.rightButton - увеличение области, выделенной правой кнопкой мыши.
                    .disable(['drag', 'rightMouseButtonMagnifier'])
                // Включаем линейку.
                    .enable('ruler');

            // Изменяем свойство поведения с помощью опции:
            // изменение масштаба колесом прокрутки будет происходить медленно,
            // на 1/2 уровня масштабирования в секунду.
            myMap.options.set('scrollZoomSpeed', 0.5);

            addGrid(myMap);
            var log = new Log();

            log.info('Test script: Отключены поведения: драг и магнифайр. Включена линейка. Скорость зума уменьшена.');
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>
