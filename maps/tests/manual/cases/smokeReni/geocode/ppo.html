<!DOCTYPE HTML>
<!--
Title:
Поиск объектов на карте

Description:
Программный поиск кафе в текущей области карты.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
smoke

Estimated time:
180000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней. 

  Expectation:
  Карта отобразилась корректно.
  На карте спан Москвы. На спане карты метки по запросу "Кафе".
  На карте инпут ввода данных с введенным значением "Кафе".
  Под поисковым инпутом серп со сниппетами выдачи по запросу "Кафе".

Step:
  Action:
  Клик в первый сниппет серпа. 

  Expectation:
  Спан карты смещается.
  Открывается карточка организации кафе, с данными организации(наименование, оценка, время до закрытия, номер телефона/сайт, адрес, ближайшие станции метро), кнопками: "Как добраться", "Об организации", "Вызвать такси", "Исправить неточность".

Step:
  Action:
  Закрыть карточку организации кликом в крестик.

  Expectation:
  Карточка организации закрылась, спан карты без изменений.
  
Step:
  Action:
  Удерживая ЛКМ захватить карту и сместить спан карты.

  Expectation:
  Смещение спана корректное: нет миганий, заметных тормозов подгрузки, дерганий.
  После окончания смещения спана карты, на спане появляются новые метки по запросу "Кафе".

Step:
  Action:
  Клик в любу из меток на спане. 

  Expectation:  
  Спан карты может смещаться для открытия карточки.
  Открывается карточка организации кафе, с данными организации(наименование, оценка, время до закрытия, номер телефона/сайт, адрес, ближайшие станции метро), кнопками: "Как добраться", "Об организации", "Вызвать такси", "Исправить неточность".

Step:
  Action:
  Выполнить клик в инпут, продолжить ввод данных, ввести "на Тверской". Полное значение: "кафе на Тверской" 
  Клик в кнопку "Найти".

  Expectation:
  Во время ввода значения в инпут выпадает саджест с подсказками.
  Спан карты призумился к улице Тверской, на спане метки, под поисковым инпутом серп со сниппетами выдачи по запросу "кафе на Тверской".
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            //ymaps = ym;

            var myMap = new ymaps.Map('map', {
                center: [55.753994, 37.622093],
                zoom: 9,
                controls: ["fullscreenControl"]
            }, {
                backgroundVisible: false
            });
            addGrid(myMap);
            var log = new Log();
            log.info("Test case: ППО");

          //  alert(window.devicePixelRatio);
            __log__("Проверить автозум");

            // Создадим экземпляр элемента управления «поиск по карте»,
            // с установленной опцией провайдера данных для поиска по организациям.
            var searchControl = new ymaps.control.SearchControl({
                options: {
                    provider: 'yandex#search'
                }
            });

            myMap.controls.add(searchControl);

            // Программно выполним поиск кафе в текущей
            // прямоугольной области карты.
            searchControl.search('кафе');
        }
    </script>
</head>
<body>
<div id="map" style="height: 812px; width: 812px;"></div>
</body>
</html>