<!DOCTYPE HTML>
<!--
Title:
Контрол геолокации

Description:
Проверка контрола местоположения пользователя.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/
Перед проведением теста необходимо настроить браузер для запроса геоданных. В Google Chrome в настройках "Конфиденциальность и безопастность" в блоке "Геоданные" выставить флаг "Спрашивать разрешение на доступ".
При этом в списке разрешенных адресов вкладки "Геоданные" в подблоке "Разрешить" не должно быть URL адресов ...yandex.ru...Если URL адреса "yandex.ru" имеются удалите их, для корректного прохождения теста и появления запроса на определение местоположения.
Для точности воспроизведения теста выполните в режиме инкогнито, авторизовавшись под логином со стаффа.

Components:
smoke

Estimated time:
180000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней. 

  Expectation:
  Карта отобразилась корректно.
  На карте спан Москвы. 
  На карте слева сверху контрол местоположения - кнопка со стрелкой.

Step:
  Action:
  Навести курсор на кнопку.

  Expectation:
  Появляется хинт "Определить ваше местоположение".

Step:
  Action:
  Клик в контрол местоположения.

  Expectation:
  Появляется диалоговое окно о разрешении доступа к данным о вашем местоположении, с кнопками "разрешить", "блокировать". (конфигурация кнопок и диалогового окна может варьироваться в зависимости от браузера).
  
Step:
  Action:
  В появившемся окне разрешаем доступ к данным о геолокации.

  Expectation:
  Карта делает призум к области местоположения.
  На спане карты в центре появляется красная метка геолокации с буквой "Я".
  (местоположение метки геолокации может быть не точным)

Step:
  Action:
  Удерживая ЛКМ захватить карту и переместить спан карты за область геолокации.

  Expectation:
  Смещение спана корректное: нет миганий, заметных тормозов подгрузки, дерганий.

Step:
  Action:
  Клик в конрол местоположения.

  Expectation:
  Происходит возвращение спана к области местоположения, в центре спана метка геолокации с буквой "Я".
  (местоположение метки геолокации может быть не точным)
-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            //ymaps = ym;
            var myMap = new ymaps.Map('map', {
                center: [55.751574, 37.573856],
                zoom: 9,
                controls: ['geolocationControl']
            }, {
                backgroundVisible: false
            });
            addGrid(myMap);
            var log = new Log();
            log.info("Test case: click geolocationControl, check result");
        }
    </script>
</head>
<body>
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>