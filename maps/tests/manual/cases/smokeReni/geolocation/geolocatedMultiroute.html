<!DOCTYPE HTML>
<!--
Title:
Маршрут с точкой геолокации

Description:
Построение маршрута от точки местоположения.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
smoke

Estimated time:
150000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней. 

  Expectation:
  Карта отобразилась корректно на спане с местоположением. 
  В верхнем правом углу кнопка "Маршруты" с открытой панелью маршрутов в инпуте точки "А" - задан адрес местоположения.
  На спане карты красная метка "А" с балуном - адресом местоположения.
  Курсор в виде пальца с закрепленной к нему меткой точки "В".
  
Step:
  Action:
  Поставить в произвольном месте на карте метку "B".  
    
  Expectation:
  После выставления точки в инпут точки "B" проставлено значение с адресом.
  Спан карты призумился к маршруту на карте.
  На спане карты красная метка "А" с балуном - наименованием адреса местоположения, синяя метка "В" с балуном - адресом точки назначения.
  Между точками фиолетовая нитка маршрута. Также имеются альтернативные линии маршрута серого цвета.

Step:
  Action:
  Клик в крестик инпута точки "А" в маршрутной панели.
  
  Expectation:
  Из инпута точки "А" пропал адрес метоположения, но справа в инпуте появилась стрелка - местоположения.
  Маршрутные линии на карте пропали.
  На спане синяя точка "В" с балуном с адресом.
  При наведении на карту курсор в виде пальца с закрепленной к нему меткой точки "А".

Step:
  Action:
  Не выставляя точку "А" оттолкнуть спан карты зажатой ЛКМ в сторону за пределы точки местоположения.
  Клик в инпуте точки "А" в стрелку местоположения. 

  Expectation:
  Перемещение карты драгом корректное: нет странных визуальных эффектов на карте. 
  Карта не дрожит и не мигает цветами.
  Нет заметных тормозов при передвижении карты.
  После клика в стрелку местоположения - в инпут подставляется адрес местоположения, спан меняется на спан маршрута с точками "А" и "В".

-->
<html>
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            var myMap = new ymaps.Map('map', {
                center: [55.753994, 37.622093],
                zoom: 9,
                // Добавим кнопку для построения маршрутов на карту.
                controls: ['routeButtonControl']
            }, {
                backgroundVisible: false
            });

            var control = myMap.controls.get('routeButtonControl');

            // Зададим координаты пункта отправления с помощью геолокации.
            control.routePanel.geolocate('from');

            // Откроем панель для построения маршрутов.
            control.state.set('expanded', true);
        }
    </script>
</head>
<body style="position: relative; padding: 0; margin: 0;">
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>