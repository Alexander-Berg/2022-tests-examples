<!DOCTYPE html>
<!--
Title:
Объекты линии на карте

Description:
Объекты линии, статические и динамические, хинт и балун линий.
Памятка по терминам: https://wiki.yandex-team.ru/eva/testing/Projects/maps-api/

Components: 
smoke

Estimated time:
180000

Precondition:
Открыть ссылку ${currentPagePath}

Step:
  Action:
  Осмотреть карту и элементы на ней.

  Expectation:
  Карта отобразилась корректно.
  На карте спан Москвы.
  На карте ломаная белая линия с красной пунктирной линией по центру.
  Прямая желтая линия, расположенная за белой.

Step:
  Action:
  Навести курсор на белую ломаную линию.

  Expectation:
  При наведении курсора на линию курсор - палец, хинт не появляется.

Step:
  Action:
  Навести курсор на область желтой линии.

  Expectation:
  При наведении курсора на линию курсор - палец, появляется хинт "Я геообъект".

Step:
  Action:
  Выполнить клик в белую линию.

  Expectation:
  На месте клика появляется балун с текстом "Ломаная линия".
  У балуна нет кнопки закрытия.

Step:
  Action:
  Выполнить клик в желтую линию.

  Expectation:
  На месте клика появляется балун с текстом "Меня можно перетащить".
  У балуна есть кнопка закрытия - крестик.
  Балун белой линии пропадает.

Step:
  Action:
  Зажав ЛКМ на желтой линии перетащить линию на спане карты.

  Expectation:
  Линия захватывается курсором, перетаскивается.
  Балун открыт на линии, перемещается вместе с линией.

Step:
  Action:
  Зажав ЛКМ на белой линии попробовать перетащить линию на спане карты.

  Expectation:
  При зажатии ЛКМ происходит захват карты, линия не перемещается.
  При перемещениях происходит драг карты.
-->
<html lang="en">
<head>
    <title>2.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="../../../helper.js"></script>
    <script type=text/javascript>

        Api('init');

        function init(ymaps) {
            // Создаем карту.
            var myMap = new ymaps.Map("map", {
                center: [55.74794742, 37.45605745],
                zoom: 11
            }, {
                searchControlProvider: 'yandex#search', backgroundVisible: false
            });

            // Создаем ломаную, используя класс GeoObject.
           var myGeoObject = new ymaps.GeoObject({
                // Описываем геометрию геообъекта.
                geometry: {
                    // Тип геометрии - "Ломаная линия".
                    type: "LineString",
                    // Указываем координаты вершин ломаной.
                    coordinates: [
                        [55.80, 37.50],
                        [55.70, 37.40]
                    ]
                },
                // Описываем свойства геообъекта.
                properties:{
                    // Содержимое хинта.
                    hintContent: "Я геообъект",
                    // Содержимое балуна.
                    balloonContent: "Меня можно перетащить"
                }
            }, {
                // Задаем опции геообъекта.
                // Включаем возможность перетаскивания ломаной.
                draggable: true,
                // Цвет линии.
               strokeColor: ['#000',"#FFFF00"],
                // Ширина линии.
               strokeWidth: [18,13]
            });

            // Создаем ломаную с помощью вспомогательного класса Polyline.
            var myPolyline = new ymaps.Polyline([
                // Указываем координаты вершин ломаной.
                [55.80, 37.50],
                [55.80, 37.40],
                [55.70, 37.50],
                [55.70, 37.40]
            ], {
                // Описываем свойства геообъекта.
                // Содержимое балуна.
                balloonContent: "Ломаная линия"
            }, {
                // Задаем опции геообъекта.
                // Отключаем кнопку закрытия балуна.
                balloonCloseButton: false,
                // Цвет линии.
                strokeColor: "#0099FF",
                // Ширина линии.
                // Цвет линии - черная, белая и красная
                strokeColor: ["#000000","#FFF","#F00"],
                draggable: false,
                // Ширина линии.
                strokeWidth: [19,15,1],
                // Для третьей обводки задаем стиль
                strokeStyle: [0,0,'dash']
            });

            // Добавляем линии на карту.
            myMap.geoObjects
                    .add(myGeoObject)
                    .add(myPolyline);
            addGrid(myMap);
            var log = new Log();
            log.info('Test script: голубая линия - ломанная, проверить: неподвижная, прозрачная, балун без Х');
            log.info('Черная - двигающий геообъект, есть хинт и закрывающийся балун, сплошная заливка');
        }
        </script>
</head>
<body>
<div id="map" style="height: 512px; width: 512px;"></div>
</body>
</html>
