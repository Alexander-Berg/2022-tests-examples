plugins {
    id 'ru.yandex.realty.java-conventions'
}

description = 'realty-component-test-common'

configurations {
    testOutput
}

dependencies {
    api(project(':realty-common'))
    api(project(path: ':realty-common', configuration: 'testOutput'))
    api(project(':realty-extdata-core'))
    api(project(':realty-model'))
    api(project(path: ':realty-model', configuration: 'testOutput'))
    api('ch.qos.logback:logback-core:1.1.7')
    api("com.dimafeng:testcontainers-scala_${versions.scala_major_version}:0.40.2")
    api('com.github.tomakehurst:wiremock-jre8-standalone:2.27.0')
    api('com.ibm.icu:icu4j:4.8.1.1')
    api("com.typesafe.akka:akka-http-testkit_${versions.scala_major_version}:10.2.3")
    api("com.typesafe.akka:akka-testkit_${versions.scala_major_version}:${versions.akka_version}")
    api('jaxen:jaxen:1.1.3')
    api('jdom:jdom:1.0')
    api('org.codehaus.janino:janino:2.6.1')
    api('org.hamcrest:hamcrest-core:1.3')
    api('org.mockito:mockito-core:2.2.22')
    api("org.scalactic:scalactic_${versions.scala_major_version}:3.0.5")
    api("org.scalamock:scalamock_${versions.scala_major_version}:5.1.0")
    api('org.testcontainers:postgresql:1.16.2')
    api("org.typelevel:cats-kernel_${versions.scala_major_version}:2.5.0")
    api("org.typelevel:simulacrum-scalafix-annotations_${versions.scala_major_version}:0.5.4")
    api("ru.yandex.vertis.ydb:ydb-container_${versions.scala_major_version}:12.0.0") {
        exclude group: 'com.dimafeng', module: 'testcontainers-scala_2.12'
        exclude group: 'com.yandex.ydb', module: 'ydb-sdk-table'
        exclude group: 'org.testcontainers', module: 'testcontainers'
    }
    api('xom:xom:1.0')
    testImplementation("org.testcontainers:mysql:${versions.testcontainers_mysql_version}")
}

tasks.register('testsJar', Jar) {
    archiveClassifier = 'tests'
    from(sourceSets.test.output)
}

artifacts {
    testOutput testsJar
}


