// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`block_pathnames должен убрать блок, если url попадает в block_pathnames 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "ad2": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-2",
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`block_pathnames не должен убрать блок, если url не попадает в block_pathnames 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "ad1": Object {
      "block_pathnames": Array [
        "/test/",
      ],
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "type": "rtb",
        },
      ],
    },
    "ad2": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-2",
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`должен вернуть настройки рекламы без раскрытия refs 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "extParams": Object {
            "awaps_section": "29337",
          },
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`должен вернуть настройки рекламы с короткой записью без sources 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "extParams": Object {
            "awaps_section": "29337",
          },
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`должен вернуть пустой результат для неизвестного типа страницы 1`] = `
Object {
  "code": "index1",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {},
}
`;

exports[`должен обработать order у блоков 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "ad1": Object {
      "id": "f4fzzzxjyl",
      "order": Array [
        1,
        2,
      ],
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "type": "rtb",
        },
      ],
    },
    "ad2": Object {
      "id": "f4fzzzxjyl",
      "order": Array [
        0,
        2,
      ],
      "sources": Array [
        Object {
          "code": "R-A-148383-2",
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`должен пропустить блок с неправильным конфигом 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {},
}
`;

exports[`раскрытие refs должен вернуть настройки рекламы 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "key": "value",
      "reload": 45,
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "extParams": Object {
            "awaps_section": "29337",
          },
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`раскрытие refs должен вернуть настройки рекламы перетирая одинаковые ключи 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "key": "value",
      "reload": 45,
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "extParams": Object {
            "awaps_section": "29337",
          },
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`раскрытие refs должен вернуть настройки рекламы, когда указан одна только ссылка на блок 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "journal": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-11",
          "extParams": Object {
            "awaps_section": "29337",
          },
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`раскрытие refs должен вернуть настройки рекламы, раскрыв все refs 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "journal": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "extParams": Object {
            "awaps_section": "29337",
          },
          "native": true,
          "style": "margin:20px",
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`раскрытие refs должен вернуть пустой sources, если не найден указанный блок 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "journal": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [],
    },
  },
}
`;

exports[`серверный запросы direct должен подготовить запрос за данными 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {
      "c3:0": Object {
        "index": 0,
        "key": "c3",
        "method": "getStaticContextDirectJSON",
        "params": Object {
          "pageId": "151547",
        },
        "type": "direct",
      },
    },
    "rtb": Object {},
  },
  "requests": Array [
    Object {
      "index": 0,
      "key": "c3",
      "method": "getStaticContextDirectJSON",
      "params": Object {
        "pageId": "151547",
      },
      "type": "direct",
    },
  ],
  "settings": Object {
    "c3": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "groupKey": "c3",
          "method": "getStaticContextDirectJSON",
          "params": Object {
            "pageId": "151547",
          },
          "sections": Array [
            "premium",
            "direct",
          ],
          "type": "direct",
        },
      ],
    },
  },
}
`;

exports[`серверный запросы direct не должен дублировать запросы и одним groupKey 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {
      "special:0": Object {
        "index": 0,
        "key": "special",
        "method": "getStaticContextDirectJSON",
        "params": Object {
          "pageId": "151547",
        },
        "type": "direct",
      },
    },
    "rtb": Object {},
  },
  "requests": Array [
    Object {
      "index": 0,
      "key": "special",
      "method": "getStaticContextDirectJSON",
      "params": Object {
        "pageId": "151547",
      },
      "type": "direct",
    },
  ],
  "settings": Object {
    "c3": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "groupKey": "special",
          "method": "getStaticContextDirectJSON",
          "params": Object {
            "pageId": "151547",
          },
          "sections": Array [
            "premium",
            "direct",
          ],
          "type": "direct",
        },
      ],
    },
    "c4": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "groupKey": "special",
          "method": "getStaticContextDirectJSON",
          "params": Object {
            "pageId": "151547",
          },
          "sections": Array [
            "premium",
            "direct",
          ],
          "type": "direct",
        },
      ],
    },
  },
}
`;

exports[`серверный запросы rtb должен добавить общий partner-stat-id из experiments 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {
      "top:0": Object {
        "meta": Object {
          "index": 0,
          "key": "top:meta",
          "method": "getDirectS2S",
          "params": Object {
            "imp-id": "20",
            "pageId": "148790",
            "partner-stat-id": "123",
          },
          "type": "rtb",
        },
        "widget_settings": Object {
          "index": 0,
          "key": "top:widget_settings",
          "method": "getDirectWidgetSettings",
          "params": Object {
            "imp-id": "148790-20",
            "partner-stat-id": "123",
          },
          "type": "rtb",
        },
      },
    },
  },
  "requests": Array [
    Object {
      "index": 0,
      "key": "top:meta",
      "method": "getDirectS2S",
      "params": Object {
        "imp-id": "20",
        "pageId": "148790",
        "partner-stat-id": "123",
      },
      "type": "rtb",
    },
    Object {
      "index": 0,
      "key": "top:widget_settings",
      "method": "getDirectWidgetSettings",
      "params": Object {
        "imp-id": "148790-20",
        "partner-stat-id": "123",
      },
      "type": "rtb",
    },
  ],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "data": Object {
            "meta": Object {
              "method": "getDirectS2S",
              "params": Object {
                "imp-id": "20",
                "pageId": "148790",
              },
            },
            "widget_settings": Object {
              "method": "getDirectWidgetSettings",
              "params": Object {
                "imp-id": "148790-20",
              },
            },
          },
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`серверный запросы rtb должен добавить экспериментальный partner-stat-id 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {
      "top:0": Object {
        "meta": Object {
          "index": 0,
          "key": "top:meta",
          "method": "getDirectS2S",
          "params": Object {
            "imp-id": "20",
            "pageId": "148790",
            "partner-stat-id": "456",
          },
          "type": "rtb",
        },
        "widget_settings": Object {
          "index": 0,
          "key": "top:widget_settings",
          "method": "getDirectWidgetSettings",
          "params": Object {
            "imp-id": "148790-20",
            "partner-stat-id": "456",
          },
          "type": "rtb",
        },
      },
    },
  },
  "requests": Array [
    Object {
      "index": 0,
      "key": "top:meta",
      "method": "getDirectS2S",
      "params": Object {
        "imp-id": "20",
        "pageId": "148790",
        "partner-stat-id": "456",
      },
      "type": "rtb",
    },
    Object {
      "index": 0,
      "key": "top:widget_settings",
      "method": "getDirectWidgetSettings",
      "params": Object {
        "imp-id": "148790-20",
        "partner-stat-id": "456",
      },
      "type": "rtb",
    },
  ],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "data": Object {
            "meta": Object {
              "method": "getDirectS2S",
              "params": Object {
                "imp-id": "20",
                "pageId": "148790",
              },
            },
            "widget_settings": Object {
              "method": "getDirectWidgetSettings",
              "params": Object {
                "imp-id": "148790-20",
              },
            },
          },
          "type": "rtb",
        },
      ],
      "stat_id_by_exp": Object {
        "exp1": "456",
        "exp2": "789",
      },
    },
  },
}
`;

exports[`серверный запросы rtb должен подготовить запрос за данными 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {
      "top:0": Object {
        "meta": Object {
          "index": 0,
          "key": "top:meta",
          "method": "getDirectS2S",
          "params": Object {
            "imp-id": "20",
            "pageId": "148790",
            "partner-stat-id": "123",
          },
          "type": "rtb",
        },
        "widget_settings": Object {
          "index": 0,
          "key": "top:widget_settings",
          "method": "getDirectWidgetSettings",
          "params": Object {
            "imp-id": "148790-20",
            "partner-stat-id": "123",
          },
          "type": "rtb",
        },
      },
    },
  },
  "requests": Array [
    Object {
      "index": 0,
      "key": "top:meta",
      "method": "getDirectS2S",
      "params": Object {
        "imp-id": "20",
        "pageId": "148790",
        "partner-stat-id": "123",
      },
      "type": "rtb",
    },
    Object {
      "index": 0,
      "key": "top:widget_settings",
      "method": "getDirectWidgetSettings",
      "params": Object {
        "imp-id": "148790-20",
        "partner-stat-id": "123",
      },
      "type": "rtb",
    },
  ],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "R-A-148383-1",
          "data": Object {
            "meta": Object {
              "method": "getDirectS2S",
              "params": Object {
                "imp-id": "20",
                "pageId": "148790",
              },
            },
            "widget_settings": Object {
              "method": "getDirectWidgetSettings",
              "params": Object {
                "imp-id": "148790-20",
              },
            },
          },
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`эксперименты должен вернуть настройки рекламы без эксперимента 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "reload": 45,
      "sources": Array [
        Object {
          "code": "no-exp-code",
          "type": "rtb",
        },
      ],
    },
  },
}
`;

exports[`эксперименты должен вернуть настройки рекламы из эксперимента exp1 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "reload": 35,
      "sources": Array [
        Object {
          "code": "exp1-code",
          "type": "rtb1",
        },
      ],
    },
  },
}
`;

exports[`эксперименты должен вернуть настройки рекламы из эксперимента exp2 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "sources": Array [
        Object {
          "code": "exp2-code",
          "type": "rtb2",
        },
      ],
    },
  },
}
`;

exports[`эксперименты должен вернуть настройки рекламы из эксперимента exp3 1`] = `
Object {
  "code": "index",
  "data": Object {
    "direct": Object {},
    "rtb": Object {},
  },
  "requests": Array [],
  "settings": Object {
    "top": Object {
      "id": "f4fzzzxjyl",
      "reload": 50,
      "resize": true,
      "scrollReload": 1500,
      "sources": Array [
        Object {
          "code": Array [
            "R-A-148422-7",
            "R-A-148422-4",
          ],
          "type": "rtb",
        },
      ],
    },
  },
}
`;
