regexp_section:
  matcher:
    match_fsm:
      uri: '/((m)?search/)?jsonproxy(/.*)?'
  modules:
    - report:
        uuid: uuid2
        ranges: default
    - report:
        uuid: uuid1
        refers: uuid2
        ranges: default
    - antirobot_macro:
        nanny_snapshots:
          - service_id: production_antirobot_iss_prestable
            snapshot_id: ac07ac60230c0f233813e0e0f5104840dae88347
    - rewrite:
        actions:
          - regexp: "/(m)?search/(.*)"
            rewrite: /%2
    - stats_eater: {}
    - cachalot:
        collection: abc
        cacher:
          errordocument: {status: 200}
    - balancer2:
        attempts: 2
        timeout_policy:
          timeout: 1s
          by_name_policy:
            name: xxx
            strict: true
            allow_zero_weights: true
            unique_policy: {}
        weighted2: {}
        generated_proxy_backends:
          proxy_options:
            switched_backend_timeout: 123ms
            backend_read_timeout: 10s
            client_read_timeout: 8s
            backend_write_timeout: 12s
            client_write_timeout: 18s
            backend_timeout: 5s
            connect_timeout: 150ms
            keepalive_count: 0
          nanny_snapshots:
            - service_id: mobile_heroism
              snapshot_id: fb80faf52df0e452358e1344e88b8cff99089835
        on_error:
          errordocument:
            status: 504
