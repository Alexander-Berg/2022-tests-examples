---
regexp_path_section:
  pattern: '/s3/(expert|front-maps-static|vertis-frontend|lyceum|lyceum-admission|home-static|sendbernar|auth2|distribution|logoaas|bro-bg-store|lpc|beamlight|district|e7n|dealer|festival-static|ugc|home|yablogs-wysiwyg|twenty|edadeal-public-static|zen-lib|kinopoisk-desktop-www-static|contest|vda|for-media-terminal|for-media-terminal-numbers|for-media-terminal-compare|for-media-mediajams|kinopoisk-frontend|cult-marathon|tv-frontend|new-year-2018|quasar-ui|anytask|time|gnc|translate|trbro|e-pace|for-media-specprojects|locdoc|talents|yaplus-test|montserrat|rasp|taxi-front|maps-promo|afisha-frontend|meduza|ydo|ydo-test|zen-pubs-static|subscriptions|messenger-static|pay|direct-dna|staff-card|plcn|plcn-static|mapsapi-v3|home-beta|vh-static|travel-indexer|media-platform|afisha-tickets-frontend|chat|development|passport-auth-customs|pandora|fintech-icons|magic-qr|fintech|passport-static|ether-beta|ether-static|zen-misc|math-schbk-static|test-stories|kinopoisk-stories|music-stories|edu|sarah|edadeal-push-public)/(.*)?'
  modules:
    - report:
        uuid: 'yastatic_net_s3_expert_front-maps-static'
        ranges: 'default'
        matcher_map:
            'expert':
                match_fsm:
                    path: '/s3/expert.*'
            'front-maps-static':
                match_fsm:
                    path: '/s3/front-maps-static.*'
            'vertis-frontend':
                match_fsm:
                    path: '/s3/vertis-frontend.*'
            'lyceum':
                match_fsm:
                    path: '/s3/lyceum.*'
            'lyceum-admission':
                match_fsm:
                    path: '/s3/lyceum-admission.*'
            'home-static':
                match_fsm:
                    path: '/s3/home-static.*'
            'sendbernar':
                match_fsm:
                    path: '/s3/sendbernar.*'
            'auth2':
                match_fsm:
                    path: '/s3/auth2.*'
            'distribution':
                match_fsm:
                    path: '/s3/distribution.*'
            'logoaas':
                match_fsm:
                    path: '/s3/logoaas.*'
            'bro-bg-store':
                match_fsm:
                    path: '/s3/bro-bg-store.*'
            'lpc':
                match_fsm:
                    path: '/s3/lpc.*'
            'beamlight':
                match_fsm:
                    path: '/s3/beamlight.*'
            'district':
                match_fsm:
                    path: '/s3/district.*'
            'e7n':
                match_fsm:
                    path: '/s3/e7n.*'
            'dealer':
                match_fsm:
                    path: '/s3/dealer.*'
            'festival-static':
                match_fsm:
                    path: '/s3/festival-static.*'
            'ugc':
                match_fsm:
                    path: '/s3/ugc.*'
            'home':
                match_fsm:
                    path: '/s3/home.*'
            'yablogs-wysiwyg':
                match_fsm:
                    path: '/s3/yablogs-wysiwyg.*'
            'twenty':
                match_fsm:
                    path: '/s3/twenty.*'
            'edadeal-public-static':
                match_fsm:
                    path: '/s3/edadeal-public-static.*'
            'zen-lib':
                match_fsm:
                    path: '/s3/zen-lib.*'
            'kinopoisk-desktop-www-static':
                match_fsm:
                    path: '/s3/kinopoisk-desktop-www-static.*'
            'contest':
                match_fsm:
                    path: '/s3/contest.*'
            'vda':
                match_fsm:
                    path: '/s3/vda.*'
            'for-media-terminal':
                match_fsm:
                    path: '/s3/for-media-terminal.*'
            'for-media-terminal-numbers':
                match_fsm:
                    path: '/s3/for-media-terminal-numbers.*'
            'for-media-terminal-compare':
                match_fsm:
                    path: '/s3/for-media-terminal-compare.*'
            'for-media-mediajams':
                match_fsm:
                    path: '/s3/for-media-mediajams.*'
            'kinopoisk-frontend':
                match_fsm:
                    path: '/s3/kinopoisk-frontend.*'
            'cult-marathon':
                match_fsm:
                    path: '/s3/cult-marathon.*'
            'tv-frontend':
                match_fsm:
                    path: '/s3/tv-frontend.*'
            'new-year-2018':
                match_fsm:
                    path: '/s3/new-year-2018.*'
            'quasar-ui':
                match_fsm:
                    path: '/s3/quasar-ui.*'
            'anytask':
                match_fsm:
                    path: '/s3/anytask.*'
            'time':
                match_fsm:
                    path: '/s3/time.*'
            'gnc':
                match_fsm:
                    path: '/s3/gnc.*'
            'translate':
                match_fsm:
                    path: '/s3/translate.*'
            'trbro':
                match_fsm:
                    path: '/s3/trbro.*'
            'e-pace':
                match_fsm:
                    path: '/s3/e-pace.*'
            'for-media-specprojects':
                match_fsm:
                    path: '/s3/for-media-specprojects.*'
            'locdoc':
                match_fsm:
                    path: '/s3/locdoc.*'
            'talents':
                match_fsm:
                    path: '/s3/talents.*'
            'yaplus-test':
                match_fsm:
                    path: '/s3/yaplus-test.*'
            'montserrat':
                match_fsm:
                    path: '/s3/montserrat.*'
            'rasp':
                match_fsm:
                    path: '/s3/rasp.*'
            'taxi-front':
                match_fsm:
                    path: '/s3/taxi-front.*'
            'maps-promo':
                match_fsm:
                    path: '/s3/maps-promo.*'
            'afisha-frontend':
                match_fsm:
                    path: '/s3/afisha-frontend.*'
            'meduza':
                match_fsm:
                    path: '/s3/meduza.*'
            'ydo':
                match_fsm:
                    path: '/s3/ydo.*'
            'ydo-test':
                match_fsm:
                    path: '/s3/ydo-test.*'
            'zen-pubs-static':
                match_fsm:
                    path: '/s3/zen-pubs-static.*'
            'subscriptions':
                match_fsm:
                    path: '/s3/subscriptions.*'
            'messenger-static':
                match_fsm:
                    path: '/s3/messenger-static.*'
            'pay':
                match_fsm:
                    path: '/s3/pay.*'
            'direct-dna':
                match_fsm:
                    path: '/s3/direct-dna.*'
            'staff-card':
                match_fsm:
                    path: '/s3/staff-card.*'
            'plcn':
                match_fsm:
                    path: '/s3/plcn.*'
            'plcn-static':
                match_fsm:
                    path: '/s3/plcn-static.*'
            'mapsapi-v3':
                match_fsm:
                    path: '/s3/mapsapi-v3.*'
            'home-beta':
                match_fsm:
                    path: '/s3/home-beta.*'
            'vh-static':
                match_fsm:
                    path: '/s3/vh-static.*'
            'travel-indexer':
                match_fsm:
                    path: '/s3/travel-indexer.*'
            'media-platform':
                match_fsm:
                    path: '/s3/media-platform.*'
            'afisha-tickets-frontend':
                match_fsm:
                    path: '/s3/afisha-tickets-frontend.*'
            'chat':
                match_fsm:
                    path: '/s3/chat.*'
            'development':
                match_fsm:
                    path: '/s3/development.*'
            'passport-auth-customs':
                match_fsm:
                    path: '/s3/passport-auth-customs.*'
            'pandora':
                match_fsm:
                    path: '/s3/pandora.*'
            'fintech-icons':
                match_fsm:
                    path: '/s3/fintech-icons.*'
            'magic-qr':
                match_fsm:
                    path: '/s3/magic-qr.*'
            'fintech':
                match_fsm:
                    path: '/s3/fintech.*'
            'passport-static':
                match_fsm:
                    path: '/s3/passport-static.*'
            'zen-misc':
                match_fsm:
                    path: '/s3/zen-misc.*'
            'math-schbk-static':
                match_fsm:
                    path: '/s3/math-schbk-static.*'
            'test-stories':
                match_fsm:
                    path: '/s3/test-stories.*'
            'kinopoisk-stories':
                match_fsm:
                    path: '/s3/kinopoisk-stories.*'
            'music-stories':
                match_fsm:
                    path: '/s3/music-stories.*'
            'edu':
                match_fsm:
                    path: '/s3/edu.*'
            'sarah':
                match_fsm:
                    path: '/s3/sarah.*'
            'edadeal-push-public':
                match_fsm:
                    path: '/s3/edadeal-push-public.*'
    - shared:
        uuid: yastatic_net_s3_expert_front-maps-static
    - rewrite:
        actions:
            - regexp: '^(/.*)?/v-[^/a-zA-Z]+/(.*)(\\?.*)?$'
              rewrite: '%1/%2%3'
            - regexp: '/s3/([A-Za-z0-9\\-_]+)/(.*)'
              rewrite: '/%2'
            - regexp: '(.*)'
              rewrite: '%{url}'
              header_name: 'Host'
    - rewrite:
        actions:
            - regexp: '/s3/([A-Za-z0-9\\-_]+)/(.*)'
              rewrite: '%1.s3.yandex.net'
              header_name: 'Host'
    - response_headers:
        create:
            Cache-Control: 'public, max-age=31556952'
            Access-Control-Allow-Origin: '*'
            Timing-Allow-Origin: '*'
            Strict-Transport-Security: 'max-age=43200000; includeSubDomains;'
        create_func:
            Expires: 'time:+31556952s'
    - shared:
        uuid: 'yastatic_net_s3_expert_front-maps-static_common'
    - headers:
        delete:
          'authorization'
    - shared:
        uuid: 'yastatic_s3_cached_shared'
