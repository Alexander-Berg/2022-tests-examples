// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM mock-backend/mock-dispatcher.ts >>>

package com.yandex.xplat.testopithecus.payment.sdk

import com.yandex.xplat.common.*
import com.yandex.xplat.eventus.common.*
import com.yandex.xplat.testopithecus.common.*
import com.yandex.xplat.payment.sdk.*

public open class NotFoundHandler: HttpRequestHandler {
    open override fun handleRequest(request: HttpRequest): HttpResponse {
        return HttpResponse(500, mutableMapOf<String, String>(), ArrayBuffer(0))
    }

}

public fun createMockBackendDispatcher(cardDataDecryptor: CardDataDecryptor, sbpSupport: Boolean, jsonSerializer: JSONSerializer, delayMs: Int, sleepImpl: SyncSleep): HttpRequestHandler {
    val dispatcher = MockServerRequestDispatcher(NotFoundHandler())
    val model = MockTrustModel(BindingCardExtractor(cardDataDecryptor, jsonSerializer), sbpSupport)
    return MockServerDelayedRequestHandler(dispatcher.matchPathPrefix("trust", TrustRequestHandler(model, jsonSerializer)).matchPathPrefix("tus", TusRequestHandler(jsonSerializer)).matchPathPrefix("mobpayment", MobpaymentRequestHandler(model, jsonSerializer)).matchPathPrefix("diehard", DiehardRequestHandler(model, jsonSerializer)).matchPathPrefix("web", Verification3dsRequestHandler(model)).matchPathPrefix("yaoplata", YaOplataHandler(model, jsonSerializer)).matchPathPrefix("sbp_pay", SbpRequestHandler(model)).matchPathPrefix("nspk", NspkRequestHandler()), delayMs, sleepImpl)
}

