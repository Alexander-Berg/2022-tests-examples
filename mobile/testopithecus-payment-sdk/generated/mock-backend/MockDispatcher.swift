// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM mock-backend/mock-dispatcher.ts >>>

import Foundation

open class NotFoundHandler: HttpRequestHandler {
  @discardableResult
  open func handleRequest(_ request: HttpRequest) -> HttpResponse {
    return HttpResponse(500, YSMap<String, String>(), ArrayBuffer(0))
  }

}

@discardableResult
public func createMockBackendDispatcher(_ cardDataDecryptor: CardDataDecryptor, _ sbpSupport: Bool, _ jsonSerializer: JSONSerializer, _ delayMs: Int32, _ sleepImpl: SyncSleep) -> HttpRequestHandler {
  let dispatcher = MockServerRequestDispatcher(NotFoundHandler())
  let model = MockTrustModel(BindingCardExtractor(cardDataDecryptor, jsonSerializer), sbpSupport)
  return MockServerDelayedRequestHandler(dispatcher.matchPathPrefix("trust", TrustRequestHandler(model, jsonSerializer)).matchPathPrefix("tus", TusRequestHandler(jsonSerializer)).matchPathPrefix("mobpayment", MobpaymentRequestHandler(model, jsonSerializer)).matchPathPrefix("diehard", DiehardRequestHandler(model, jsonSerializer)).matchPathPrefix("web", Verification3dsRequestHandler(model)).matchPathPrefix("yaoplata", YaOplataHandler(model, jsonSerializer)).matchPathPrefix("sbp_pay", SbpRequestHandler(model)).matchPathPrefix("nspk", NspkRequestHandler()), delayMs, sleepImpl)
}

