// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM mock-server/mock-server-request-dispatcher.ts >>>

package com.yandex.xplat.testopithecus.payment.sdk

import com.yandex.xplat.common.*
import com.yandex.xplat.eventus.common.*
import com.yandex.xplat.testopithecus.common.*
import com.yandex.xplat.payment.sdk.*

public open class MockServerRequestDispatcher(private val notFoundRequestHandler: HttpRequestHandler): HttpRequestHandler {
    private val matchers: YSArray<MockServerRequestMatcher> = mutableListOf()
    open override fun handleRequest(request: HttpRequest): HttpResponse {
        for (handler in this.matchers) {
            if (handler.canHandleRequest(request)) {
                return handler.handleRequest(request)
            }
        }
        return this.notFoundRequestHandler.handleRequest(request)
    }

    open fun match(matcher: MockServerRequestMatcher): MockServerRequestDispatcher {
        this.matchers.add(matcher)
        return this
    }

    open fun matchPath(path: String, handler: HttpRequestHandler): MockServerRequestDispatcher {
        this.matchers.add(MockServerRequestMatchers.path(path, handler))
        return this
    }

    open fun matchPathPrefix(pathPrefix: String, handler: HttpRequestHandler): MockServerRequestDispatcher {
        this.matchers.add(MockServerRequestMatchers.pathPrefix(pathPrefix, handler))
        return this
    }

}

