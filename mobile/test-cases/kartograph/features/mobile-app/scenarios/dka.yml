components: dka
testing:
  - regress
platforms:
  - android

specs:
  Dont keep activities -  сворачивание/разворачивание на главном экране:
    - info: |
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - do: Запустить приложение
    - assert: Отображается главный экран приложения
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: Отображается главный экран приложения

    - tags:
        - assessors


  Dont keep activities -  сворачивание/разворачивание на экране Настроек:
    - info: |
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - do: Перейти в таб Настройки
    - assert: Отображаются настройки приложения
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: Отображаются настройки приложения

    - tags:
        - assessors


  Dont keep activities -  сворачивание/разворачивание на экране Галерея:
    - info: |
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - do: Перейти в таб Галерея
    - assert: Отображается экран Галерея
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: Отображается экран Галерея

    - tags:
        - assessors


  Dont keep activities -  сворачивание/разворачивание на экране Съемки:
    - info: |
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - do: Перейти в таб Съемка
    - do: Тап на "Снять маршрут"
    - assert: |
        Открывается экран Съемки
        Отображается картинка с камеры устройства
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: |
        Открывается экран Съемки
        Отображается картинка с камеры устройства

    - tags:
        - assessors


  Dont keep activities -  сворачивание/разворачивание во время съемки маршрута:
    - info: |
        Выданы все разрешения
        Пользователь авторизован
        Debug-панель > Environment > MapKit enviroment > testing
        Перезапустить приложение
        Debug-панель > Environment > Simulate location > On
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - do: Перейти в таб Настройки
    - do: Выключить настройку "Параллельно записывать видео"
    - assert: Тоглы настроек в правильном положение
    - do: Перейти в таб "Съемка"
    - do: Тап на "Съемка маршрута"
    - assert: Открывается экран съемки маршрута
    - do: Начать съемку и продолжать около ~20 сек
    - assert: |
        Нажата кнопка пуска
        "Настройки" и "Галерея" в навбаре меняются на количество фото и длину маршрута
        На экране отображается картинка с камеры устройства
    - do: Не выключая записи свернуть приложение в фон
    - do: Развернуть приложение
    - assert: |
        Открыт экран съемки
        Нажата кнопка пуска
        Запись видео продолжается
    - do: Остановить видео
    - do: Тап на кнопку "Галерея"
    - assert: |
        В разделе "Маршруты" появился новый маршрут
        Количество фото в маршруте соответствует количеству фото из счетчика на экране съемки

    - tags:
        - assessors


  Dont keep activities -  сворачивание/разворачивание во время съемки видео:
    - info: |
        Выданы все разрешения
        Пользователь авторизован
        Debug-панель > Environment > MapKit enviroment > testing
        Перезапустить приложение
        Debug-панель > Environment > Simulate location > On
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - do: Перейти в таб Настройки
    - do: Включить настройку "Параллельно записывать видео"
    - assert: Тоглы настроек в правильном положение
    - do: Перейти в таб "Съемка"
    - do: Тап на "Съемка маршрута"
    - assert: Открывается экран съемки маршрута
    - do: Начать съемку и продолжать около ~20 сек
    - assert: |
        Нажата кнопка пуска
        "Настройки" и "Галерея" в навбаре меняются на количество фото и длину маршрута
        На экране отображается картинка с камеры устройства
    - do: Не выключая записи свернуть приложение в фон
    - do: Развернуть приложение
    - assert: |
        Открыт экран съемки
        Нажата кнопка пуска
        Запись видео продолжается
    - do: Остановить видео
    - do: Тап на кнопку "Галерея" > Маршруты
    - assert: |
        В разделе "Маршруты" появился новый маршрут
        Количество фото в маршруте соответствует количеству фото из счетчика на экране съемки
    - do: Тап на кнопку "Галерея" > Видео
    - assert: |
            В разделе "Видео" появилось новое видео
            Длина видео больше 20 сек

    - tags:
        - assessors


  Dont keep activities -  выгрузка во время съемки видео:
    - info: |
        Выданы все разрешения
        Пользователь авторизован
        Debug-панель > Environment > MapKit enviroment > testing
        Перезапустить приложение
        Debug-панель > Environment > Simulate location > On
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - do: Перейти в таб Настройки
    - do: Включить настройку "Параллельно записывать видео"
    - assert: Тоглы настроек в правильном положение
    - do: Перейти в таб "Съемка"
    - do: Тап на "Съемка маршрута"
    - assert: Открывается экран съемки маршрута
    - do: Начать съемку и продолжать около ~20 сек
    - assert: |
        Нажата кнопка пуска
        "Настройки" и "Галерея" в навбаре меняются на количество фото и длину маршрута
        На экране отображается картинка с камеры устройства
    - do: Не выключая записи выгрузить приложение
    - do: Запустить приложение > Снять маршрут
    - assert: |
        Открыт экран съемки
        Нажата кнопка пуска
        Запись видео продолжается
    - do: Остановить видео
    - do: Тап на кнопку "Галерея" > Маршруты
    - assert: |
        В разделе "Маршруты" появился новый маршрут
        Количество фото в маршруте соответствует количеству фото из счетчика на экране съемки
    - do: Тап на кнопку "Галерея" > Видео
    - assert: |
        В разделе "Видео" появилось новое видео
        Длина видео больше 20 сек

    - tags:
        - assessors


  Dont keep activities -  прерывание выгрузки перезапуском:
    - estimatedTime: 6m
    - info: |
        Выданы все разрешения
        Пользователь авторизован
        Debug-панель > Environment > MapKit enviroment > testing
        Перезапустить приложение
        Debug-панель > Environment > Simulate location > On
        Включена функция Don’t keep activities/Вытеснять фоновые активности (Настройки устройства -> Параметры разработчика -> Приложения). На разных устройствах настройка может называться по-разному.
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/dka.jpg){title=Пример такой настройки}

    - info: Для кейса удобнее использовать медленный интернет
    - do: Перейти в таб Настройки
    - do: Выключить настройку "Автоматически выгружать файлы"
    - assert: Тоглы настроек в правильном положение
    - do: Перейти в таб Съемка
    - do: Тап на "Съемка маршрута"
    - assert: Открывается экран съемки
    - do: Снять маршрут длиной около 30 фото (ок 3 мин)
    - do: Перейти в таб Галерея > Маршруты
    - assert: В списке "Маршруты" появился новый маршрут в статусе "Ожидает отправки"
    - do: Тап на кнопку "Отправить"
    - do: При необходимости выбрать нужный тип сети для выгрузки
    - do: Во время выгрузки перезапустить приложение
    - assert: Открывается главный экран приложения
    - do: Перейти в таб Галерея > Маршруты
    - assert: Сверху раздела присутствует информационная панель с предупреждением "n маршрутов ожидает отправки" и кнопкой "Отправить"

    - tags:
        - assessors