components: gallery
testing:
  - regress

specs:
  Раздел Маршруты. Нет поездок:
    - info: Авторизоваться аккаунтом без маршрутов
    - do: Перейти в таб Галерея
    - assert: |
        Присутствуют разделы "Маршруты" и "Видео"
        Под названием раздела "Маршруты" есть счетчик фото, равный 0
    - do: Тап на "Маршруты"
    - assert: |
        Открыт раздел "Маршруты"
        Отображается заглушка "Пока нет снятых маршрутов"
        Есть кнопка "Снять маршрут"
    - do: Поменять ориентацию девайса
    - assert: |
        Верстка не поехала
        Кнопка "Снять маршрут" продолжает отображаться

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - smoke


  Раздел Маршруты. UI:
    - info: |
        Авторизоваться аккаунтом c готовыми маршрутами
        Девайс в вертикальной ориентации
    - do: Перейти в таб Галерея
    - assert: Присутствуют разделы "Маршруты" и "Видео"
    - do: Тап на "Маршруты"
    - assert: |
        Открыт раздел "Маршруты"
        Отображается список из маршрутов
        В списке есть серверные маршруты в статусе "Обрабатывается"/"Опубликовано"
        В списке могут быть локальные поездки в статусе "Ожидает выгрузки"/"Выгружается"/"Обрабатывается"
        Список отсортирован по времени съемки (более новые маршруты находятся выше)
        Список можно скроллить
        У каждого маршрута есть превью
    - do: Повернуть девайс в горизонтальную ориентацию
    - assert: |
        Открыт раздел маршруты
        Список маршрутов отсортирован по времени съемки (более новые маршруты находятся выше)
        Список можно скроллить
        У каждого маршрута есть превью
    - do: Сменить тему в настройках девайса
    - do: Развернуть приложение
    - assert: |
        Открыт раздел маршруты
        Список маршрутов отсортирован по времени съемки (более новые маршруты находятся выше)
        Список можно скроллить
        У каждого маршрута есть превью

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - mrc


  Раздел Маршруты. Общее количество фото:
    - info: Авторизоваться аккаунтом c готовыми маршрутами
    - do: Перейти в таб Галерея
    - assert: |
        Открывается Галерея
        Присутствуют разделы "Маршруты" и "Видео"
        Под заголовком раздела Маршруты есть счетчик с общим количеством всех сделанных фото
    - do: Запомнить количество фото
    - do: Перейти в таб Создать
    - assert: |
        Под аватаркой и приветствием есть запись с количеством снимков
        Число совпадает с количеством фото раздела "Маршруты"
    - do: Тап на "Съемка Маршрута"
    - do: Тап на кнопку "Галерея" в нижнем навбаре
    - assert: |
        Открывается Галерея
        Присутствуют разделы "Маршруты" и "Видео"
        Под заголовком раздела Маршруты количество фото аналогично

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - mrc


  Раздел маршруты. Оффлайн с серверными поездками:
    - do: Переустановить приложение
    - do: Авторизоваться аккаунтом с готовыми маршрутами
    - do: Перейти в таб Галерея
    - assert: |
        Открывается Галерея
        Присутствуют разделы Маршруты и Видео
    - do: Тап на Маршруты
    - assert: |
        Открыт раздел Маршруты
        Отображается список из серверных маршрутов
    - do: Включить на устройстве авиврежим
    - assert: |
        Через некоторое время ~30 сек все маршруты скрылись
        Отображается заглушка "Пока нет снятых маршрутов"
    - do: Включить интернет на устройстве
    - assert: Все серверные маршруты снова отображаются

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Раздел Маршруты. Выход по Back:
    - info: Кейс только для Android
    - do: Перейти в таб Галерея
    - assert: |
        Открывается Галерея
        Присутствуют разделы Маршруты и Видео
    - do: Тап на Маршруты
    - assert: |
        Открыт раздел Маршруты
        Отображается список из маршрутов
    - do: Выйти из раздела по хардовой кнопке Back
    - assert: Происходит возрат в Галерею
    - do: Перейти в таб Создать
    - do: Тап на Съемка Маршрута
    - do: Тап на кнопку Галерея в нижнем навбаре
    - assert: |
        Открывается Галерея
        Присутствуют разделы Маршруты и Видео
    - do: Тап на Маршруты
    - assert: |
        Открыт раздел Маршруты
        Отображается список из маршрутов
    - do: Выйти из раздела по хардовой кнопке Back
    - assert: Происходит возрат в Галерею

    - platforms:
        - android
    - tags:
        - assessors

