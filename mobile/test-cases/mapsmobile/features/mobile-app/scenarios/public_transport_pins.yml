components: public_transport_pins
testing:
  - regress
tags:
  - assessors

specs:
  Проверка отображения слоя транспорта:
    - info: |
        Установить зум > 14
        Открыть главный экран приложения
    - do: Выключить эксперимент `service_architecture` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: Тап на таб Транспорт
    - assert: |
        На карте отображаются метки общественного транспорта
        Таб транспорта активен
        Изменилось цветовое оформление подложки
    - do: |
        Перезапустить приложение с выгрузкой из памяти
    - assert: |
        Открыт главный экран
        Таб транспорта активен
        Метки транспорта отображаются на карте
    - do: |
        Тап на таб Транспорт
    - assert: |
        Слой Транспорта неактивен
        На карте не отображается слой транспорта
        Изменилось цветовое оформление подложки
    - do: |
        Изменить спан карты на город, где нет живых меток ОТ
    - do: |
        Тап на таб Транспорт
    - assert: |
        Слой Транспорта переключается по тапу на таб

    - platforms:
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - newbie

  Открытие карточки маршрута ОТ при переходе из карточки остановки:
    - info: |
        Открыт главный экран приложения
        На спане отображается город с остановками Общественного Транспорта (ОТ) и с метками ОТ
    - do: Тап на остановку ОТ
    - assert: |
        На карте отображаются живые метки маршрутов, которые проходят через данную остановку
        Отображается мини-карточка остановки ОТ
    - do: Раскрыть карточку остановки (свайпом вверх или тапом по мини-карточке)
    - assert: Отображается полная карточка остановки
    - do: Тап по любому маршруту в карточке остановки
    - assert: |
        Отображается линия маршрута
        Отображается мини-карточка выбранного маршрута
        Может присутствовать кнопка "Другие рейсы маршрута" с возможностью изменить рейс (отображается не во всех карточках)
        Карта фокусируется на метке ближайшего транспорта, но не движется за меткой
    - do: Раскрыть карточку маршрута ОТ (свайпом вверх или тапом по мини-карточке)
    - assert: Отображается полная карточка маршрута ОТ

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - kotlin
    - tags:
        - use_map
        - newbie

  Открытие карточки маршрута ОТ тапом на живую метку на карте:
    - info: |
        Открыт главный экран приложения
        Для прохождения кейса необходимо, чтобы показывалась карта города с остановками Общественного Транспорта (ОТ) и с метками ОТ
        Таб Транспорт выключен
    - do: Тап на контрол слоев
    - do: Тап на слой "Движущийся транспорт"
    - assert: |
        Контрол слоя стал синим цветом
        (iOS) Фон иконки закрашен
        На карте отображаются разноцветные пины общественного транспорта
    - do: Тап на карте на метку движущегося транспорта
    - assert: |
        Отображается линия маршрута
        Карта фокусируется на метке ближайшего транспорта и движется за меткой
        Открыта карточка ОТ (на планшете карточка раскрыта полностью, последний шаг можно пропустить)
        Отображается кнопка "Другие рейсы маршрута" с возможностью изменить рейс (отображается не во всех карточках)
    - do: Раскрыть карточку маршрута ОТ свайпом вверх или тапом по миникарточке
    - assert: Отображается полная карточка маршрута ОТ

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - kotlin
    - tags:
        - use_map
        - newbie

  Одновременная работа слоев Пробки и Транспорт:
    - info:
        Пробки выключены
        Таб Транспорт выключен
        Установлен зум > 11 (самый ближний 21)
        Отображается главный экран приложения на спане Москвы
    - do: Тап на контролл пробок
    - assert:
        Контролл пробок активен
        Кнопка пробочного слоя отображает текущий балл пробок
        На карте отображается пробочный слой
    - do: Тап на таб Транспорт
    - assert:
        На карте отображаются метки общественного транспорта поверх линий пробок
        Слой транспорта активен
        Пробки включены
    - do: Тап по любой живой метке общественного транспорта
    - assert:
        Открывается миникарточка маршрута
        Слой пробок включён
        На карте отображается линия маршрута
    - do: Тап по контроллу пробок
    - assert: |
        Контролл пробок выключен
        На карте больше не отображается пробочный слой

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - use_map


  Одновременная работа слоев Парковки и Транспорт:
    - info:
        Слой парковок выключен
        Таб Транспорт выключен
        Установить зум > 15 (самый ближний 21)
        Отображается главный экран приложения
    - do: Тап на контролл слоёв
    - assert: Отображается меню слоёв
    - do: Тап на Парковки
    - assert: Кнопка Парковки активна
    - do: Закрыть меню слоёв
    - assert: |
        Отображается главный экран приложения
        Слой парковок активен
        Синим цветом на карте отображаются области, где возможна парковка
        Красным цветом отображаются области где парковка запрещена
        На карте отображаются информационные пины (Стоимость парковки)
    - do: Тап на таб Транспорт
    - assert:
        Слой транспорта активен
        Слой парковок активен
        На карте отображаются метки ОТ вместе с парковками
        Цветовое оформление подложки изменено

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - use_map

  Отсутствие отображения меток ОТ во время поиска:
    - info : Включен слой ОТ
    - do: Тап на таб Поиск
    - assert: Открыта форма поиска с названиями категорий, а также поисковым полем
    - do: Тап по названию категории. Например, Где поесть.
    - assert: |
        Метки ОТ на карте не отображаются
        На карте отмечены пины поисковой выдачи

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map

  Отображение меток ОТ на экране ведения маршрута ОТ:
    - info: |
        Включен слой ОТ
        Девайс в вертикальной ориентации
    - do: Построить произвольный маршрут и выбрать маршрут ОТ
    - assert: Отображается блок выбора вариантов маршрута
    - do:  Тап Посмотреть на карте
    - assert: |
        Открыт экран деталей маршрута ОТ
        На экране присутствуют метки ОТ
        Слой ОТ включен
    - do: Тап Поехали
    - assert: |
        Отображается экран ведения маршрута ОТ
        На экране присутствуют метки ОТ
        Слой ОТ включен
    - do:  Сменить ориентацию устройства
    - assert: |
        Элементы не съехали и не пропали
        На экране присутствуют метки ОТ
        Слой ОТ включен

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - newbie

  Отображение остановок и меток ОТ на маршруте при разных зумах:
    - do: Тап на остановку ОТ
    - assert: |
        Пин остановки поднялся
        Цвет пина не изменился
        Открылась карточка остановки
        На карте отображается живые метки транспорт проходящие через остановку
    - do: Тап на сниппет маршрута в карточке остановки
    - assert: |
        Выделился ближайший к остановке пин ОТ
        На карте отображается линия маршрута данного ОТ
        На линии маршрута отображаются другие пины ОТ с тем же номером
        Пины остановок вдоль маршрута идентичны цвету маршрута
        Отображаются крупные пины остановок находящиеся вдоль маршрута
        Цвет остановок соответствует цвету линии маршрута
        Остановки не относящиеся к маршруту отображаются полупрозрачными
    - do: Установить 16-19 зум
    - assert: |
        Отображаются пины остановок крупного размера
        Отображаются живые метки ОТ с номером маршрута
        Остановки не относящиеся к маршруту отображаются полупрозрачными
    - do:  Установить 14-15 зум
    - assert: |
        Отображаются живые метки ОТ без номера маршрута
        У выделенного пина ОТ отображается номер маршрута
        Пины остановок отображаются вдоль маршрута и уменьшились до точек
    - do: Установить 13 зум
    - assert: |
        Отображаются живые метки ОТ без номера маршрута
        У выделенного пина ОТ отображается номер маршрута
        Пины остановок не отображаются
    - do:  Установить 11-12 зум
    - assert: |
        Пины остановок не отображаются
        Пины ОТ уменьшились до точек
        Выделенный пин ОТ отображается как и раньше
    - do: Установить 1-10 зум
    - assert: |
        Пины ОТ более не отображаются
        Отображается линия маршрута

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map

  Проверка перехода в карточку ОТ маршрута из деталей маршрута:
    - info: Отображается экран выбора ОТ-маршрута
    - do: Тап на Посмотреть на карте в маршруте которого присутствует ОТ
    - assert: Отображается экран обзора маршрута
    - do: Свернуть экран обзора маршрута
    - do: Тап на движущуюся метку ОТ, номер которого присутствует в выбранном ОТ-маршруте
    - assert: |
        Детальная информация о маршруте скрылась
        Отображается карточка транспорта с активным пином остановки, с которой рекомендуют уезжать на этом транспорте в деталях маршрута
    - do: Изменить ориентацию устройства
    - assert: Отображается карточка транспорта с активным пином остановки, с которой рекомендуют уезжать на этом транспорте в деталях маршрута
    - do: Закрыть карточку маршрута ОТ
    - assert: Отображается экран обзора маршрута
    - do: Изменить ориентацию устройства
    - assert: Отображается экран обзора маршрута

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Отображение слоя Транспорт после сворачивания приложения:
    - info: |
        Приложение запущено,
        Открыт главный экран приложения,
    - do: Выключить эксперимент `service_architecture` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: Тап на таб 'Транспорт'
    - assert: |
        Таб 'Транспорт' стал активен (синяя заливка фона),
        На карте отображаются живые метки ОТ
    - do: Свернуть приложение
    - assert: Приложение свернулось и отображается в диспетчере приложений
    - do: Развернуть приложение
    - assert: |
        Открыт главный экран приложения,
        Таб 'Транспорт' активен (синяя заливка фона),
        На карте отображаются живые метки ОТ

    - platforms:
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map

  Выключение слоя Движущийся транспорт:
    - info: |
        Включен слой транспорта (Тап на таб Транспорт)
        Отображается главный экран приложения
        На спане отображаются живые метки маршрутов
        В настройках указаны все виды транспорта для отображения (Тап на конролл слоёв -> Движущийся транспорт -> выделены все виды)
    - do: Тап на контролл слоёв
    - assert: Открыто меню слоёв
    - do: Тап на Движущийся транспорт
    - assert: Слой становится неактивным
    - do: Закрыть меню слоёв
    - assert: |
        Отображается главный экран приложения
        Слой транспорта неактивен
        Живые метки маршрутов на карте не отображаются

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready

  Открытие карточки метки ОТ:
    - info: |
        Открыт главный экран приложения на спане Москвы
        Установить зум > 14 (самый ближний 21)
        Девайс в вертикальной ориентации
        ММП определено
        Включён слой ОТ (Тап на таб Транспорт)
    - do: Тап на движущуюся метку ОТ на карте
    - assert: |
        Метка выделена
        На карте отображается линия маршрута данного транспорта
        Метки других маршрутов пропали
        Открылась миникарточка данного маршрута
    - do: Раскрыть миникарточку до полной свайпом вверх
    - assert: |
        Отображается полная карточка маршрута, в которой присутствует:
        - тип и номер маршрута (напр., Автобус 144)
        - начальная и конечная остановка
        - кнопка "Другие рейсы маршрута" с возможностью изменить рейс (отображается не во всех карточках)
        - иконка типа маршрута
        - время прибытия к следующей остановке
        - количество остановок
        - кнопка "Сообщить об ошибке"
        - кнопка "Сохранить" с возможностью добавления маршрута в Закладки
        - кнопка "Расписание"
    - do: Свернуть карточку маршрута свайпом вниз
    - do: Тап на другую метку ОТ того же маршрута
    - assert: |
        Отображается миникарточка другого транспорта того же маршрута
        Метки других маршрутов не отобразились
    - do: Сменить ориентацию девайса
    - assert: |
        Карточка отображается в горизонтальной ориентации
        Метка ОТ все еще выделена
    - do: Свернуть карточку маршрута
    - assert: |
        Карточка маршрута свернута до микро
        Линия и метки ОТ остались на карте
    - do: Закрыть карточку маршрута
    - assert: |
        Карточка закрылась
        Отображается главный экран с картой
        На карте отображаются живые метки маршрутов
    - do: Тап на стрелку "Назад" в нижней левой части экрана
    - assert: Слой ОТ выключился Метки ОТ не отображаются

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
        - kotlin
    - testing:
        - lite_acceptance_maps
    - tags:
        - use_map
        - assessors
        - mapkit_ready
        - newbie


  Включение слоя Движущийся транспорт через контрол слоев:
    - info: |
        Выключен эксперимент service_architecture
        Отображается главный экран приложения на спане Москвы
        Таб Транспорт выключен
    - do: Тап по контролу слоев
    - assert: Открылось меню слоев
    - do: Тап на Движущийся транспорт
    - assert: |
        Иконка транспорта активна
        На видимой части карты отображаются живые метки
    - do: Закрыть меню слоев
    - assert: |
        Открыт главный экран приложения
        Таб Транспорт активен
        Отображаются живые метки маршрутов
    - do: Выключить таб Транспорт
    - assert: Слой транспорта выключен
    - do: Открыть спан города без без живых меток (напр., на спане Украины)
    - do: Тап по контролу слоев
    - assert: Открылось меню слоев
    - do: Тап на Движущийся транспорт
    - assert: |
        Поп-ап "Здесь транспорт не работает" не отображается
        Иконка транспорта активна
        (iOS) Фон иконки закрашен
        Подложка изменилась
        Живые метки маршрутов на текущем спане не отображаются

    - platforms:
        - android
    - integration_run:
        - mapkit
        - kotlin
    - tags:
        - use_map
        - assessors
        - mapkit_ready
        - newbie


  Открытие карточки маршрута из поиска:
    - do: Тап по строке поиска
    - assert: Открылся экран поиска
    - do: Произвести поиск по маршруту ОТ
    - assert: |
        Отображается линия маршрута
        Отображается миникарточка выбранного маршрута
        На карте отображаются метки только данного маршрута
    - do: Раскрыть карточку маршрута ОТ свайпом вверх или тапом по миникарточке
    - assert: |
        Отображается полная карточка маршрута ОТ
        Отображается кнопка "Другие рейсы маршрута" с возможностью изменить рейс (отображается не во всех карточках)
        Присутствует блок со списком остановок на маршруте
    - do: Тап на блок с другими рейсами
    - assert: Открывается всплывающий экран с вариантами движения для данного маршрута

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
        - kotlin
    - tags:
        - use_map
        - assessors
        - mapkit_ready
        - newbie


  Открытие карточки маршрута ОТ по url-схеме:
    - info: Приложение не запущено
    - do: Перейти по url-схеме yandexmaps://maps.yandex.ru/?masstransit[routeId]=2036924082
    - assert: |
        Приложение запущено
        Отображается карточка маршрута ОТ
    - do: Свернуть карточку остановки свайпом вниз
    - assert: Отображается карточка в состоянии микро

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
        - kotlin
    - tags:
        - use_map
        - assessors
        - mapkit_ready


  Одновременная работа слоев Пробки и Транспорт на экране Слои:
    - info: |
        Отображается главный экран приложения на спане Москвы
        Слои пробок и транспорта не включены
    - do: Тап на контролл слоёв
    - assert: Отображается меню слоёв
    - do: Тап на Пробки
    - assert: |
        На видимой части карты появились цветные линии пробок
        Светофор окрашен в соответствующий цвет:
        - 0-3 — зеленый цвет
        - 4-6 — желто-оранжевый
        - 7-10 — красный
    - do: Тап на Движущийся транспорт
    - assert: |
        На карте отображаются метки ОТ поверх линий пробок
        Слой транспорта активен
        Изменилось цветовое оформление подложки

    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - use_map


  Одновременная работа слоев Парковки и Транспорт на экране Слои:
    - info: |
        Отображается главный экран приложения на спане Москвы
        Слои парковок и транспорта не включены
    - do: Тап на контролл слоёв
    - assert: Отображается меню слоёв
    - do: Тап на Парковки
    - assert: |
        Кнопка парковочного слоя активна
        (iOS) Фон иконки закрашен
        На видимой части карты отображается парковочный слой
        Синим цветом на карте отображаются области, где возможна парковка
        Красным цветом отображаются области где парковка запрещена,
        На карте отображаются информационные пины (Стоимость парковки)
    - do: Тап на Движущийся транспорт
    - assert: |
        Слой транспорта активен
        На карте отображаются метки общественного транспорта вместе с парковками
        (iOS) Фон иконки закрашен
        Изменилось цветовое оформление подложки

    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - use_map


  Отсутствие отображения меток ОТ на экране выбора маршрута:
    - info: |
        Android: Включен эксперимент: yandexmaps://add_exp?transport_with_jams,
        Включен слой ОТ,
        Девайс в вертикальной ориентации
    - do: Построить произвольный автомаршрут
    - assert: |
        Открыт экран выбора маршрута,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ
    - do: Тап на метку остановки
    - assert: |
        Открылась карточка остановки,
        Метки ОТ отображаются на карте,
        В выборе слоев отсутствует слой ОТ
    - do: Закрыть карточку остановки
    - assert: |
        Отображается экран выбора маршрута,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ
    - do: Сменить ориентацию девайса
    - assert: |
        Элементы не съехали и не пропали,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ
    - do: Проверить шаги 1-4 для Вело маршрутов и на Такси
    - assert: |
        При построенном вело маршруте и на такси метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ

    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
    - tags:
        - use_map

  Отсутствие отображения меток ОТ во время ведения:
    - info: |
        Android: Включен эксперимент yandexmaps://add_exp?transport_with_jams,
        Включен слой ОТ,
        Девайс в вертикальной ориентации
    - do: Построить произвольный автомаршрут
    - assert: |
        Открыт экран выбора маршрута,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ
    - do: Тап 'Поехали'
    - assert: |
        Открыт экран ведения по маршруту,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ
    - do: Тап на метку остановки
    - assert: |
        Открылась карточка остановки, ведение по маршруту продолжается,
        Метки ОТ отображаются на карте,
        В выборе слоев отсутствует слой ОТ
    - do: Закрыть карточку остановки
    - assert: |
        Отображается экран ведения по маршруту,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ
    - do: Сменить ориентацию девайса
    - assert: |
        Элементы не съехали и не пропали,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ
    - do: Проверить шаги 1-5 для Вело маршрутов
    - assert: |
        Элементы не съехали и не пропали,
        Метки ОТ не отображаются,
        В выборе слоев отсутствует слой ОТ

    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
    - tags:
        - use_map

  Отображение меток ОТ на экране ведения пешего маршрута:
    - info: |
        1. Включен слой ОТ
        2. Девайс в вертикальной ориентации
    - do: Построить произвольный маршрут и выбрать пеший маршрут
    - assert: |
        Отображается блок выбора вариантов маршрута,
        На экране отображаются метки ОТ
        В выборе слоев присутствует слой ОТ
    - do: Тап 'Начать'
    - assert: |
        Отображается экран ведения пешего маршрута,
        На экране отображаются метки ОТ
        В выборе слоев присутствует слой ОТ
    - do: Сменить ориентацию устройства
    - assert: |
        Элементы не съехали и не пропали
        На экране отображаются метки ОТ
        В выборе слоев присутствует слой ОТ
        (Android) Кнопка слоя Транспорт скрывается

    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
    - tags:
        - use_map

  Применение фильтра к отображаемому ОТ:
    - info: |
        Отображается главный экран приложения
        Включен слой ОТ
        Пользователь авторизован
        У пользователя в избранном есть все четыре вида транспорта
    - do: Тап по контролу слоев
    - assert: |
        Отображается меню слоев
    - do: Тап по многоточию/выпадающему списку около Движущийся транспорт
    - assert: |
        Отображаются виды Транспорта
        По умолчанию включены все чекбоксы
    - do: Выключить один из видов транспорта и тап готово/крестик
    - assert: |
        Выключенный вид транспорта не отображается на карте
    - do: Перезагрузить приложение с выгрузкой из кэша
    - assert: |
        Слой транспорта включен
        Выключенный вид транспорта не отображается на карте
    - do: Включить чек-бокс Мой транспорт
    - assert: |
        На карте не отображается избранный транспорт выключенного типа
    - do: Выключить слой ОТ
    - assert: |
        Метки ОТ не отображаются
    - do: Тап по контролу слоев
    - assert: |
        Отображается меню слоев
    - do: Тап по многоточию/выпадающему списку около Движущийся транспорт
    - assert: |
        Напротив выключенного ранее вида транспорта отсутствует чекбокс

    - testing:
        - acceptance_maps
    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - use_map
        - newbie

  Проверка отсутствия возможности выключить отображение всех видов ОТ:
    - info: |
        Отображается главный экран приложения
        Включен слой ОТ
    - do: Тап по контролу слоев
    - assert: |
        Отображается меню слоев
    - do: Тап по многоточию/выпадающему списку около Движущийся транспорт
    - assert: |
        Отображаются виды Транспорта
        По умолчанию включены все чекбоксы
    - do: Выключить все виды транспорта и тап Готово/Крестик
    - assert: Отображается меню слоев
    - do: Перейти в фильтр транспорта
    - assert: |
        Android - включено отображение всех видов транспорта
        iOS - Единственный не выключенный ранее вид транспорта все еще включен

    - testing:
        - acceptance_maps
    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Просмотр отключенного маршрута ОТ:
    - info: |
        Отключено отображение одного из вида Транспорта в меню слоев
        Отображается главный экран приложения
    - do: Включить слой Транспорт
    - assert: |
        На карте не отображается выбранный вид ОТ
    - do: Перейти в карточку выключенного типа ОТ (через поиск/остановку ОТ)
    - assert: |
        Отображается карточка маршрута ОТ
        На карте отображаются пины данного маршрута ОТ
    - do: Закрыть карточку маршрута ОТ
    - assert: |
        На карте не отображается выбранный вид ОТ

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Кнопка вызова Такси в теле карточек остановок:
    - info: |
        iOS: Включен эксперимент stops_full_card_with_taxi
        ММП пользователя не рядом с остановкой общественного транспорта(расстояние от ММП до остановки больше 100 м.)
        Подменить ММП можно на Android через Mock Location, на iOS через Debug-Panel -> Routes -> Enter your route
        Установлено Яндекс.Go
    - do: Тап на пин остановки общественного транспорта, который дальше 100 м. от ММП
    - assert: |
        Открылась миникарточка остановки общественного транспорта
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
    - do: Развернуть карточку до полной
    - assert: |
        Отображается полная карточка
        В альтернативах маршрутов кнопка такси отсутствует
        Кнопка такси со стоимостью поездки отображается в блоке ниже
        В аction-баре отсутствует кнопка Такси с стоимостью поездки (если видно кнопку Такси в теле карточки)
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Отображается полная карточка в горизонтальной ориентации
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
        (iOS) В теле карточки присутствует кнопка вызова Такси с стоимостью поездки
    - do: Тап на кнопку вызова Такси
    - assert: |
        Открывается приложение Яндекс.Go
        Строится маршрут Такси

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - assessors


  Кнопка вызова Такси в теле карточек станций ж/д:
    - info: |
        ios: Включен эксперимент stops_full_card_with_taxi
        ММП пользователя рядом со станцией ж/д (расстояние от ММП до остановки не больше 100 м.)
        Подменить ММП можно на Android через Mock Location, на iOS через Debug-Panel -> Routes -> Enter your route
        Установлено Яндекс.Go
    - do: Тап на пин остановки станции ж/д, который ближе 100 м. от ММП
    - assert: |
        Открылась миникарточка станции ж/д
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
    - do: Развернуть карточку до полной
    - assert: |
        Отображается полная карточка
        В альтернативах маршрутов кнопка такси отсутствует
        Кнопка такси со стоимостью поездки отображается в блоке ниже
        В аction-баре отсутствует кнопка Такси с стоимостью поездки (если видно кнопку Такси в теле карточки)
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Отображается полная карточка в горизонтальной ориентации
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
        (Android) В теле карточки отсутствует кнопка вызова Такси
        (iOS) В теле карточки присутствует кнопка вызова Такси с стоимостью поездки
    - do: Тап на кнопку вызова Такси
    - assert: |
        Открывается приложение Яндекс.Go
        Строится маршрут Такси

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - assessors


  Кнопка вызова Такси в теле карточек станции метро:
    - info: |
        ios: Включен эксперимент stops_full_card_with_taxi
        ММП пользователя рядом со станцией метро(расстояние от ММП до остановки не больше 100 м.)
        Подменить ММП можно на Android через Mock Location, на iOS через Debug-Panel -> Routes -> Enter your route
        Установлено Яндекс.Go
    - do: Тап на пин станции метро
    - assert: |
        Открылась миникарточка станции метро
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
    - do: Развернуть карточку до полной
    - assert: |
        Отображается полная карточка
        В альтернативах маршрутов кнопка такси отсутствует
        Кнопка такси со стоимостью поездки отображается в блоке ниже
        В аction-баре отсутствует кнопка Такси с стоимостью поездки (если видно кнопку Такси в теле карточки)
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Отображается полная карточка в горизонтальной ориентации
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
        (Android) В теле карточки отсутствует кнопка вызова Такси
        (iOS) В теле карточки присутствует кнопка вызова Такси с стоимостью поездки
    - do: Тап на кнопку вызова Такси
    - assert: |
        Открывается приложение Яндекс.Go
        Строится маршрут Такси

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - assessors


  Кнопка вызова Такси в теле карточек остановок с экспериментом открытия в вебвью:
    - info: |
        iOS: Включен эксперимент stops_full_card_with_taxi
        Включен эксперимент taxi_open_webview с значением Web_view_always_open
        ММП пользователя не рядом с остановкой общественного транспорта(расстояние от ММП до остановки больше 100 м.)
        Подменить ММП можно на Android через Mock Location, на iOS через Debug-Panel -> Routes -> Enter your route
    - do: Тап на пин остановки общественного транспорта, который дальше 100 м. от ММП
    - assert: |
        Открылась миникарточка остановки общественного транспорта
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
    - do: Развернуть карточку до полной
    - assert: |
        Отображается полная карточка
        В альтернативах маршрутов кнопка такси отсутствует
        Кнопка такси со стоимостью поездки отображается в блоке ниже
        В аction-баре отсутствует кнопка Такси с стоимостью поездки (если видно кнопку Такси в теле карточки)
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Отображается полная карточка в горизонтальной ориентации
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
        (iOS) В теле карточки присутствует кнопка вызова Такси с стоимостью поездки
    - do: Тап на кнопку вызова Такси
    - assert: |
        Открывается вебвью Такси
        Строится маршрут Такси

    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Кнопка вызова Такси в теле карточек станций ж/д с экспериментом открытия в вебвью:
    - info: |
        ios: Включен эксперимент stops_full_card_with_taxi
        Включен эксперимент taxi_open_webview с значением Web_view_always_open
        ММП пользователя не рядом со станцией ж/д(расстояние от ММП до остановки больше 100 м.)
        Подменить ММП можно на Android через Mock Location, на iOS через Debug-Panel -> Routes -> Enter your route
    - do: Тап на пин станции ж/д, который дальше 100 м. от ММП
    - assert: |
        Открылась миникарточка станции ж/д
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
    - do: Развернуть карточку до полной
    - assert: |
        Отображается полная карточка
        В альтернативах маршрутов кнопка такси отсутствует
        Кнопка такси со стоимостью поездки отображается в блоке ниже
        В аction-баре отсутствует кнопка Такси с стоимостью поездки (если видно кнопку Такси в теле карточки)
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Отображается полная карточка в горизонтальной ориентации
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
        (Android) В теле карточки отсутствует кнопка вызова Такси
        (iOS) В теле карточки присутствует кнопка вызова Такси с стоимостью поездки
    - do: Тап на кнопку вызова Такси
    - assert: |
        Открывается вебвью Такси
        Строится маршрут Такси

    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Кнопка вызова Такси в теле карточек станции метро с экспериментом открытия в вебвью:
    - info: |
        ios: Включен эксперимент stops_full_card_with_taxi
        Включен эксперимент taxi_open_webview с значением Web_view_always_open
        ММП пользователя не рядом со станцией метро(расстояние от ММП до остановки больше 100 м.)
        Подменить ММП можно на Android через Mock Location, на iOS через Debug-Panel -> Routes -> Enter your route
    - do: Тап на пин станции метро, который дальше 100 м. от ММП
    - assert: |
        Открылась миникарточка станции метро
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
    - do: Развернуть карточку до полной
    - assert: |
        Отображается полная карточка
        В альтернативах маршрутов кнопка такси отсутствует
        Кнопка такси со стоимостью поездки отображается в блоке ниже
        В аction-баре отсутствует кнопка Такси с стоимостью поездки (если видно кнопку Такси в теле карточки)
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Отображается полная карточка в горизонтальной ориентации
        В аction-баре присутствует кнопка вызова Такси с стоимостью поездки
        (Android) В теле карточки отсутствует кнопка вызова Такси
        (iOS) В теле карточки присутствует кнопка вызова Такси с стоимостью поездки
    - do: Тап на кнопку вызова Такси
    - assert: |
        Открывается вебвью Такси
        Строится маршрут Такси

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Эксперимент с обновленной карточкой маршрута для живых меток ОТ с карты:
    - info: |
        Включить эксперимент new_transport_vehicle_card
        Устройство в вертикальной ориентации
        Включить таб Транспорт
    - do: Тап на живую метку маршрута на карте
    - do: Развернуть карточку маршрута до полной
    - assert: |
        Открыта полная карточка маршрута
        В карточке присутствует таб Обзор
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Открыта полная карточка маршрута
        В карточке продолжает отображаться таб Обзор
    - do: Закрыть карточку маршрута
    - assert: Отображается главный экран приложения
    - do: Тап на поисковую строку
    - do: Произвести поиск по маршруту
    - assert: |
        Открыта полная карточка маршрута
        В карточке отсутствует таб Обзор

    - platforms:
        - ios
    - tags:
        - assessors


  Эксперимент с обновленной карточкой маршрута для живых меток ОТ из карточки остановки:
    - info: |
        Включить эксперимент new_transport_vehicle_card
        Устройство в вертикальной ориентации
        Включить таб Транспорт
    - do: Тап на пин остановки на карте
    - assert: Открыта карточка остановки с расписанием маршрутов
    - do: Тап на маршрут, имеющий живое расписание (например 2 мин.)
    - do: Развернуть карточку маршрута до полной
    - assert: |
        Открыта полная карточка маршрута
        В карточке присутствует таб Обзор
    - do: Закрыть карточку маршрута
    - assert: Открыта карточка остановки с расписанием маршрутов
    - do: Открыть карточку маршрута без живого расписания (например каждые 10 мин.)
    - do: Развернуть карточку маршрута до полной
    - assert: |
        Открыта полная карточка маршрута
        В карточке отсутствует таб Обзор

    - platforms:
        - ios
    - tags:
        - assessors


  Включение слоя Движущийся транспорт при перезаходе в сервис Транспорта:
    - info: |
        Для Android: Включен эксперимент service_architecture
        Отображается главный экран приложения
    - do: Тап на таб Транспорт
    - assert: |
        - Отображается экран сервиса Транспорт
        - Отображается контрол слоев и пробок
        - Таббар не отображается
    - do: Тап на кнопку слоев
    - do: Выключить слой Движущийся транспорт тапом на пункт
    - assert: Пункт Движущийся транспорт не активен
    - do: Закрыть меню слоев
    - assert: |
        Отображается экран сервиса Транспорт
        Живые метки ОТ на карте не отображаются
    - do: Тап на кнопку возвращения назад
    - assert: Отображается главный экран приложения
    - do: Тап на таб Транспорт
    - assert: |
        Отображается экран сервиса Транспорт
        На карте отображаются живые метки ОТ
    - do: Тап на кнопку слоев
    - assert: |
        Отображается экран слоёв
        Пункт Движущийся транспорт активен

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Включение слоя Движущийся транспорт через меню слоев, если включен эксперимент с сервисом Транспорт:
    - info: |
        Для Android: Включен эксперимент service_architecture
        Отображается главный экран приложения
    - do: Тап на кнопку слоев
    - assert: Отображается меню слоев
    - do: Тап на пункт Движущийся транспорт
    - assert: Пункт Движущийся транспорт активен
    - do: Закрыть меню слоев
    - assert: |
        Экран сервиса Транспорт не отображается
        Отображается главный экран приложения
        На карте отображаются живые метки ОТ

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Сохранение настроек движущегося транспорта при перезаходе в сервис Транспорта:
    - info: |
        Для Android: Включен эксперимент service_architecture
        Отображается главный экран приложения
    - do: Тап на таб Транспорт
    - assert: |
        - Отображается экран сервиса Транспорт
        - Отображается контрол слоев и пробок
        - Таббар не отображается
    - do: Тап на кнопку слоев
    - do: Тап на выпадающий список в пункте Движущийся транспорт
    - do: Оставить включенными 2 любых вида транспотра
    - do: Тап на Готово
    - do: Закрыть экран слоев
    - assert: |
        Отображается экран сервиса Транспорт
        На карте отображаются живые метки ОТ выбранного ранее
    - do: Тап на кнопку возвращения назад
    - assert: Отображается главный экран приложения
    - do: Тап на таб Транспорт
    - do: Тап на кнопку слоев
    - assert: |
        Отображается экран слоев
        В пункте Движущийся транспорт отображаются те виды транспорта, что были выбраны ранее

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отображение живых меток водного транспорта (эксперимент water):
    - info:
        Отображается главный экран приложения
        Включен слой "Движущийся транспорт"
    - do: Открыть Настройки > Debug-Panel > Various > Debug Water Mode > Water
    - do: Перезапустить приложение
    - do: Открыть спан г. Москва
    - do: Тап на кнопку зума "+", до появления живых меток водного транспорта на карте
    - assert: На карте отображаются живые метки водного транспорта

    - platforms:
        - ios
    - tags:
        - assessors


  Отображение кнопки Такси в карточках ОТ:
    - info: Девайс в вертикальной ориентации
    - do: Тап на пин остановки ОТ/станции метро/жд станции
    - assert: |
        Открыта миникарточка остановки ОТ/станции метро/жд станции
        В action-баре отображается кнопка заказа такси
    - do: Раскрыть карточку
    - assert: Кнопка Такси переместились в тело карточки
    - do: Сменить ориентацию девайса
    - assert: |
        Кнопка Такси отсутствует в теле карточки
        Кнопка Такси отображается в action-баре карточки

    - platforms:
        - android
    - tags:
        - assessors
        - use_map


  Отображение живых меток водного транспорта (эксперимент ferry):
    - info:
        Отображается главный экран приложения
        Включен слой "Движущийся транспорт"
    - do: Открыть Настройки > Debug-Panel > Various > Debug Water Mode > Ferry
    - do: Перезапустить приложение
    - do: Открыть спан г. Москва
    - do: Тап на кнопку зума "+", до появления живых меток водного транспорта на карте
    - assert: На карте отображаются живые метки водного транспорта

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
