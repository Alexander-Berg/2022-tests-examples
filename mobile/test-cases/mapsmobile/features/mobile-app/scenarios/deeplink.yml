components: deeplink
testing:
  - regress
import-steps:
  - ../../features/mobile-app/steps/common.yml

specs:

  Переход в приложение по кнопке На карте из Я.Поиска (приложение не установлено):
    - info:  Кейс не доступен для прохождения на планшете
    - do: В браузере (Safari, Yandex или Chrome) на сайте yandex.ru поискать Макдоналдс в России)
    - assert:  Отображается поисковая выдача по запросу.
    - do: На странице поисковой выдачи тап по кнопке 'На карте' или по превью карты
    - assert:  Открылась веб версия Яндекс.Карт На карте отображается пины с результатами запроса Отображаются кнопки масштабирования и определения ММП
    - do: Тап на пин
    - assert: |
        Открывается мини-карточка организации Внизу находятся три кнопки: 'Позвонить', 'Маршрут', 'Сайт' Под карточкой находится кнопка 'Открыть в приложении Карты'
        Если кнопка отсутствует - необходимо очистить cookies для maps.yandex.ru
    - do: Тап 'Открыть в приложении Карты
    - assert: |
        Происходит редирект в стор на страницу Яндекс.Карты

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Разворачивание SEO-ссылок:
    - info: |
        Кейс проходится только на RC или Store сборке
        Яндекс.Карты установлены и не запущены
    - do: Вставить https://yandex.ru/maps/213/moscow/?ll=37.620393%2C55.75396&spn=0.641442%2C0.466439&z=10&l=sat в адресную строку мобильного Браузера
    - do: Перейти в мобильную версию БЯК
    - do: Тап на "Поиск мест и адресов"
    - do: Тап на "Открыть" в приложении карты
    - assert: |
        Произошел переход из браузера в приложении
        В приложении отображается результат ссылки

    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
    - tags:
        - newbie


  Проверка работы ссылок аппметрики:
    - info: |
         Проверяем, что ссылки аппметрики работают правильно.
         Приложение установлено и не запущено.
         Проверять на сборке со стора или TF
    - do: |
        Открыть в Safari ссылку: https://redirect.appmetrica.yandex.com/serve/1033597222417082058?rtt=mt&rtext=55.734044%2C37.589508~55.763699%2C37.604991
        или https://4.redirect.appmetrica.yandex.com/maps/?rtt=mt&rtext=55.734044%2C37.589508~55.763699%2C37.604991&appmetrica_tracking_id=1033597222417082058
    - assert: Происходит редирект, ссылка в строке браузера изменилась
    - do: Не дожидаясь перехода в AppStore, Тап по адресной строке в браузере
    - assert: Строка в браузере выделена, новая страница не загружается Произошел переход в AppStore
    - do: Вернуться в Safari и скопировать получившуюся ссылку
    - assert: |
        Примерный вид новой ссылки: https://4.redirect.appmetrica.yandex.com/maps/?rtt=mt&rtext=55.734044%2C37.589508~55.763699%2C37.604991&appmetrica_tracking_id=1033597222417082058&yandex_uid_ru=2669920891573121232%3B211996e7985c2402c538a495373cef770d93e153%3B1588853117&yandex_ru_com_redirect)
    - do: Вставить ссылку в приложение Заметки и выполнить переход по данной ссылке
    - assert: Открывается приложение с построенным маршрутом

    - platforms:
      - ios
    - tags:
      - assessors
    - integration_run:
      - kotlin


  Проверка работы URL с пустым path:
    - info: |
        Проверяем, что URL'ы с пустым path обрабатываются корректно
        Карты установлены и не запущены. В устройстве создана заметка с ссылкой: https://maps.yandex.ru/?text=%D0%B1%D0%B0%D1%82%D1%83%D1%82%D0%BD%D1%8B%D0%B9%20%D0%BF%D0%B0%D1%80%D0%BA%20%D0%BD%D0%B5%D0%B1%D0%BE&source=wizbiz_new_map_single&z=14&ll=37.511972%2C55.808699&sctx=CAAAAAEAa9WuCWnPQkD%2FPuPCgeBLQJP8iF%2BxhuQ%2Faw2l9iLa3T8CAAAAAQIBAAAAAAAAAAHa%2BNkIdBe6TdUAAAABAACAPwAAAAAAAAAA&oid=1373163389&ol=biz
    - do: Перейти к заметке с ссылкой
    - assert: Открыта заметка с тапабельной ссылкой из описания
    - do: Тап по ссылке
    - assert: Запущены Яндекс.Карты Открыта карточка организации Батутный парк Небо

    - platforms:
      - ios
      - android
    - integration_run:
        - kotlin
    - tags:
        - assessors


  Проверка отображения отложенного диплинка:
    - info: |
         Проверка отложенного диплинка осуществляется только на пользовательской бета версии приложения из Play Маркета.
         Приложение Я.Карты не установлено
         Открыть браузер
    - do: Ввести в адресную строку браузера ссылку https://redirect.appmetrica.yandex.com/serve/386160541426523568 и Тап перейти
    - assert: |
        Открывается Play Маркет На экране отображается страница приложения Я.карты Отображается кнопка Установить
        Если ранее не было запрошено участие в бета-тестировании приступить к следующему шагу
        Если активирован режим тестировщика пропустить следующий шаг
    - do: Прокрутить вниз nна плашке с названием Стать бета-тестировщиком тап на Присоединиться
    - assert: В основном описании приложения выходит сообщение о регистрации
    - do: Тап по кнопке установить
    - assert: Начался процесс установки приложения После установки отобразятся две кнопки Удалить и Открыть
    - do: Тап по открыть
    - assert: |
        Открывается приложение Я.Карты
        При запуске интроскрины не отображаются
        Отображается полная карточка организации Torro Grill

    - platforms:
        - android


  Отображение топонима улицы с пробками после диплинка в приложение:
    - info: |
        Приложение Я.карты установлено и не запущено
        Отображается моб. браузер с главной станицей яндекс
        Кейс недоступен для прохождения на iPad
        (IOS) Прохождение на TF/Store сборке
    - do: |
        Перейти по урлу в МЯК
        https://yandex.ru/maps/-/CCUuJIbkLDgeo&utm_medium=maps-touch-phone&utm_source=serp&z=14
    - assert: |
        Приложение Я.карты запущено
        На спане карты отображается улица Фридриха Энгельса
        Отображается карточка топонима
    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
    - integration_run:
        - kotlin


  Отображение топонима здания после диплинка в приложение:
    - info: |
        Приложение Я.карты установлено и не запущено
        Отображается моб. браузер с главной страницей яндекс
        Кейс недоступен для прохождения на iPad
    - do: |
        Перейти по урлу в МЯК
        https://yandex.ru/maps/213/moscow/house/ulitsa_lva_tolstogo_16/Z04Ycw9nSUwEQFtvfXtycnVlbQ%3D%3D/?ll%3D37.587093%252C55.733969%26portal%3D0%26source%3Dwizgeo%26utm_medium%3Dmaps-touch-phone%26utm_source%3Dserp%26z%3D17
    - assert: |
        Приложение Я.карты запущено
        На спане карты отображается улица Льва Толстого 16 г. Москва
        Отображается миникарточка выбранного топонима

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - tags:
        - assessors


  Переход в приложение по кнопке Маршрут из браузерной версии карт (Автомобильный маршрут):
    - info: |
        Приложения Я.карты установлено
        ММП в Москве
        При устанволенной dev-сборке будет редиректить в store
    - do: |
        Перейти по урлу в МЯК
        На iOS: https://4.redirect.appmetrica.yandex.com/maps.yandex.ru/?utm_source=serp&utm_medium=org_wizard&utm_campaign=map_button&appmetrica_tracking_id=1033597222417082058&rtt=auto&rtext=~55.744796%2C37.566278
        На Android: https://redirect.appmetrica.yandex.com/serve/529194066114583717?utm_source=serp&utm_medium=org_wizard&utm_campaign=map_button&rtt=auto&rtext=~55.744796%2C37.566278
    - assert: |
        Запустилось приложение Я.карты
        Отображается экран выбора маршрута
        Построен автомобильный маршрут от текущего местоположения до организации из условия
        (Если приложение не установлено, то открывается стор)
    - do: |
        Повторить шаги для ОТ маршрута
        На iOS: https://4.redirect.appmetrica.yandex.com/maps.yandex.ru/?utm_source=serp&utm_medium=org_wizard&utm_campaign=map_button&appmetrica_tracking_id=1033597222417082058&rtt=mt&rtext=~55.744796%2C37.566278
        На Android: https://redirect.appmetrica.yandex.com/serve/529194066114583717?utm_source=serp&utm_medium=org_wizard&utm_campaign=map_button&rtt=mt&rtext=~55.744796%2C37.566278
    - assert: |
        Запустилось приложение Я.карты
        Отображается экран выбора маршрута
        Построен ОТ маршрут от текущего местоположения до организации из условия
        (Если приложение не установлено, то открывается стор)
    - do: |
        Повторить шаги для пешего маршрута
        На iOS: https://4.redirect.appmetrica.yandex.com/maps.yandex.ru/?utm_source=serp&utm_medium=org_wizard&utm_campaign=map_button&appmetrica_tracking_id=1033597222417082058&rtt=pd&rtext=~55.744796%2C37.566278
        На Android: https://redirect.appmetrica.yandex.com/serve/529194066114583717?utm_source=serp&utm_medium=org_wizard&utm_campaign=map_button&rtt=pd&rtext=~55.744796%2C37.566278
    - assert: |
        Запустилось приложение Я.карты
        Отображается экран выбора маршрута Построен пеший маршрут от текущего местоположения до организации из условия
        (Если приложение не установлено, то открывается стор)

    - tags:
        - assessors
    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - integration_run:
        - kotlin


  Отображение сайта в Chrome Custom Tabs:
    - info: |
        На устройстве браузер Chrome выбран браузером по-умолчанию.
        Яндекс браузер не установлен.
        Если браузера на устройстве не установлен, то установить
        Я.карты запущены
        Отображается главный экран приложения
    - attach: ["Открытие сайта организации"]
    - assert: |
        Если у организации один сайт, то отображается страница сайта в Chrome Custom Tabs
        Если у организации несколько сайтов, то отображается список сайтов организации (Перейти к следующему шагу)
    - do: Тап по одному из сайтов
    - assert: Отображается страница сайта в Chrome Custom Tabs

    - platforms:
      - android
    - tags:
      - assessors


  Отображение сайта в Yandex Custom Tabs:
    - info: |
        На устройстве браузер Yandex не выбран браузером по-умолчанию.
        Если браузер на устройстве не установлен, то установить
        Я.Карты запущены. Отображается главный экран приложенияnДля проверки нужна организация с сайтом.
    - do: Тап на пин организации
    - assert: |
        На карте поднятый пин и точки входа (если присутствуют)
        Отображается миникарточка организации.
    - do: Раскрыть карточку организации
    - assert: Отображается полная карточка организации
    - do: Тап по Сайт
    - assert: Отображается список сайтов организации
    - do: Тап по одному из сайтов
    - assert: Отображается страница сайта в Yandex Custom Tabs

    - platforms:
      - android
    - testing:
      - acceptance_maps
    - tags:
      - assessors
      - use_map


  Отображение сайта организации в Safari Custom Tabs:
    - info: |
        Я.карты запущены
        Отображается главный экран приложения
    - do: Тап по poi организации с сайтом
    - assert: Отображается миникарточка организации
    - do: Тап по карточке организации
    - assert: Отображается полная карточка организации
    - do: Тап по Сайт
    - assert: |
        Отображается список сайтов организации
        Если у организации только один сайт, то откроется страница сайта в Safari Custom Tabs
    - do: Тап по одному из сайтов
    - assert: Отображается страница сайта в Safari Custom Tabs

    - platforms:
      - ios
    - testing:
      - acceptance_maps
    - tags:
        - assessors
        - use_map


  Сброс состояния при написании фидбека на организацию и переходе по диплинку (Другое):
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
        Открыта полная карточка организации
    - do: Тап на 'Исправить неточность/Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность'
        Отображается название организации, адрес, пункты: Неправильная информация, Закрыто или не существует, Исправить местоположение и входы и Другое
    - do: Тап Другое
    - assert: |
        Открывается экран Другое
        Кнопка отправки фидбека задизейблена
    - do: С помощью приложения чтения QR кода считать сгенерированный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - integration_run:
        - kotlin


  Переход в AppStore по кнопке Подробнее на Яндекс из Apple Maps поиска организации (приложение не установлено):
    - info: |
        Приложение Яндекс.Карты не установлено, загружено приложение Apple Maps.
    - do: Тап в поисковое поле 'Поиск места или адреса'
    - assert:  Фокус перешел в поисковое поле Открылась системная клавиатураnn
    - do: Ввести поисковый запрос, например 'Столовая', и Тап Найти
    - assert:  Показались пины результатов поиска Внизу открыт список карточек организаций
    - do: Тап на один из результатов поиска в списке результатов
    - assert:  Открылась карточка организации
    - do: Свайп карточку вверх и проскроллить ее до кнопки 'Подробнее на Яндекс'
    - assert:  Отображается кнопка 'Подробнее на Яндекс' (не во всех организация присутствует)
    - do: Тап по кнопке 'Подробнее на Яндекс'
    - assert:  Открылась страница приложения Яндекс.Карты в AppStore

    - platforms:
      - ios
    - tags:
      - assessors


  Переход в AppStore по кнопке Открыть Яндекс из Apple Maps поиска организации (приложение не установлено):
    - info: |
        Приложение Яндекс.Карты не установлено, загружено приложение Apple Maps.
    - do: Тап в поисковое поле 'Поиск места или адреса'
    - assert:  Фокус перешел в поисковое поле Открылась системная клавиатураnn
    - do: Ввести поисковый запрос, например 'Столовая', и Тап Найти
    - assert:  Показались пины результатов поиска Внизу открыт список карточек организаций
    - do: Тап на один из результатов поиска в списке результатов
    - assert:  Открылась карточка организации
    - do: Свайп карточку вверх и проскроллить ее до кнопки 'Что говорят люди' - 'Открыть Яндекс'
    - assert:  Отображается кнопка 'Что говорят люди' - 'Открыть Яндекс'
    - do: Тап по кнопке 'Что говорят люди' - 'Открыть Яндекс'
    - assert:  Открылась страница приложения Яндекс.Карты в AppStore

    - platforms:
      - ios
    - tags:
      - assessors


  Сброс состояния поиска при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Открыть форму поиска и провести поиск, например по запросу 'Где поесть'
    - assert: Открылась форма с результатами поиска На карте отображаются пины с результатами поисковой выдачи
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображена по центру экрана
    - do: Открыть форму поиска и провести поиск, например по запросу 'Где поесть'
    - assert: Открылась форма с результатами поиска На карте отображаются пины с результатами поисковой выдачи
    - do: Тап на 'Фильтры'
    - assert: Открылся экран фильтров Вверху отображаются кнопка выхода и кнопка 'Сбросить все'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображена по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_maps


  Сброс состояния экрана маршрутизации при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап по кнопке построения маршрута
    - assert: Отображается экран построения маршрута
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
    - do: Тап по кнопке построения маршрута
    - assert: Отображается экран построения маршрута
    - do: Тап на 'Куда'
    - assert: |
        Фокус в поле ввода
        Отображается экранная клавиатура
        Над клавиатурой плашка 'Указать на карте' и микрофон
    - do: Тап на 'Указать на карте'
    - assert: |
        Отображается карта с пином конечной точки маршрута
        Внизу отображается плашка с текстом 'Двигайте карту, чтобы указать место', адрес метки и кнопка 'Готово'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображена по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors

  Сброс состояния экрана маршрутизации при диплинке в приложение (Алиса):
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://clear_route
    - do: Тап по кнопке построения маршрута
    - assert: Отображается экран построения маршрута
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
    - do: Тап по кнопке построения маршрута
    - assert: Отображается экран построения маршрута
    - do: Тап на 'Куда'
    - assert: |
        Фокус в поле ввода
        Отображается экранная клавиатура
        Над клавиатурой плашка 'Указать на карте' и микрофон
    - do: Тап на 'Указать на карте'
    - assert: |
        Отображается карта с пином конечной точки маршрута
        Внизу отображается плашка с текстом 'Двигайте карту, чтобы указать место', адрес метки и кнопка 'Готово'
    - do: Тап 'Готово'
    - assert: Маршрут построен
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображена по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - alicekit

  Сброс состояния экрана выбора вариантов маршрута при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Построить произвольный автомобильный маршрут
    - assert: |
        Отображается экран выбора вариантов маршрута
        Построен маршрут от начальной до конечной точки
        Выбранный маршрут отображается цветом трафика
        Альтернативные варианты (если есть) отображаются серым
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана
    - do: Построить автомобильный маршрут
    - assert: |
        Отображается экран выбора вариантов маршрута
        Построен маршрут от начальной до конечной точки
        Выбранный маршрут отображается цветом трафика
        Могут отображаться альтернативные варианты
    - do: Тап на три вертикальные точки
    - assert: |
        Открылось меню редактирования маршрута
        В меню кнопки 'Изменить маршрут', 'Добавить точку', 'Параметры маршрута', 'Поделиться маршрутом' , 'Сообщить об ошибке'
        Кнопка 'Параметры маршрута' присутствует только у авто Кнопка 'Добавить точку' отсутствует у такси маршрута
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана
    - do: Повторить шаги для пешего и вело-маршрутов, такси
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Сброс состояния ведения маршрута при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Построить произвольный автомобильный маршрут
    - assert: |
        Отображается экран выбора вариантов маршрута
        Построен маршрут от начальной до конечной точки
        Выбранный маршрут отображается цветом трафика
    - do: Тап на Поехали
    - assert: Запущен режим ведения по маршруту
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана
    - do: Перейти в ведение по пешему маршруту
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана
    - do: Перейти в ведение по веломаршруту
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сброс состояния карточки объекта при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап по пину организации
    - assert: Пин увеличился Открылась мини-карточка организации
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана
    - do: Тап по пину организации
    - assert: Пин увеличился Открылась мини-карточка организации
    - do: Тап на мини-карточку или раскрыть ее свайпом вверх
    - assert: Открыта полная карточка организации
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана
    - do: Повторить шаги первичные для карточки топонима, закладки, остановки ОТ, остановки метро, остановки электропоездов
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
        - assessors
        - use_map


  Сброс состояния мини-карточки объекта при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап по пину парковки
    - assert: Пин увеличился Открылась мини-карточка парковки
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map

  Сброс состояния мини-карточки дорожного события при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап по пину ДС
    - assert: Пин увеличился Открылась мини-карточка ДС
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map

  Сброс состояния мини-карточки метки ОТ при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап по метке ОТ
    - assert: Пин увеличился Открылась мини-карточка ОТ
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map

  Сброс состояния написания отзыва при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап по пину организации
    - assert: Пин увеличился Открылась мини-карточка организации
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полная карточка организации
    - do: Просвайпать карточку до блока отзывов и выставить любую оценку
    - assert: Открылась форма написания отзыва Открылась клавиатура, присутствует значок спичкита и кнопка отправки отзыва
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
       - assessors
       - use_map


  Сброс состояния меню при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на меню
    - assert: Открылось меню приложения
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана
    - platforms:
      - ios
      - android
    - tags:
      - assessors



  Сброс состояния просмотра фото организации в галерее при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Открыть карточку организации с фотографиями
    - assert: Открыта карточка организации с фотографиями
    - do: Тап на галерею
    - assert: Открылась галерея с фотографиями
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на галерею
    - assert: Открылась галерея с фотографиями
    - do: Тап на фотографию в галерее
    - assert: Раскрылась фотография Сверху и снизу отображаются управляющие элементы
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сброс состояния просмотра панорам при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для пустой url-схемы yandexmaps://maps.yandex.ru
    - do: Включить слой панорамы
    - assert: Включен слой панорамы
    - do: Тап на линию панорам
    - assert: Открывается панорама соответствующего места
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Сброс состояния добавления ДС через меню при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Открыть меню
    - assert: Открылось меню приложения
    - do: Тап 'Добавить дорожное событие'
    - assert: Открылся экран добавления дорожного события Hа карте отображается значок ДС
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - ios
    - tags:
        - assessors

  Сброс состояния добавления ДС на карте при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Лонгтап на карте
    - assert: Открылось лонгтап меню
    - do: Тап 'Добавить дорожное событие'
    - assert: Открылся экран добавления дорожного события Hа карте отображается значок ДС
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - android
    - tags:
        - assessors
        - use_map

  Сброс состояния добавления фото организации в галерею при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на 'Добавить фото'
    - assert: Отрылось меню добавления фото в галерею
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Сброс состояния написания фидбека на организацию (Неверная информация) при диплинке в приложение:
    - info: |
        iOS - Отключен эксперимент web-feedback
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на 'Исправить неточность'
    - assert: Открыт экран 'Исправить неточность' Отображается название организации и адрес Отображаются кнопки 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана
    - do: Тап на пин организации
    - assert:  Открылась мини-карточка организации
    - do: Открыть полную карточку организации свайпом вверх
    - assert: Открылась полная карточка организации
    - do: Тап на 'Исправить неточность'
    - assert: Открыт экран 'Исправить неточность' Отображается название организации и адрес Отображаются кнопки 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий'
    - do: Тап на 'Неверная информация'
    - assert: Отображается экран редактирования информации об организации 'Неверная информация' Отображаются поля для редактирования названия, короткого названия, категории, адреса, телефона, сайта и режима работы Отображается мини-карта с пином в месте расположения организации
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Сброс состояния Дискавери при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на таб Поиск
    - assert: |
        Отображается полная шторка
        Вверху шторки отображается поисковая строка со спичкитом и кнопкой закрытия
        Ниже отображаются поисковые категории
        Рекламные категории отображаются самыми последними
        (IOS) Ниже, под заголовком 'Актуальное', отображаются сторис и подборки
        (Android) Ниже, под заголовком 'Истории' отображаются сторис, а под заголовком 'Новые истории и подборки' - подборки
        Подборки и сторис обновляются в соответствии с городом
    - do: Тап на подборку
    - assert: Открывается подборка На карте отображаются пины организаций из подборки
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Сброс состояния режима AR при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
        В МЯК открыт спан карты с AR-объектом (Например Дом Зингер, СПБ)
    - do: Перейти в режим AR
    - assert: |
        Включилась камера устройства
        Объекты дополненной реальности отображаются на экране устройства
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
      - ios
    - tags:
      - assessors
      - use_map


  Сброс состояния экрана выбора вариантов маршрута ОТ при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Построить маршрут ОТ
    - assert: |
        Отображается экран выбора вариантов маршрута
        Построен маршрут от начальной до конечной точки
        В информации о маршруте отображается время в пути, вид транспорта, время отправления и прибытия
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана
    - do: Построить маршрут ОТ
    - assert: |
        Отображается экран выбора вариантов маршрута
        Построен маршрут от начальной до конечной точки
        В информации о маршруте отображается время в пути, вид транспорта, время отправления и прибытия
    - do: Тап на три вертикальные точки
    - assert: |
        Открылось меню редактирования маршрута
        В меню могут отображаться кнопки 'Изменить маршрут', 'Время отправления/прибытия', 'Параметры маршрута', 'Добавить точку', 'Поделиться маршрутом' , 'Сообщить об ошибке'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана
    - do: Построить маршрут ОТ
    - assert: |
        Отображается экран выбора вариантов маршрута
        Построен маршрут от начальной до конечной точки
        В информации о маршруте отображается время в пути, вид транспорта, время отправления и прибытия
    - do: Тап 'Посмотреть на карте'
    - assert: Открывается экран с подробной информацией о маршруте
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Сброс состояния лонгтап меню при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Лонг-тап на карте
    - assert: Открылось лонг-тап меню В лонг-тап меню присутствуют кнопки 'Сохранить', 'Отсюда', 'Сюда', 'Что здесь', 'Добавить дорожное событие', панорама
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Сброс состояния карточки ДС при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап по пину дорожного события на карте
    - assert: Пин дорожного события увеличился Внизу появилась карточка с информацией о дорожном событии
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Сброс состояния меню слоев при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на Слои
    - assert: Открылась карточка слоев
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сброс состояния закладок при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на меню
    - assert: Открылось меню приложения
    - do: Тап на 'Закладки'
    - assert: Открывается экран закладок Адреса дома/работы (или кнопки добавить, если адреса не добавлены) Списки закладок
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Сброс состояния меню офлайн-карт при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на меню
    - assert: Открылось меню приложения
    - do: Тап на 'Офлайн-карты'
    - assert: |
        Открывается экран офлайн-карт
        Отображается список загруженных офлайн карт
        Отображается офлайн карта текущего региона с кнопкой Загрузить (если карта еще не загружена)
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Сброс состояния меню настроек при диплинке в приложение:
    - info: |
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на меню
    - assert: Открылось меню приложения
    - do: Тап на 'Настройки'
    - assert: Открывается экран настроек
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сброс состояния написания фидбека на организацию (Организация закрыта) при диплинке в приложение:
    - info: |
        iOS - Отключен эксперимент web-feedback
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на 'Исправить неточность / Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность / Исправить информацию об организации'
        Отображается название организации и адрес
        Могут отображаться кнопки: 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий', 'Есть ещё вход', 'Другое'
    - do: Тап на 'Организация закрыта'
    - assert: |
        Отображается экран закрытия организации
        Могут отображаться кнопки: 'Закрыта навсегда', 'Временно не работает', 'Возможно, не работает', 'Переехала'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: Открылся МЯК Отображается главный экран приложения Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map



  Сброс состояния написания фидбека на организацию (Добавить вход) при диплинке в приложение:
    - info: |
        iOS - Отключен эксперимент web-feedback
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на 'Исправить неточность / Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность / Исправить информацию об организации'
        Отображается название организации и адрес
        Могут отображаться кнопки: 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий', 'Есть ещё вход', 'Другое'
    - do: Тап на 'Добавить вход'
    - assert: |
        Открыт экран 'Добавить вход'
        Пин установки нового входа расположен по месту адреса организации
        Сверху кнопка 'Назад' Внизу расположена кнопка 'Далее'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
        - android
    - tags:
        - assessors
        - use_map


  Сброс состояния написания фидбека на организацию (Вход указан неверно - Вход в другом месте) при диплинке в приложение:
    - info: |
        iOS - Отключен эксперимент web_feedback
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yyandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на 'Исправить неточность / Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность / Исправить информацию об организации'
        Отображается название организации, адрес, фотография (если есть)
        Могут отображаться кнопки: 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий', 'Есть ещё вход', 'Другое'
    - do: Тап на 'Вход указан неверно'
    - assert: |
        Открыт экран 'Вход указан неверно'
        На карте поднятый пин входа
        Сверху кнопка 'Назад'
        Отображаются кнопки 'Вход в другом месте' и 'Входа здесь нет'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК Отображается главный экран приложения
        Метка ММП отображается по центру экрана
    - do: Открыть полную карточку организации
    - assert: Открывается полная карточка организации
    - do: Тап на 'Исправить неточность / Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность / Исправить информацию об организации'
        Отображается название организации и адрес
        Могут отображаться кнопки: 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий', 'Есть ещё вход', 'Другое'
    - do: Тап на 'Вход указан неверно'
    - assert: |
        Открыт экран 'Вход указан неверно'
        На карте поднятый пин входа
        Сверху кнопка 'Назад'
        Отображаются кнопки 'Вход в другом месте' и 'Входа здесь нет'
    - do: Тап на 'Вход в другом месте'
    - assert: |
        Отображается карта На карте синий пин с изображением 4 стрелок
        Кнопка 'Далее' не активна
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Сброс состояния написания фидбека на организацию (Вход указан неверно, несколько входов) при диплинке в приложение:
    - info: iOS - Отключен эксперимент web-feedback
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на 'Исправить неточность / Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность / Исправить информацию об организации'
        Отображается название организации и адрес
        Могут отображаться кнопки: 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Есть ещё вход', 'Другое'
    - assert: Открыт экран 'Исправить неточность / Исправить информацию об организации'
    - do: Тап на 'Вход указан неверно'
    - assert: |
        Открыт экран 'Выберите вход'
        Подсвечены входы в организацию
        Сверху кнопка 'Назад'
        Кнопка 'Далее' задизейблена
    - do: Выбрать один вход
    - assert: Над тапнутым входом появился красный пин дверцы Кнопка 'Далее' стала активной
    - do: С помощью приложения чтения QR кода считать сгенерированный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Сброс состояния написания фидбека на организацию (Вход указан неверно - Входа здесь нет) при диплинке в приложение:
    - info: |
        iOS - Отключен эксперимент web-feedback
        При переходе по диплинку в приложение его состояние должно сбрасываться в состояние главного экрана
        На рабочей станции с помощью приложения генератор QR кода сформировать QR-code для url-схемы yandexmaps://maps.yandex.ru/?ll=user_location&z=16
    - do: Тап на пин организации
    - assert: Открылась мини-карточка организации Пин организации увеличился
    - do: Тап на мини-карточку или свайп вверх
    - assert: Открылась полая карточка организации
    - do: Тап на 'Исправить неточность / Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность / Исправить информацию об организации'
        Отображается название организации и адрес
        Могут отображаться кнопки: 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий', 'Есть ещё вход', 'Другое'
    - do: Тап на 'Вход указан неверно'
    - assert: |
        Открыт экран 'Вход указан неверно'
        На карте поднятый пин входа
        Сверху кнопка 'Назад'
        Отображаются кнопки 'Вход в другом месте' и 'Входа здесь нет'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК Отображается главный экран приложения
        Метка ММП отображается по центру экрана
    - do: Открыть полную карточку организации
    - assert: Открывается полная карточка организации
    - do: Тап на 'Исправить неточность / Исправить информацию об организации'
    - assert: |
        Открыт экран 'Исправить неточность / Исправить информацию об организации'
        Отображается название организации и адрес
        Могут отображаться кнопки: 'Неверная информация', 'Организация закрыта', 'Вход указан неверно', 'Добавить вход', 'Комментарий', 'Есть ещё вход', 'Другое'
    - do: Тап на 'Вход указан неверно'
    - assert: |
        Открыт экран 'Вход указан неверно'
        На карте поднятый пин входа
        Сверху кнопка 'Назад'
        Отображаются кнопки 'Вход в другом месте' и 'Входа здесь нет'
    - do: Тап на 'Входа здесь нет'
    - assert: |
        Открыт экран 'Вход указан неверно'
        Отображается карта
        На карте поднятый пин входа
        Внизу кнопка 'Отправить'
    - do: С помощью приложения чтения QR кода считать сгенерированнный код
    - do: Тап на url-схему
    - assert: |
        Открылся МЯК
        Отображается главный экран приложения
        Метка ММП отображается по центру экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Отображение слоя Пробки после диплинка в приложение:
    - info: |
        1. Яндекс.Карты установлены, но не запущены
        2. В мобильном браузере отображается главный экран Яндекс (https://yandex.ru/)
        3. Предложение Открыть в приложении Я.Карт может отобразиться не сразу
    - do: Ввести в поисковую строку запрос Пробки в Москве
    - assert: Под запросом отображается список саджестов
    - do: Тап по Найти
    - assert: |
        Отображается поисковая выдача по запросу
        Первым результатом отображается информация от яндекса
        В результате от яндекса указаны текущий бал пробок, плотность движения и время выдачи информации.
        Также отображается участок карты с г. Москва
    - do: Тап по участку карты
    - assert: |
        Открываются Я.Карты в браузере
        На спане карты город Москва
        Пробки включены и отображаются цветными линиями на карте
    - do: Тап Открыть в приложении Я.Карты
    - assert: |
        Открываются Я.Карты в МЯК
        На спане карты город Москва
        Пробки включены и отображаются цветными линиями на карте

    - platforms:
        - android
    - integration_run:
        - kotlin


  Переход в приложение по передаче местоположения в мессенджерах:
    - info: |
        1. На устройстве установлен мессенджер (WhatsApp, Viber, Telegram, др.)
        2. ММП до этого было передано по мессенджеру любому пользователю с другого устройства
        3. Приложение закрыто и выгружено из памяти
    - do: Перейти по полученной с другого девайса ссылке с местоположением
    - assert: |
        Открывается спан карты.
        На спане присутствует отметка о местоположении другого пользователя.
        Открыта миникарточка местоположения пользователя.

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - kotlin


  Проверка неограниченного количества открытий по неподписанному диплинку:
    - info: |
        Прежде не было осуществлено перехода по ссылке в приложение
        Использовать интенты:

        `yandexmaps://add_exp?maps_maximum_number_of_navigation_starts_without_license=2`
        [collapsed-image](https://jing.yandex-team.ru/files/nataliya99/Снимок%20экрана%202022-04-20%20в%2023.32.49.png){title=QR-код}
        Приложение не запущено
    - do: |
        Android: Перейти по ссылке https://yandex.ru/maps?rtext=56.85335%2C53.205327~56.855585%2C53.206407&rtt=auto
        iOS: Перейти по ссылке yandexmaps://build_route_on_map/?lat_from=59.967870&lon_from=30.242658&lat_to=59.898495&lon_to=30.299552
        (Неудачная попытка построить маршрут не засчитывается. Первое открытие, которое сбрасывается разрешением включить геолокацию не засчитывается. Переход по ссылке из Яндекс.Навигатор всегда подписан. Переход по ссылке, добавленной в параметр эксперимента maps_white_list, всегда подписан)
    - assert: |
        Открываются Я.Карты на экране выбора вариантов маршрута
        Отображается построенный маршрут
        Если это возможно, предложены несколько вариантов маршрута
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Снова перейти по ссылке
    - assert: |
        Открываются Я.Карты
        Отображается построенный маршрут
        Если это возможно, предложены несколько вариантов маршрута
        Маршрут тот же, что и при прошлом построении, варианты предложены одинаковые
    - do: Перейти по ссылке ещё раз
    - assert: |
        Открываются Я.Карты
        Отображается построенный маршрут
        Если это возможно, предложены несколько вариантов маршрута
        Маршрут тот же, что и при прошлом построении, варианты предложены одинаковые

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - tags:
      - assessors
    - integration_run:
        - kotlin
    - tags:
        - newbie


  Проверка трекинга количества открытий по подписанному диплинку:
    - info: |
        Прежде не было осуществлено перехода по ссылке в приложение
        Значение эксперимента maps_maximum_number_of_navigation_start = 5
        Приложение не запущено
    - do: |
        Построить маршрут:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-26%20в%2014.59.53.png){title=Url-схема}

        `yandexmaps://build_route_on_map/?lat_from=59.967870&lon_from=30.242658&lat_to=59.898495&lon_to=30.299552&client=002&signature=raL96y4ajFbS%2BSequkgC8exhJ9eCmkTMY0hgLNhXBOKKfbhhTrhYyMbQ2byo%2FSXZhnWixq47kcihhdbebezwgA%3D%3D`
        (Неудачная попытка построить маршрут не засчитывается. Первое открытие, которое сбрасывается разрешением включить геолокацию не засчитывается)
    - assert: |
        Открываются Я.Карты на экране выбора вариантов маршрута
        Отображается построенный маршрут
        Если это возможно, предложены несколько вариантов маршрута
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Перейти по ссылке в приложение ещё 9 или более раз
    - assert: |
        Всегда открываются Я.Карты
        Отображается построенный маршрут
        Если это возможно, предложены несколько вариантов маршрута
        Маршрут всегда один и тот же, варианты предложены одинаковые
        Страница о запрете использования Яндекс.Карт в коммерческих целях не отображается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - kotlin
    - tags:
        - newbie


  Открытие ЛК по UGC-пушу (есть отзыв на организацию):
    - info: |
        Пуш можно проверить, открыв в браузере ссылку вида yandexmaps://yandex.ru/maps/?oid=6531532095&add-review=1 (вместо названия и id можно подставлять другие значения), также можно отправить реальный пуш https://wiki.yandex-team.ru/maps/personal-account/ugc-pushes/#testirovanie
        Пользователь авторизован. На организацию из пуша добавлен отзыв
    - do: Перейти по пушу из браузера
    - assert: Открывается экран ЛК на табе Впечатления. Организация из пуша не отображается на первом месте в ЛК
    - do: Перейти по пушу для организации, на которую не было оставлено отзыва/оценки
    - assert: Открывается экран ЛК на табе Впечатления Первый сниппет в ЛК - организация из пуша
    - do: Тап на звезды в сниппете этой организации
    - assert: Открывается экран написания отзыва
    - do: Оставить отзыв
    - assert: Организация скрывается из ЛК
    - do: Перейти по пушу для организации на которую не было оставлено отзыва/оценки
    - assert: Открывается экран ЛК на табе Впечатления Организация из пуша не отображается во Впечатлениях

    - platforms:
        - ios
    - tags:
        - assessors


  Открытие приложения через UGC-пуш:
    - info: |
        Пуш можно проверить, открыв в браузере ссылку вида yandexmaps://yandex.ru/maps/?oid=6531532095&add-review=1 (вместо названия и id можно подставлять другие значения), также можно отправить реальный пуш https://wiki.yandex-team.ru/maps/personal-account/ugc-pushes/#testirovanie
        Первый запуск приложения
        На устройстве есть сохраненные аккаунты Яндекса.
        На организацию из пуша не было добавлено отзыва
    - do: Перейти по пушу
    - assert: |
        Запускается приложение
        Открывается экран выбора аккаунта
        Появляется поп-ап с просьбой разрешить Картам доступ к геопозиции
    - do: Тап Разрешить в поп-апе
    - assert: Поп-ап закрывается
    - do: Тап на сохраненный аккаунт (возможно, потребуется ввести пароль)
    - assert: |
        Произошел вход в ЛК
        Открыт таб Впечатления, первый сниппет - организация из пуша
    - do: Закрыть приложение с выгрузкой из памяти
    - assert: Отображается экран устройства с приложениями
    - do: Перейти по пушу
    - assert: |
        Открывается экран ЛК на табе Впечатления
        Первый сниппет в ЛК - организация из пуша
    - do: Тап на стрелку назад
    - assert: Открыт главный экран приложения с картой

    - platforms:
      - ios
    - integration_run:
        - kotlin
    - tags:
        - assessors
    - tags:
        - newbie


  Открытие подборки с открытой шторой через url-схему:
    - info: |
        Если приходит пуш с параметром ?background=showcase, то после закрытия подборки на главном экране отображается раскрытая штора Формат url-схемы подборки с параметром ?background=showcase
        (например: yandexmaps://maps.yandex.ru/discovery/kuda-poekhat-katatsya-na-gornykh-lyzhakh-ili-snouborde?background=showcase)
        Осуществить переход по ссылке можно разными способами.
        iOS: 1. Вставить ссылку в заметки и сохранить её 2. Тап по ссылке
        Android: 1. Вставить ссылку в поисковую строку Яндекс.Браузера 2. Тап по синему предложенному саджесту
        Также можно создать QR-код с ссылкой и перейти по нему.
    - do: Тап по табу "Поиск"
    - assert: |
        Отображается полная шторка
        Вверху шторки отображается поисковая строка со спичкитом и кнопкой закрытия
        Ниже отображаются поисковые категории
        Рекламные категории отображаются самыми последними
        (IOS) Ниже, под заголовком 'Актуальное', отображаются сторис и подборки
        (Android) Ниже, под заголовком 'Истории' отображаются сторис, а под заголовком 'Новые истории и подборки' - подборки
        Подборки и сторис обновляются в соответствии с городом
    - do: Свернуть приложение и перейти по ссылке из описания
    - assert: |
        Открывается приложение МЯК
        Открывается подборка из url-схемы
        На карте отображаются пины поисковой выдачи
    - do: Закрыть подборку
    - assert: |
        Подборка закрылась
        Отображается раскрытая штора

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - tags:
        - assessors


  Открытие карточки остановки ОТ по url-схеме:
    - info: |
        МЯК установлен, но не запущен Для проверки открытия карточки остановки используется url-схема yandexmaps://maps.yandex.ru/?masstransit[stopId]=stop__9643096
    - do: Перейти по url-схеме - yandexmaps://maps.yandex.ru/?masstransit[stopId]=stop__9643096
    - assert: Отображается карточка остановки У каждого транспорта в списке отображается ближайшее время прибытия, либо Сейчас не ходит

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin

  Переход по UGC-пушу в момент написания отзыва:
    - info: |
        Пуш можно проверить, открыв в яндекс браузере ссылку  yandexmaps://yandex.ru/maps/?oid=6531532095&add-review=1 (вместо названия и id можно подставлять другие значения) или yandexmaps://yandex.ru/maps/org/arsenal/1063101681/?add-review=1
        Пользователь авторизован
        Пользователь находится на экране написания отзыва на организацию не из пуша
        На организацию из пуша ранее не было добавлено отзыва/оценки
    - do: Перейти по пушу
    - assert: |
        Открывается экран ЛК на табе Впечатления
        Первый сниппет в ЛК - организация из пуша
    - do: Тап на таб Отзывы
    - assert: |
        Открыт таб  Отзывы
        На первом месте отображается сниппет организацией, на которую писался отзыв
        В сниппете отображается количество звезд, которое было поставлено в отзыве
        Текст отзыва сбросился
    - do: Тап на Назад
    - assert: Открыт главный экран приложения с картой

    - platforms:
      - ios
      - android
    - integration_run:
        - kotlin
    - tags:
        - assessors


  Открытие ЛК по UGC-пушу для неавторизованного пользователя:
    - info: |
        Проверить функционал можно с помощью qr-кода [collapsed-image](https://jing.yandex-team.ru/files/kripp-le/Снимок%20экрана%202022-05-11%20в%2016.16.10.png){title=QR-код}
        'https://yandex.ru/maps/org/1137936536/?add-review=1' При необходимости id организации можно менять
        (Санкт-Петербургский, ТЦ Галерея);
        На данную организацию ранее не было добавлено отзыва/оценки
        Пользователь не авторизован в МЯК
    - do: Открыть интент из описания
    - assert: Открывается экран авторизации
    - do: Ввести корректный логин и пароль
    - assert: Открывается экран ЛК на табе Впечатления Первый сниппет в ЛК - организация из пуша
    - do: Тап на стрелку Назад
    - assert: |
        Открыт главный экран приложения с картой
        Возврата на предыдущий экран (поиска, карточки, ведения и тд), если он был открыт до отправки пуша, не происходит

    - platforms:
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Открытие ЛК по UGC-пушу (Нет отзыва на организацию):
    - info: |
        Пуш можно проверить, открыв в яндекс браузере ссылку https://yandex.ru/maps/org/stena_tsoya/181456096786/?add-review=1
        Пользователь авторизован
        На организацию из пуша ранее не было добавлено отзыва/оценки
    - do: Перейти по пушу
    - assert: Открывается экран ЛК на табе Впечатления Первый сниппет в ЛК - организация из пуша
    - do: Тап на стрелку назад
    - assert: Открыт главный экран приложения с картой ( возврата на предыдущий экран (поиска, карточки, ведения и тд), если он был открыт до отправки пуша, не происходит)

    - platforms:
      - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Открытие раздела Скидки и бонусы в Заправках через url-схему для авторизованного пользователя:
    - info: |
        Пользователь авторизован в приложении Я.Карт
    - do: Открыть Я.Браузер(Android) или Safari(IOS)
    - assert:  Открыт браузер с адресной строкой
    - do: Вставить ссылку на url-схему yandexmaps://maps.yandex.ru/refuel/discounts в адресную строку и перейти по ней
    - assert: В приложении Я. Карт открывается экран 'Скидки и бонусы'

    - platforms:
      - ios
      - android
    - integration_run:
        - kotlin
    - tags:
        - assessors


  Открытие раздела Скидки и бонусы в Заправках через url-схему для неавторизованного пользователя:
    - info: |
        Пользователь неавторизован в приложении Я. Карт
    - do: Открыть Я.Браузер(Android) или Safari(IOS)
    - assert:  Открыт браузер с адресной строкой
    - do: Вставить ссылку на url-схему yandexmaps://maps.yandex.ru/refuel/discounts в адресную строку и перейти по ней
    - assert:  В приложении Я. Карт открывается экран Заправки и popup с возможностью авторизоваться в приложении
    - do: Авторизоваться в приложении
    - assert:  Пользователь авторизован Произошел переход к экрану 'Скидки и бонусы'

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Переход в галерею организации по URL-схеме:
    - info: |
        Приложение установлено и не запущено.
    - do: |
        Перейти по URL-схеме: yandexmaps://maps.yandex.ru/?photos[business]=1121271708
    - assert:  Открыта галерея организации
    - do: Закрыть галерею и выгрузить приложение из памяти
    - assert:  Приложение не отображается в списке запущенных
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/?oid=1121271708ol=biz&photos[business]=1121271708
    - assert:  Открыта галерея организации
    - do: Закрыть галерею и выгрузить приложение из памяти
    - assert:  Приложение не отображается в списке запущенных
    - do: Перейти по  URL-схеме вида yandexmaps://yandex.ru/maps/org/pushkin/1018907821/gallery/
    - assert:  Отображается главный экран приложения

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Активация слоя в приложении при переходе по URL-схеме:
    - info: |
        Основные параметры:nmap (карта), sat (спутник), skl (гибрид), pmap (народная)nДополнительные параметры:ntrf (пробки), trfe (дорожные события), сmr (камеры), stv (панорамы), carparks (парковки), masstransit (метки ОТ), panoramas (слой панорам)
    - do: Перейти по url-схеме yandexmaps://maps.yandex.ru/?l=map,trf
    - assert:  Отображается спан карты с включенным слоем пробок, тип карты схема
    - do: Перейти по url-схеме yandexmaps://maps.yandex.ru/?l=sat
    - assert:  Отображается спан карты с типом карты Спутник

    - platforms:
      - ios
      - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Центрирование карты на спане из URL-схемы:
    - info: |
        Если  в URL-схеме есть ll, то центрируем карту на нем, если нет — то на pt.
        Доступ к ММП разрешен
    - do: Перейти по url-схеме yandexmaps://maps.yandex.ru/?pt=30.335429,59.944869&z=18
    - assert: |
        На спане карты отображается Санкт-Петербург
        Отображается мини-карточка Главная аллея
        Спан карты отцентрирован относительно пина Главной аллеи
    - do: Перейти по url-схеме yandexmaps://show_user_position
    - assert: Отображается ММП пользователя

    - platforms:
      - ios
      - android
    - integration_run:
        - kotlin
        - alicekit
    - tags:
        - assessors
        - use_map


  Запрос на доступ к ММП при переходе по URL-схеме для центрирования карты:
    - info: |
        Нет доступа к ММП
    - do: Перейти по url-схеме yandexmaps://show_user_position
    - assert: |
        Отображается спан карты
        Отображается уведомление "Карты не знают где вы находитесь"
    - do: Тап на "Отменить"
    - assert: |
        Отображается спан карты
        Уведомление "Карты не знают где вы находитесь" не отображается
    - do: Закрыть приложение
    - assert: |
        Отображается главный экран устройства
    - do: Перейти по url-схеме yandexmaps://show_user_position
    - assert: |
        Отображается спан карты
        На экране уведомление "Карты не знают где вы находитесь"
    - do: Тап на "Настройки"
    - assert: |
        Отображается системное меню
    - do: Разрешить доступ к геопозиции
    - assert: |
        Настройки сохранены
    - do: Перейти по url-схеме yandexmaps://show_user_position
    - assert: |
        Отображается ММП пользователя

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - integration_run:
      - kotlin
      - alicekit
    - tags:
        - assessors


  Построение маршрута по URL-схеме:
    - info: |
        Получен эксперимент maps_maximum_number_of_navigation_start со значением 10
        Местоположение пользователя определено
    - do: |
        Перейти по url-схеме: yandexmaps://build_route_on_map
    - assert: |
        Отображается экран экрана выбора точек маршрута
        В поле откуда "Мое местоположение"
        В поле куда пустое поле без адреса
    - do: |
        Закрыть приложение
    - assert: |
        Отображается рабочий стол устройства
    - do: |
        Перейти по url-схеме:
        yandexmaps://build_route_on_map/?lat_from=59.967870&lon_from=30.242658&lat_to=59.898495&lon_to=30.299559
    - assert: |
        Отображается экран выбора вариантов маршрута
        В поле откуда находится Южная дорога
        В поле куда находится Митрофаньевское шоссе
    - do: Закрыть приложение
    - assert: |
        Отображается рабочий стол устройства
    - do: |
        Перейти по url-схеме:
        yandexmaps://build_route_on_map/?lat_to=59.898495&lon_to=30.299559
    - assert: |
        Отображается экран выбора вариантов маршрута
        В поле откуда находится Мое местоположение
        В поле куда Митрофаньевское шоссе
    - do: Закрыть приложение
    - assert: |
        Отображается рабочий стол устройства
    - do: |
        Перейти по url-схеме:
        yandexmaps://maps.yandex.ru/?rt=37.561370,55.747760~37.723414,55.728964
    - assert: |
        Отображается экран выбора вариантов маршрута Точка откуда: район Дорогомилово Точка куда: Нижегородская улица, 104с7
    - do: Закрыть приложение
    - assert: |
        Отображается рабочий стол устройства
    - do: |
        Перейти по url-схеме:
        yandexmaps://maps.yandex.ru/?rtext=55.747760,37.561370~55.728964,37.723414&rtt=pd
    - assert: |
        Отображается экран выбора вариантов пешеходного маршрута
        Точка откуда: Дорогомилово
        Точка куда: Нижегородская улица, 104с7
    - do: Закрыть приложение
    - assert: |
        Отображается рабочий стол устройства
    - do: |
        Перейти по диплинку:
        yandexmaps://maps.yandex.ru/?rtext=55.747760,37.561370~55.728964,37.723414&rtt=mt&mtt=suburban
    - assert: |
        Отображается экран выбора вариантов маршрута ОТ
        В параметрах маршрута выбраны только Электрички
        Точка откуда: Дорогомилово
        Точка куда: Нижегородская улица, 104с7
    - do: Закрыть приложение
    - assert: |
        Отображается рабочий стол устройства
    - do: |
        Перейти по диплинку:
        yandexmaps://maps.yandex.ru/?rtext=60.033364,30.339900~59.862174,30.326854&rtt=auto&rtn=1&ll=30.432790,59.934455&z=11
    - assert: |
        Отображается экран автомаршрута
        Откуда: муниципальный округ Сосновское
        Куда: Улица Фрунзе, 16
    - do: Закрыть приложение
    - assert: |
        Отображается рабочий стол устройства
    - do: |
        Перейти по диплинку:
        yandexmaps://maps.yandex.ru/?rt=37.561370,55.747760\~37.723414,55.728964\~37.523414,55.628964
    - assert: Отображается экран вариантов маршрута с промежуточной точкой

    - platforms:
      - ios
      - android
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin
    - tags:
        - assessors
        - newbie


  Открытие поиска по url-схеме:
    - do: |
        Перейти по url-схеме: yandexmaps://yandex.ru/maps/search
    - assert:  Открылся экран поиска
    - do: |
        Перейти по url-схеме: yandexmaps://maps.yandex.ru/?text=кафе
    - assert:  Отображается серп по поисковому запросу Кафе
    - do: |
        Перейти по url-схеме: yandexmaps://yandex.ru/maps?text=cafe&display-text=food
    - assert:  Отображается серп по поисковому запросу Кафе В поле ввода запроса введено food

    - platforms:
      - ios
      - android
    - integration_run:
      - kotlin
    - tags:
      - assessors
    - testing:
      - lite_acceptance_maps

  Открытие поиска по URL-схемам Алисы:
    - info: |
        Включено Debug-panel > Routes > Demo movement
        Я.Карты установлены и не запущены
    - do: Перейти по url-схеме yandexmaps://map_search?text=%D0%9B%D1%8C%D0%B2%D0%B0%20%D0%A2%D0%BE%D0%BB%D1%81%D1%82%D0%BE%D0%B3%D0%BE%2C%2016
    - assert: |
        Приложение запущено
        Отображается карточка топонима
    - do: Закрыть карточку топонима и выгрузить приложение из списка запущенных
    - assert: Приложение не запущено
    - do: Перейти по url-схеме yandexmaps://map_search?text=(rubric:(Gas)%20provider:(gas_stations))&display_text=Online%20Gas%20Stations
    - assert: Отображаются результаты поиска по запросу Online Gas Stations
    - do: Перейти в ведение по автомаршруту
    - assert: Идет движение по маршруту
    - do: Перейти по url-схеме yandexmaps://map_search?text=(rubric:(Gas)%20provider:(gas_stations))&display_text=Online%20Gas%20Stations
    - assert: |
        На карте отображаются результаты поиска по запросу Online Gas Stations
        Ведение по автомаршруту продолжается

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - alicekit

  Открытие карточки организации по url-схеме:
    - do: |
        Перейти по url-схеме: yandexmaps://maps.yandex.ru/?ll=37.617671%2C55.755768&sspn=1.730347%2C0.738038&text=кафе&ol=biz&oid=1198521045
    - assert:  Отображается полная карточка организации Zю кафе
    - do: Закрыть карточку организации
    - assert:  Отображаются результаты поиска по запросу 'кафе'
    - do: |
        Перейти по url-схеме: yandexmaps://maps.yandex.ru/?ol=biz&oid=1198521045
    - assert:  Отображается полная карточка организации Zю кафе
    - do: Закрыть карточку организации
    - assert:  Отображается главный экран приложения
    - do: Перейти по URL-схеме вида http://yandex.ru/maps/?orgpage[id]=1018093479
    - assert:  Отображается развернутая карточка организации
    - do: Закрыть карточку организации
    - assert:  Отображается главный экран приложения
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/?orgpage%5Bid%5D=1018093479
    - assert:  Отображается развернутая карточка организации

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_maps
    - integration_run:
        - kotlin

  Просмотр панорамы по URL-схеме:
    - info: |
        Приложение установлено и не запущено
    - do: Перейти по URL-схеме вида yandexmaps://?ll=37.412339,55.773317&panorama[point]=37.444075,55.776788&panorama[direction]=228.970000,6.060547
    - assert:  Отображается панорама
    - do: Закрыть панораму и выгрузить приложение из памяти
    - assert:  Приложение не отображается в списке запущенных
    - do: Перейти по URL-схеме вида yandexmaps://?ll=37.412339,55.773317&panorama[point]=37.444075,55.776788&panorama[span]=130.000000,71.919192
    - assert:  Отображается панорама
    - do: Закрыть панораму и выгрузить приложение из памяти
    - assert:  Приложение не отображается в списке запущенных
    - do: Перейти по URL-схеме вида yandexmaps://?ll=37.412339,55.773317&panorama[point]=37.444075,55.776788
    - assert:  Отображается панорама
    - do: Закрыть панораму и выгрузить приложение из трея
    - assert:  Приложение не отображается в списке запущенных
    - do: Перейти по URL-схеме вида yandexmaps://?ll=37.412339,55.773317&panorama[point]=37.444075,55.776788&panorama[direction]=228.970000,6.060547&panorama[span]=130.000000,71.919192&panorama[id]=1298045253_672967335_23_1381663150
    - assert:  Отображается панорама не текущего года

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Открытие POI объекта по URL-схеме:
    - info: |
        Приложение установлено и не запущено.
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/?poi[point]=37.593069,55.736433&poi[uri]=ymapsbm1%3A%2F%2Forg%3Foid%3D1012072929
    - assert:  Отображается полная карточка организации
    - do: Свернуть карточку до мини
    - assert: Отображается мини-карточка организации с поднятым пином на карте

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Переход на экран закладок по URL-схеме:
    - info: |
        Приложение установлено и не запущено
    - do: Перейти по URL-схеме вида yandexmaps://yandex.ru/maps/bookmarks
    - assert:  Отображается экран Закладки
    - do: Закрыть экран закладок и выгрузить приложение из памяти
    - assert:  Приложение не отображается в списке запущенных
    - do: Только iOS Перейти по URL-схеме вида yandexmaps://yandex.ru/maps/?bookmarks=true
    - assert:  Отображается экран 'Закладки'

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - kotlin

  Открытие подборки по URL-схеме:
    - info: |
        Приложение установлено и не запущено
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/discovery/gde-kupatsya-i-zagorat-podmoskovnye-plyazhi
    - assert:  Отображается подборка со списком мест
    - do: Закрыть карточку подборки и выгрузить приложение из памяти
    - assert:  Приложение не отображается в списке запущенных

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Открытие карточки маршрута по URL-схеме:
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/?masstransit[routeId]=2036924082
    - assert:  Открыта карточка маршрута
    - do: Закрыть карточку маршрута и выгрузить приложение из памяти
    - assert:  Приложение не отображается в списке запущенных
    - do: Перейти по ссылке вида yandexmaps://maps.yandex.ru/?masstransit[routeId]=2036924082&masstransit[threadId]=2036927702
    - assert:  Открыта карточка маршрута с несколькими рейсами
    - do: Тап Другие рейсы маршрута
    - assert:  Выбран второй рейс

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переключение тем в приложении с помощью URL-схем:
    - info: |
        Приложение установлено и не запущено
        Для настройки темной темы в приложении был установлен режим Автоматически
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/?text=cafe&theme=night
    - assert:  Отображается главный экран приложения Карта отображается в темной теме
    - do: Тап Меню
    - assert:  Меню отображается в темной теме
    - do: Тап Настройки
    - assert:  Настройки отображаются в темной теме
    - do: Тап Основные
    - assert:  Список основных настроек отображается в темной теме Для пункта Темный режим установлено значение Вкл.
    - do: Тап темный режим
    - assert:  Список доступных режимов отображается в темной теме Текущий режим - Включён
    - do: Повторить предыдущие шаги для URL-схемы вида yandexmaps://yandex.ru/maps/?text=cafe&theme=day
    - assert:  Карта и экраны настроек отображаются в светлой теме Текущий режим - Выключен
    - do: Повторить предыдущие шаги для URL-схемы вида yandexmaps://maps.yandex.ru/?text=cafe&theme=auto
    - assert: |
        Время заката еще не наступило
          Карта и экраны настроек отображаются в светлой теме
          Текущий режим - Автоматически
        Время заката наступило:
          Карта и экраны настроек отображаются в тёмной теме
          Текущий режим - Автоматически

    - platforms:
      - ios
      - android
    - integration_run:
        - kotlin
    - tags:
        - assessors


  Просмотр stories по URL-схеме:
    - info: |
        Приложение установлено и не запущено
        URL-схема для перехода в stories:
        Тестинг - yandexmaps://maps.yandex.ru/stories/d7c0fb8e-1b81-48e1-b07d-14026944cb2e
        Прод - yandexmaps://maps.yandex.ru/stories/0ae48b03-04ea-4872-80b1-d567b6645524
    - do: Перейти по URL-схеме
    - assert:  Отображается stories
    - do: Закрыть stories  свайпом вниз или тапом на крестик
    - assert:  Отображается главный экран приложения

    - platforms:
      - ios
      - android
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin
    - tags:
        - assessors

  Открытие экрана офлайн-карт по URL-схеме:
    - info: |
        Приложение установлено и не запущено
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/offline-maps
    - assert:  Отображается экран с офлайн-картами

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin

  Открытие карточки старого фидбека по URL-схеме:
    - info: |
        Приложение установлено и не запущено
        iOS - Отключен эксперимент web-feedback
        Ссылки должны открываться в тестируемой версии МЯК
    - do: Перейти по ссылке вида https://yandex.ru/maps/mobile-feedback?type=business_complaint&business_oid=1018907821
    - assert:  Отображается карточка Исправить неточность В карточке отображается заголовок и адрес организации
    - do: Закрыть карточку и свернуть приложение
    - assert:  Отображается главный экран устройства
    - do: Перейти по ссылке вида https://yandex.ru/maps/mobile-feedback?type=business_add&geolocation=61.401085%2C55.115579
    - assert: |
        Отображается карточка добавления организации с координатами адреса: Челябинск, улица Кропоткина, 55

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие полной карточки события по URL-схеме:
    - info: |
        Приложение установлено и не запущено
        В дебаг-панели в Environment → Mobmaps proxy host стоит значение TESTING
    - do: Перейти по ссылке вида yandexmaps://maps.yandex.ru/?events[id]=348bc4ba-a6d6-4154-b71e-e4e5af70179b
    - assert: Открывается WebView с информацией о событии
    - do: Свернуть свайпом вниз карточку события
    - assert: Отображается карточка события в свернутом состоянии
    - do: Закрыть карточку события
    - assert: Отображается главный экран приложения

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Переход по URL-схеме для просмотра отзывов на организацию:
    - info: |
        Приложение установлено и не запущено.
        Кейс проходится только на Testflight/Playmarket Beta версии
    - do: Перейти по URL-схеме вида https://maps.yandex.ru/org/torro_grill/1121271708?reviews
    - assert:  Открывается карточка организации

    - platforms:
        - android
        - ios
    - tags:
        - assessors

  Переход по URL-схеме с кириллицей:
    - info: |
        Приложение установлено и не запущено.
    - do: Перейти по url-схеме https://yandex.ru/maps/213/moscow/?ll=37.432636%2C55.744966&mode=search&sll=37.588181%2C55.733467&sspn=0.010622%2C0.003687&text=%D1%80%D1%83%D0%BB%D0%B5%D0%B2%D1%81%D0%BA%D0%BE%D0%B5%20%D1%88%D0%BE%D1%81%D1%81%D0%B5%2024%20%D0%BA%D0%BE%D1%80%D0%BF%205&z=16
    - assert: |
        Запущено приложение
        Отображаются результаты поиска по запросу
        Может отображаться карточка топонима, если поисковому запросу соотвествует один объект
    - do: Закрыть СЕРП и свернуть приложение
    - assert: Приложение отображается в списке запущенных
    - do: Перейти по ссылке yandexmaps://yandex.ru/maps/?ll=37.432636%2C55.744966&sll=37.622504%2C55.753215&sspn=0.999756%2C0.409701&text=рулевское%20шоссе%2024%20корп%205&z=16
    - assert: |
        Запущено приложение
        Отображаются результаты поиска по запросу
        Может отображаться карточка топонима, если поисковому запросу соотвествует один объект
    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Переход по URL-схеме с open_url:
    - info: |
        Приложение установлено и не запущено.
    - do: Перейти по url-схеме yandexmaps://open_url?url=http%3A%2F%2Fwww.rottentomatoes.com%2F
    - assert: |
        Запущено приложение
        Отображается веб-страница
    - do: Закрыть веб-страницу и свернуть приложение
    - assert: Приложение отображается в списке запущенных
    - do: Перейти по ссылке yandexmaps://open_url?url=http%3A%2F%2F%25D1%2580%25D0%25BE%25D1%2581%25D1%2581%25D0%25B8%25D1%258F.%25D1%2580%25D1%2584%2F
    - assert: |
        Запущено приложение
        Отображается веб-страница
    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin

  Включение таба "Навигатор" по url-схеме:
    - info: |
        Приложение установлено и не запущено
    - do: Перейти по url-схеме yandexmaps://maps.yandex.ru/?mode=navigator
    - assert: |
        Запущено приложение
        Таб "Навигатор" включен
        Карта отображается в 3D-режиме
    - do: Выключить таб "Навигатор" и свернуть приложение
    - assert: Приложение отображается в списке запущенных
    - do: Перейти по ссылке yandexmaps://maps.yandex.ru/?mode=navigator
    - assert: |
        Запущено приложение
        Таб "Навигатор" включен
        Карта отображается в 3D-режиме
    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps


  Переход по диплинку открытия таба меню, фото, отзывы, филиалы, новости:
    - info: |
        установлено приложение МЯК
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=49010818186&tab=menu
    - assert: Отображается карточка организации на табе меню
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=49010818186&tab=photos
    - assert: Отображается карточка организации на табе фото
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=49010818186&tab=reviews
    - assert: Отображается карточка организации на табе отзывы
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=41904520923&tab=affiliates
    - assert: |
        iOS Отображается карточка организации на табе филиалы
        Android Отображается карточка организации на табе обзор
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=1784810922&tab=posts
    - assert: |
        iOS Отображается карточка организации на табе новости
        Android Отображается карточка организации на табе обзор

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход по диплинку открытия вебвью табов организации:
    - info: Установлено приложение МЯК
    - do: Перейти по диплинку `yandexmaps://yandex.ru/maps/?oid=93562826309&tab=edadeal`
    - assert: Отображается карточка организации на табе Едадил
    - do: Перейти по диплинку `yandexmaps://yandex.ru/maps/?oid=140780209854&tab=hotels`
    - assert: |
        iOS Отображается карточка организации на табе 'Номера и цены'
        Android Отображается карточка организации на табе обзор

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Переход по невалидным диплинкам открытия табов организации:
    - info: |
        установлено приложение МЯК
        Android - включен эксперимент new_tabs_in_card
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=100105663905&tab=ы
    - assert: Отображается карточка организации на табе обзор
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=100105663905&tb=photos
    - assert: Отображается карточка организации на табе обзор
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=49010818186&tab=213231
    - assert: Отображается карточка организации на табе обзор
    - do: Перейти по диплинку yandexmaps://yandex.ru/maps/?oid=1394743770&tab=
    - assert: Отображается карточка организации на табе обзор

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по URL-схеме для центрирования карты:
    - info: |
        Приложение запущено в фоновом режиме
    - do: Перейти по URL-схеме вида yandexmaps://show_user_position
    - assert:  Открывается спан карты с отметкой ММП по центру
    - do: Изменить спан карты за пределы ММП, перейти по ссылке
    - assert:  Открывается спан карты с отметкой ММП по центру

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps


  Запуск приложения по URL-схеме:
    - info: |
        Приложение запущено в фоновом режиме
    - do: Перейти по URL-схеме вида yandexmaps://show_ui
    - assert: |
        Приложение запустилось
        Отображается спан карты с отметкой ММП по центру
    - do: Включить любой слой меню (транспорт/пробки/режим 3D/прочее)
    - assert: Выбранный слой применен
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Перейти по URL-схеме вида yandexmaps://show_ui
    - assert: |
        Отображается спан карты
        Настройки слоев не изменились

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_maps


  Переход по URL-схеме для перехода в режим обзора маршрута:
    - info: Настройки - Маршруты - Север всегда сверху - вкл
    - do: Перейти по url-схеме yandexmaps://show_route_overview
    - assert: |
        Приложение запущено
        Отображается главный экран
    - do: Построить автомобильный маршрут
    - assert: |
        Отображается экран выбора вариантов маршрута
        Построен маршрут от начальной до конечной точки
        Выбранный маршрут отображается цветом трафика
        Могут отображаться альтернативные варианты
    - do: Тап Поехали
    - assert: Отображается режим ведения по автомобильному маршруту
    - do: Сместить и повернуть карту
    - assert: |
        Режим ведения сохранился
        Карта переместилась
        Режим Север сверху сброшен
    - do: Перейти по url-схеме yandexmaps://show_route_overview
    - assert: |
        Отображается режим ведения по автомобильному маршруту в состоянии обзора
        Отображается кнопка Продолжить
    - do: Тап Продолжить
    - assert: |
        Режим обзора выключен
        Произошел подзум к стрелке ММП
    - do: Закрыть режим ведения и маршрут
    - assert: Отображается главный экран приложения

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps
    - integration_run:
        - alicekit

  Отсутствие режима обзора для не автомаршрута при переходе по URL-схеме:
    - info: МЯК установлен и не запущен
    - do: Перейти по url-схеме yandexmaps://show_route_overview
    - assert: |
        Приложение запущено
        Отображается главный экран
    - do: Построить ОТ маршрут
    - assert:
        Отображается экран выбора вариантов ОТ-маршрута
    - do: Тап Посмотреть на карте
    - assert: Отображается режим ведения по ОТ-маршруту
    - do: Сместить и повернуть карту
    - assert: |
        Режим ведения сохранился
        Карта переместилась
    - do: Перейти по url-схеме yandexmaps://show_route_overview
    - assert: Отображается режим ведения по ОТ-маршруту без изменений
    - do: Закрыть режим ведения и маршрут
    - assert: Отображается главный экран приложения
    - do: Построить пеший маршрут
    - assert: Отображается экран выбора вариантов пешего маршрута
    - do: Тап Начать
    - assert: Отображается режим ведения по пешему маршруту
    - do: Сместить и повернуть карту
    - assert: |
        Режим ведения сохранился
        Карта переместилась
    - do: Перейти по url-схеме yandexmaps://show_route_overview
    - assert: Отображается режим ведения по пешему маршруту без изменений
    - do: Закрыть режим ведения и маршрут
    - assert: Отображается главный экран приложения
    - do: Построить велосипедный маршрут
    - assert: Отображается экран выбора вариантов вело-маршрута
    - do: Тап Поехали
    - assert: Отображается режим ведения по вело-маршруту
    - do: Сместить и повернуть карту
    - assert: |
        Режим ведения сохранился
        Карта переместилась
    - do: Перейти по url-схеме yandexmaps://show_route_overview
    - assert: Отображается режим ведения по вело-маршруту без изменений


    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps


  Переход по URL-схеме для совершения звонка на iOS:
    - info: |
        Для проверки использовать личный номер телефона (или номер справочной службы)
        Приложение запущено
        Отображается главный экран
    - do: Перейти по url-схеме `yandexmaps://dial_phone?phone_number=89991234567`
    - assert: Открылся поп-ап с кнопкой вызова (в виде трубки) и с кнопкой "Отменить"
    - do: Тап на "Отменить" в попап
    - assert: |
        Поп-ап закрылся
        Отображается главный экран
    - do: Открыть другой экран приложения
    - do: Перейти по url-схеме `yandexmaps://dial_phone?phone_number=89991234567`
    - assert: Открылся поп-ап с кнопкой вызова и с кнопкой "Отменить"
    - do: Тап на вызов
    - assert: Происходит вызов на указанный номер
    - do: Завершить вызов
    - assert: |
        Вызов завершен
        Отображается экран, который был открыт ранее
    - do: Перейти по url-схеме `yandexmaps://dial_phone?phone_number= (без указания номера телефона)`
    - assert: Отображается экран, который был открыт ранее

    - platforms:
      - ios
    - tags:
      - assessors
    - testing:
      - acceptance_maps


  Переход по URL-схеме для совершения звонка на Android:
    - info: |
        Для проверки использовать личный номер телефона (или номер справочной службы)
        Приложение запущено
        Отображается главный экран
    - do: Перейти по url-схеме `yandexmaps://dial_phone?phone_number=89991234567`
    - assert: Открывается системный экран звонка
    - do: Вернуться назад системной кнопкой назад
    - assert: |
        Системный экран звонка закрылся
        Отображается главный экран приложения
    - do: Открыть другой экран приложения
    - do: Перейти по url-схеме `yandexmaps://dial_phone?phone_number=89991234567`
    - assert: Открылся системный экран звонка
    - do: Тап на вызов
    - assert: Происходит вызов на указанный номер
    - do: Завершить вызов
    - assert: |
        Вызов завершен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Переход по URL-схеме для включения слоя пробок:
    - info: |
        Построен произвольный автомаршрут
        Слой пробок выключен
        Cимуляция ведения через Debug-panel-> Routes-> Demo movement
    - do: Перейти по url-схеме yandexmaps://traffic?traffic_on=1
    - assert: |
        Отображается построенный автомаршрут
        Слой пробок включен
    - do: Тап на "Поехали"
    - assert: |
        Открыт экран ведения
    - do: |
        Тап на экран
        Тап на контролл пробок
    - assert: |
        Слой пробок выключен
    - do: Свернуть приложение
    - assert: |
        Отображается главный экран устройства
    - do: Перейти по url-схеме yandexmaps://traffic?traffic_on=1
    - assert: |
        Отображается экран ведения
        Слой пробок включен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps


  Переход по URL-схеме для выключения слоя пробок:
    - info: |
        Построен произвольный маршрут на ОТ
        Слой пробок включен
        Cимуляция ведения через Debug-panel-> Routes-> Demo movement
    - do: Перейти по url-схеме yandexmaps://traffic?traffic_on=0
    - assert: |
        Отображается построенный маршрут на ОТ
        Слой пробок выключен
    - do: Тап на "Поехали"
    - assert: |
        Открыт экран ведения
    - do: |
        Тап на экран
        Тап на контрол слоев
        Тап на слой пробок
    - assert: |
        Слой пробок включен
    - do: Свернуть приложение
    - assert: |
        Отображается главный экран устройства
    - do: Перейти по url-схеме yandexmaps://traffic?traffic_on=0
    - assert: |
        Отображается экран ведения
        Cлой пробок выключен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps


  Переход в ведение с экрана Обзор по диплинку:
    - info: |
        (iOS) Выключен эксперимент no_toolbar_in_guidance
        Отображается экран ведения по автомаршруту
    - do: Тап по экрану
    - do: Тап в тулбаре на кнопку обзора маршрута
    - assert: Отображается обзор маршрута
    - do: Перейти по диплинку yandexmaps://show_ui/map/travel
    - assert: Отображается экран ведения
    - do: Перейти по диплинку yandexmaps://show_ui/map/travel
    - assert: Отображается экран ведения

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход по URL-схеме для активации кнопки "Поехали" в автомаршруте:
    - info: |
        Построен произвольный автомобильный маршрут
        Cимуляция ведения через Debug-panel-> Routes-> Demo movement
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1
    - assert: |
        Началось ведение по построенному автомаршруту

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход по URL-схеме для активации кнопки "Начать" при пешем маршруте:
    - info: |
        Построен произвольный пеший маршрут
        Cимуляция ведения через Debug-panel-> Routes-> Demo movement
        Загружена оффлайн карта города
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1
    - assert: |
        Началось ведение по построенному пешему маршруту
    - do: Завершить ведение
    - assert: |
        Отображается главный экран приложения
    - do: Построить любой пеший маршрут
    - assert: |
        Отображаются варианты пешего маршрута
    - do: Отключить интернет
    - assert: |
        Приложение работает в оффлайн режиме
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1
    - assert: |
        Началось ведение по построенному пешему маршруту

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по URL-схеме для активации кнопки "Поехали" при веломаршруте:
    - info: |
        Построен произвольный веломаршрут
        Cимуляция ведения через Debug-panel-> Routes-> Demo movement
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1
    - assert: |
        Началось ведение по построенному веломаршруту

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по URL-схеме на активацию кнопки "Поехали" в маршрутах не поддерживающих схему:
    - info: |
        Построен произвольный маршрут
    - do: Перейти в таб Все
    - assert: |
        Отображается экран со всеми вариантами маршрута
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1
    - assert: |
        Отображается экран со всеми вариантами маршрута
    - do: |
        Выбрать тип маршрута на ОТ
        Тап на "посмотреть на карте" для любого маршрута
    - assert: |
        Отображается экран с деталями маршрута на ОТ
        Отображается кнопка "Поехали"
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1
    - assert: |
        Отображается экран с деталями маршрута на ОТ
        Отображается кнопка "Поехали"
    - do: Выбрать тип маршрута на такси
    - assert: |
        Отображается маршрут на такси
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1
    - assert: |
        Отображается маршрут на такси

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по URL-схеме отклоняющей активацию кнопки "Поехали":
    - info: |
        Построен произвольный маршрут
        Cимуляция ведения через Debug-panel-> Routes-> Demo movement
    - do: Выбрать маршрут на велосипеде
    - assert: |
        Отображаются варианты маршрута на велосипеде
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=0
    - assert: |
        Отображаются варианты маршрута на велосипеде
    - do: Выбрать пеший маршрут
    - assert: |
        Отображаются варианты пешего маршрута
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=0
    - assert: |
        Отображаются варианты пешего маршрута
    - do: Выбрать авто маршрут
    - assert: |
        Отображаются варианты маршрута на авто
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=0
    - assert: |
        Отображаются варианты маршрута на авто
    - do: Выбрать маршрут на ОТ
    - assert: |
        Отображаются варианты маршрута на ОТ
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=0
    - assert: |
        Отображаются варианты маршрута на ОТ

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по невалидным URL-схемам на активацию кнопки "Поехали":
    - info: |
        Построен произвольный маршрут
    - do: Выбрать маршрут на велосипеде
    - assert: |
        На экране отображаются варианты маршрута на велосипеде
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=ы
    - assert: |
        На экране отображаются варианты маршрута на велосипеде
    - do: Выбрать пеший маршрут
    - assert: |
        Отображаются варианты пешего маршрута
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=ы
    - assert: |
        Отображаются варианты пешего маршрута
    - do: Выбрать автомобильный маршрут
    - assert: |
        Отображаются варианты маршрута на авто
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmd=1
    - assert: |
        Отображаются варианты маршрута на авто
    - do: Выбрать маршрут на ОТ
    - assert: |
        Отображаются варианты маршрута на ОТ
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmd=1
    - assert: |
        Отображаются варианты маршрута на ОТ
    - do: Выбрать маршрут на такси
    - assert: |
        Отображаются варианты маршрута на такси
    - do: Перейти по url-схеме yandexmaps://external_confirmation?confirmed=1000000000
    - assert: |
        Отображаются варианты маршрута на такси

    - platforms:
        - ios
        - android
    - tags:
          - assessors


  Переход по диплинкам для отображения точки на карте:
    - info: |
        Приложение установлено
    - do: Перейти по диплинку yandexmaps://show_point_on_map?lat=55.758192&lon=37.642817
    - assert: |
        Произошло центрирование спана на данной точке
        Отображается карточка топонима с поднятым пином
    - do: Перейти по диплинку yandexmaps://show_point_on_map?lat=55.758192&lon=37.642817&zoom=14
    - assert: |
        Произошло центрирование спана на данной точке на 14-м зуме
        Отображается карточка топонима с поднятым пином
    - do: Перейти по диплинку yandexmaps://show_point_on_map?lat=55.758192&lon=37.642817&zoom=14&desc=TestTest
    - assert: |
        Произошло центрирование спана на данной точке на 14-м зуме
        Отображается карточка топонима с поднятым пином
        В заголовке карточки отображается "TestTest", т.е. значение параметра desc
    - do: Закрыть карточки топонимов
    - do: Перейти по диплинку yandexmaps://show_point_on_map?lat=55.758192&lon=37.642817&zoom=14&no-balloon=1
    - assert: |
        Произошло центрирование спана на данной точке
        Карточка топонима и пин не отображается
    - do: Перейти по диплинку yandexmaps://show_point_on_map?lat=55.758192&lon=37.642817&zoom=14&no-balloon=0
    - assert: |
        Произошло центрирование спана на данной точке
        Отображается карточка топонима с поднятым пином

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps


  Шаринг в карточке топонима:
    - info: |
        Открыта карточка топонима
    - do: Тап по action-кнопке поделиться
    - assert: Отображается выбор приложения для шаринга
    - do: Отправить диплинк в любое сторонее приложение
    - assert: Диплинк получен
    - do: Перейти по полученному диплинку
    - assert: Отображается карточка шаренного топонима

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Шаринг в карточке организации:
    - info: |
        Открыта карточка организиации
    - do: Тап по action-кнопке поделиться
    - assert: Отображается выбор приложения для шаринга
    - do: Отправить диплинк в любое сторонее приложение
    - assert: Диплинк получен
    - do: Перейти по полученному диплинку
    - assert: Отображается карточка шаренной организации

    - platforms:
        - ios
        - android
    - testing:
        - lite_acceptance_maps
    - tags:
        - assessors

  Переход по диплинку конструктора:
    - info: |
        Приложение МЯК установлено
        Приложение выгружено из памяти
    - do: Перейти по диплинку https://yandex.ru/maps/?from=api-maps&ll=37.872384%2C54.758238&mode=usermaps&source=jsapi_2_1_78&um=constructor%3A60cf4343faa80de6dd080cafbaade2017161cfcf69a259e03e70968f444e0369&utm_medium=yasnopole.ru&utm_source=api-maps&z=16
    - assert: |
        Произошел редирект
        Открылись веб-карты с данными карты Конструктора
    - do: Свернуть приложение
    - assert: Отображается рабочий стол устройства
    - do: Перейти по диплинку https://yandex.ru/maps/?from=api-maps&ll=37.872384%2C54.758238&mode=usermaps&source=jsapi_2_1_78&um=constructor%3A60cf4343faa80de6dd080cafbaade2017161cfcf69a259e03e70968f444e0369&utm_medium=yasnopole.ru&utm_source=api-maps&z=16
    - assert: |
        Произошел редирект
        Открылись веб-карты с данными карты Конструктора

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_maps


  Переход по укороченной ссылке:
    - info: |
        Приложение МЯК установлено
        Приложение выгружено из памяти
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/1.png){title=QR-код}

        `https://yandex.ru/maps/-/CCUEA-AP8D`
    - assert: |
        Приложение запустилось
        В МЯК отображается карточка станции метро с информацией о загруженности на станции
    - do: Свернуть приложение
    - assert: Отображается рабочий стол устройства
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/1.png){title=QR-код}

        `https://yandex.ru/maps/-/CCUEA-AP8D`
    - assert: |
        Произошел редирект в приложение
        В МЯК отображается карточка станции метро с информацией о загруженности на станции

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход к экрану Споcобы оплаты по URL cхеме для не авторизованного пользователя:
    - info: |
        Пользователь не авторизован
        Приложение запущено
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/refuel/payment_method
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert:  Отображается экран Способ оплаты
    - do: Перейти на экран меню
    - assert: Пользователь авторизован

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану Споcобы оплаты по URL cхеме для авторизованного пользователя:
    - info: |
        Пользователь авторизован
        Приложение запущено
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/refuel/payment_method
    - assert:  Отображается экран Способы оплаты

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану Споcобы оплаты по URL cхеме в ведении:
    - info: |
        Пользователь авторизован
        Отображается экран с вариантами маршрута на авто
        Включено Debug-panel > Routes > Demo movement
    - do: Тап на Поехали
    - assert: Отображается ведение по маршруту
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/refuel/payment_method
    - assert:  Отображается экран Способы оплаты
    - do: Тап Назад
    - assert: Отображается экран ведения по маршруту

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps

  Переход к поиску Яндекс.Заправок:
    - info: |
        Открыт главный экран приложения
        Включено Debug-panel > Routes > Demo movement
    - do: Перейти по URL-схеме вида yandexmaps://search_gas_stations
    - assert:  Отображается экран поиска с результатами по запросу "Яндекс Заправки"
    - do: Закрыть результаты поиска
    - assert: Отображается главный экран приложения
    - do: Тап на саджест категории поиска
    - assert: Отобразились результаты поиска
    - do: Перейти по URL-схеме вида yandexmaps://search_gas_stations
    - assert:  Отображается экран поиска с результатами по запросу "Яндекс Заправки"
    - do: Закрыть результаты поиска
    - assert: Отображается главный экран приложения
    - do: Построить маршрут и начать ведение
    - assert: Отображается ведение по маршруту
    - do: Перейти по URL-схеме вида yandexmaps://search_gas_stations
    - assert: |
        Продолжается ведение по маршруту
        Отображается результат поиска "Яндекс.Заправки"
        Заправки отображаются на карте

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Публикация дорожного события авторизованным пользователем:
    - info: |
        Пользователь авторизован
        Для добавления ДС необходимо в url схеме заменить координаты на координаты своего ММП в данных lat=55.877394&lon=37.696000
        yandexmaps://add_point?category=0&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
        Для добавления ДС можно использовать разные аккаунты, для сокращения ожидания лимита в 2 минуты
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=0&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
    - assert: Отображается спан карты на месте ММП с пином ДС вида Прочее
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=1&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
    - assert: Отображается спан карты на месте ММП с пином ДС вида Дорожные работы
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=2&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
    - assert: Отображается спан карты на месте ММП с пином ДС вида ДТП
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=6&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
    - assert: Отображается спан карты на месте ММП с пином ДС вида Разговорчики
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=7&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
    - assert: Отображается спан карты на месте ММП с пином ДС вида Камера

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Добавление дорожного события авторизованным пользователем по URL схеме:
    - info: |
        Пользователь авторизован
        Для добавления ДС необходимо в url схеме заменить координаты на координаты своего ММП в данных lat=55.877394&lon=37.696000
        yandexmaps://add_point?category=0&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=0
        Для добавления ДС можно использовать разные аккаунты, для сокращения ожидания лимита в 2 минуты
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=0&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=0
    - assert: Отображается экран добавления ДС вида Прочее
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=1&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=0
    - assert: Отображается экран добавления ДС вида Дорожные работы
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=2&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=0
    - assert: Отображается экран добавления ДС вида ДТП

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Добавление дорожного события неавторизованным пользователем по URL схеме:
    - info: |
        Пользователь неавторизован
        Для добавления ДС необходимо в url схеме заменить координаты на координаты своего ММП в данных lat=55.877394&lon=37.696000
        yandexmaps://add_point?category=0&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
        Для добавления ДС можно использовать разные аккаунты, для сокращения ожидания лимита в 2 минуты
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=6&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=1
    - assert: |
        Отображается спан карты на месте ММП
        Отображается экран авторизации
        За экраном авторизации отображается экран добавления ДС вида Разговорчики
    - do: Авторизоваться
    - assert: Отображается экран добавления ДС вида Разговорчики
    - do: Перейти по URL-схеме вида yandexmaps://add_point?category=7&where=%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9%20%D1%80%D1%8F%D0%B4&comment=bad&lat=55.877394&lon=37.696000&force_publish=0
    - assert: |
        Отображается спан карты на месте ММП
        Отображается экран авторизации
        За экраном авторизации отображается экран добавления ДС вида Камера
    - do: Авторизоваться
    - assert: Отображается экран добавления ДС вида Камера

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Смена голоса аннотаций через url-схему:
    - info: |
        В настройках включено голосовое сопровождение - Алиса
        Включено Debug-panel > Routes > Demo movement
    - do: Построить произвольный автомаршрут
    - do: Тап на Поехали
    - do: Перейти по URL-схеме вида yandexmaps://set_sound_scheme?scheme=ru_male
    - assert: |
        Продолжается ведение по маршруту
        Голосовые аннотации произносятся голосом Дмитрия
    - do: Завершить ведение по маршруту
    - assert: Отображается главный экран приложения
    - do: Перейти по URL-схеме вида yandexmaps://set_sound_scheme?scheme=ru_female
    - assert: Отображается главный экран приложения
    - do: Построить автомобильный маршрут любым способом
    - assert: Отображается экран вариантов маршрута
    - do: Тап на Поехали
    - assert:  Голосовые аннотации произносятся голосом Оксаны
    - do: Завершить ведение по маршруту
    - assert: Отображается главный экран приложения
    - do: Перейти по URL-схеме вида yandexmaps://set_sound_scheme?scheme=ru_alice
    - assert: Отображается главный экран приложения
    - do: Построить автомобильный маршрут любым способом
    - assert: Отображается экран вариантов маршрута
    - do: Тап на Поехали
    - assert:  Голосовые аннотации произносятся голосом Алисы

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Смена голоса аннотаций через url-схему (если голос не загружен):
    - info: |
        Открыт главный экран приложения
        В настройках голоса не загружены дополнительные голоса
        Включено Debug-panel > Routes > Demo movement
        Если голос не загружен, то при переходе по схеме начнется загрузка
    - do: Перейти по URL-схеме вида yandexmaps://set_sound_scheme?scheme=ru_starwars_light
    - assert: Открыт главный экран приложения
    - do: Перейти в Меню - Настройки - Маршруты - Звук
    - assert: |
        Голосовое сопровождение - Магистр Йода
    - do: Построить автомобильный маршрут любым способом
    - assert: Отображается экран вариантов маршрута
    - do: Тап на Поехали
    - assert: Произносятся голосовые аннотации голосом Магистра Йоды
    - do: Перейти по URL-схеме вида yandexmaps://set_sound_scheme?scheme=ru_starwars_dark
    - assert: |
        Продолжается ведение по маршруту
        Как только голос загрузится - аннотации будут произносится голосом Дарта Вейдера

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Открытие шторы Плюса при переходе по URL схеме для пользователя с подпиской:
    - info: |
        Пользователь авторизован аккаунтом с подпиской на Яндекс.Плюс
        Отображается главный экран приложения
        Устройство в вертикальной ориентации
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/plus-sheet
    - assert: |
        Отображается штора Яндекс.Плюс
        В шторе отображаются баллы плюса
        За шторой отображается экран меню
    - do: Свайпом закрыть штору
    - assert: Отображается экран меню

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Открытие шторы Плюса при переходе по URL схеме для пользователя без подписки:
    - info: |
        Пользователь авторизован аккаунтом без подписки на Яндекс.Плюс
        Приложение не запущено
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/plus-sheet
    - assert: |
        Отображается штора Яндекс.Плюс
        В шторе отображаются баллы плюса и кнопка подключения подписки
        За шторой отображается экран меню
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: Отображается штора Яндекс.Плюс
    - do: Свайпом закрыть штору
    - assert: Отображается экран меню

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Открытие шторы Плюса при переходе по URL схеме неавторизованному пользователю:
    - info: |
        Пользователь неавторизован
        Приложение не запущено
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/plus-sheet
    - assert: |
        iOS: Отображается экран авторизации
        Android: Отображается штора Яндекс.Плюс с кнопкой Подключить
        За шторой отображается экран меню
    - do: |
        Только для Android: Тап Подключить
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert: Отображается штора Яндекс.Плюс

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps

  Включение парковок по URL-схеме:
    - info: |
        Открыт главный экран
        Слой парковок отключен
        Включены пробки
    - do: Перейти по URL-схеме вида yandexmaps://show_ui/map?carparks_enabled=1
    - assert: |
        Отображается главный экран
        Слой парковок включен
        Выключены пробки
    - do: Перейти по URL-схеме вида yandexmaps://show_ui/map?carparks_enabled=0
    - assert: |
        Отображается главный экран
        Слой парковок отключен
    - do: Перейти по URL-схеме вида yandexmaps://carparks_route
    - assert: |
        Отображается главный экран
        Слой парковок включен
    - do: Совершить поиск по категории
    - assert: Отображается экран результатов поиска
    - do: Перейти по URL-схеме вида yandexmaps://show_ui/map?carparks_enabled=0
    - assert: |
        Отображается экран результатов поиска
        Слой парковок отключен
    - do: Построить авто маршрут любым способом
    - assert: Отображается экран ведения по маршрута
    - do: Перейти по URL-схеме вида yandexmaps://carparks_route
    - assert: |
        Отображается экран ведения по маршруту
        Слой парковок включен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход к табу Задания по URL cхеме:
    - info: |
        Пользователь не авторизован
        Приложение запущено
    - do: Перейти по URL-схеме вида https://yandex.ru/maps/profile/ugc/assignments/
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert: |
        Отображается экран Отзывы и исправления на табе Впечатления
        Присутствует таб Задания
    - do: Перейти на экран меню
    - assert: Пользователь авторизован
    - do: Перейти по URL-схеме вида https://yandex.ru/maps/profile/ugc/assignments/
    - assert: Отображается таб Задания
    - do: Закрыть таб (Тап крестик / Тап системную кнопку Back (Android))
    - assert: Отображается экран Отзывы и исправления
    - do: Тап Назад
    - assert: Отображается экран Профиля

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Переход к конкретному заданию из таба Задания по URL cхеме:
    - info: |
        Пользователь авторизован
        Приложение не запущено
        assignment_id - это id организации, для которой есть задание в ЛК
        Узнать id можно, пошарив ссылку на организацию в любой мессенджер
    - do: Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/profile/ugc/assignments?assignment_id=os:175467174304
    - assert: |
        Приложение запущено
        Отображается таб Задания
        Первым в списке отображается задание, к которому был осуществлен переход
    - do: Вернуться на главный экран приложения
    - do: |
        Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/profile/ugc/assignments?assignment_id=os:14726932854
        Указав id другой организации, для которой есть задание в ЛК
    - assert: |
        Отображается таб Задания
        Первым в списке отображается задание, к которому был осуществлен переход
    - do: Вернуться на главный экран приложения
    - do: |
          Перейти по URL-схеме вида yandexmaps://maps.yandex.ru/profile/ugc/assignments?assignment_id=os:14726932854
          Указав id организации, для которой нет задания в ЛК
    - assert: |
        Отображается таб Задания

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие webview по url-схеме:
    - info: |
        Для проверки открытия карточки остановки используется url-схема вида yandexmaps://open_webview?url= encoded_url
        encoded_url - произвольный закодированный через % урл без спецсимволов
        Закодировать можно тут: https://www.urlencoder.org/
        Пример - для https://yandex.ru закодированный url выглядит так: https%3A%2F%2Fyandex.ru
        Вся ссылка будет иметь вид yandexmaps://open_webview?url=https%3A%2F%2Fyandex.ru
    - do: Перейти по созданной url-схеме
    - assert: Отображается вебвью с содержимым закодированного url
    - do: Тап крестик
    - assert: Вебвью закрывается
    - do: Выполнить поиск
    - assert: Отображаются результаты поиска
    - do: Перейти по созданной url-схеме
    - assert: Отображается вебвью с содержимым закодированного url
    - do: Тап крестик
    - assert: |
        Вебвью закрывается
        Отображаются результаты поиска

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС разных типов по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: |
        Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=Other,SpeedControl
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: |
        Открыт экран слоёв
        Слой ДС включен
    - do: Перейти в ДС
    - assert:  Дорожные события "Прочее" и "Камеры" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС "Камеры" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: |
        Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=SpeedControl
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: |
        Открыт экран слоёв
        Слой ДС включен
    - do: Перейти в ДС
    - assert: Дорожные события "Камеры" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС "Дорожные работы" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=Reconstruction
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: Слой ДС включен
    - do: Перейти в ДС
    - assert: Дорожные события "Дорожные работы" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС "Прочее" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: |
        Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=Other
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: |
        Открыт экран слоёв
        Слой ДС включен
    - do: Перейти в ДС
    - assert: Дорожные события "Прочее" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС "Разведение мостов" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: |
        Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=Drawbridge
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: |
        Открыт экран слоёв
        Слой ДС включен
    - do: Перейти в ДС
    - assert: Дорожные события "Разведение мостов" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС "Перекрытия" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=Closed
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: |
        Открыт экран слоёв
        Слой ДС включен
    - do: Перейти в ДС
    - assert: Дорожные события "Перекрытия" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС "Разговорчики" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=Chat
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: Открыт экран слоёв
    - do: Перейти в ДС
    - assert: Дорожные события "Разговорчики" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение ДС ДТП по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: Перейти по схеме вида yandexmaps://set_setting?name=roadEventModes_v2&value=Accident
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: |
        Открыт экран слоёв
        Слой ДС включен
    - do: Перейти на экран выбора ДС
    - assert: |
        Дорожные события "ДТП" включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Сохранение ранее включенных ДС при включении по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        Некоторые ДС выключены
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: |
        Перейти по схеме вида  yandexmaps://set_setting?name=roadEventModes_v2&value=Other,Accident
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Тап на иконку слоев на главном экране
    - assert: |
        Открыт экран слоёв
        Слой ДС включен
    - do: Перейти на экран выбора ДС
    - assert: |
        ДС "Прочее", "ДТП" включились по схеме, раннее включенные дс остались включенными

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Включение звуковых оповещений по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        Звуковые оповещения в маршрутах выключены
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: |
        Зайти в настройки маршрутов (Меню - Настройки - Маршруты)
        Перейти по схеме вида yandexmaps://set_setting?name=soundNotifications&value=All
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: |
        Перейти на экран настроек маршрута
    - assert: |
        Звуковые оповещения в маршрутах включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Выключение звуковых оповещений по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        Звуковые оповещения в маршрутах включены
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: |
        Зайти в настройки маршрутов (Меню - Настройки - Маршруты)
        Перейти по схеме вида yandexmaps://set_setting?name=soundNotifications&value=Mute
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
    - do: Перейти на экран настроек маршрута
    - assert: Звуковые оповещения в маршрутах выключены

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Установка типа карты "Спутник" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        Тип карты !=Спутник
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: Тап на иконку слоев на главном экране
    - assert: Открыт экран слоёв
    - do: Перейти по схеме вида yandexmaps://set_setting?name=rasterMode&value=Sat
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
        Установлен тип карты "Спутник"

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Установка типа карты "Схема" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        Тип карты !=Схема
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: Тап на иконку слоев на главном экране
    - assert: Открыт экран слоёв
    - do: Перейти по схеме вида yandexmaps://set_setting?name=rasterMode&value=Map
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
        Установлен тип карты "Схема"

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Установка типа карты "Гибрид" по url-схеме:
    - info: |
        Включена Алиса (Меню -> Настройки -> Основные)
        Тип карты !=Гибрид
        Отображается любой экран приложения
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
    - do: Тап на иконку слоев на главном экране
    - assert: Открыт экран слоёв
    - do: Перейти по схеме вида yandexmaps://set_setting?name=rasterMode&value=Skl
    - assert: |
        Приложение запущено
        Отображается открытый ранее экран
        Установлен тип карты "Гибрид"

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Открытие сторис бизнеса по по диплинку:
    - info: Открыт главный экран приложения
    - do: |
        Перейти по URL-схеме:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-26%20в%2015.55.58.png){title=Url-схема}

        `https://yandex.ru/maps/org/postamat_yandeks_marketa/112658299317/?ll=37.546452%2C55.695964&stories%5Bbusiness%5D=112658299317&stories%5Bid%5D=47449&z=17`
    - assert: Открыто сторис
    - do: Тап на кнопку закрыть
    - assert: |
        Сторис закрылась
        Открыта полная карточка организации "Постамат Яндекс.Маркета"
    - do: Закрыть карточку Постамата
    - do: |
        Перейти по URL-схеме:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-26%20в%2015.57.15.png){title=Url-схема}

        `https://yandex.ru/maps?stories%5Bbusiness%5D=112658299317&stories%5Bid%5D=47449`
    - assert: Открыто сторис
    - do: Тап на кнопку закрыть
    - assert: |
        Сторис закрылась
        Открыта полная карточка организации "Постамат Яндекс.Маркета"

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Загрузка кэша при переходе по URL-схеме:
    - info: |
        Спан карты и ММП в месте, где предлагается для загрузки только одна офлайн-карта (например: Московская область)
        Для перехода по url-схеме также можно создать QR-код с ссылкой и перейти по нему
        Дан доступ к ММП
    - do: Перейти по url-схеме yandexmaps://maps.yandex.ru/offline-maps?search_by=current_camera_position&start_download=true
    - assert: |
        Запущено приложение
        Открыт экран "Офлайн-карты"
        Пункт "Рядом с вами" поменялся на "Загруженные"
        Ниже предложена для загрузки одна офлайн-карта
        Карта начала загружаться
    - do: Отменить загрузку
    - do: Свернуть приложение
    - do: Перейти по url-схеме yandexmaps://maps.yandex.ru/offline-maps?search_by=current_camera_position&start_download=false
    - assert: |
        Запущено приложение
        Открыт экран "Офлайн-карты"
        Присутствует пункт "Рядом с вами"
        Ниже предложена для загрузки одна офлайн-карта
        Карта не загружается
    - do: Свернуть приложение
    - do: Перейти по ссылке yandexmaps://maps.yandex.ru/offline-maps?search_by=name&name=Москва&start_download=true
    - assert: |
        Запущено приложение
        Открыт экран Офлайн-карты
        Отображается несколько результатов поиска офлайн-карт по запросу "Москва"
        Карта не загружается
    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Сохранение эксперементов с неизвестным service Id при открытии по URL-схе:
    - info: |
        Включено отображение всех дорожных событий (Настройки -> Карта -> Дорожные события)
        Открыт спан Москвы
    - do: Перейти по url-схеме yandexmaps://add_exp/MAPKIT?road_events_multizoom=9,21
    - do: Перезапустить приложение
    - assert: |
        Открыт спан Москвы
        ДС пропали с карты
    - do: Открыть панель эксперементов (Debug-panel -> Experiments)
    - do: Произвести поиск по запросу road_events
    - assert: В дебаг панели отображается эксперимент "MAPKIT/road_events_multizoom" c значениями 9,21

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps


  Переход по диплинку построения маршрута в приложение:
    - do: |
        Перейти по диплинку yandexmaps://build_route_on_map/?lat_from=59.967870&lon_from=30.242658&lat_to=59.898495&lon_to=30.299552 в приложение
    - assert: |
        Открыт экран выбора вариантов маршрута
        Тип маршрута соответствует последнему построенному

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Поиск по диплинку Яндекс.Заправок:
    - do: Перейти по URL-схеме вида yandexmaps://search_gas_stations
    - assert: Отображается экран поиска с результатами по запросу АЗС

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Добавление мест Дом/Работа неавторизованным пользователем по url-схеме:
    - info: |
        Пользователь неавторизован
        На устройстве добавлено только место Работа
        Открыт раздел Места на экране Закладки (Меню->Закладки и мой транспорт)
    - do: Перейти по url:yandexmaps://set_place?type=home&lat=54.201314&lon=37.686817
    - assert: |
        Появляется поп-ап с предложением авторизоваться
        Присутствуют кнопки Войти и Сохранить на этом устройстве
    - do: Тап Сохранить на этом устройстве
    - assert: В строке Дом указан адрес "улица Панфиловцев, 30"
    - do: Перейти по url:yandexmaps://set_place?type=work&lat=54.195904&lon=37.691769
    - assert: |
        Появляется поп-ап с предложением авторизоваться
        Присутствуют кнопки Войти и Сохранить на этом устройстве
    - do: Тап Сохранить на этом устройстве
    - assert: В строке Работа указан адрес "улица Попова, 53"

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - tags:
        - newbie


  Показ интро-шторы для приходящих из Навигатора при переходе по url-схеме:
    - info: |
        Я.Навигатор не установлен
        Приложение установлено
        После установки приложение не было запущено
    - do: |
        Перейти по URL-схеме:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-26%20в%2014.26.56.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/navi-intro-sheet`
         
    - do: Разрешить доступ к геолокации
    - assert: |
        Открывается приложение МЯК
        Отображается интро-штора с кнопкой "Отлично"
        В интро-шторе отображается анимация движения курсора
    - do: |
        Перейти по URL-схеме:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-26%20в%2014.26.56.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/navi-intro-sheet`
    - assert: |
        Открывается приложение МЯК
        Интро-штора не отображается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Переход к экрану Скидки и бонусы по URL cхеме для не авторизованного пользователя:
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Пользователь не авторизован
        Приложение запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-1.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts`
    - do: Перейти по URL-схеме
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert:  Отображается экран Скидки и бонусы со списком АЗС
    - do: Перейти на экран меню
    - assert: Пользователь авторизован

    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану Скидки и бонусы по URL cхеме для авторизованного пользователя:
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Пользователь авторизован
        Приложение  не запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-1.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts`
    - do: Перейти по URL-схеме
    - assert: Отображается экран Скидки и бонусы со списком АЗС

    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану ввода промокода с пустым полем по URL cхеме для не авторизованного пользователя:
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Пользователь не авторизован
        Приложение  запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-2.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts?id=promocode`
    - do: Перейти по URL-схеме
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert:  Отображается экран ввода промокода с пустым полем
    - do: Перейти на экран меню
    - assert: Пользователь авторизован


    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану ввода промокода с пустым полем по URL cхеме для авторизованного пользователя:
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Пользователь авторизован
        Приложение  не запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-2.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts?id=promocode`
    - do: Перейти по URL-схеме
    - assert:  Отображается экран ввода промокода с пустым полем


    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану ввода промокода с введённым промокодом по URL cхеме для авторизованного пользователя:
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Пользователь авторизован
        Приложение  не запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-3.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts?id=promocodes&metadata=SALE10`
    - do: Перейти по URL-схеме
    - assert:  Отображается экран ввода промокода с введённым промокодом SALE10


    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану карты лояльности по URL cхеме для авторизованного пользователя:
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Пользователь авторизован
        Приложение  не запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-4.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts?id=Rosneft`
    - do: Перейти по URL-схеме
    - assert:  Отображается экран ввода карты лояльности Роснефть


    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану карты лояльности по URL cхеме для авторизованного пользователя(местоположение не определенно):
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Местоположение у приложение отозвано/не выдавалось
        Пользователь авторизован
        Приложение  не запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-4.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts?id=Rosneft`
    - do: Перейти по URL-схеме
    - assert:  Отображается экран ввода карты лояльности Роснефть


    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Переход к экрану Скидки и бонусы по URL cхеме для авторизованного пользователя(местоположение не определенно):
    - info: |
        Настройки - Debug Panel - Various - Refuel debug modee - Off
        Местоположение у приложение отозвано/не выдавалось
        Пользователь авторизован
        Приложение  не запущено
        [collapsed-image](https://jing.yandex-team.ru/files/midway/download-1.png){title=Url-схема}

        `yandexmaps://maps.yandex.ru/refuel/discounts`
    - do: Перейти по URL-схеме
    - assert: Отображается экран Скидки и бонусы со списком АЗС

    - platforms:
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps

  Проверка трекинга количества открытий по одному диплинку:
    - info: |
        Ранее не было осуществлено перехода по диплинку в приложение
        Приложение Яндекс.Карты не запущено
    - do: |
         Перейти по интенту [collapsed-image](https://jing.yandex-team.ru/files/xnautilusx/Screenshot%202022-04-22%20at%2015.09.40.png){title=QR-код}
         (yandexmaps://build_route_on_map/?lat_from=59.967870&lon_from=30.242658&lat_to=59.898495&lon_to=30.299552&client=002)
         (неудачная попытка построить маршрут не засчитывается. Первое открытие, которое сбрасывается разрешением включить геолокацию, не засчитывается)
    - assert: |
        Открывается приложение на экране выбора вариантов маршрута
        Отображается построенный маршрут
    - do: Выгрузить приложение
    - assert: Отображается главный экран устройства
    - do: Перейти по диплинку в приложение еще 10 или более раз
    - assert: |
        Открывается приложение на экране выбора вариантов маршрута
        Отображается построенный маршрут
        Переход по диплинку не блокируется сообщением о превышении лимита открытий приложения по ссылке

    - platforms:
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Проверка трекинга количества открытий по разным ссылкам:
    - info: |
        Ранее не было осуществлено перехода по ссылкам в приложении
        Использовать ссылки по построению маршрута:
        1. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.687614%2C39.776434&rtt=auto
        2. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.693832%2C39.764052&rtt=auto
        3. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.692714%2C39.761511&rtt=auto
        4. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.690414%2C39.759965&rtt=auto
        5. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.689405%2C39.762388&rtt=auto
        6. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.688235%2C39.765317&rtt=auto
        7. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.68648%2C39.76812&rtt=auto
        8. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.682469%2C39.774889&rtt=auto
        9. https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.683158%2C39.77481&rtt=auto
        10.https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.679292%2C39.785055&rtt=auto
        11.https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.678743%2C39.773865&rtt=auto
        Приложение Яндекс.Карты не запущено
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/maps.png){title=QR-код}

        `yandexmaps://add_exp?maps_maximum_number_of_navigation_starts_without_license=10`
    - do: Перезапустить приложение
    - do: |
        Перейти по ссылкам с №1 по №10 из предусловия (неудачная попытка построить маршрут не засчитывается
        Первое открытие, которое сбрасывается разрешением включить геолокацию, не засчитывается)
    - assert: |
        Открывается приложение на экране выбора вариантов маршрута
        Отображается построенный маршрут
    - do: Выгрузить приложение
    - assert: Отображается главный экран устройства
    - do: Перейти по ссылке №11
    - assert: |
        Открывается экран загрузки приложения
        Происходит перенаправление в webview с информацией о превышении лимита открытий приложения по ссылке
        Приложение не открывается
        Маршрут не строится

    - platforms:
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Проверка доступности ранее открытых ссылок:
    - info: |
        Использовать ссылки по построению маршрута:
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.687614%2C39.776434&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.693832%2C39.764052&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.692714%2C39.761511&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.690414%2C39.759965&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.689405%2C39.762388&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.688235%2C39.765317&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.68648%2C39.76812&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.682469%2C39.774889&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.683158%2C39.77481&rtt=auto
        https://yandex.ru/maps?rtext=57.697737%2C39.758592~57.679292%2C39.785055&rtt=auto
        Приложение Яндекс.Карты не запущено
        Перейти по всем 10 ссылкам построения маршрута в приложении (неудачная попытка построить маршрут не засчитывается. Первое открытие, которое сбрасывается разрешением включить геолокацию, не засчитывается)
    - do: Перейти по любой ссылке из предусловия
    - assert: |
        Открывается приложение на экране выбора вариантов маршрута
        Отображается построенный маршрут
        Переход по ссылке не блокируется сообщением о превышении лимита открытий приложения по ссылке

    - platforms:
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Перенаправление поиска по координатам в Таксометр:
    - preconditions: Можно заранее скопировать координаты топонима так:открыть карточку топонима, тап на строку с координатами
    - do: |
        Включить эксперименты в МЯК, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/taximetr.png){title=QR-код}

        `yandexmaps://add_exp?forward_coordinates_search_to_taximeter`
    - do: Перезапустить МЯК
    - do: Скачать и установить на девайс apk файл Таксометра от сюда https://disk.yandex.ru/d/N75VHh7IVExBhQ
    - do: Залогиниться с номером +70005679771 (пароль – любые цифры) в Таксометре
    - do: Тап на строку поиска в МЯК
    - do: Вставить координаты топонима
    - do: Тап на Найти
    - assert: |
        Открывается Таксометр c проложенным маршрутом до данного топонима
        Поиск в Картах не происходит

    - platforms:
        - android


  Открытие экрана написания отзыва авторизованным пользователем по URL схеме:
    - info: |
        На организацию https://yandex.com/maps/org/1198521045 ранее не было написанно отзыва
        Пользователь авторизован
    - do: |
        Использовать интент
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/review.png){title=QR-код}

        `yandexmaps://yandex.ru/maps/?oid=1198521045&review=true`
    - assert: Открыт экран написания отзыва

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие экрана написания отзыва авторизованным пользователем, если отзыв был уже написан по URL схеме:
    - info: |
        На организацию https://yandex.com/maps/org/1198521045 ранее был оставлен отзыв
        Пользователь авторизован
    - do: |
        Использовать интент
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/review.png){title=QR-код}

        `yandexmaps://yandex.ru/maps/?oid=1198521045&review=true`
    - assert: |
        Открыт экран редактирования отзыва
        Отображается введенный отзыв

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие экрана написания отзыва не авторизованным пользователем по URL схеме:
    - info: |
        Пользователь не авторизован
    - do: |
        Использовать интент
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/review.png){title=QR-код}

        `yandexmaps://yandex.ru/maps/?oid=1198521045&review=true`
    - assert: |
        Открывается карточка организации
        Показано предложение авторизации
    - do: Авторизоваться аккаунтом, которым не было оставлено отзыва на эту организацию
    - assert: |
        Предложение авторизоваться закрылось
        Отображается экран написания отзыва

    - platforms:
        - ios
        - android
    - tags:
        - assessors
