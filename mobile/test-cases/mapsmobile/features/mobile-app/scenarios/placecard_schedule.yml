components: placecard_schedule
testing:
  - regress
  
specs:
  У организации указан праздничный день и есть владелец:
    - info: |
        В Debug-Panel -> Various -> Debug holidays выставить следующие настройки:
        [Android] validHours/valid_schedule = оставить пустым, unusualHours = текущая дата
        [iOS] выбрать текущую дату
        У организации есть владелец (любая организация с синей заботливой галкой у названия)
    - do: Осуществить поиск, например, по запросу "Где поесть"
    - assert: Отобразились результаты поиска, в серпе отобразилось уведомление "График работы организации мог поменяться из-за праздников" с кнопкой Ок
    - do: Тап на организацию, у которой есть владелец
    - assert: Открылась карточка организации, под информацией о времени работы отобразилось уведомление "График работы может поменяться из-за праздников"
    - do: Тап на время работы
    - assert: |
        Открылся попап "Режим работы"
        Под названием отобразилось уведомление "Сегодня организация работает по измененному графику"
        Праздничный день в графике выделяется серым, после дня недели написано число и месяц
    - do: Закрыть попап "Режим работы" и свернуть карточку организации до мини-карточки
    - assert: В мини-карточке под информацией о времени работы также отобразилось уведомление "График работы может поменяться из-за праздников"
    - do: В Debug-Panel -> Various -> Debug holidays выставить следующие настройки validHours = дата на этой недели, но не сегодняшняя, unusualHours = дата на этой недели, но не сегодняшняя, сохранить настройки
    - assert: Настройки сохранены
    - do: Осуществить поиск, например по запросу "Где поесть"
    - assert: Отобразились результаты поиска, в серпе отсутствует уведомление о графике работы
    - do: Тап на организацию, у которой есть владелец
    - assert: Открылась карточка организации, под информацией о времени работы отсутствует уведомление об изменении графика работы
    - do: Тап на время работы
    - assert: |
        Открылся попап "Режим работы"
        Под названием отобразилось уведомление "<Число месяц> организация работает по измененному графику"
        Праздничный день в графике выделяется серым, после дня недели написано число и месяц
    - do: Закрыть попап "Режим работы" и свернуть карточку организации до мини-карточки
    - assert: В мини-карточке под информацией о времени работы отсутствует уведомление об изменении графика работы
    - platforms:
        - ios
        - android
    - tags:
        - newbie
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    

  У организации указан праздничный день и нет владельца:
    - info: |
        В дебаг панели в Debug holidays выставить следующие настройки validHours = текущая дата, unusualHours = текущая дата (формат следующий ["28-05-2019", "29-05-2019", "30-05-2019"]).
        У организации нет владельца (любая организация без заботливой галки у названия)
    - do: Осуществить поиск, например по запросу 'Где поесть'
    - assert: Отобразились результаты поиска, в серпе отобразилось уведомление 'График работы организации мог поменяться из-за праздников' с кнопкой 'Ок'
    - do: Тап на организацию, у которой нет владельца, например 'Кофе Семь' в Ижевске
    - assert: Открылась карточка организации, под информацией о времени работы отобразилось уведомление 'График работы может поменяться из-за праздников'
    - do: Тап на время работы
    - assert: |
        Открылся попап 'Режим работы'.
        Под названием отобразилось уведомление 'Сегодня график работы может поменяться из-за праздников'.
        Праздничный день в графике выделяется серым, после дня недели написано число и месяц
    - platforms:
        - ios
    
    
  Отсутствие уведомлений для праздничных дней не текущей и следующей неделе:
    - info: В дебаг панели в Debug holidays выставить следующие настройки validHours = текущая дата (формат следующий [\"28-05-2019\", \"29-05-2019\", \"30-05-2019\"]), unusualHours = дата предыдущей недели и дата недели после следующей (формат следующий [\"20-05-2019\", \"10-06-2019\"])
    - do: Осуществить поиск, например по запросу 'Где поесть'
    - assert: Отобразились результаты поиска, в серпе отсутствует уведомление о праздниках
    - do: Тап на любую организацию, например 'Кофе Семь' в Ижевске
    - assert: Открылась карточка организации, под информацией о времени работы отсутствует уведомление о праздниках
    - do: Тап на время работы
    - assert:
        Открылся попап 'Режим работы'
        Под названием отсутствует уведомление о праздниках
    - platforms:
        - ios


  Отображение уведомлений при переходе с одного месяца на другой:
    - info: |
        На девайсе поменять дату так, чтобы в текущей неделе был переход с одного месяца на следующий.
        В дебаг панели в Debug holidays выставить следующие настройки validHours = остается пустым, unusualHours = текущая дата, дата последнего одного месяца и дата первого дня следующего месяца (формат следующий [\"29-05-2019\", \"30-05-2019\", \"31-05-2019\",\"01-06-2019\"]) .
    - do: Осуществить поиск, например по запросу 'Где поесть'
    - assert: Отобразились результаты поиска, в серпе отобразилось уведомление 'График работы организации мог поменяться из-за праздников' с кнопкой 'Ок'
    - do: Тап на любую организацию, например 'Кофе Семь' в Ижевске
    - assert: Открылась карточка организации, под информацией о времени работы отобразилось уведомление 'График работы может поменяться из-за праздников'
    - do: Тап на время работы
    - assert: |
        Открылся попап 'Режим работы'.
        Под названием отобразилось уведомление, например 'С <дата последнего дня месяца> по <дата первого дня следующего месяца> организация работает по измененному графику'.
        После праздничных дней недели написано число и месяц
    - platforms:
        - ios
    
    
  Закрытие уведомления о праздничных днях в серпе:
    - info: |
        В дебаг панели Various -> Debug holidays
        Выставить следующие настройки:
        (iOS):
        - validHours = текущая дата
        - unusualHours = текущая дата
        - Формат следующий [“28-05-2019”]
        (Android):
        - valid_schedule = текущая дата
        - unusual_hours = текущая дата
        - Формат следующий [2019-05-28]
        У организации есть владелец (любая организация с синей заботливой галкой у названия)
        В серпе в уведомлении о праздничных днях для текущего дня кнопку 'Ок' не тапали
    - do: Осуществить поиск, например по запросу 'Где поесть'
    - assert: |
        Отобразились результаты поиска
        В серпе отобразилось уведомление 'График работы организации мог поменяться из-за праздников'
        Присутствует кнопка 'Ок'
    - do: Тап на кнопку 'Ок'
    - assert: Уведомление закрылось и больше не отображается для текущего праздника
    - do: Изменить дату в девайсе и в дебаг панели для обоих параметров на следующий день
    - do: Осуществить поиск по запросу 'Где поесть'
    - assert: |
        Отобразились результаты поиска
        В серпе отобразилось уведомление 'График работы организации мог поменяться из-за праздников'
        Присутствует кнопка 'Ок'

    - platforms:
        - android
        - ios
    - tags:
        - newbie
    - testing:
        - acceptance_maps
        - lite_acceptance_maps


  Проверка разных комбинаций праздничных дней:
    - info: |
        В дебаг панели выбрать пункт “Праздничные дни” и будем считать следующие настройки
        а) - valid_schedule = (1,2,3), unusual_hours = (1), где 1,2,3 означает, что прописываем три друг за другом идущие даты для текущей недели, например [2019-05-28, 2019-05-29, 2019-05-30], а unusual_hours = (1) означает, что тут пропишем дату [2019-05-28] из примера ранее.
        б) Вариант 1,3 означает, что прописываем две не идущие друг за другом даты текущей недели, например [2019-05-28, 2019-05-30]. valid_schedule = (8 и более) любая дата следующей недели. valid_schedule = (0) - нет даты.
        Формат следующий [2019-05-28, 2019-05-29, 2019-05-30].
        У организации есть владелец (любая организация с заботливой галкой у названия
    - do: В дебаг панели выставить следующие настройки valid_schedule = (1,2,3), unusual_hours = (1) и сохранить
    - assert: Настройки сохранились
    - do: Осуществить поиск, например по запросу 'Где поесть'
    - assert: Отобразились результаты поиска, в серпе отобразилось уведомление 'График работы организации мог поменяться из-за праздников' с кнопкой 'Ок'
    - do: Тап на любую организацию с заботливой галкой и полным графиком, например Ayami в Ижевске
    - assert: Открылась карточка организации, под информацией о времени работы отобразилось уведомление 'График работы может поменяться из-за праздников'
    - do: Тап на время работы
    - assert: |
        Открылся попап 'Режим работы'.
        Под названием отобразилось уведомление, например 'Сегодня организация работает по праздничному графику'.
        После праздничных дней недели написано число и месяц
    - do: В дебаг панели выставить следующие настройки valid_schedule = (1,3), unusual_hours = (1,2,3) и сохранить
    - assert: Настройки сохранились
    - do: Осуществить поиск по запросу 'Где поесть', выбрана организация с заботливой галкой и полным графиком, открыт режим работы
    - assert: |
        В серпе отобразилось уведомление 'График работы организации мог поменяться из-за праздников' с кнопкой 'Ок'.
        В карточке организации под информацией о времени работы отобразилось уведомление 'График работы может поменяться из-за праздников'.
        Под названием отобразилось уведомление 'Сегодня организация работает по праздничному графику', после праздничных дней указаны число и месяц
    - do: В дебаг панели выставить следующие настройки valid_schedule = (1,3,8), unusual_hours = (1,2,3) и сохранить (8 - это следующая неделя)
    - assert: Настройки сохранились
    - do: Осуществить поиск, например по запросу 'Где поесть', выбрать любую организацию с заботливой галкой и полным графиком, например Ayami в Ижевске и посмотреть все уведомления и график работы
    - assert: |
        В серпе отобразилось уведомление 'График работы организации мог поменяться из-за праздников' с кнопкой 'Ок'.
        В карточке организации под информацией о времени работы отобразилось уведомление 'График работы может поменяться из-за праздников'.
        Под названием отобразилось уведомление 'Сегодня организация работает по праздничному графику', после праздничных дней текущей недели указаны число и месяц
    - do: В дебаг панели выставить следующие настройки valid_schedule = (7,8), unusual_hours = (8) и сохранить
    - assert: Настройки сохранились
    - do: Осуществить поиск, например по запросу 'Где поесть', выбрать любую организацию с заботливой галкой и полным графиком, например Ayami в Ижевске, и посмотреть все уведомления и график работы
    - assert: Уведомлений нет ни на одной странице, так как текущая неделя не является неделей праздников (unusual_hours = следующая неделя)
    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps

    
  У организации не указаны праздничные дни:
    - info: |
        У организации есть владелец (любая организация с синей заботливой галкой у названия)
    - do: В Debug panel -> Various выбрать пункт 'Праздничные дни' и выставить следующие настройки valid_schedule оставить пустым, unusual_hours = текущая дата (формат следующий [2019-05-28, 2019-05-29, 2019-05-30]).
    - do: Осуществить поиск, например по запросу 'Где поесть'
    - assert: Отобразились результаты поиска, в серпе отобразилось уведомление 'График работы организаций мог поменяться из-за праздников' с кнопкой 'Ок'
    - do: Тап на организацию, у которой есть владелец
    - assert: Открылась карточка организации, под информацией о времени работы отобразилось уведомление 'График работы может поменяться из-за праздников'
    - do: Тап на время работы
    - assert: |
        Открылся попап 'Режим работы'.
        Под названием отобразилось уведомление 'Сегодня график работы может поменяться из-за праздников'.
        Праздничный день в графике выделяется серым, после дня недели написано число и месяц
    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps

