testing:
  - regress
components: annotations

specs:
  # Основное взаимодействие с аннотациями в Настройках

  Автоматический выбор голоса аннотаций с Алисой:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Открыт экран настройки звука (Меню -> Настройки -> Маршруты -> Звук)
    - do: Тап на пункт "Голос"
    - assert: |
        Голос "Алисы" выбран по умолчанию
        Можно выбрать без загрузки голоса: Алиса, Оксана, Дмитрий
        Под стандартными голосами отображаются голоса, доступные для загрузки
    - do: Построить автомаршрут длинее 1 километра с манёврами
    - do: Перейти в режим ведения
    - assert: Аннотации озвучиваются голосом "Алиса"

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Новые настройки. Автоматический выбор голоса аннотаций с Алисой:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Включить симуляция движения (Меню -> Настройки -> Дебаг-панель -> Дебаг-панель -> Routes -> Demo movement)
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Звуки и оповещения -> Звуковое сопровождение)
    - do: Открыть экран настройки звука (Меню -> Настройки -> Звуки и оповещения)
    - do: Тап на пункт "Голос"
    - assert: |
        Голос "Алисы" выбран по умолчанию
        Можно выбрать без загрузки голоса: Алиса, Оксана, Дмитрий
        Под стандартными голосами отображаются голоса, доступные для загрузки
    - do: Построить автомаршрут длинее 1 километра с манёврами
    - do: Перейти в режим ведения
    - assert: Аннотации озвучиваются голосом "Алиса"

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Сохранение выбранного голоса аннотаций с Алисой:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Открыт экран настройки голоса (Меню -> Настройки -> Маршруты -> Звук -> Голос)
    - do: Выбрать любой голос, кроме "Алиса"
    - assert: |
        Голос выбран
        Слева от голоса отображается активный чекбокс
    - do: Построить автомаршрут длинее 1 километра с манёврами
    - do: Перейти в режим ведения
    - assert: Аннотации озвучиваются выбранным голосом

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Новые настройки. Сохранение выбранного голоса аннотаций с Алисой:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}
        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Включить симуляция движения (Меню -> Настройки -> Дебаг-панель -> Дебаг-панель -> Routes -> Demo movement)
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Звуки и оповещения -> Звуковое сопровождение)
    - do: Открыть экран настройки голоса (Меню -> Настройки -> Звуки и оповещения -> Голос)
    - do: Выбрать любой голос, кроме "Алиса"
    - assert: |
        Голос выбран
        Слева от голоса отображается активный чекбокс
    - do: Построить автомаршрут длинее 1 километра с манёврами
    - do: Перейти в режим ведения
    - assert: Аннотации озвучиваются выбранным голосом

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Загрузка голоса аннотаций:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Открыт экран настроек "Голос" (Меню -> Настройки -> Маршруты -> Звук -> Голос)
    - do: Тап на пункт "Звук"
    - do: Тап пункт "Голос"
    - assert: |
        Открыт экран "Голос"
        Можно выбрать без загрузки голоса: Алиса, Оксана, Дмитрий
        Под стандартными голосами отображаются голоса, доступные для загрузки
    - do: Тап на незагруженный голос
    - assert: |
        Слева от названия голоса отображается иконка с прогрессом загрузки
    - do: Дождаться загрузки голоса
    - assert: |
        Голос переходит из блока доступных для загрузки в блок загруженных
        iOS: Иконка прогресса загрузки пропадает
        Android: Загруженный голос выбирается автоматически
    - do: |
        iOS: Выбрать загруженный голос
    - do: Перейти на главный экран
    - do: Построить маршрут больше 1 километра с манёврами
    - do: Перейти в ведение
    - assert: Аннотации маршрута озвучиваются загруженным голосом

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Новые настройки. Загрузка голоса аннотаций:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Включить симуляция движения (Меню -> Настройки -> Дебаг-панель -> Дебаг-панель -> Routes -> Demo movement)
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Звуки и оповещения -> Звуковое сопровождение)
    - do: Открыть экран настройки голоса (Меню -> Настройки -> Звуки и оповещения -> Голос)
    - assert: |
        Открыт экран "Голос"
        Можно выбрать без загрузки голоса: Алиса, Оксана, Дмитрий
        Под стандартными голосами отображаются голоса, доступные для загрузки
    - do: Тап на незагруженный голос
    - assert: |
        Слева от названия голоса отображается иконка с прогрессом загрузки
    - do: Дождаться загрузки голоса
    - assert: |
        Голос переходит из блока доступных для загрузки в блок загруженных
        iOS: Иконка прогресса загрузки пропадает
        Android: Загруженный голос выбирается автоматически
    - do: |
        iOS: Выбрать загруженный голос
    - do: Перейти на главный экран
    - do: Построить маршрут больше 1 километра с манёврами
    - do: Перейти в ведение
    - assert: Аннотации маршрута озвучиваются загруженным голосом

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Удаление голоса аннотаций:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Открыт экран настроек 'Маршруты' - Звук - Голос
        Ранее был загружен голос
    - do: Тап на Изменить/карандаш в правом верхнем углу
    - assert: |
        Android - слева от каждого загруженного невыбранного голоса отображается чекбокс
        iOS - слева от каждого загруженного невыбранного голоса отображается кнопка удаления
    - do: Android - тап на чекбокс и после тап на иконку с корзиной / iOS - тап на кнопку удаления
    - assert: |
        Выбранный голос удалился и переместился в блок Доступные
        Android - произошел выход из редактирования
        Выбранный для использования голос удалить нельзя

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Новые настройки. Удаление голоса аннотаций:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Открыть экран настройки голоса (Меню -> Настройки -> Звуки и оповещения -> Голос)
    - do: Тап на несколько незагруженных голосом
    - do: Дождаться пока все голоса загрузятся
    - do: Тап на Изменить/карандаш в правом верхнем углу
    - assert: |
        Android - слева от каждого загруженного невыбранного голоса отображается чекбокс
        iOS - слева от каждого загруженного невыбранного голоса отображается кнопка удаления
    - do: Android - тап на чекбокс и после тап на иконку с корзиной / iOS - тап на кнопку удаления
    - assert: |
        Выбранный голос удалился и переместился в блок Доступные
        Android - произошел выход из редактирования
        Выбранный для использования голос удалить нельзя

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Выбор голоса аннотаций:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Открыт экран настроек "Маршруты" (Меню -> Настройки -> Маршруты)
    - do: Тап на "Звук"
    - assert: |
        Открыт экран "Звук"
        Присутствует пункт "Голос"
    - do: Тап "Голос"
    - do: Выбрать голос "Дмитрий" или "Оксана"
    - assert: Слева от голоса отображается активный чекбокс
    - do: Открыть главный экран
    - do: Построить маршрут
    - do: Перейти в ведение
    - assert: Голос аннотаций изменился на выбранный

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie


  Ошибка скачивания голоса аннотаций в офлайне:
    - info: |
        На устройстве отключен интернет
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: Открыть экран настроек "Маршруты" (Меню -> Настройки -> Маршруты -> Звук)
    - do: Тап на "Звук"
    - assert: |
        Открыт экран "Звук"
        Присутствует пункт "Голос"
    - do: Тап "Голос"
    - do: Тап на любой не скаченный голос
    - asseert: |
        Слева у выбраного голоса изменилась иконка со скачивания на ошибку загрузки(восклицательный знак)
        Android: показана нотификация "Нет интернета. Голос загрузится при подключении к сети"
    - do: Тап на иконку ошибки напротив нескаченного голоса
    - assert: |
        iOS: появляется диалог с кнопками "Повторить" и "Отменить"
        Android: Появляется диалог "Нет интернета. Голос загрузится при подключении к сети" с кнопками "Повторить" и "Отменить"
    - do: Тап "Отменить"
    - assert: |
        Диалог закрылся
        Слева у выбраного голоса изменилась иконка с ошибки загрузки на иконку скачать

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Новые настройки. Ошибка скачивания голоса аннотаций в офлайне:
    - info: |
        На устройстве отключен интернет
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Открыть экран настройки голоса (Меню -> Настройки -> Звуки и оповещения -> Голос)
    - do: Тап на любой не скаченный голос
    - asseert: |
        Слева у выбраного голоса изменилась иконка со скачивания на ошибку загрузки(восклицательный знак)
        Android: показана нотификация "Нет интернета. Голос загрузится при подключении к сети"
    - do: Тап на иконку ошибки напротив нескаченного голоса
    - assert: |
        iOS: появляется диалог с кнопками "Повторить" и "Отменить"
        Android: Появляется диалог "Нет интернета. Голос загрузится при подключении к сети" с кнопками "Повторить" и "Отменить"
    - do: Тап "Отменить"
    - assert: |
        Диалог закрылся
        Слева у выбраного голоса изменилась иконка с ошибки загрузки на иконку скачать

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Успешная загрузка голоса при подключении к интернету:
    - info: |
        На устройстве отключен интернет
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: Открыт экран настроек "Маршруты" (Меню -> Настройки -> Маршруты -> Звук)
    - do: Тап на "Звук"
    - assert: |
        Открыт экран "Звук"
        Присутствует пункт "Голос"
    - do: Тап "Голос"
    - do: Тап на любой не скаченный голос
    - asseert: |
        Слева у выбраного голоса изменилась иконка со скачивания на ошибку загрузки(восклицательный знак)
        Android: показана нотификация "Нет интернета. Голос загрузится при подключении к сети"
    - do: Подключить интернет
    - assert: |
        Android: После подключения интернета голос загрузился и перешел в блок загруженных. Иконка ошибки загрузки пропадает
        iOS: Напротив голоса оторажается ошибка загрузки
    - do: (iOS)Тап на иконку ошибки напротив нескаченного голоса
    - assert: |
        Появляется диалог с кнопками "Повторить" и "Отменить"
    - do: Тап "Повторить"
    - assert: |
        Диалог закрылся
        Голос переходит из блока доступных для загрузки в блок загруженных
        Иконка ошибки загрузки пропадает

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Новые настройки. Успешная загрузка голоса при подключении к интернету:
    - info: |
        На устройстве отключен интернет
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Открыть экран настройки голоса (Меню -> Настройки -> Звуки и оповещения -> Голос)
    - do: Тап на любой не скаченный голос
    - asseert: |
        Слева у выбраного голоса изменилась иконка со скачивания на ошибку загрузки(восклицательный знак)
        Android: показана нотификация "Нет интернета. Голос загрузится при подключении к сети"
    - do: Подключить интернет
    - assert: |
        Android: После подключения интернета голос загрузился и перешел в блок загруженных. Иконка ошибки загрузки пропадает
        iOS: Напротив голоса оторажается ошибка загрузки
    - do: (iOS)Тап на иконку ошибки напротив нескаченного голоса
    - assert: |
        Появляется диалог с кнопками "Повторить" и "Отменить"
    - do: Тап "Повторить"
    - assert: |
        Диалог закрылся
        Голос переходит из блока доступных для загрузки в блок загруженных
        Иконка ошибки загрузки пропадает

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings



  Изменение Звукового сопровождения на Все звуки выключены через настройки:
    - info: На устройстве включен звук
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Выключить эксперимент `use_datasync_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Включить симуляцию движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Закрыть дебаг панель
    - do: Перезапустить приложение
    - do: Тап Меню -> Настройки -> Звуки и оповещения -> Тап "Все звуки выключены"(иконка с зачеркнутым динамиком)
    - assert: |
        Выбрана настройка "Все звуки выключены"
        Под настройкой отображется текст "Все звуки выключены"
    - do: Построить автомобильный маршрут
    - do: Запустить ведение по маршрута
    - do: Проехать несколько маневров/ДС
    - assert: Аннотации о маневрах и ДС не проигрываются

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Изменение Звукового сопровождения на Только важное через настройки:
    - info: На устройстве включен звук
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Выключить эксперимент `use_datasync_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Включить симуляцию движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Закрыть дебаг панель
    - do: Перезапустить приложение
    - do: Тап Меню -> Настройки -> Звуки и оповещения -> Тап "Только важное"(иконка с динамиком и восклицательным знаком)
    - assert: |
        Выбрана настройка "Только важное"
        Под настройкой отображется текст "Камеры и дорожные события"
    - do: Построить автомобильный маршрут, проходящий через ДС
    - do: Запустить ведение по маршрута
    - do: Проехать несколько маневров/ДС
    - assert: |
        Аннотации о маневрах не проигрываются
        Аннотации о ДС проигрываются

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Изменение Звукового сопровождения на Все звуки через настройки:
    - info: На устройстве включен звук
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Выключить эксперимент `use_datasync_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Включить симуляцию движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Закрыть дебаг панель
    - do: Перезапустить приложение
    - do: Тап Меню -> Настройки -> Звуки и оповещения -> Тап "Все звуки"(иконка с динамиком)
    - assert: |
        Выбрана настройка "Все звуки"
        Под настройкой отображется текст "Все звуки включены"
    - do: Построить автомобильный маршрут, проходящий через ДС
    - do: Запустить ведение по маршрута
    - do: Проехать несколько маневров/ДС
    - assert: |
        Аннотации о маневрах и ДС проигрываются

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  # Поведение в фоновом ведении

  Озвучание аннотаций маршрута в фоновом ведении:
    - info: |
        Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Включено фоновое ведение (Меню -> Настройки -> Маршруты -> Фоновое ведение)
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Открыт главный экран МЯК
    - do: Построить автомаршрут длиннее 1 километра с манёврами
    - do: Перейти в ведение
    - assert: |
        Происходит ведение по маршруту
        Озвучиваются аннотации ведения
    - do: Свернуть приложение
    - assert: |
        Приложение свернуто
        Озвучиваются аннотации маршрута
    - do: Развернуть приложение
    - assert: Аннотации не прерываются

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Новые настройки. Звучание аннотаций маршрута в фоновом ведении:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Выключить эксперимент `use_datasync_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: Перезапустить приложение
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Звуки и оповещения -> Звуковое сопровождение)
    - do: Включить фоновое ведение (Меню -> Настройки -> Навигация -> Фоновое ведение)
    - do: Включить симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Открыт главный экран МЯК
    - do: Построить автомаршрут длиннее 1 километра с манёврами
    - do: Перейти в ведение
    - assert: |
        Происходит ведение по маршруту
        Озвучиваются аннотации ведения
    - do: Свернуть приложение
    - assert: |
        Приложение свернуто
        Озвучиваются аннотации маршрута
    - do: Развернуть приложение
    - assert: Аннотации не прерываются

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  Новые настройки. Отсутствие аннотаций маршрута в фоновом ведении:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Выключить эксперимент `use_datasync_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: Перезапустить приложение
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Звуки и оповещения -> Звуковое сопровождение)
    - do: Выключить фоновое ведение (Меню -> Настройки -> Навигация -> Фоновое ведение)
    - do: Включить симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Открыт главный экран МЯК
    - do: Построить автомаршрут длиннее 1 километра с манёврами
    - do: Перейти в ведение
    - assert: |
        Происходит ведение по маршруту
        Озвучиваются аннотации ведения
    - do: Свернуть приложение
    - assert: |
        Приложение свернуто
        Аннотации маршрута не озвучиваются
    - do: Развернуть приложение
    - assert: Аннотации озвучиваются

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - new_settings


  # Прерыватели

  Прерывание аннотаций при помощи Алисы:
    - info: |
        - Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        - Закрыть дебаг-панель
        - Перезапустить приложение
        - Включен звук аннотаций (Меню -> Настройки -> Маршруты -> Звук)
        - Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        - МЯК на английском языке
        - Построен маршрут длиннее 1 километра с манёврами
        - Открыт экран ведения
    - do: Перейти в ведение
    - do: Дождаться озвучания манёвра
    - do: Тап на кнопку вызова Алисы в процессе озвучания
    - assert: Аннотация прерывается вызовом Алисы
    - do: Продолжать разговор с Алисой
    - do: Дождаться следующего манёвра на маршруте
    - assert: Аннотации маршрута не озвучиваются
    - do: Дождаться следующего маневра, где должно быть озвучание аннотации
    - assert: Аннотация озвучивается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Воспроизведение аннотаций после вызова спичкита:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включен звук аннотаций (Меню -> Настройки -> Маршруты -> Звук)
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        МЯК на английском языке
        Построен маршрут длиннее 1 километра с манёврами
        Открыт экран ведения
    - do: Тап на лупу
    - assert: |
        Отображается панель с поисковыми категориями
        Над панелью отображается кнопка вызова спичкита с иконкой в виде микрофона
    - do: Тап на кнопку с иконкой микрофона
    - assert: Открылася поп-ап голосового ввода с сообщением о прослушивании
    - do: Закрыть поп-ап голосового ввода
    - do: Закрыть поисковую панель
    - assert: Открыт экран ведения по маршруту
    - do: Дождаться голосовых аннотаций
    - assert: |
        Аннотации произносятся с нормальной громкостью.
        Аннотации произносятся полностью

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  # Основные сценарии аннотаций

  Автозавершение ведения по маршруту:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Построить произвольный автомаршрут
    - do: Перейти в ведение
    - do: Доехать до конца маршрута
    - assert: |
        Звучит аннотация "Вы приехали"
        Маршрут автоматически завершается
        Отображается главный экран приложения с картой
        Карта представлена в режиме 2D и "Север сверху"

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - newbie


  Аннотация о въезде в промежуточную точку:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Построить маршрут с промежуточной точкой
    - do: Перейти в ведение
    - do: Дождаться въезда в промежуточную точку
    - assert: Звучит аннотация “Вы приехали в промежуточную точку”

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Озвучание аннотаций при ведении с музыкой:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        На устройстве проигрывается музыка через стороннее приложение (Яндекс Музыка, Spotify и подобные)
        Открыт главный экран МЯК
    - do: Включить настройку "Приглушать музыку и другие звуки" (Меню -> Настройки -> Звук -> При оповещениях)
    - do: Вернуться на главный экран приложения
    - do: Построить автомаршрут
    - do: Тап на Поехали
    - assert: |
        Аннотации успешно воспроизводятся
        Музыка приглушается во время воспроизведения аннотации

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Аннотации по маршруту оффлайн:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Скачаны оффлайн-карты текущего региона (Меню -> Загрузка карт)
        Включен авиарежим
        Построен произвольный маршрут
    - do: Перейти в ведение
    - assert: |
        Звучат аннотации о маневрах
        Аннотации о ДС отсутствуют

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  # Free Drive

  Аннотации о ДС в режиме Free Drive в фоне:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Отображается главный экран приложения
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
    - do: |
        Выставить скорость больше 120 км/ч
        iOS - Demo movement speed (Меню -> Настройки -> Дебаг-панель -> Routes)
        Android - установить скорость после построения маршрута в приложении MockLocations (Скачать из Google Play)
    - do: |
        Построить маршрут через симуляцию движения
        iOS - Enter your route (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Android - MockLocations (Скачать из Google Play)
    - do: Вернуться на главный экран приложения
    - do: Тап на таб Навигатор
    - assert: Включен режим Навигатора
    - do: Двигаться без маршрута более 10 секунд
    - assert: Происходит переход в режим Free Drive (пропадает часть интерфейса, появляется индикатор скорости)
    - do: Свернуть МЯК
    - assert: |
        Аннотации о дорожных событиях произносятся
        Аннотации о маневрах отсутствуют
    - do: |
        Android: Развернуть шторку с уведомлениями
    - assert: |
        Android: В шторке девайса отображается уведомление про включенные предупреждения о камерах

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Аннотации о ДС в режиме Free Drive:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Включено проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Выставить максимальную скорость больше 120 км/ч в симуляции движения
    - do: Тап на таб Навигатор
    - do: |
        Построить маршрут через симулятор дивижения:
        iOS: Enter your route (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
        Android: MockLocations (Скачать из Google Play)
    - do: Вернуться на главный экран МЯК
    - do: Двигаться без маршрута более 10 секунд
    - assert: |
        Пропадают поисковая строка, контролы слоёв и масштаба
        В правом верхнем углу отображается индикатор скорости
    - do: Продолжать движение по маршруту
    - assert: |
        Произносятся аннотации о дорожных событиях (камеры, аварии и так далее)
        Аннотации произносятся до того как курсор проехал данное дорожное событие
        Аннотации о маневрах не произносятся

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переключение голоса аннотаций в ведении во Free Drive:
    - do: Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Дебаг-панель -> Experiments)
    - do: Закрыть Дебаг-панель
    - do: Перезапустить МЯК
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
    - do: Выбрать Оксану в качестве голоса озвучки (Меню -> Настройки -> Маршруты -> Звук -> Голос)
    - do: Вернуться на Главный экран
    - do: Тап на таб "Навигатор"
    - do: Включить симуляцию движения с помощью Enter your route (iOS) или MockLocations (Android) со скоростью 144 км/ч
    - assert: |
        Происходит ведение в режиме Free Drive
        Аннотации озвучиваюся Оксаной
    - do: Открыть экран выбора голоса (Меню -> Настройки -> Маршруты -> Звук -> Голос)
    - do: Изменить голос озвучки на "Алиса"
    - do: Вернуться на экран ведения
    - assert: |
        Аннотации озвучиваются Алисой
        Фразы озвучиваются полностью, не обрываются

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Загрузка и выбор голоса аннотаций в ведении по автомаршруту:
    - do: Включить симуляцию ведения (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement)
    - do: Выставить скорость в симуляции ведения больше 120 км/ч (Меню -> Настройки -> Дебаг-панель -> Routes -> Demo movement speed, km/h)
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: (iOS) Выключить эксперимент `no_toolbar_in_guidance`
    - do: Закрыть дебаг-панель
    - do: Перезапустить МЯК
    - do: Включить проигрывание уведомлений (Меню -> Настройки -> Маршруты -> Звук)
    - do: Включить голос озвучки "Оксана" (Меню -> Настройки -> Маршруты -> Звук -> Голос)
    - do: Построить маршут с манёврами длинее 1 километра
    - do: Перейти в ведение по маршруту
    - assert: Аннотации проигрываются голосом "Оксана"
    - do: Тап на кнопку настроек в тулбаре
    - do: Перейти во Все настройки -> Маршруты -> Звук -> Голос
    - assert: Отображется экран с выбором голоса озвучки
    - do: Загрузить голос из блока доступных
    - do: Выбрать загруженный голос
    - do: Вернуться на экран ведения
    - assert: |
        Голос озвучивания аннотаций изменился на выбранный
        Озвучиваются все элементы маршрута (предупреждения о камерах, маневры, ДС и т.д.)
        Фразы озвучиваются полностью, не обрываются

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors

  # Аннотации на других языках

  Аннотации на Английском языке:
    - info: |
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг-панель
        Перезапустить приложение
        Регион устройства - Великобритания
        iOS: Язык устройства - английский
        Android: Язык МЯК - английский (Меню -> Настройки -> Основные -> Язык)
        Включена симуляция движения (Меню -> Settings -> Debug-panel -> Routes -> Demo movement)
        Включено проигрывание уведомлений (Меню -> Settings -> Routes -> Sound)
        Открыт экран настройки звука (Меню -> Settings -> Routes -> Sound)
    - do: Тап на пункт Voice
    - assert: На экране отображается единственный доступный голос Kate
    - do: Перейти на главный экран
    - do: Построить маршрут длиннее 1 км с манёврами
    - do: Перейти в ведение
    - assert: Аннотации озвучиваются англоязычным голосом

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Применение настройки "Язык аннотаций" - Русский:
    - info: Открыт главный экран приложения
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: Включить симуляция движения(Меню -> Настройки -> Debug-panel -> Routes -> Demo movement)
    - do: Включить проигрывание уведомлений(Меню -> Настройки -> Маршруты -> Звук)
    - do: Включить озвучивание на Русском языке(Меню -> Настройки -> Маршруты -> Звук -> Язык аннотаций)
    - assert: Выбран язык аннотаций - Русский
    - do: Построить атомаршрут с несколькими маневрами
    - do: Запустить ведение и слушать аннотации
    - assert: Аннотации озвучиваются на русском языке

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Применение настройки "Язык аннотаций" - Русский через новый UI:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Включить симуляция движения(Меню -> Настройки -> Debug-panel -> Debug-panel -> Routes -> Demo movement)
    - do: Включить проигрывание уведомлений(Меню -> Настройки -> Звуки и оповещения -> Звуковое сопровождение)
    - do: Включить озвучивание на Русском языке(Меню -> Настройки -> Звуки и оповещения -> Язык аннотаций)
    - assert: Выбран язык аннотаций - Русский
    - do: Построить атомаршрут с несколькими маневрами
    - do: Запустить ведение и слушать аннотации
    - assert: Аннотации озвучиваются на русском языке

    - platforms:
        - ios
    - tags:
        - assessors
        - new_settings
    - testing:
        - acceptance_maps


  Применение настройки "Язык аннотаций" - Английский:
    - info: Открыт главный экран приложения
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: Включить симуляция движения(Меню -> Настройки -> Debug-panel -> Routes -> Demo movement)
    - do: Включить проигрывание уведомлений(Меню -> Настройки -> Маршруты -> Звук)
    - do: Включить озвучивание на Английском языке(Меню -> Настройки -> Маршруты -> Звук -> Язык аннотаций)
    - assert: Выбран язык аннотаций - Английский
    - do: Построить атомаршрут с несколькими маневрами
    - do: Запустить ведение и слушать аннотации
    - assert: Аннотации озвучиваются на английском языке

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Применение настройки "Язык аннотаций" - Английский через новый UI:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Включить симуляция движения(Меню -> Настройки -> Debug-panel -> Debug-panel -> Routes -> Demo movement)
    - do: Включить проигрывание уведомлений(Меню -> Настройки -> Звуки и оповещения -> Звуковое сопровождение)
    - do: Включить озвучивание на Английском языке(Меню -> Настройки -> Звуки и оповещения -> Язык аннотаций)
    - assert: Выбран язык аннотаций - Английский
    - do: Построить атомаршрут с несколькими маневрами
    - do: Запустить ведение и слушать аннотации
    - assert: Аннотации озвучиваются на английском языке

    - platforms:
        - ios
    - tags:
        - assessors
        - new_settings
    - testing:
        - acceptance_maps


  Произносить кастомные аннотации при любом дикторе - перед заправкой поверните направо:
    - do: Установить любой кастомный голос:Меню - Настройки - Маршруты - Звук - Голос
    - do: Включить симуляцию движения:Меню -> Настройки -> Debug-panel -> Routes -> Demo movement
    - do: Использовать интенты для установки эксперимента
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.55.07.png){title=QR-код}

        `yandexmaps://add_exp/MAPKIT?use_custom_annotations=on`
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.45.20.png){title=QR-код}

        `yandexmaps://add_exp?custom_annotations_for_everyone=enabled`
        Перезапустить приложение
    - do: |
        Использовать интент и запустить ведение:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-06%20в%2009.59.59.png){title=QR-код}

        `yandexmaps://build_route_on_map/?lat_from=55.711131&lon_from=37.820493&lat_to=55.705715&lon_to=37.833263`
    - assert: |
        Строится маршрут
        Аннотации произносятся выбранным голосом
        Аннотация "Через XX метров перед Заправкой поверните направо" озвучивается голосом Алисы

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Произносить кастомные аннотации при любом дикторе - после заправки поверните направо:
    - do: Установить любой кастомный голос:Меню - Настройки - Маршруты - Звук - Голос
    - do: Включить симуляцию движения:Меню -> Настройки -> Debug-panel -> Routes -> Demo movement
    - do: Использовать интенты для установки эксперимента
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.55.07.png){title=QR-код}

        `yandexmaps://add_exp/MAPKIT?use_custom_annotations=on`
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.45.20.png){title=QR-код}

        `yandexmaps://add_exp?custom_annotations_for_everyone=enabled`
        Перезапустить приложение
    - do: |
        Использовать интент и запустить ведение:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-06%20в%2010.04.02.png){title=QR-код}

        `yandexmaps://build_route_on_map/?lat_from=55.711131&lon_from=37.820493&lat_to=55.708017&lon_to=37.833387`
    - assert: |
        Строится маршрут
        Аннотации произносятся выбранным голосом
        Аннотация "Через XX метров после заправки поверните направо" озвучивается голосом Алисы

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Произносить кастомные аннотации при любом дикторе - держитесь средней полосы на разворот:
    - do: Установить любой кастомный голос:Меню - Настройки - Маршруты - Звук - Голос
    - do: Включить симуляцию движения:Меню -> Настройки -> Debug-panel -> Routes -> Demo movement
    - do: Использовать интенты для установки эксперимента
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.55.07.png){title=QR-код}

        `yandexmaps://add_exp/MAPKIT?use_custom_annotations=on`
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.45.20.png){title=QR-код}

        `yandexmaps://add_exp?custom_annotations_for_everyone=enabled`
        Перезапустить приложение
    - do: |
        Использовать интент и запустить ведение:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-06%20в%2010.05.28.png){title=QR-код}

        `yandexmaps://build_route_on_map/?lat_from=55.802344&lon_from=37.525574&lat_to=55.804370&lon_to=37.509156`
    - assert: |
        Строится маршрут
        Аннотации произносятся выбранным голосом
        Аннотация "Через XX метров держитесь средней полосы на разворот" озвучивается голосом Алисы

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Произносить кастомные аннотации при любом дикторе - держитесь левой полосы на эстакаду:
    - do: Установить стандартный голос:Меню - Настройки - Маршруты - Звук - Голос - Алиса
    - do: Включить симуляцию движения:Меню -> Настройки -> Debug-panel -> Routes -> Demo movement
    - do: Использовать интенты для установки эксперимента
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.55.07.png){title=QR-код}

        `yandexmaps://add_exp/MAPKIT?use_custom_annotations=on`
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-07%20в%2011.45.20.png){title=QR-код}

        `yandexmaps://add_exp?custom_annotations_for_everyone=enabled`
        Перезапустить приложение
    - do: |
        Использовать интент и запустить ведение:
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-07-06%20в%2010.06.50.png){title=QR-код}

        `yandexmaps://build_route_on_map/?lat_from=55.802344&lon_from=37.525574&lat_to=55.807898&lon_to=37.502028`
    - assert: |
        Строится маршрут
        Аннотации произносятся Алисой
        Аннотация "Через XX метров держитесь левой полосы на эстакаду" озвучивается голосом Алисы

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Независимость языка аннотаций от языка приложения в новых настройках:
   - info: Открыт главный экран приложения
   - do: |
       Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

       `yandexmaps://add_exp?new_maps_settings`
   - do: Перезапустить приложение
   - do: Установить язык приложения Русский (Меню -> Настройки -> Карта и интерфейс -> Язык)
   - do: Установить язык аннотаций Английский (Меню -> Настройки -> Звуки и оповещения -> Язык аннотаций)
   - do: Включить симуляция движения(Меню -> Настройки -> Debug-panel -> Debug-panel -> Routes -> Demo movement)
   - do: |
      Использовать интент для построения маршрута:
      [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/автомаршрут.png){title=QR-код}

      `yandexmaps://build_route_on_map/?lat_from=55.749041&lon_from=37.610946&lat_to=55.766539&lon_to=37.621245&rtt=auto`
   - do: Тап Поехали
   - assert: |
       Происходит ведение по маршруту
       Интерфейс приложения отображается на русском языке
       Аннотации озвучиваются на английском

   - platforms:
       - android
   - tags:
       - assessors
       - new_settings
   - testing:
       - acceptance_maps


  Подтверждение поддержки голосового ввода в новых настройках (Android):
   - info: Открыт главный экран приложения
   - do: |
       Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

       `yandexmaps://add_exp?new_maps_settings`
   - do: Перезапустить приложение
   - do: Открыть настройки языка аннотаций (Меню -> Настройки -> Звуки и оповещения -> Язык аннотаций)
   - assert: |
       Под русским и турецким языками отображается надпись "С голосовым управлением"

   - platforms:
       - android
   - tags:
       - assessors
       - new_settings
   - testing:
       - acceptance_maps


  Подтверждение поддержки голосового ввода в новых настройках (iOS):
   - info: Открыт главный экран приложения
   - do: |
       Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

       `yandexmaps://add_exp?new_maps_settings`
   - do: Перезапустить приложение
   - do: Открыть настройки языка аннотаций (Меню -> Настройки -> Звуки и оповещения -> Язык аннотаций)
   - assert: Под русским и турецким языками отображается надпись "С голосовым управлением"

   - platforms:
       - ios
   - tags:
       - assessors
       - new_settings
   - testing:
       - acceptance_maps
