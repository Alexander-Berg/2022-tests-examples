components: pedestrian_routes
testing:
  - regress

specs:
  Сохранение пешеходного типа маршрута:
    - info: Построен пешеходный маршрут
    - do: Вернуться на главный экран приложения
    - assert: Отображается главный экран приложения
    - do: Построить новый маршрут произвольным способом
    - assert: |
        Открыта форма выбора маршрута
        Выбран пешеходный тип маршрута

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Отображение напротив Дома/Работы на экране Маршрут времени в пешем маршруте, если последний маршрут был пешим:
    - info:
        Пользователь авторизован
        Добавлены в закладки Дом и Работа
        Дом и Работа находятся в пределах 50 км и не ближе 500 м от текущего местоположения
        Последний построенный маршрут был автомобильным
    - do: Выключить эксперимент no_routes_tab (Настройки - Debug Panel - Experiments)
    - do: Перезапустить приложение
    - do: Тап на таб Маршруты
    - assert: |
        Отображается экран Маршрут
        Напротив Дома и Работы отображается время в пути по автомаршруту
    - do: Задать произвольную точку Куда
    - do: Сменить тип маршрута на пешеходный
    - assert: |
        Открыт экран выбора маршрута
        Тип маршрута пешеходный
    - do: Тап на кнопку назад
    - assert: |
        Отображается экран Маршрут
        Напротив Дома и Работы отображается время в пути по пешеходному маршруту
    - do: Тап по Дому или Работе
    - assert: |
        Открыт экран выбора маршрута
        Тип маршрута пешеходный
        Время на экране выбора маршрута совпадает с временем на экране Маршрут

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Логика работы стрелки в пешеходном ведении по маршруту:
    - info: |
        Если скорость > 1 км/ч, то показываем по GPS, если скорость <, то компасс, без сохранения направления по GPS на 2 минуты
        Построен произвольный пеший маршрут
        Открыт экран выбора вариантов маршрута
        Происходит симуляция движения: Debug-panel > Demo movement
    - do: Тап "Начать"
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Двигаться со скоростью не более 1 км/ч
    - assert: На экране метка "Я"
    - do: Изменить наклон карты
    - assert: Буква анимированно исчезает, если угол карты стал больше 10° и появляется обратно, если он становится меньше 5°
    - do: Двигаться со скоростью более 1 км/ч
    - assert: Метка "Я" трансформируется в стрелку

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
        - mapkit_ready
    - integration_run:
        - mapkit


  Отображение экрана пешеходного ведения:
    - info: |
        Построен произвольный пеший маршрут
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Устройство в вертикальной ориентации
    - do: Тап Начать
    - assert: |
        Открыт экран ведения по пешеходному маршруту
        На карте отображаются:
        - начальная и конечная точки
        - линия маршрута
        - точки обозначения лестниц по маршруту (при их наличии)
        На экране присутствуют котроллы:
        - слоев и транспорта
        - включения/выключения звука
        - зума
        - ММП
        - сообщения об ошибки
        - меню (Android)
        В навбаре отображаются:
        - кнопка закрытия
        - расстояние / время в пути
        - кнопка поиска (iOS)
    - do: Сменить ориентацию устройства
    - assert: Отображается экран ведения по пешеходному маршруту в горизонтальной ориентации

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - lite_acceptance_maps


  Отображение в карточках объектов времени в пешем пути, если последний маршрут был пешим:
    - info:
        Пользователь авторизован
        Добавлены Дом/Работа и минимум 1 место в закладки
        Последний построенный маршрут был пешеходным
        Отображается главный экран приложения
    - do: Тап на здание на карте
    - assert: |
        Отображается карточка топонима
        В карточке указано время пути до места пешком
    - do: Тап на POI организации
    - assert: |
        Отображается карточка организации
        В карточке указано время пути до места пешком
    - do: Тап на закладку Дома/Работы и закладки
    - assert: |
        Отображается карточка Дома/Работы
        В карточке указано время пути до места пешком
    - do: Тап на пин закладки из списка
    - assert: |
        Отображается карточка закладки
        В карточке указано время пути до места пешком

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
        - mapkit_ready
    - integration_run:
        - mapkit


  Построение пешеходного маршрута через лонг-тап меню и переход в ведение:
    - info: Открыт главный экран приложения
    - do: Лонг-тап по карте
    - assert: Открыто лонг-тап меню
    - do: Тап на Сюда
    - assert: Открыт экран построения маршрута
    - do: Выбрать пешеходный тип маршрута
    - assert: Открыт экран построения пешеходного маршрута
    - do: Тап на Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Завершить ведение
    - assert: Открыт главный экран приложения

    - platforms:
        - ios
        - android
    - testing:
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - use_map
        - assessors
        - mapkit_ready
        - newbie


  Построение пешеходного маршрута через таб Маршруты и переход в ведение:
    - do: Выключить эксперимент no_routes_tab (Настройки - Debug Panel - Experiments)
    - do: Перезапустить приложение
    - do: Тап на таб Маршруты
    - assert: Отображается экран Маршрут
    - do: Ввести любой адрес в поле Куда
    - do: Тап на любой из предложенных саджестов
    - assert: Отображается экран выбора маршрута
    - do: Выбрать пешеходный тип маршрута
    - do: Тап Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Завершить ведение
    - assert: Отображается главный экран приложения

    - platforms:
        - ios
        - android
    - testing:
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - use_map
        - assessors
        - mapkit_ready


  Построение пешеходного маршрута через карточку топонима и переход в ведение:
    - info: Открыт главный экран приложения
    - do: Тап на здание
    - assert: |
        Открыта карточка топонима
        Присутствует кнопка Маршрут
    - do: Тап на кнопку маршрут
    - assert: Отображается экран выбора маршрута
    - do: Выбрать пешеходный тип маршрута
    - do: Тап Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Завершить ведение
    - assert: |
        (iOS) Отображается главный экран приложения
        (Android) Отображается карточка топонима

    - platforms:
        - ios
        - android
    - testing:
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - use_map
        - assessors
        - mapkit_ready


  Построение пешеходного маршрута через карточку организации и переход в ведение:
    - info: Открыт главный экран приложения
    - do: Тап на POI организации
    - assert: |
        Открыта карточка организации
        Присутствует кнопка Маршрут
    - do: Тап на кнопку маршрут
    - assert: Отображается экран выбора маршрута
    - do: Выбрать пешеходный тип маршрута
    - do: Тап Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Завершить ведение
    - assert: |
        (Android) Отображается карточка организации
        (iOS) Отображается главный экран

    - platforms:
        - ios
        - android
    - testing:
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - use_map
        - assessors
        - mapkit_ready
        - newbie


  Стирание линии в пешеходном маршруте:
    - info: |
        Построен произвольный пешеходный маршрут
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: |
        Отображается экран ведения
        На спане карты отображается линия маршрута
        В навбаре отображается счетчик расстояния и времени
    - do: Дождаться окончания маршрута
    - assert: |
        Пройденный линия маршрута постепенно стирается при перемещении метки ММП
        По окончанию маршрута линия стирается полностью
        Пин конечной точки исчезает

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - newbie


  Голосовые аннотации в пешеходном маршруте с промежуточными точками:
    - info: |
        Построен произвольный пешеходный маршрут с промежуточной точкой
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: Отображается экран ведения
    - do: Дождаться прохождения промежуточной точки
    - assert: Озвучивается аннотация "Вы в промежуточной точке"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Озвучивание аннотаций только голосом Алисы в пешеходном ведении:
    - info: |
        В настройках приложения выбрать голос Оксаны (Меню -> Настройки -> Маршруты -> Звук -> Голос)
        Построен произвольный пешеходный маршрут
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: Отображается экран ведения по пешеходному маршруту
    - do: Дождаться поворотов
    - assert: |
        На протяжении маршрута озвучиваются аннотации о поворотах, расстоянии
        Аннотации воспроизводятся голосом Алисы
        Аннотации соответсвуют пешему маршруту (Идите прямо, перейдите дорогу и т.п)
    - do: Изменить озвучку на голос Дмитрия
    - assert: Аннотации продолжают воспроизводиться голосом Алисы

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Включение/выключение аннотаций в пешеходном ведении:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Построен произвольный пешеходный маршрут
    - do: Тап Начать
    - assert: |
        Отображается экран ведения
        Справа под контролами слоя и транспорта отображается кнопка выключения звука
        Кнопка отображается в виде динамика
        Аннотации воспроизводятся
    - do: Тап на кнопку выключения звука
    - assert: |
        Изображение кнопки сменилось на перечеркнутый динамик
        Аннотации не воспроизводятся
    - do: Тап на кнопку включения звука
    - assert: |
        Изображение кнопки сменилось на динамик
        Аннотации воспроизводятся

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - newbie


  Сохранение состояния кнопки выключения звука в пешеходном ведении:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Построен произвольный пешеходный маршрут
        Устройство в вертикальной ориентации
    - do: Тап Начать
    - assert: |
        Отображается экран ведения
        Справа под контролами слоя и транспорта отображается кнопка выключения звука
        Кнопка отображается в виде динамика
        Аннотации воспроизводятся
    - do: Свернуть приложение
    - do: Развернуть приложение
    - assert: |
        Кнопка выключения звука отображается
        Аннотации воспроизводятся
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Кнопка выключения звука не отображается
        Аннотации воспроизводятся
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в вертикальной ориентации
        Кнопка выключения звука отображается
        Аннотации воспроизводятся
    - do: Перезапустить приложение
    - do: Перейти в ведение по пешеходному маршруту
    - assert: |
        Отображается экран ведения
        Кнопка выключения звука в виде динамика присутствует
        Аннотации воспроизводятся

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Сохранение состояния кнопки включения звука в пешеходном ведении:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Построен произвольный пешеходный маршрут
        Устройство в вертикальной ориентации
    - do: Тап Начать
    - assert: |
        Отображается экран ведения
        Справа под контролами слоя и транспорта отображается кнопка выключения звука
        Кнопка отображается в виде динамика
        Аннотации воспроизводятся
    - do: Тап на кнопку выключения звука
    - assert: |
        Изображение кнопки сменилось на перечеркнутый динамик
        Аннотации не воспроизводятся
    - do: Свернуть приложение
    - do: Развернуть приложение
    - assert: |
        Кнопка включения звука отображается
        Аннотации не воспроизводятся
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальнойй ориентации
        Кнопка включения звука не отображается
        Аннотации не воспроизводятся
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в вертикальной ориентации
        Кнопка включения звука отображается
        Аннотации не воспроизводятся
    - do: Перезапустить приложение
    - do: Перейти в ведение по пешеходному маршруту
    - assert: |
        Отображается экран ведения
        Кнопка включения звука в виде перечеркнутого динамика присутствует
        Аннотации не воспроизводятся

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Исчезновение промежуточных точек в пешеходном ведении:
    - info: |
        Включено Фоновое ведение (Меню -> Настройки -> Маршруты)
        Построен произвольный пешеходный маршрут с промежуточными точками
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: Отображается экран ведения по пешеходному маршруту
    - do: Дождаться прохождения первой промежуточной точки
    - assert: |
        Звучит аннотация о промежуточной точке
        Промежуточная точка исчезла со спана карты
        Непройденные промежуточные точки продолжают отображаться
    - do: Свернуть приложение перед прохождением другой промежуточной точки
    - assert: |
        Продолжается ведение в фоновом режиме
        При достижении промежуточной точки, звучит аннотация
    - do: Развернуть приложение
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Пройденные промежуточные точки не отображаются на маршруте
        Непройденные промежуточные точки продолжают отображаться

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Сохранение состояния приложения при переходе по url-схеме во время пешеходного ведения:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Начать ведение по произвольному пешеходному маршруту
    - do: Свернуть приложение
    - do: Перейти по url-схеме yandexmaps://map_search
    - assert: |
        Открывается приложение
        Продолжается ведение по маршруту
        Открывается поисковая выдача
        На карте отображаются поисковые пины

    - tags:
        - mapkit_ready
        - assessors
    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit


  Голосовые аннотации по пешеходному маршруту. Пешеходный переход:
    - info: |
        Построен произвольный пешеходный маршрут
        В маршруте присутствует пешеходный переход
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Воспроизводятся аннотации по маршруту
    - do: Дождаться подхода к пешеходному переходу
    - assert: Звучит аннотация "Перейдите дорогу"

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Голосовые аннотации по пешеходному маршруту. Подземный переход:
    - info: |
        Построен произвольный пешеходный маршрут
        В маршруте присутствует подземный переход
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Воспроизводятся аннотации по маршруту
    - do: Дождаться подхода к подземному переходу
    - assert: Звучит аннотация "Спуститесь в подземный переход"

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Голосовые аннотации по пешеходному маршруту. Надземный переход:
    - info: |
        Построен произвольный пешеходный маршрут
        В маршруте присутствует надземный переход
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Воспроизводятся аннотации по маршруту
    - do: Дождаться подхода к надземному переходу
    - assert: Звучит аннотация "Поднимитесь в надземный переход"

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Голосовые аннотации по пешеходному маршруту. Маршрут перестроен:
    - info: |
        В ведении должна происходить симуляция движения:
        На Android: через Mock Location
        На iOS: через Enter your route в дебаг-панели
        Android - отключена симуляция движения в приложении Карты (Debug-panel > Routes > Demo movement)
    - do: Построить маршрут и запустить симуляцию в Mock Location/Enter your route
    - do: Построить пешеходный маршрут в приложении Карты в другую точку
    - do: Тап на Начать
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Воспроизводятся голосовые аннотации по маршруту
    - do: Дождаться расхождения построенного маршрута и симуляции
    - assert: |
        Маршрут перестроен
        Звучит аннотация о перестроении маршрута

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Голосовые аннотации по пешеходному маршруту. Завершение маршрута:
    - info: |
        Построен произвольный пешеходный маршрут
        В маршруте присутствует надземный переход
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: Тап Начать
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Воспроизводятся аннотации по маршруту
    - do: Дождаться достижения конечной точки
    - assert: Звучит аннотация "Вы на месте"

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Голосовые аннотации по пешеходному маршруту через лестницы:
    - do: Включить симуляцию ведения (Debug-panel -> Routes -> Demo movement)
    - do: Установить скорость движения Pedestrian_demo_movement_speed=10 (Debug-panel -> Routes -> Demo movement)
    - do: |
        Использовать интент:[collapsed-image](https://jing.yandex-team.ru/files/rustamram/QR-код%20лестница.png){title=QR-код}

        'yandexmaps://build_route_on map?lat_from=54.153851&lon_from=37.578387&lat_to=54.153150&lon_to=37.576781'
    - assert: |
        Отображается экран выбора маршрута
        Отображается информация о лестницах на маршруте
        На линии маршрута отображается значок лестницы, в том месте, где она присутствует
    - do: Тап Начать
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Воспроизводятся аннотации по маршруту
        На линии маршрута отображается значок лестницы, в том месте, где она присутствует
    - do: Дождаться подхода к лестнице
    - assert: |
        Звучит аннотация о лестнице
        После прохождения значка лестницы он пропадает

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Поведение камеры при переходе в пешеходное ведение:
    - info: |
        Построен произвольный пешеходный маршрут
        Отображается экран выбора маршрута
    - do: Тап на Начать
    - assert: |
        Происходит плавный одноэтапный подзум к метке ММП
        Отображается экран ведения по пешему маршруту
        Карта отображается в 2D-режиме
        Активирован режим слежения по направлению движения

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Завершение пешеходного ведения через нотификацию c DKA:
    - info: |
        В параметрах разработчика на устройстве - включен режим Don’t keep activities
        Включено фоновое ведение (Настройки -> Маршрут -> Фоновое ведение)
        Включена симуляция движения (Debug-panel -> Routes -> Demo movement)
    - do: Перезапустить приложение
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/rustamram/QR-код%20Маршрут%20с%20маневрами.png){title=QR-код}

        `yandexmaps://build_route_on_map?lat_from=55.763152&lon_from=37.628675&lat_to=55.761956&lon_to=37.609431&lat_via_0=55.764744&lon_via_0=37.616612`
    - assert: Открыт экран построения пешеходного маршрута
    - do: Тап на Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Свернуть приложение
    - assert: |
        Аннотации о маневрах озвучиваются в фоне
        Сверху экрана отображаются нотификация с информацией о маршруте
    - do: Раскрыть нотификацию с информацией об маршруте
    - assert: В нотификации отображаются кнопки Уведомления и Завершить маршрут
    - do: Тап на кнопку Завершить маршрут в нотификации
    - assert: |
        Ведение по маршруту завершилось
        Нотификация больше не отображается
        Аннотации о маневрах не озвучиваются
    - do: Открыть приложение
    - assert: Отображается главный экран приложения

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors


  Завершение пешеходного ведения после перехода в приложение по нотификацию c DKA:
    - info: |
        В параметрах разработчика на устройстве - включен режим Don’t keep activities
        Включено фоновое ведение (Настройки -> Маршрут -> Фоновое ведение)
        Включена симуляция движения (Debug-panel -> Routes -> Demo movement)
    - do: Перезапустить приложение
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/rustamram/QR-код%20Маршрут%20с%20маневрами.png){title=QR-код}

        `yandexmaps://build_route_on_map?lat_from=55.763152&lon_from=37.628675&lat_to=55.761956&lon_to=37.609431&lat_via_0=55.764744&lon_via_0=37.616612`
    - do: Тап на Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Свернуть приложение
    - assert: |
        Аннотации о маневрах озвучиваются в фоне
        Сверху экрана отображаются нотификация с информацией о маршруте
    - do: Тап на нотификацию с информацией об маршруте
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Тап на кнопку Закрытия маршрута
    - assert: |
        Ведение по маршруту завершилось
        Отображается главный экран приложения

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors


  Завершение пешеходного ведения через нотификацию:
    - info: |
        Включено фоновое ведение (Настройки -> Маршрут -> Фоновое ведение)
        Включена симуляция движения (Debug-panel -> Routes -> Demo movement)
    - do: Перезапустить приложение
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/rustamram/QR-код%20Маршрут%20с%20маневрами.png){title=QR-код}

        `yandexmaps://build_route_on_map?lat_from=55.763152&lon_from=37.628675&lat_to=55.761956&lon_to=37.609431&lat_via_0=55.764744&lon_via_0=37.616612`
    - do: Тап на Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Свернуть приложение
    - assert: |
        Аннотации о маневрах озвучиваются в фоне
        Сверху экрана отображаются нотификация с информацией о маршруте
    - do: Раскрыть нотификацию с информацией об маршруте
    - assert: В нотификации отображаются кнопки Уведомления и Завершить маршрут
    - do: Тап на кнопку Завершить маршрут в нотификации
    - assert: |
        Ведение по маршруту завершилось
        Нотификация больше не отображается
        Аннотации о маневрах не озвучиваются
    - do: Открыть приложение
    - assert: Отображается главный экран приложения

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors


  Завершение пешеходного ведения после перехода в приложение по нотификацию:
    - info: |
        Включено фоновое ведение (Настройки -> Маршрут -> Фоновое ведение)
        Включена симуляция движения (Debug-panel -> Routes -> Demo movement)
    - do: Перезапустить приложение
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/rustamram/QR-код%20Маршрут%20с%20маневрами.png){title=QR-код}

        `yandexmaps://build_route_on_map?lat_from=55.763152&lon_from=37.628675&lat_to=55.761956&lon_to=37.609431&lat_via_0=55.764744&lon_via_0=37.616612`
    - do: Тап на Начать
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Свернуть приложение
    - assert: |
        Аннотации о маневрах озвучиваются в фоне
        Сверху экрана отображаются нотификация с информацией о маршруте
    - do: Тап на нотификацию с информацией об маршруте
    - assert: Открыт экран ведения по пешеходному маршруту
    - do: Тап на кнопку Закрытия маршрута
    - assert: |
        Ведение по маршруту завершилось
        Отображается главный экран приложения

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors


  Ведение по пешеходному маршруту. Автоматическое перестроение маршрута:
    - info: |
        Выбран голос диктора Алиса (Меню -> Настройки -> Маршруты -> Звук -> Голос)
        Demo movement выключен (Debug-panel > Routes > Demo movement)
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/rustamram/QR-код%20Маршрут%20с%20маневрами.png){title=QR-код}

        `yandexmaps://build_route_on_map?lat_from=55.763152&lon_from=37.628675&lat_to=55.761956&lon_to=37.609431&lat_via_0=55.764744&lon_via_0=37.616612`
    - do: Тап Начать
    - assert: Курсор не двигается, оставаясь на месте
    - do: Не сбрасывая маршрута запустить ведение по альтернативному маршруту через Mock Location
    - assert: |
        Начинается движение
        Аннотации о маневрах произносятся
    - do: Дождаться расхождения построенного маршрута и симуляции
    - assert: |
        Звучит аннотация "Маршрут перестроен"
        Маршрут перестраивается

    - integration_run:
        - mapkit
    - platforms:
        - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_maps


  Ведение по пешеходному маршруту. Автоматическое фоновое перестроение маршрута:
    - info: |
        Выбран голос диктора Алисы (Меню -> Настройки -> Маршруты -> Звук -> Голос)
        Включено фоновое ведение (Меню -> Настройки -> Маршруты -> Фоновое ведение)
        Demo movement выключен (Debug-panel > Routes > Demo movement)
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/rustamram/QR-код%20Маршрут%20с%20маневрами.png){title=QR-код}

        `yandexmaps://build_route_on_map?lat_from=55.763152&lon_from=37.628675&lat_to=55.761956&lon_to=37.609431&lat_via_0=55.764744&lon_via_0=37.616612`
    - do: Тап Начать
    - assert: Курсор не двигается, оставаясь на месте
    - do: Не сбрасывая маршрута запустить ведение по альтернативному маршруту через Mock Location
    - assert: |
        Начинается движение
        Аннотации о маневрах произносятся
    - do: Свернуть приложение
    - assert: |
        В шторке уведомлений отображается нотификация фонового ведения
        Аннотации о маневрах произносятся
    - do: Дождаться аннотации "Маршрут перестроен"
    - assert: |
        Звучит аннотация "Маршрут перестроен"
    - do: Открыть приложение
    - assert: |
        Маршрут перестроен
        Происходит ведение по альтернативному маршруту

    - integration_run:
        - mapkit
    - platforms:
        - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_maps
