components: local_limits
testing:
  - regress
  
specs:
  Правильный перевод расстояния и скорости из км->мили (метры -> футы):
    - info: |
        Проверяем, что на eng_RU (iOS) и при выборе миль в настройках (Android) значения расстояния и скорости правильно переводятся из километров в мили
        Подготовить 2 устройства (для сверки правильности перевода значений из километров в мили)
        На обоих устройствах включить опцию Масштабная линейка.
        На [устройстве 1] выбрать мили в настройках приложения и установить [локаль, для которой расстояние отображается в милях](https://wiki.yandex-team.ru/maps/mobile/logic/settings/units/?from=%252Fmaps%252Fmobile%252Flogic%252Funits%252F).
        На [устройстве 2] выбрать километры в настройках (Android)/установить ru_RU (или любую другую локаль, [для которой расстояния выводятся в километрах](https://wiki.yandex-team.ru/maps/mobile/logic/settings/units/?from=%252Fmaps%252Fmobile%252Flogic%252Funits%252F]))
        Сервис для перевода величин: http://convertr.ru
        Включить/выключить отображение зума можно через `Настройки -> Debug Panel -> Environment -> Mapkit debug info``
    - do: На устройстве 1 (мили) и устройстве 2 (км) -> Открыть карточку произвольного топонима -> Проверить правильность перевода величин на http://convertr.ru
    - assert: |
        [Устройство 1] В мини-карточке топонима отображается расстояние в милях
        [Устройство 2] В мини-карточке топонима отображается расстояние в километрах
    - do: На обоих девайсах вернуться к главному экрану - > открыть форму Маршрут -> задать точкам А и В через поиск произвольные адреса (одинаковые на обоих девайсах). Сравнить значения расстояния для всех вариантов маршрута (Авто/ОТ/пешком) на устройстве 1 и устройстве 2
    - assert: |
        На форме выбора варианта маршрута (авто/ОТ/пешком) на устройстве 1 расстояние отображается в милях.
        Значение правильно переведено из километров в мили
    - do: На обоих устройствах тап по вкладке автомаршрутов и перейти в режим ведения по автомобильному маршруту (с эмуляцией движения). Проверить, правильно ли переведена скорость из км/ч в мили/час
    - assert: |
        На [устройстве 1] скорость отображается в милях/ч.
        Значение скорости правильно переведено из км/ч в мили/ч (совпадает с переводом на http://convertr.ru)
    - do: На обоих устройствах выбрать один и тот же зум (сначала 19, затем 4) и сравнить значения масштабной линейки. Проверить перевод километров в мили (метров в футы)
    - assert: |
        На [устройстве 1] на 19 зуме расстояние отображается в футах. На 4м зуме — в милях.
        Значения масштабной линейки правильно переведены из метров в футы и из километров в мили (совпадает с переводом на http://convertr.ru)
    - platforms:
        - ios
        - android


  Проверка доступности функционала в России:
    - info: |
        В различных регионах (например, РКУБ, Турция) пользователю доступен различный функционал.
        Местоположение пользователя в России, например, в Москве.
        Выставлен русский язык.
        В настройках включены предупреждения о камерах.
        Приложение перезапущено.
        Открыт экран поиска
    - do: Выполнить поиск по запросу Кафе
    - assert: |
        Произвелся поиск по запросу Кафе
        На карте отображаются поисковые пины
        В списке отображаются карточки организаций
        Под поисковой строкой отображаются фильтры
    - do: Тап в списке на любую организацию
    - assert: |
        Открылась карточка организации
        В карточке присутствует кнопка Исправить информацию об организации
        (Android под экспериментом) или Исправить неточность (Android, iOS)
        В карточке есть блок Рейтинг места со звёздами
    - do: Свернуть карточку организации
    - assert: |
        Отображается карта с поисковыми пинами
        Внизу экрана присутствует свёрнутая строка с названием организации, грипом и крестиком
    - do: Тап на крестик
    - assert: |
        Открывается список результатов поиска
        В списке отображаются карточки организаций
        Под поисковой строкой отображаются фильтры
    - do: Тап на крестик ещё раз
    - assert: |
        Поиск закрылся
        Открыт главный экран приложения с картой
    - do: В пределах города построить любым способом маршрут, проходящий через камеру контроля скорости
    - assert: |
        Открыт экран выбора вариантов маршрута
        Доступно построение автомобильного маршрута
        Доступно построение маршрута на общественном транспорте (если он доступен в этом городе)
        Доступно построение пешеходного маршрута
        Доступно построение веломаршрута
        Доступно построение маршрута такси с возможностью вызова такси с помощью Яндекс.Go
    - do: Перейти в ведение по маршруту со скоростью > 60 км/ч
    - assert: |
        Открыт экран ведения по маршруту
        При подъезде к камере на экране появилось предупреждение (в зависимости от настроек может быть выполнено звуковое оповещение)
    - do: |
        Проверить локализацию на экранах.
        Главный экран с картой (название улиц)
        Меню → Слои
        Меню → Закладки
        Меню → Личный кабинет
        Меню → Офлайн-карты
        Меню → Настройки
        Настройки → Основные
        Настройки → Карты
        Настройки → Маршруты
        Настройки → Офлайн-карты
        Настройки → Заправки
        Настройки → О приложении
        Авторизация (процесс)
        Меню → Личный кабинет (под авторизованным пользователем)
        Форма добавления ДС
        Форма добавления организации
        Экран поиска
        Результаты поиска
        Фильтры
        Экран Маршрут
        Экран выбора вариантов маршрута
        Экран ведения по маршруту
        Лонг-тап меню
        Карточка организации
        Карточка топонима
        Форма фидбэка на организации
        Форма фидбэка на топонимы
        Дискавери (если они отображаются в этом городе)
    - assert: Текст на всех экранах соответствует русскому языку
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Проверка доступности функционала в Турции:
    - info: |
        В различных регионах (например, РКУБ, Турция) пользователю доступен различный функционал
        (Android) Эмулировать местоположение в Турции, например, в Стамбуле
        (iOS) Установить регион Турция в настройках, запретить доступ к местоположению
        Перезапустить приложение
    - do: Открыть Меню -> Настройки -> Маршруты
    - assert: В настройках отсутствует возможность включения предупреждений о камерах
    - do: Открыть Меню -> Настройки -> Карта -> Дорожные события
    - assert: Есть свитчер для включения отображения камер на карте
    - do: Построить автомобильный маршрут любым способом
    - assert: |
        Маршрут построен
        Маршрут на ОТ недоступен
    - do: Тап Поехали
    - assert: Маршрут перешел в режим ведения
    - do: Проехать мимо любой камеры на скорости от 20 до 90 км/ч
    - assert: При ведении по маршруту предупреждения о камерах не появляются
    - do: Открыть карточку организации и поставить рейтинг
    - assert: |
        Рейтинг проставляется
        Открывается экран написания отзывов (Во всех странах, модерация только отзывов на русском)
    - do: |
        Проверить локализацию на экранах:
        Главный экран с картой (название улиц)
        Меню → Слои
        Меню → Закладки
        Меню → Офлайн-карты
        Меню → Настройки
        Настройки → Основные
        Настройки → Карты
        Настройки → Маршруты
        Настройки → Офлайн-карты
        Настройки → О приложении
        Авторизация
        Форма добавления ДС
        Экран поиска
        Результаты поиска
        Фильтры
        Экран Маршрут
        Экран выбора вариантов маршрута
        Экран ведения по маршруту
        Лонг-тап меню
        Карточка организации
        Карточка топонима
    - assert: Текст на всех экранах соответствует выбранному языку
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация для не РКУБ:
    - info: |
        Пользователь не авторизован.
        Язык устройства и регион устройства изменены и местоположение не принадлежит к РКУБ (Россия, Казахстан, Украина, Беларусь).
        Для тестирования следует выбрать Турцию, Армению, Грузию или Узбекистан
    - do: Тап по кнопке Меню
    - assert: |
        Отображается меню настроек
    - do: Тап по кнопке Войти
    - assert: Отображается форма авторизации
    - do: Авторизоваться под любым аккаунтом
    - assert: |
        Пользователь авторизован

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Проверка доступности функционала в Турции (Такси):
    - info: |
        В различных регионах (например, РКУБ, Турция) пользователю доступен различный функционал.
        Устройство с турецкой SIM-картой.
        Регион девайса - Турция.
        Открыт экран поиска с результатами по запросу Кафе
    - do: Тап в списке на любую организацию
    - assert: |
        Открылась карточка организации
        В карточке отображаются кнопки Позвонить, Сохранить, Сайт, Поделиться
        Ниже отображается галерея, адрес, Такси, панорама, сайт и телефон (если есть)
        Отображается кнопка Исправить неточность
        Ниже расположен блок оценки организации
    - do: Построить маршрут
    - assert: |
        Доступно построение автомобильного маршрута.
        Недоступно построение маршрута на общественном транспорте.
        Доступно построение маршрута на велосипеде.
        Доступно построение пешеходного маршрута.
        Доступен вызов такси
    - do: Тап на вариант с такси
    - assert: Отображается кнопка вызова Яндекс.Go/БиТакси
    - platforms:
        - ios
        - android
    - tags:
        - assessors