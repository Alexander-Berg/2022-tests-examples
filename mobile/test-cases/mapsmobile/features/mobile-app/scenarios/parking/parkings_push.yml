components: parkings_push
testing:
  - regress


specs:
  Переход по пуш-уведомлению "Парковочная сессия скоро заканчивается". Приложение свернуто:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Свернуть приложение
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение разворачивается
        - Отображается карточка активной парковочной сессии

    - platforms:
        - ios
        - android
    - tags:
        - newbie
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия закончилась". Приложение свернуто:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Свернуть приложение
    - assert: По истечению парковочной сессии, приходит пуш-уведомление "Парковочная сессия закончилась"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение разворачивается
        - Отображается карточка истории парковок
    - do: Закрыть историю парковок
    - assert: |
        - Отображается карта
        - Карточка с активной парковочной сессией не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия скоро заканчивается". Приложение выгружено из памяти:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Выгрузить приложение из памяти
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение открывается
        - Отображается карточка активной парковочной сессии

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия закончилась". Приложение выгружено из памяти:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Выгрузить приложение из памяти
    - assert: По истечению парковочной сессии, приходит пуш-уведомление "Парковочная сессия закончилась"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение открывается
        - Отображается карточка истории парковок
    - do: Закрыть историю парковок
    - assert: |
        - Отображается карта
        - Карточка с активной парковочной сессией не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия скоро заканчивается" с продлением сессии. Приложение свернуто:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Свернуть приложение
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение разворачивается
        - Отображается карточка активной парковочной сессии
    - do: Тап на "Продлить"
    - do: Тап на "Припарковаться"
    - assert: Отображается карточка активной парковочной сессии
    - do: Свернуть приложение
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение разворачивается
        - Отображается карточка активной парковочной сессии

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия скоро заканчивается" с продлением сессии. Приложение выгружено из памяти:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Выгрузить приложение из памяти
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение открывается
        - Отображается карточка активной парковочной сессии
    - do: Тап на "Продлить"
    - do: Тап на "Припарковаться"
    - assert: Отображается карточка активной парковочной сессии
    - do: Выгрузить приложение из памяти
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение открывается
        - Отображается карточка активной парковочной сессии

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия закончилась" после продления сессии. Приложение свернуто:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Свернуть приложение
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение разворачивается
        - Отображается карточка активной парковочной сессии
    - do: Тап на "Продлить"
    - do: Тап на "Припарковаться"
    - assert: Отображается карточка активной парковочной сессии
    - do: Свернуть приложение
    - assert: По истечению парковочной сессии, приходит пуш-уведомление "Парковочная сессия закончилась"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение разворачивается
        - Отображается карточка истории парковок

    - platforms:
        - ios
        - android
    - tags:
        - newbie


  Переход по пуш-уведомлению "Парковочная сессия закончилась" после продления сессии. Приложение выгружено из памяти:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Выгрузить приложение из памяти
    - assert: Когда остается меньше 5 мин до конца сессии, приходит пуш-уведомление "Парковочная сессия скоро заканчивается"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение открывается
        - Отображается карточка активной парковочной сессии
    - do: Тап на "Продлить"
    - do: Тап на "Припарковаться"
    - assert: Отображается карточка активной парковочной сессии
    - do: Выгрузить приложение из памяти
    - assert: По истечению парковочной сессии, приходит пуш-уведомление "Парковочная сессия закончилась"
    - do: Тап по пуш-уведомлению
    - assert: |
        - Приложение открывается
        - Отображается карточка истории парковок

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия скоро заканчивается", когда парковочная сессия закончилась. Приложение свернуто:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Свернуть приложение
    - assert: По истечению парковочной сессии имеются два пуш-уведомления "Парковочная сессия скоро заканчивается" и "Парковочная сессия закончилась"
    - do: Тап по пуш-уведомлению "Парковочная сессия скоро заканчивается"
    - assert: |
        - Приложение разворачивается
        - Отображается карточка истории парковок
    - do: Закрыть историю парковок
    - assert: |
        - Отображается карта
        - Карточка с активной парковочной сессией не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по пуш-уведомлению "Парковочная сессия скоро заканчивается", когда парковочная сессия закончилась. Приложение выгружено из памяти:
    - info: |
        Включен эксперимент parking_payment_enabled
        Включен эксперимент parking landing AMPP url = null
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Открыть спан Москвы
        Включить слой парковок
        В карточке парковки тап на "Оплатить парковку" -> "Припарковаться"
    - do: Выгрузить приложение из памяти
    - assert: По истечению парковочной сессии имеются два пуш-уведомления "Парковочная сессия скоро заканчивается" и "Парковочная сессия закончилась"
    - do: Тап по пуш-уведомлению "Парковочная сессия скоро заканчивается"
    - assert: |
        - Приложение открывается
        - Отображается карточка истории парковок
    - do: Закрыть историю парковок
    - assert: |
        - Отображается карта
        - Карточка с активной парковочной сессией не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors
