components: parkings
testing:
  - regress


specs:
  Проверка отображения слоя парковок:
    - info: |
        Зум больше 14
        Устройство в вертикальной ориентации
        Включен слой пробок
        Выключен слой парковок
        Открыт экран выбора слоев
    - do: Тап на кнопку включения слоя парковок
    - assert: |
        Кнопка парковок активна
        Слой пробок отключился
    - do: Закрыть экран слоев
    - assert: |
        Под неактивным контролом пробок появился активный контрол парковок
        На карте отображается парковочный слой
    - do: Перезапустить МЯК с выгрузкой из памяти
    - assert: |
        Открыт главный экран
        Парковочный слой включен
        Места парковок отображаются на карте.
    - do: Тап по контролу парковок
    - assert: |
        Контрол пропал с главного экрана
        Парковочный слой выключен

    - tags:
        - assessors
        - use_map
        - newbie
    - testing:
      - acceptance_maps
      - lite_acceptance_maps
    - platforms:
      - ios
      - android


  Отключение слоя 'Парковки' через меню слоев:
    - info: Включен слой парковок
    - do: Тап по контролу слоев
    - assert: |
        Открыт экран слоев
        На видимой части карты отображается слой парковок
        Кнопка включения слоя парковок активна
    - do: Тап на кнопку парковок
    - assert: |
        Кнопка парковок стала неактивной
        На видимой части карты не отображаются парковки
    - do: Вернуться на главный экран
    - assert: |
        Слой парковок не отображается
        Под контролом пробок нет контрола парковок

    - tags:
        - assessors
        - use_map
    - platforms:
        - ios
        - android


  Открытие карточки точечной парковки:
    - info: |
          Включен слой парковок
          Спан направлен на Москву
          Зум 14-15
    - do: Тап на [шильдик](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#shildik) парковки
    - assert:
        Открылась мини-карточка точечной парковки
        Над карточкой отсуствует блок с фотографиями
        Под надписью "Парковочная зона №...." отображается адрес
        Также отображается описание, график работы, расстояние до парковки и Action-бар
    - do: Раскрыть карточку парковки свайпом вверх или тапом по ней
    - assert: |
          Открылась полная карточка точечной парковки
          Над карточкой отсуствует блок с фотографиями
          В карточке присутствуют табы:
          - Обзор
          - Фото
          - Отзывы
          - Филиалы (может присуствовать не у всех парковок)
          Под блоком "Особенности" отображается блок "Панорама"
    - do: Проскроллить до кнопки "Показать/Скрыть парковки"
    - assert: Присуствует блок "Как добраться" с кнопкой "Ближайшие станции метро"
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: Открылась полная карточка парковки
    - do: Закрыть карточку парковки
    - do: Увеличить зум до 16 и больше
    - do: Тап на квадратный пин парковки
    - assert: |
        Открылась карточка точечной парковки
        В карточке присутствуют те же элементы, что и в предыдущей

    - tags:
        - assessors
        - use_map
    - platforms:
        - ios
        - android


  Октрытие карточки неточечной парковки:
    - info: |
          Включен слой парковок
          Спан направлен на Москву
          Зум 16 и больше
    - do: Тап на [ценник](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковки
    - assert: |
        Открылась мини-карточка неточечной парковки
        Над карточкой отсуствует блок с фотографиями
        Под надписью "Парковочная зона №...." НЕ отображается адрес
        Также отображается описание, график работы, расстояние до парковки и Action-бар
    - do: Раскрыть карточку парковки свайпом вверх или тапом по ней
    - assert: |
        Открылась полная карточка неточечной парковки
        Над карточкой отсуствует блок с фотографиями
        В карточке присутствуют табы:
        - Обзор
        - Отзывы
        - Филиалы (может присуствовать не у всех парковок)
        Под блоком "Особенности" НЕ отображается блок "Панорама"
    - do: Проскроллить до кнопки "Показать/Скрыть парковки"
    - assert: Отсуствует блок "Как добраться" с кнопкой "Ближайшие станции метро"
    - do: Свернуть и развернуть МЯК
    - assert: |
        Открыта карточка неточечной парковки
        Скролл сохранился

    - tags:
        - assessors
        - use_map
    - platforms:
        - ios
        - android


  Открытие карточки парковки по ссылке:
    - info: |
          Включен слой парковок
          Открыта карточка парковки
    - do: Тап на кнопку "Поделиться" в Action-баре карточки парковки
    - do: Выбрать любой мессенджер
    - do: Поделиться ссылкой на парковку
    - do: Закрыть МЯК с выгрузкой из памяти
    - do: Открыть мессенджер
    - assert: В мессенджере отображается ссылка на парковку
    - do: Тап по ссылке на парковку
    - assert: |
          Открылось приложение Карты
          Открылась мини-карточка парковки, открытой ранее

    - tags:
        - assessors
        - use_map
    - platforms:
        - ios
        - android


  Отображение карточек парковки в оффлайне:
    - info: |
          Зум 14-15
          Включен слой парковок
    - do: Включить авиарежим
    - do: Тап на [шильдик](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#shildik) парковки
    - assert: Открылась карточка "Нет информации" с кнопкой "Обновить"
    - do: Выключить авиарежим
    - do: Тап на "Обновить"
    - assert: |
        Отображается мини-карточка точечной парковки
        Над карточкой отсуствует блок с фотографиями
        Под надписью "Парковочная зона №...." НЕ отображается адрес
        Также отображается описание, график работы, расстояние до парковки и Action-бар
    - do: Закрыть карточку парковки
    - do: Поменять зум на 16 и больше
    - assert: Отображаются [ценники](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковок
    - do: Включить авиарежим
    - do: Тап на [ценник](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковки
    - assert: Открылась карточка "Нет информации" с кнопкой "Обновить"
    - do: Выключить авиарежим
    - do: Тап на "Обновить"
    - assert: |
        Отображается мини-карточка неточечной парковки
        Над карточкой отсуствует блок с фотографиями
        Под надписью "Парковочная зона №...." НЕ отображается адрес
        Также отображается описание, график работы, расстояние до парковки и Action-бар

    - tags:
        - assessors
        - use_map
    - platforms:
        - ios
        - android


  Отображение кнопки "Как оплатить" в карточке парковки:
    - info: |
        Включен слой парковок
        Зум 14-15
        Спан направлен на Москву
        В значении эксперимента parking_landing_ampp_url указан любой url (например, https://www.google.ru)
    - do: Тап на [шильдик](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#shildik)
    - assert: |
        Открылась мини-карточка точечной парковки
        В action-баре тображается кнопка "Как оплатить"
    - do: Тап на кнопку "Как оплатить"
    - assert: В браузере открывается url, указанный в значении эксперимента parking_landing_ampp_url
    - do: Вернуться в МЯК
    - assert: |
        Открыта мини-карточка парковки
        Отображается кнопка "Как оплатить"
    - do: Развернуть карточку парковки свайпом вверх или тапом по ней
    - assert: |
        Над табами отображается большая CTA-кнопка "Как оплатить"
        В action-баре кнопка перестала отображаться
    - do: Свернуть карточку парковки свайпом вниз
    - assert: Кнопка "Как оплатить" появилась в action-баре

    - tags:
        - assessors
        - newbie
    - platforms:
        - ios
        - android


  Открытие карточки парковки без URI с блоком фотографий:
    - info: |
        - Включен слой парковок
        - Открыт спан Москвы
    - do: Тап на [ценник](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковки с нулевой стоимостью
    - assert: |
        - Открылась мини-карточка парковки
        - Над карточкой отсуствует блок с фотографиями
        - В заголовке отображается "Парковка"
        - Под заголовком отображается адрес
        - Под адресом отображаются координаты
        - Также отображается расстояние до парковки и Action-бар
    - do: Раскрыть карточку парковки свайпом вверх или тапом по ней
    - assert: |
        - Открылась полная карточка парковки
        - Над карточкой присутствует блок с фотографиями
        - В карточке присутствуют табы Обзор
        - В карточке отсутствуют часы работы, телефон, информация о цене и оплате
    - do: Проскролить карточку
    - assert: |
        - Присутствуют кнопки: заказа такси, добавления объекта, исправление информации
        - Присутствует блок "Организации рядом" или блок "Организации в здании"

    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - tags:
        - assessors
        - newbie
    - platforms:
        - android


  Открытие карточки парковки без URI с блоком панорамы:
    - info: |
        - Включен слой парковок
        - Открыт спан Москвы
    - do: Тап на [ценник](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковки с нулевой стоимостью (например по адресу - Москва, Большая Никитская, 31)
    - assert: |
        - Открылась мини-карточка парковки
        - Над карточкой отсуствует блок с панорамой
        - В заголовке отображается "Парковка"
        - Под заголовком отображается адрес
        - Под адресом отображаются координаты
        - Также отображается расстояние до парковки и Action-бар
    - do: Раскрыть карточку парковки свайпом вверх или тапом по ней
    - assert: |
        - Открылась полная карточка парковки
        - Над карточкой присутствует блок с панорамой
        - В карточке присутствуют табы Обзор
        - В карточке отсутствуют часы работы, телефон, информация о цене и оплате
    - do: Проскролить карточку
    - assert: |
        - Присутствуют кнопки: заказа такси, добавления объекта, исправление информации
        - Присутствует блок "Организации рядом" или блок "Организации в здании"

    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - tags:
        - assessors
    - platforms:
        - android


  Открытие карточки парковки без URI без блока фотографий и панорамы:
    - info: |
        - Включен слой парковок
        - Открыт спан Тулы
    - do: Тап на [ценник](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковки с нулевой стоимостью (например по адресу - Тула, улица Ершова)
    - assert: |
        - Открылась мини-карточка парковки
        - Над карточкой отсуствует блок с панорамой или фотографиями
        - В заголовке отображается "Парковка"
        - Под заголовком отображается адрес
        - Под адресом отображаются координаты
        - Также отображается расстояние до парковки и Action-бар
    - do: Раскрыть карточку парковки свайпом вверх или тапом по ней
    - assert: |
        - Открылась полная карточка парковки
        - Над карточкой отсутствует блок с панорамой и фотографиями
        - В карточке присутствуют табы Обзор
        - В карточке отсутствуют часы работы, телефон, информация о цене и оплате
    - do: Проскролить карточку
    - assert: |
        - Присутствуют кнопки: заказа такси, добавления объекта, исправление информации
        - Присутствует блок "Организации рядом" или блок "Организации в здании"

    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - tags:
        - assessors
    - platforms:
        - android


  Смена ориентации при открытой карточки парковки без URI:
    - info: |
        - Включен слой парковок
        - Открыт спан Москвы
        - Устройство в вертикальной ориентациии
    - do: Тап на [ценник](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковки с нулевой стоимостью
    - assert: |
        - Открылась мини-карточка парковки
        - В заголовке отображается "Парковка"
        - Под заголовком отображается адрес
        - Под адресом отображаются координаты
        - Также отображается расстояние до парковки и Action-бар
    - do: Повернуть устройство горизонтально
    - assert: |
        - Карточка парковки не закрывается
        - Информация в карточке не меняется
        - Элементы в карточке остаются выровнены относительно друг друга
    - do: Повернуть устройство вертикально
    - assert: |
        - Карточка парковки не закрывается
        - Информация в карточке не меняется
        - Элементы в карточке остаются выровнены относительно друг друга

    - tags:
        - assessors
    - platforms:
        - android


  Отображение карточки парковки без URI в оффлайне:
    - info: |
        - Включен слой парковок
        - Открыт спан Москвы
    - do: Включить авиарежим
    - do: Тап на [ценник](https://wiki.yandex-team.ru/maps/mobile/testing/glossary/#cennik) парковки с нулевой стоимостью
    - assert: Открылась карточка "Нет информации" с кнопкой "Обновить"
    - do: Выключить авиарежим
    - do: Тап на "Обновить"
    - assert: |
        - Открылась мини-карточка парковки
        - Над карточкой отсуствует блок с фотографиями
        - В заголовке отображается "Парковка"
        - Под заголовком отображается адрес
        - Под адресом отображаются координаты
        - Также отображается расстояние до парковки и Action-бар

    - tags:
        - assessors
    - platforms:
        - android


  Отображение парковок рядом с POI в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
    - do: Тап на POI
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Тап на другой POI
    - assert: |
        Парковки рядом с организацией из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от текущей организации не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке организации
    - assert: |
        Парковки рядом с организацией не отображаются

    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie


  Отображение парковок рядом с топонимом в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
    - do: Тап на топоним
    - assert: |
        Отображаются парковки, до которых расстояние от топонима не более 400 м по пешеходному графу
    - do: Тап на другой топоним
    - assert: |
        Парковки рядом с топонимом из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от текущего топонима не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке топонима
    - assert: |
        Парковки рядом с топонимом не отображаются

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение парковок рядом с точками, открытыми через лонгтап-меню в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
    - do: Лонгтап по карте
    - assert: |
        Открыт экран "Что здесь?"
    - do: Тап по "Что здесь?"
    - assert: |
        Отображаются парковки, до которых расстояние от точки с текущими координатами не более 400 м по пешеходному графу
    - do: Лонгтап по карте в другой точке
    - assert: |
        Парковки рядом с координатами места из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от точки с текущими координатами не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке места
    - assert: |
        Парковки рядом с координатами места не отображаются

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение парковок рядом с пинами результатов поисковой выдачи в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
    - do: Тап на таб Поиск
    - assert: |
        Открыт экран Поиска
    - do: Произвести поиск по категории (например, "Где поесть")
    - assert: |
        Отображаются результаты поисковой выдачи
    - do: Тап по пину любой организации из поисковой выдачи
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Тап по пину другой организации из поисковой выдачи
    - assert: |
        Парковки рядом с организацией из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от текущей организации не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке организации
    - assert: |
        Парковки рядом с организацией не отображаются

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение парковок рядом с POI в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Debug-panel > Routes > Demo movement
        Построен произвольный автомаршрут и тап Поехали
    - do: Тап на POI
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Тап на другой POI
    - assert: |
        Парковки рядом с организацией из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от текущей организации не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке организации
    - assert: |
        Парковки рядом с организацией не отображаются

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie


  Отображение парковок рядом с топонимом в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Debug-panel > Routes > Demo movement
        Построен произвольный автомаршрут и тап Поехали
    - do: Тап на топоним
    - assert: |
        Отображаются парковки, до которых расстояние от топонима не более 400 м по пешеходному графу
    - do: Тап на другой топоним
    - assert: |
        Парковки рядом с топонимом из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от текущего топонима не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке топонима
    - assert: |
        Парковки рядом с топонимом не отображаются

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение парковок рядом с точками, открытыми через лонгтап-меню в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Debug-panel > Routes > Demo movement
        Построен произвольный автомаршрут и тап Поехали
    - do: Лонгтап по карте
    - assert: |
        Открыт экран "Что здесь?"
    - do: Тап по "Что здесь?"
    - assert: |
        Отображаются парковки, до которых расстояние от точки с текущими координатами не более 400 м по пешеходному графу
    - do: Лонгтап по карте в другой точке
    - assert: |
        Парковки рядом с координатами места из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от точки с текущими координатами не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке места
    - assert: |
        Парковки рядом с координатами места не отображаются

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение парковок рядом с пинами результатов поисковой выдачи в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Debug-panel > Routes > Demo movement
        Построен произвольный автомаршрут и тап Поехали
    - do: Тап на контрол Поиск
    - assert: |
        Открыт экран Поиска
    - do: Произвести поиск по категории (например, "Где поесть")
    - assert: |
        Отображаются результаты поисковой выдачи
    - do: Тап по пину любой организации из поисковой выдачи
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Тап по пину другой организации из поисковой выдачи
    - assert: |
        Парковки рядом с организацией из предыдущего шага не отображаются
        Отображаются парковки, до которых расстояние от текущей организации не более 400 м по пешеходному графу
    - do: Тап на крестик в карточке организации
    - assert: |
        Парковки рядом с организацией не отображаются

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Приоритетность слоя парковок оносительно слоя парковок рядом в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
    - do: Тап на POI
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Включить слой парковок
    - assert: |
        Отображаются все парковки на спане
    - do: Выключить слой парковой
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу

    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - platforms:
        - android
    - tags:
        - assessors
        - newbie


  Приоритетность слоя парковок оносительно слоя парковок рядом в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Debug-panel > Routes > Demo movement
        Построен произвольный автомаршрут и тап Поехали
    - do: Тап на POI
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Включить слой парковок
    - assert: |
        Отображаются все парковки на спане
    - do: Выключить слой парковой
    - assert: |
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу

    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - platforms:
        - android
    - tags:
        - assessors
        - newbie

  Вынесенный контролл включения слоя парковок в фридрайве:
    - info: |
        Происходит симуляция движения:
        (Android) через Mock Location / (iOS) через Enter your route в дебаг-панели
        Слой парковок выключен
        Девайс в вертикальной ориентации
    - do: Включить таб Навигатор
    - assert: |
        Отображается экран фридрайва с контроллами
        Среди контроллов присутствуют контроллы включения слоя парковок, пробок
        Контролл скорости не отображается
    - do: Дождаться скрытия контроллов
    - assert: |
        Контроллы скрылись
        Появился контролл скорости
    - do: Повзаимодействовать с экраном для появления контроллов
    - do: Тап на контролл парковок
    - assert: Слой парковок включился
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Отображается экран фридрайва с контроллами
        Среди контроллов присутствуют контроллы включения слоя парковок, пробок
        Кнопка слоев и контролл скорости отсутствует
    - do: Тап на контролл парковок
    - assert: Слой парковок выключился
    - do: Дождаться скрытия контроллов
    - assert: |
        Контроллы скрылись
        Появился контролл скорости

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps
        - lite_acceptance_maps


  Вынесенный контролл включения слоя парковок в ведении:
    - info: |
        Происходит симуляция движения: Debug-panel > Demo movement
        Слой парковок выключен
        Девайс в вертикальной ориентации
    - do: Построить произвольный маршрут и перейти в ведение
    - assert: |
        Отображается экран ведения с контроллами
        Среди контроллов присутствуют контроллы включения слоя парковок, пробок
        Контролл скорости не отображается
    - do: Дождаться скрытия контроллов
    - assert: |
        Контроллы скрылись
        Появился контролл скорости
    - do: Повзаимодействовать с экраном для появления контроллов
    - do: Тап на контролл парковок
    - assert: Слой парковок включился
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Отображается экран ведения с контроллами
        Среди контроллов присутствуют контроллы включения слоя парковок, пробок
        Кнопка слоев и контролл скорости отсутствует
    - do: Тап на контролл парковок
    - assert: Слой парковок выключился
    - do: Дождаться скрытия контроллов
    - assert: |
        Контроллы скрылись
        Появился контролл скорости

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps
        - lite_acceptance_maps


  Переключение в 2D режим при включении слоя парковок:
    - info: |
        Открыт главный экран приложения
        Включен 3D-режим
    - do: Тап на контрол слоев
    - assert: Открыт экран выбора слоя
    - do: Тап на Парковки
    - do: Свернуть экран выбора слоя
    - assert: |
        Открыт главный экран приложения
        Отображаются парковки
        Камера в 2D-режиме
    - do: Тап на контрол слоя парковок
    - assert: |
        Открыт главный экран приложения
        Парковки не отображаются
        Камера в 3D-режиме

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переключение в последний выбранный режим при выключении слоя парковок:
    - info: |
        Открыт главный экран приложения
        Включен слой парковок
    - do: Тап на контрол слоев
    - assert: Открыт экран выбора слоя
    - do: Тап на 3D-режим
    - do: Свернуть экран выбора слоя
    - assert: |
        Открыт главный экран приложения
        Отображаются парковки
        Камера в 3D-режиме
    - do: Тап на контрол слоя парковок
    - assert: |
        Открыт главный экран приложения
        Парковки не отображаются
        Камера в 3D-режиме

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Включение режима Навигатор при включенном слое парковок:
    - info: |
        Открыт главный экран приложения
        Включен слой парковок
    - do: Тап на таб Навигатор
    - assert: |
        Открыт экран в режиме Навигатор
        Парковки не отображаются
        Камера в 3D-режиме

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Включение парковок в режиме ведения:
    - info: |
        Включена симуляция движения Debug-panel > Routes > Demo movement
        Открыт главный экран приложения
    - do: Построить произвольный автомаршрут и тап Поехали
    - assert: |
        Отображается экран ведения по маршруту
        Камера в 3D-режиме
    - do: Тап на контрол парковок
    - assert: |
        Отображается экран ведения по маршруту
        Контрол парковок активен
        Отображаются парковки
        Камера в 2D-режиме
    - do: Тап на контрол парковок
    - assert: |
        Отображается экран ведения по маршруту
        Контрол парковок не активен
        Парковки не отображаются
        Камера в 3D-режиме

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в режим ведения при включенных парковках:
    - info:
        Включена симуляция движения Debug-panel > Routes > Demo movement
        Открыт главный экран приложения
    - do: Тап на контрол слоев
    - assert: Открыт экран выбора слоя
    - do: Тап на Парковки
    - do: Свернуть экран выбора слоя
    - assert: |
        Открыт главный экран приложения
        Отображаются парковки
        Камера в 2D-режиме
    - do: Построить произвольный автомаршрут и тап Поехали
    - assert: |
        Открыт экран ведения по  маршруту
        Отображаются парковки
        Камера в 3D-режиме

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Смена режима камеры при включенных парковках на экране ведения по маршруту:
    - info:
        Включена симуляция движения Debug-panel > Routes > Demo movement
        Открыт главный экран приложения
    - do: Построить произвольный автомаршрут и тап Поехали
    - assert: |
        Открыт экран ведения по  маршруту
        Камера в 3D-режиме
    - do: Тап на контрол парковок
    - assert: |
        Открыт главный экран приложения
        Отображаются парковки
        Камера в 2D-режиме
    - do: Тап на контролл пробок
    - assert: |
        Отображается слой пробок
        Камера в 3D-режиме

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Приоритетность слоя парковок относительно слоя парковок рядом в режиме Навигатора:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
    - do: Включить слой парковок
    - assert: Отображаются все парковки на спане
    - do: Тап на пин организации/топоним
    - assert: Открыта мини-карточка организации
    - do: Открыть карточку произвольной парковки
    - assert: Отображается карточка выбранной парковки
    - do: Закрыть карточку выбранной парковки
    - assert: Мини-карточка открытой ранее организации не отображается

    - testing:
        - acceptance_maps
    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - parity


  Приоритетность слоя парковок относительно слоя парковок рядом в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Включена симуляция ведения Debug-panel > Routes > Demo movement
        Открыт главный экран приложения
    - do: Включить слой парковок
    - assert: Отображаются все парковки на спане
    - do: Построить произвольный автомаршрут
    - do: Тап Поехали
    - assert: Отображается экран ведения по маршруту
    - do: Тап на пин организации/топоним
    - assert: Открыта мини-карточка организации
    - do: Открыть карточку произвольной парковки
    - assert: Отображается карточка выбранной парковки
    - do: Закрыть карточку выбранной парковки
    - assert: Мини-карточка открытой ранее организации не отображается

    - testing:
        - acceptance_maps
    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - parity


  Отображение карточки организации после закрытия карточки парковки в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
        Слой парковок выключен
    - do: Тап на пин организации
    - assert: |
        Открыта мини-карточка организации
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Тап на парковку
    - assert: |
        Открыта карточка парковки
        Другие парковки не отображаются на спане
    - do: Закрыть карточку парковки
    - assert: |
        Открыта мини-карточка организации, для которой была отображена парковка
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу

    - testing:
        - acceptance_maps
    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - parity


  Отображение карточки топонима после закрытия карточки парковки в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
        Слой парковок выключен
    - do: Тап на топоним
    - assert: |
        Открыта мини-карточка топонима
        Отображаются парковки, до которых расстояние от топонима не более 400 м по пешеходному графу
    - do: Тап на парковку
    - assert: |
        Открыта карточка парковки
        Другие парковки не отображаются на спане
    - do: Закрыть карточку парковки
    - assert: |
        Открыта мини-карточка топонима, для которого была отображена парковка
        Отображаются парковки, до которых расстояние от топонима не более 400 м по пешеходному графу

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - parity


  Отображение карточки организации после закрытия карточки парковки в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Включена симуляция ведения Debug-panel > Routes > Demo movement
        Открыт главный экран приложения
        Слой парковок выключен
    - do: Построить произвольный автомаршрут
    - do: Тап Поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на пин организации
    - assert: |
        Открыта мини-карточка организации
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Тап на парковку
    - assert: |
        Открыта карточка парковки
        Другие парковки не отображаются на спане
    - do: Закрыть карточку парковки
    - assert: |
        Открыта мини-карточка организации, для которой была отображена парковка
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу

    - testing:
        - acceptance_maps
    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - parity


  Отображение карточки топонима после закрытия карточки парковки в режиме ведения:
    - info: |
        Получен эксперимент parkings_nearby
        Включена симуляция ведения Debug-panel > Routes > Demo movement
        Открыт главный экран приложения
        Слой парковок выключен
    - do: Построить произвольный автомаршрут
    - do: тап Поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на топоним
    - assert: |
        Открыта мини-карточка топонима
        Отображаются парковки, до которых расстояние от топонима не более 400 м по пешеходному графу
    - do: Тап на парковку
    - assert: |
        Открыта карточка парковки
        Другие парковки не отображаются на спане
    - do: Закрыть карточку парковки
    - assert: |
        Открыта мини-карточка топонима, для которой была отображена парковка
        Отображаются парковки, до которых расстояние от топонима не более 400 м по пешеходному графу

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - parity


  Отображение карточки организации, открытой через поиск, после закрытия карточки парковки в режиме Навигатор:
    - info: |
        Получен эксперимент parkings_nearby
        Приложение открыто в режиме Навигатор
        Слой парковок выключен
    - do: Произвести поиск по любому запросу
    - assert: Открыты результаты поисковой выдачи по запросу
    - do: Тап по сниппету любой организации
    - assert: |
        Открыта миникарточка организации
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
    - do: Открыть карточку любой парковки
    - assert: |
        Открыта карточка парковки
        Другие парковки не отображаются на спане
    - do: Закрыть карточку парковки
    - assert: |
        Открыта мини-карточка организации, для которой была отображена парковка
        Отображаются парковки, до которых расстояние от организации не более 400 м по пешеходному графу
        В строке поиска отображается поисковый запрос

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - parity


  Отсутствие парковок рядом с топонимом в режиме Навигатор на экране выбора автомаршрута:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikita-asuad/qr-code%20%284%29.png){title=QR-код}

        `yandexmaps://add_exp?parknigs_nearby`
    - do: Перезапустить приложение
    - do: Перейти в режим Навигатор
    - do: Построить автомаршрут любым способом
    - assert: Отображается экран построения автомаршрута
    - do: Тап на любой топоним
    - assert: |
        Не отображаются парковки
    - do: Тап на другой топоним
    - assert: |
        Не отображаются парковки

    - testing:
        - acceptance_maps
    - platforms:
        - ios
    - tags:
        - assessors


  Отсутствие парковок рядом с топонимом на экране выбора автомаршрута:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikita-asuad/qr-code%20%284%29.png){title=QR-код}

        `yandexmaps://add_exp?parknigs_nearby`
    - do: Перезапустить приложение
    - do: Построить автомаршрут любым способом
    - assert: Отображается экран построения автомаршрута
    - do: Тап на любой топоним
    - assert: Не отображаются парковки
    - do: Тап на другой топоним
    - assert: Не отображаются парковки

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - assessors
