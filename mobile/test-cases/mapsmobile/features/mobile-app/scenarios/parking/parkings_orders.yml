components: parkings_orders
testing:
  - regress


specs:
  ##потом переписать без дебаг тычки на пропажу плашки активной сессии
  Закрытие карточки завершенной парковки:
    - info:
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/parking.png){title=QR-код}

        `yandexmaps://add_exp?parking_payment_enabled`
        Дебаг-панель -> Environment -> Mobmaps Proxy host -> testing
        Пользователь авторизован в аккаунт с привязанным номером телефона
        На аккаунт добавлено авто
        Активна парковочная сессия
        Открыт главный экран приложения
    - do: debug-panel -> Various -> Open parking session card
    - assert: Открыта карточка текущей парковочной сессии
    - do: Тап "Завершить"
    - assert: |
        Карточка активной парковочной сессии закрылась
        Открыта карточка завершенной парковочной сессии
        Отображается:
          - Номер парковочной зоны
          - Название и госномер автомобиля
          - Длительность парковочной сессии
          - Стоимость
          - Кнопка "Закрыть"
    - do: Тап "Закрыть"
    - assert: |
        Карточка завершенной парковки закрылась
        Открыт главный экран

    - platforms:
        - ios
        - android


  Плашка активной парковочной сессии на главном экране:
    - info: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/parking.png){title=QR-код}

        `yandexmaps://add_exp?parking_payment_enabled`
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        Перезапустить приложение
        Активна парковочная сессия
        Устройство в вертикальной ориентации
    - do: Открыть главный экран
    - assert: |
        На экране присутствует плашка активной парковочной сессии со статусом оплаченной парковки
    - do: Тап на плашку активной парковочной сессии
    - assert: Открыта карточка оплаченной парковки
    - do: Закрыть карточку оплаченной парковки
    - assert: |
        Открыт главный экран
        Внизу экрана присутствует плашка активной парковочной сессии
    - do: Сменить ориентацию устройства
    - assert: Внизу экрана присутствует плашка активной парковочной сессии
    - do: Тап на меню
    - assert: Плашка активной парковочной сессии отсутствует
    - do: Свернуть меню свайпом вниз
    - assert: |
        Открыт главный экран
        Внизу экрана присутствует плашка активной парковочной сессии
    - do: Перезапустить МЯК
    - assert: |
        Открыт главный экран приложения
        Внизу экрана присутствует плашка активной парковочной сессии

    - platforms:
        - ios


#  Плашка активной парковочной сессии в режиме "Фридрайв":
#    - info: |
#        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/parking.png){title=QR-код}
#
#        `yandexmaps://add_exp?parking_payment_enabled`
#        Debug Panel - Environment - Mobmaps proxy host - Testing
#        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
#        В ведении должна происходить симуляция движения(Через Enter your route в дебаг-панели)
#        Включен режим "Навигатор" (тап на таб "Навигатор")
#        Пользователь авторизован в аккаунт с привязанным номером телефона
#        На аккаунт добавлено авто
#        Активна парковочная сессия
#    - do: Открыть главный экран
#    - assert: |
#        Происходит ведение в режиме "Фридрайв"
#        На экране присутствует плашка активной парковочной сессии со статусом оплаченной парковки
#    - do: Тап на плашку активной парковочной сессии
#    - assert: Открыта карточка оплаченной парковки
#    - do: Закрыть карточку оплаченной парковки
#    - assert: |
#        Происходит ведение в режиме "Фридрайв"
#        Внизу экрана присутствует плашка активной парковочной сессии
#    - do: Тап на меню
#    - assert: Плашка активной парковочной сессии отсутствует
#    - do: Свернуть меню свайпом вниз
#    - assert: |
#        Происходит ведение в режиме "Фридрайв"
#        Внизу экрана присутствует плашка активной парковочной сессии
#    - do: Тап на пин топонима/организации
#    - assert: |
#        Открыта карточка топонима/организации
#        Плашка активной парковочной сессии отсутствует
#    - do: Закрыть карточку топонима/организации
#    - assert: |
#        Происходит ведение в режиме "Фридрайв"
#        Внизу экрана присутствует плашка активной парковочной сессии
#    - do: Свернуть/развернуть приложение
#    - assert: |
#        Происходит ведение в режиме "Фридрайв"
#        Внизу экрана присутствует плашка активной парковочной сессии
#
#    - platforms:
#        - ios
#    - tags:
#        - newbie


  Плашка активной парковочной сессии в режиме ведения по маршруту:
    - info: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/parking.png){title=QR-код}

        `yandexmaps://add_exp?parking_payment_enabled`
        Debug Panel - Environment - Mobmaps proxy host - Testing
        Авторизоваться тестовым аккаунтом: yndx.tula.testers@yandex.ru / thisislegitpassword
        В дебаг-панели включена тычка Demo movement
        Пользователь авторизован в аккаунт с привязанным номером телефона
        На аккаунт добавлено авто
        Активна парковочная сессия
        Устройство находится в вертикальной ориентации
    - do: Построить произвольный автомаршрут и перейти в режим ведения
    - assert: |
        Происходит ведение по маршруту
        На экране присутствует плашка активной парковочной сессии со статусом оплаченной парковки
        Плашка активной парковочной сессии находится под плашкой ЕТА
    - do: Тап на плашку активной парковочной сессии
    - assert: Открыта карточка оплаченной парковки
    - do: Закрыть карточку оплаченной парковки
    - assert: |
        Происходит ведение по маршруту
        Внизу экрана присутствует плашка активной парковочной сессии
    - do: Сменить ориентацию устройства
    - assert: Внизу экрана присутствует плашка активной парковочной сессии
    - do: Тап на меню
    - assert: |
        Плашка активной парковочной сессии отсутствует
        Происходит ведение по маршруту
    - do: Свернуть меню свайпом вниз
    - assert: |
        Происходит ведение по маршруту
        Внизу экрана присутствует плашка активной парковочной сессии
    - do: Тап на пин топонима/организации
    - assert: |
        Открыта карточка топонима/организации
        Плашка активной парковочной сессии отсутствует
        Происходит ведение по маршруту
    - do: Закрыть карточку топонима/организации
    - assert: |
        Происходит ведение по маршруту
        Внизу экрана присутствует плашка активной парковочной сессии

    - platforms:
        - ios
