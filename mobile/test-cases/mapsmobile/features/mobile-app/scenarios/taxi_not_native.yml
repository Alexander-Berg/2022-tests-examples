components: taxi_not_native
testing:
  - regress

specs:
  ##Статусы заказа, когда заказ сделан через taxi_open_webview
# Эти тк закомменчены по просьбе ответственных за такси
#  Отображение плашки Поиск машины в веб-вью заказа такси:
#    - info: |
#        ТК проходить на дев-сборке
#        Включен эксперимент taxi_open_webview - web_view_always_open
#        Выключен эксперимент taxi_native_order_in_taxi_tab - null
#        Девайс подключен к снифферу
#        Пользователь авторизован
#        Устройство в вертикальной ориентации
#    - do: |
#        Подменить с помощью Map Local через сниффер в ручке https://geointernal.mob.maps.yandex.net/v1/taxi/orders данные
#        Использовать файл ((https://jing.yandex-team.ru/files/zhekenova/Search.TaxiStatus.json Поиск машины))
#        Перезапустить приложение
#    - assert: |
#        Отображается плашка со статусом "Поиск машины..."
#        Отображается кнопка "Смотреть"
#    - do: Тап на "Смотреть"
#    - assert: |
#        Отображется поп-ап с информацией:
#        - ищем свободную машину
#        - кнопка "Отменить поездку"
#        - кнопка "Обратиться в службу поддержки"
#        На экране справа отображается кнопка меню, слева крестик закрывающий поп-ап
#    - do: Тап на Назад
#    - assert: |
#        Отображается плашка со статусом "Поиск машины..."
#        Отображается кнопка "Смотреть"
#    - do: Сменить ориентацию устройства
#    - assert: Плашка отображается в горизонтальной ориентации над таббаром
#
#    - platforms:
#        - android
#        - ios
#    - integration_run:
#        - kotlin
#
#
#  Отображение плашки Будет через N мин в веб-вью заказа такси:
#    - info: |
#        ТК проходить на дев-сборке
#        Включен эксперимент taxi_open_webview - web_view_always_open
#        Выключен эксперимент taxi_native_order_in_taxi_tab - null
#        Девайс подключен к снифферу
#        Пользователь авторизован
#    - do: |
#        Подменить с помощью Map Local через сниффер в ручке https://geointernal.mob.maps.yandex.net/v1/taxi/orders данные
#        Использовать файл ((https://jing.yandex-team.ru/files/zhekenova/Driving.TaxiStatus.json Будет через 2 минуты))
#        Перезапустить приложение
#    - assert: |
#        Отображается плашка со статусом "Будет через 2 мин"
#        В плашке данные - цвет, модель и гос номер авто
#        Отображается кнопка "Смотреть"
#    - do: Свернуть/развернуть приложение
#    - assert: Плашка продолжает отображаться
#    - do: Тап на "Смотреть"
#    - assert: |
#        Отображается поп-ап с информацией:
#        - через  N минут приедет: цвет, модель и гос номер автомобиля
#        - кнопки "Звонок" и "Отменить поездку"
#        - кнопка "Детали поездки" с данными о стоимости поездки
#        - кнопка "Обратиться в службу поддержки"
#        На экране справа отображается кнопка меню, слева крестик закрывающий поп-ап
#    - do: Тап на Назад
#    - assert: |
#        Отображается плашка со статусом "Будет через 2 мин"
#        В плашке данные - цвет, модель и гос номер авто
#        Отображается кнопка "Смотреть"
#
#    - platforms:
#        - android
#        - ios
#
#
#  Отображение плашки Машина ожидает в веб-вью заказа такси:
#    - info: |
#        ТК проходить на дев-сборке
#        Включен эксперимент taxi_open_webview - web_view_always_open
#        Выключен эксперимент taxi_native_order_in_taxi_tab - null
#        Девайс подключен к снифферу
#        Пользователь авторизован
#    - do: |
#        Подменить с помощью Map Local через сниффер в ручке https://geointernal.mob.maps.yandex.net/v1/taxi/orders данные
#        Используя файл ((https://jing.yandex-team.ru/files/zhekenova/Waiting.TaxiStatus.json Машина ожидает))
#        Перезапустить приложение
#    - assert: |
#        Отображается плашка со статусом "Машина ожидает"
#        В плашке данные - цвет, модель и гос номер авто
#        Отображается кнопка "Смотреть"
#    - do: Свернуть/развернуть приложение
#    - assert: Плашка продолжает отображаться
#    - do: Тап на "Смотреть"
#    - assert: |
#        Отображается поп-ап с информацией:
#        - вас ожидает: цвет, модель и гос номер автомобиля
#        - кнопки "Звонок" и "Отменить поездку"
#        - кнопка "Детали поездки" с данными о стоимости поездки
#        - кнопка "Обратиться в службу поддержки"
#        На экране справа отображается кнопка меню, слева крестик закрывающий поп-ап
#    - do: Тап на Назад
#    - assert: |
#        Отображается плашка со статусом "Будет через 2 мин"
#        В плашке данные - цвет, модель и гос номер авто
#        Отображается кнопка "Смотреть"
#
#    - platforms:
#        - android
#        - ios


#  Отображение плашки В пути в веб-вью заказа такси:
#    - info: |
#        ТК проходить на дев-сборке
#        Включен эксперимент taxi_open_webview - web_view_always_open
#        Выключен эксперимент taxi_native_order_in_taxi_tab - null
#        Девайс подключен к снифферу
#        Пользователь авторизован
#    - do: |
#        Подменить с помощью Map Local через сниффер в ручке https://geointernal.mob.maps.yandex.net/v1/taxi/orders данные
#        Использовать файл ((https://jing.yandex-team.ru/files/zhekenova/Transporting.TaxiStatus.json В пути))
#        Перезапустить приложение
#    - assert: |
#        Отображается плашка со статусом "6 мин в пути"
#        Отображается кнопка "Смотреть"
#    - do: Тап на "Смотреть"
#    - assert: Отображается веб-вью заказа такси
#    - do: Тап на "Смотреть"
#    - assert: |
#        Отображается поп-ап с информацией:
#        - ехать еще N минут
#        - вас везет (ФИО водителя)
#        - конечный адрес маршрута
#        - кнопка "Детали поездки" с данными о стоимости поездки
#        - кнопка "Обратиться в службу поддержки"
#        На экране справа отображается кнопка меню, слева крестик закрывающий поп-ап
#    - do: Тап на Назад
#    - assert: |
#        Отображается плашка со статусом "6 мин в пути"
#        Отображается кнопка "Смотреть"
#
#    - platforms:
#        - android
#        - ios
#    - integration_run:
#        - kotlin
#
#
#Отображение плашки Заказ выполнен в веб-вью заказа такси:
#    - info: |
#        ТК проходить на дев-сборке
#        Включен эксперимент taxi_open_webview - web_view_always_open
#        Выключен эксперимент taxi_native_order_in_taxi_tab - null
#        Девайс подключен к снифферу
#        Пользователь авторизован
#    - do: |
#        Подменить с помощью Map Local через сниффер в ручке https://geointernal.mob.maps.yandex.net/v1/taxi/orders данные
#        Использовать файл ((https://jing.yandex-team.ru/files/zhekenova/Transporting.TaxiStatus.json В пути))
#        Перезапустить приложение
#    - assert: |
#        Отображается плашка со статусом "6 мин в пути"
#        Отображается кнопка "Смотреть"
#    - do: Подменить с помощью Map Local через сниффер данные, используя файл ((https://jing.yandex-team.ru/files/zhekenova/Complete.TaxiStatus.json Заказ завершен))
#    - assert: |
#        В логах проверить событие taxi.status-update с параметром status->completed
#
#    - platforms:
#        - android
#        - ios
#    - testing:
#        - acceptance_maps
#
#
  Отображение плашки с различными статусами заказа:
    - info: |
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
        В дебаг-панели:
          Webview -> Taxi webview base url -> testing
          Environment -> Passport Environment ->testing
          Environment -> Mobmaps Proxy host -> testing
          Environment -> PaymentSDK Environment ->testing
          Эксперимент taxi_open_webview - web_view_always_open
          Эксперимент taxi_native_order_in_taxi_tab - null
          Перезапустить приложение
        Авторизоваться аккаунтом тестового паспорта yndx-kripp-le-ami606 gen2752
    - do: Построить произвольный маршрут на такси
    - do: Тап на кнопку заказа такси
    - assert: Отображается вебвью такси
    - do: Тап на Заказать
    - do: Закрыть вебвью
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        Присутствует плашка такси со статусом "Поиск машины..."
    - do: Тап на плашку
    - assert: Отображается вебвью такси с текущим статусом заказа
    - do: Закрыть вебвью
    - assert: |
        Отображается главный экран приложения
        Присутствует плашка такси с текущим статусом заказа
    - do: Дождаться смены статуса в плашке на "Будет через N мин"
    - assert: Отображается плашка такси со статусом "Будет через N мин"
    - do: Дождаться смены статуса в плашке на "Машина ожидает"
    - assert: Отображается плашка такси со статусом "Машина ожидает"
    - do: Дождаться смены статуса в плашке на "N мин в пути"
    - assert: Отображается плашка такси со статусом "N мин в пути"
    - do: Дождаться окончания поездки
    - assert: На главном экране МЯК не отображается плашка со статусом заказа такси

    - platforms:
        - android
        - ios
    - integration_run:
        - kotlin
    - testing:
        - acceptance_maps


##Всевозможное построение маршрута на такси
##С неустановленным Я.Go:
  Переход в стор через альтернативу такси в автомобильном маршруте (Я.Go не установлено):
    - info: |
        Приложение Я.Go не установлено,
        В дебаг-панели ОТключены эксперименты: taxi_open_webview, taxi_native_order_in_taxi_tab
        Автомобильный маршрут в Я.картах был построен последним,
        Местоположение в Я.картах определено
    - do: Построить автомобильный маршрут любым способом
    - assert: |
        Построен автомобильный маршрут,
        Вверху экрана отображается плашка выбора типа маршрута,
        В блоке информации отображается время маршрута, расстояние,
        Внизу экрана отображается кнопка 'Поехали'
    - do: Тап по кнопке такси в плашке с вариантами типа транспорта
    - assert: |
        Маршрут на такси построен,
        Кнопка 'Поехали' изменилась на 'Вызвать',
        В блоке информации отображается время маршрута, расстояние, примерное время подачи и стоимость поездки
    - do: Тап по кнопке 'Вызвать Я.Go'
    - assert: Открывается страница Я.Go в маркете

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход в стор в вариантах маршрута ОТ (Приложение Я.Go не установлено):
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab
        Перезапустить приложение
        Приложение Я.Go не установлено,
        Устройство находится в вертикальной ориентации,
        Построен маршрут
    - do: Открыть таб с ОТ (иконка с автобусом)
    - assert: Открыт экран выбора вариантов маршрута ОТ
    - do: Тап на маршрут на Такси
    - assert: Открывается страница Я.Go в маркете
    - do: Вернуться в МЯК
    - assert: |
        Открыт экран выбора вариантов маршрута ОТ
        Блок с маршрутом Такси отображается
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Устройство в горизонтальной ориентации
        Блок с маршрутом Такси отображается
    - do: Тап на маршрут Такси
    - assert: Открывается страница Я.Go в маркете

    - platforms:
        - android
        - ios
    - tags:
        - assessors


##С установленным Я.Go

  Переход в Я.Go через альтернативу такси в автомобильном маршруте (Я.Go установлено):
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab
        Перезапустить приложение
        Приложение Я.Go установлено,
        Местоположение в Я.картах определено
    - do: Построить автомобильный маршрут любым способом
    - assert: |
        Построен автомобильный маршрут,
        Вверху экрана отображается плашка выбора типа маршрута,
        В блоке информации отображается время поездки и расстояние,
        Внизу экрана отображается кнопка 'Поехали'
    - do: Тап по кнопке такси в плашке с вариантами типа транспорта
    - assert: |
        Маршрут такси построен,
        Кнопка 'Поехали' изменилась на 'Вызвать',
        В блоке информации отображается время поездки, стоимость, логотип Я.Go, сообщение 'Я.Go приедет за N мин'
    - do: Тап по кнопке 'Вызвать'
    - assert: |
        Запускается приложение Я.Go,
        Приложение предлагает авторизоваться или спрашивает о способе оплаты

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход в Я.Go из карточки организации:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab
        Перезапустить приложение
        Приложение Я.Go установлено,
        МЯК:
          Автомобильный маршрут был построен последним,
          У приложения есть доступ к ММП
          Отображается главный экран
    - do: Тап по пину организации и развернуть карточку на всю высоту
    - asserrt: Отображается полная карточка организации
    - do: Проскролить карточку до кнопки 'Вызвать такси'
    - assert: Кнопка 'Вызвать такси' отображается под блоком с табами
    - do: Тап по 'Вызвать такси'
    - assert: |
        Может появиться поп-ап с надписью 'Программа 'Яндекс.Карты' хочет открыть 'Я.Go',
        Ниже 2 кнопки 'Отменить' и 'Открыть',
        Если поп-ап не открылся переходим к ожидаемому результату следующего шага
    - do: Тап на 'Открыть'
    - assert: |
        Запускается приложение Я.Go,
        В приложении Я.Go построен маршрут от текущего местоположения до организации

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
        - newbie
    - testing:
        - lite_acceptance_maps


  Маршрут такси в вариантах маршрута ОТ (Приложение Я.Go установлено):
    - info: |
        Эксперимент taxi_open_webview = if_no_go
        Эксперимент taxi_native_order_in_taxi_tab = null
        Приложение Я.Go установлено
        Пользователь авторизован в Я.Go
        Устройство находится в вертикальной ориентации
        Построен маршрут
    - do: Открыть таб с ОТ (иконка с автобусом)
    - assert: Открыт экран выбора вариантов маршрута ОТ
    - do: Тап на маршрут на Такси
    - assert: |
        Открылось приложение Я.Go
        Построенный маршрут совпадает с построенным в МЯКе
    - do: Вернуться в МЯК
    - assert: |
        Открыт экран выбора маршрута ОТ
        Блок с маршрутом Такси отображается
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Блок с маршрутом Такси отображается
    - do: Тап на маршрут Такси
    - assert: |
        Открылось приложение Я.Go
        Построенный маршрут совпадает с построенным в МЯКе

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


## Неважно, есть Я.Go или нет

  Построение маршрута такси через альтернативу в пешеходном маршруте:
    - info: |
        Эксперимент taxi_native_order_in_taxi_tab = null
        Перезапустить приложение
        Отображается главный экран приложения
    - do: Построить пеший маршрут с 1 альтернативой и со временем в пути больше 10 минут
    - assert: |
        Открыт экран выбора вариантов пешего маршрута
        Отображается один вариант пешего маршрута
        В качестве второй альтернативы отображается вариант на такси
    - do: Тап на альтернативу на такси
    - assert: |
        Выбрана альтернатива на такси
        Отображается кнопка вызова такси
        На карте для Такси не отображается линия маршрута
    - do: Тап на кнопку вызова такси
    - assert: |
        Открывается приложение такси / страница приложения в магазине приложений / вебвью заказа такси
    - do: Построить пеший маршрут с 3+ альтернативами и со временем в пути больше 10 минут
    - assert: |
        Открыт экран выбора вариантов пешего маршрута
        Отображается 3+ варианта пешего маршрута
        В качестве третей альтернативы отображается вариант на такси
    - do: Тап на альтернативу на такси
    - assert: |
        Выбрана альтернатива на такси
        Отображается кнопка вызова такси
        На карте для Такси не отображается линия маршрута
    - do: Тап на кнопку вызова такси
    - assert: |
        Открывается приложение такси / страница приложения в магазине приложений / вебвью заказа такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие альтернативы на такси в пешеходном маршруте:
    - info: |
        Эксперимент taxi_native_order_in_taxi_tab = null
        Перезапустить приложение
    - do: Построить пеший маршрут с 1 альтернативой и со временем в пути меньше 10 минут
    - assert: |
        Открыт экран выбора вариантов пешего маршрута
        Отображается один вариант пешего маршрута
        Альтернатива на такси не отображается
    - do: Построить пеший маршрут с 3+ альтернативами и со временем в пути меньше 10 минут
    - assert: |
        Открыт экран выбора вариантов пешего маршрута
        Отображается 3+ варианта пешего маршрута
        Альтернатива на такси не отображается
    - do: Построить пеший маршрут с промежуточными точками и со временем в пути больше 10 минут
    - assert: |
        Открыт экран выбора вариантов пешего маршрута
        Альтернатива на такси не отображается

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сохранение типа маршрута после построения маршрута такси:
    - info: |
        Эксперимент taxi_native_order_in_taxi_tab = null
        Перезапустить приложение
        Местоположение определено,
        Маршрут такси был построен последним,
        Отображается главный экран приложения
    - do: Построить маршрут любым способом
    - assert: Построен маршрут на такси
    - do: Вернуться к главному экрану приложения
    - assert: |
        Маршрут закрыт,
        Отображается главный экран приложения
    - do: Тап по пину организации
    - assert: |
        Отображается миникарточка организации,
        На кнопке построения маршрута указана иконка маршрута такси
    - do: Тап по кнопке маршрута в карточке организации
    - assert: Построен маршрут на такси

    - platforms:
        - ios
        - android
    - tags:
       - assessors
       - use_map

  Построение маршрута на такси через лонгтап меню, если последний построенный маршрут был на такси:
    - info: |
        Эксперимент taxi_native_order_in_taxi_tab = null
        Перезапустить приложение
        Местоположение определено,
        Маршрут такси был построен последним,
        Отображается главный экран приложения
    - do: Лонгтап по карте
    - assert: |
        Отображается лонгтап меню,
        В верхней части меню отображаются кнопки Сохранить, Отсюда и Сюда
    - do: Тап 'Сюда'
    - assert: Построен маршрут такси от текущего местоположения до выбранной точки
    - do: Закрыть маршрут
    - assert: Отображается главный экран приложения
    - do: Лонгтап по карте
    - assert: |
        Отображается лонгтап меню,
        В верхней части меню отображаются кнопки Сохранить, Отсюда и Сюда
    - do: Тап Отсюда
    - assert: Открылся экран Маршрут
    - do: Тап в поле Куда
    - assert: |
        Отображается экран со способами заполнения точки Куда
        Отображаются:
          Поисковая строка
          Указать на карте
          Мое местоположение
    - do: Тап по кнопке Моё местоположение
    - assert: Построен маршрут такси от выбранной точки Откуда до текущего местоположения

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Построение маршрута такси в точку из списка 'Избранное':
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab
        Перезапустить приложение
        Авторизоваться в приложении аккаунтом, в котором добавлены закладки
        Местоположение определено,
        Маршрут такси был построен последним,
        Отображается главный экран приложения
    - do: Тап по меню
    - assert: Отображается меню
    - do: Тап по 'Закладки'
    - assert: |
        Отображается экран сохраненных мест,
        В верхней части экрана отображаются адреса дома и работы,
        Под адресами дома и работы отображается перечень списков закладок
    - do: Тап по 'Избранное'
    - assert: |
        Отображается список сохраненных закладок
    - do: Тап по одному из сохраненных мест
    - assert: |
        Отображается карточка места,
        Рядом с кнопкой маршрута в карточке отображается логотип такси и примерное время движения по маршруту
    - do: Тап по кнопке маршрута в карточке
    - assert: |
        Построен маршрут такси до точки из списка избранное,
        В превью маршрута отображается расстояние до точки, примерное время движения по маршруту, время подачи и примерная стоимость поездки

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение маршрута такси в вариантах маршрутов ОТ:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab
        Перезапустить приложение
        Отображается главный экран приложения
    - do: Тап по кнопке маршрутов
    - assert: |
        Отображается экран построения маршрута,
        На экране отображаются 2 строки ввода адресов ('Откуда' и 'Куда'),
        Если местоположение определено, то в строке 'Откуда' будет указано текущее местоположение,
        В строке 'Куда' отображается текст 'Куда',
        Если местоположение не определено, то в строке точки А будет отображаться текст 'Откуда', строка точки А выделена, в этом случае перейти к шагу 3
    - do: Тап по строке 'Откуда'
    - assert: |
        Выделена строка 'Откуда',
        Появилась экранная клавиатура
    - do: Ввести адрес в строку
    - assert: |
        Отображается экран построения маршрутов,
        В строке Откуда указан введенный адрес
    - do: Тап по строке Куда
    - assert: |
        Выделена строка 'Куда',
        Появилась экранная клавиатура
    - do: Ввести адрес в строку
    - assert: |
        Построен маршрут по точкам из шагов 3 и 5,
        Появляется экран выбора вариантов маршрута
    - do: Тап по кнопке маршрута ОТ в блоке выбора типов маршрута
    - assert: |
        Отображаются варианты маршрутов ОТ,
        Все варианты маршрутов являются маршрутами ОТ,
        Маршрут такси в превью маршрутов не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Построение маршрута на такси:
    - preconditions: Открыт главный экран
    - do: |
        Выключить эксперименты, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?taxi_open_webview=null&taxi_native_order_in_taxi_tab=null`
    - do: Перезапустить приложение
    - do: Тап на кнопку построения маршрута (в виде изогнутой линии маршрута)
    - assert: Открылся экран 'Маршрут'
    - do: Тап в поле 'Куда'
    - assert: |
        Поле сместилось в верх экрана,
        Отображается клавиатура, поле в фокусе (в поле мигает вертикальный курсор),
        Слева от поля пульсирующий серый круг,
        Под полем 'Куда' - 'Указать на карте' (слева иконка пина), 'Голосовой ввод' (слева иконка микрофона)
    - do: Ввести произвольный адрес и тап на него в появившейся подсказке под полем ввода
    - assert: |
        Открыт экран выбора вариантов маршрута,
        Заполнены поля Откуда/Куда,
        На карте отображается линия маршрута и линии альтернативных маршрутов (если есть) с подсказками,
        Тип маршрута соответствует последнему выбранному (по умолчанию автомобильный),
        У каждого типа маршрута отображается время в пути (для такси цена),
        Если маршрут какого-то типа нельзя построить (например, слишком длинный для пешеходного), то время заменяется на троеточие,
        Внизу экрана блоки маршрутов (если присутствуют альтернативные),
        В офлайн режиме могут отображаться не все маршруты
    - do: Тап на маршрут такси (иконка такси с ценой за поездку)
    - assert: |
        Открыт экран выбора вариантов маршрута,
        Вверху экрана - кнопка Назад, Откуда/Куда (заполнены), кнопка вызова меню в виде трех вертикальных точек,
        Выбран тип маршрута - такси,
        В нижней части экрана отображается блок с ценой за поездку, временем в пути, иконкой Я.Go, надписью 'Яндекс Go Время поездки n мин', справа кнопка 'Выбрать тариф'
    - do: Тап на "Выбрать тариф"
    - assert: |
        Открывается поп-ап с предложением выбрать браузер, если приложение не установлено,
        После выбора браузера открывается AppStore / Playmarket,
        Открывается приложение 'Я.Go', если оно установлено,
        Если Я.Go установлено, но не обновлено, то открывается AppStore / Playmarket
    - do: Вернуться в МЯК
    - assert: |
        Открыт экран выбора вариантов маршрута,
        Выбран тип 'Такси',
        Маршрут построен и отображается на карте

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors



  ##Сниппет такси в автомаршруте
  Сниппет альтернативы такси в вариантах автомаршрута (С авторизацией в Я.Go):
    - info: |
        Пользователь авторизован
        Приложение Я.Go установлено
        Пользователь авторизован в Я.Go тем же аккаунтом, что и в МЯК
        Устройство находится в вертикальной ориентации
        Отображается главный экран приложения на спане города с поддержкой Я.Go
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/taxi_not_native.png){title=QR-код}

        `yandexmaps://add_exp?taxi_in_auto_route&taxi_native_order_in_taxi_tab=null&taxi_open_webview=null`
    - do: Перезапустить приложение
    - do: Построить маршрут с 3 и более альтернативными вариантами маршрута
    - do: Выбрать автомаршрут (иконка с автомобилем)
    - assert: |
        Открыт экран выбора вариантов автомаршрута
        Отображаются сниппенты всех вариантов маршрута
        Присутствует сниппет такси
    - do: Тап на сниппет такси в вариантах автомаршрута
    - assert: |
        Сниппет с такси выделен
        Кнопка "Поехали" изменилась на кнопку заказа такси
    - do: Тап на кнопку заказа такси
    - assert: |
        Запускается приложение Я.Go
        Адреса отправки и прибытия идентичны тем, что были в МЯК
    - do: Вернуться в МЯК
    - assert: |
        Открыт экран выбора вариантов автомаршрута,
        Маршрут построен
    - do: Тап на кнопку просмотра списка в левом нижнем углу в виде трех линий
    - assert: |
        Открылся экран вариантов автомаршрута списком
        Сниппет такси отображается третьим, если вариантов автомаршрута 2 и больше
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: Сниппет такси отображается третьим
    - do: Тап на кнопку заказа такси
    - assert: |
        Запускается приложение Я.Go
        Адреса отправки и прибытия идентичны тем, что были в МЯК

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Сниппет альтернативы такси в вариантах автомаршрута (Без авторизации в Я.Go):
    - info: |
        Открыт спан города, где есть Я.Go
        В дебаг-панели включен эксперимент taxi_in_auto_route
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        IOS: Авторизация в Я.Go не осуществлялась
        Android: Приложение Я.Go не установлено,
        Устройство находится в вертикальной ориентации
    - do: Выбрать автомаршрут (иконка с автомобилем)
    - assert: |
        Открыт экран выбора вариантов автомобильного маршрута,
        Маршрут построен
    - do: Тап на сниппет такси
    - assert: |
        Сниппет такси выделен,
        Надпись на кнопке “Поехали” изменилась на “Заказать такси”
    - do: Тап на кнопку заказа такси
    - assert: |
        IOS: Открывается webview с интерфейсом Я.Go, внизу большая кнопка "Авторизироваться для заказа",
        Adroid: Открывается страница Я.Go в Play Маркете
    - do: Вернуться в МЯК
    - assert: |
        Открыт экран выбора вариантов автомобильного маршрута,
        Маршрут построен
    - do: Тап на кнопку просмотра списка в левом нижнем углу в виде трех линий
    - assert: |
        Открылся экран вариантов маршрута списком,
        Сниппет такси отображается третьим, если вариантов автомаршрута 2 и больше,
        Надпись на кнопке сниппета с "Поехали" изменилась на "Вызвать", над ней - примерная стоимость поездки
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: Сниппет такси отображается третьим, если вариантов автомаршрута 2 и больше
    - do: Тап на кнопку заказа такси
    - assert: |
        IOS: Открывается webview с интерфейсом Я.Go, в вертикальной ориентации и построенным маршрутом. Внизу большая кнопка "Заказать",
        Android: Открывается страница Я.Go в Play Маркете

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Логика показа сниппета альтернативы такси на экране построения автомаршрута:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыт спан города, где есть Я.Go
        В дебаг-панели включен эксперимент taxi_in_auto_route
    - do: Построить любой автомаршрут короче 55 километров
    - assert: |
        Открыт экран построения маршрута
        В вариантах маршрута отображается сниппет такси
        Сниппет такси отображается третьим, если вариантов автомаршрута 2 и больше
        Отображается кнопка "Поехали"
    - do: Тап на сниппет такси
    - assert: |
        Фокус перешёл на сниппет такси
        Текст кнопки перехода в ведение поменялся на текст вызова такси
    - do: Построить автомаршрут длиннее 55 километров
    - assert: В вариантах маршрута не отображается сниппет такси
    - do: Построить автомаршрут короче 55 километров в любой стране, где нет Я.Go (например, в Польше)
    - assert: В вариантах маршрута не отображается сниппет такси

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


##Все про стоимость поездки

  Отображение стоимости поездки маршрута такси на территории России:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Маршрут такси был построен последним,
        Отображается главный экран приложения
    - do: Тап по пину организации
    - assert: Отображается мини карточка организации
    - do: Тап по кнопке маршрута
    - assert: |
        Отображается экран выбора маршрута,
        Построен маршрут такси,
        В превью маршрута отображается информация о примерной стоимости поездки,
        Стоимость поездки указана в рублях '₽'

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map

  Отображение стоимости поездки маршрута такси на территории Украины:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Подменить местоположение на один из городов Украины
        Маршрут такси был построен последним
        Отображается главный экран приложения
    - do: Тап по пину организации
    - assert: Отображается мини карточка организации
    - do: Тап по кнопке маршрута
    - assert: |
        Отображается экран выбора маршрута,
        Построен маршрут такси,
        В превью маршрута отображается информация о примерной стоимости поездки,
        Стоимость поездки указана в гривнах 'грн'

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Отображение стоимости поездки маршрута такси на территории Беларуси:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Подменить местоположение на один из городов Беларуси,
        Маршрут такси был построен последним,
        Отображается главный экран приложения
    - do: Тап по пину организации
    - assert: Отображается мини карточка организации
    - do: Тап по кнопке маршрута
    - assert: |
        Отображается экран выбора маршрута,
        Построен маршрут такси,
        В превью маршрута отображается информация о примерной стоимости поездки,
        Стоимость поездки указана в белорусских рублях 'руб.'

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Отображение стоимости поездки маршрута такси на территории Казахстана:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Подменить местоположение на один из городов Казахстана,
        Маршрут такси был построен последним,
        Отображается главный экран приложения
    - do: Тап по пину организации
    - assert: Отображается мини карточка организации
    - do: Тап по кнопке маршрута
    - assert: |
        Отображается экран выбора маршрута,
        Построен маршрут такси,
        В превью маршрута отображается информация о примерной стоимости поездки,
        Стоимость поездки указана в тенге

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Отображение стоимости поездки при построении маршрута такси в другую страну:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Подменить местоположение на один из городов России,
        Маршрут такси был построен последним,
        Отображается главный экран приложения
    - do: Тап по кнопке 'Маршруты'
    - assert: |
        Открыт экран 'Маршрут',
        В начальной точке указано текущее местоположение,
        В конечной точке плейсхолдер 'Куда',
        Ниже расположен блок Дом/Работа,
        Справа от 'Дом' и 'Работа' кнопка 'Добавить' (если не добавлены), или время поездки до дома и работы,
        Отображается перечень списков сохраненных мест
    - do: Построить маршрут до города Киев
    - assert: |
        Построен маршрут такси в г. Киев (Украина),
        В превью маршрута цена за поездку указана в рублях '₽',
        Отображается время поездки и кнопка 'Вызвать'
    - do: Тап на три вертикальные точки вверху - изменить маршрут
    - assert: |
        Отображается экран изменения маршрута,
        В начальной точке указано текущее местоположение,
        Справа от начальной и конечной точек отображаются две противонаправленные стрелочки
    - do: Поменять местами начальную и конечную точки маршрута
    - assert: |
        В начальной точке указано место 'Киев',
        В конечной точке указано текущее местоположение
    - do: Тап по 'Построить'
    - assert: |
        Построен маршрут из места 'Киев' в текущее местоположение,
        В превью маршрута цена за поездку указана в гривнах 'грн'
    - do: Тап по 'назад'
    - assert: Отображается экран редактирования маршрута
    - do: Построить маршрут на Такси до Минска и обртано
    - assert: |
        Если маршрут такси построен из России в Беларусь, то цена поездки будет указана в российских рублях '₽',
        Если маршрут такси построен из Беларуси в Россию, то цена поездки будет указана в белорусских рублях 'р.'

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Эксперимент с минимальной стоимостью такси в action-баре:
    - info: |
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Доступ к геолокации не выдан
        Открыт спан карты города с поддержкой такси
    - do: Тап на пин организации
    - assert: |
        Открыта мини-карточка организации
        В action-баре отображается кнопка такси со стоимостью в формате "от Х ₽"
    - do: Тап на топоним на карте
    - assert: |
        Открыта мини-карточка топонима
        В action-баре отображается кнопка такси со стоимостью в формате "от Х ₽"
    - do: Тап на остановку общественного транспорта
    - do: Развернуть карточку остановки
    - assert: |
        Открыта полная карточка остановки
        В теле карточки отображается кнопка такси со стоимостью в формате "Вызвать такси от Х ₽"
    - do: Закрыть карточку остановки
    - do: Тап на станцию метро
    - assert: |
        Открыта мини-карточка станции метро
        В action-баре отображается кнопка такси со стоимостью в формате "от Х ₽"
    - do: Открыть спан карты города без поддержки такси
    - do: Тап на пин организации
    - assert: |
        Открыта мини-карточка организации
        Кнопка такси отсутствует action-баре

    - platforms:
        - android
        - ios
    - tags:
        - advertisement
        - assessors
    - testing:
        - acceptance_maps


  Форма заказа такси при эксперименте на минимальную стоимость:
    - info: |
        На устройстве установлено приложение Я.Go, у Go есть доступ к ММП
        Эксперимент taxi_open_webview выключен
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Доступ к геолокации в МЯК не выдан
        Открыт спан карты города с поддержкой такси
    - do: Тап на пин организации
    - assert: |
        Открыта мини-карточка организации
        В action-баре отображается кнопка такси со стоимостью в формате "от Х ₽"
    - do: Тап на кнопку такси
    - assert: |
        Открывается приложение Я.Go
        В поле "Куда" отображается адрес организации из Карт
        Поле "Откуда" заполнено
    - do: Вернуться в МЯК
    - do: Включить эксперимент taxi_open_webview
    - do: Перезапустить приложение
    - do: Тап на пин организации
    - assert: |
        Открыта мини-карточка организации
        В action-баре отображается кнопка такси со стоимостью в формате "от Х ₽"
    - do: Тап на кнопку такси
    - assert: |
        Открывается webview такси
        Поле "Откуда" не заполнено
        В поле "Куда" указан адрес выбранной организации

    - platforms:
        - android
        - ios
    - tags:
        - advertisement
        - assessors
    - testing:
        - acceptance_maps



  ##https://st.yandex-team.ru/MAPSANDROID-15505
  Цена такси в карточках организаций в случае, если пользователь уже находится в этом месте по ММП:
    - info: |
        Получен эксперимент taxi_cards_new_logic(Android)
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыт спан карты с ММП, регион с поддержкой такси
    - do: Открыть мини-карточку организации в радиусе 50 м от ММП
    - assert: |
        Открыта мини-карточка организации с кнопкой "Заказать такси" в action-баре
        Цена заказа в кнопке "Заказать такси" в формате "от х рублей"
    - do: Развернуть карточку организации
    - assert: |
        Кнопка "Заказать такси" переместилась в тело карточки, цена не изменилась
    - do: Открыть мини-карточку организации в радиусе 150 м от ММП
    - assert: |
        Открыта мини-карточка организации с кнопкой "Заказать такси" в action-баре
        Цена заказа в кнопке "Заказать такси" в формате "от х рублей"
        Стоимость заказа не отличается от стоимости в предыдущей карточке организации
    - do: Развернуть карточку организации
    - assert: |
        Кнопка "Заказать такси" переместилась в тело карточки, цена не изменилась
    - do: Открыть мини-карточку организации вне радиуса 150 м от ММП
    - assert: |
        Открыта мини-карточка организации с кнопкой "Заказать такси" в action-баре
        Цена заказа в кнопке "Заказать такси" в формате "от х рублей"
        Стоимость заказа отличается от стоимости заказа, которая была в радиусе 150 м от ММП

    - platforms:
        - android
        - ios
    - tags:
        - assessors


##Старый эксперимент с вебвью https://st.yandex-team.ru/MAPSPRODUCT-1306
  Заказ такси через веб-вью в табе Такси:
    - info: |
        Включен эксперимент taxi_open_webview - web_view_always_open
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Я.GO установлено
        Пользователь авторизован
        Открыт экран с вариантами маршрута в табе Такси
    - do: Тап Вызвать
    - assert: |
        Отображается веб-вью заказа такси
        В поле Откуда - адрес начальной точки
        В поле Куда -  адрес конечной точки
        Отображается кнопка "Заказать"
    - do: Вернуться в приложение Я.Карты
    - assert: Отображается экран с вариантами маршрута в табе Такси

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - newbie
    - integration_run:
        - kotlin


  Заказ такси через веб-вью в табе Все:
    - info: |
        Включен эксперимент taxi_open_webview - web_view_if_no_go
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Я.GO не установлено
        Пользователь авторизован
        Открыт экран с вариантами маршрута в табе Все
    - do: Выбрать вариант На такси
    - assert: |
        Отображается веб-вью заказа такси
        В поле Откуда - адрес начальной точки
        В поле Куда - адрес конечной точки
        Отображается кнопка "Заказать"
    - do: Тап на кнопку назад
    - assert: |
        Отображается экран с вариантами маршрута в табе Все
        В табе присутствует вариант на такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Заказ такси через веб-вью в автомаршруте:
    - info: |
        Включен эксперимент taxi_open_webview - web_view_always_open
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Я.GO не установлено
        Пользователь авторизован
        Отображаются варианты автомобильного маршрута
    - do: Тап на кнопку заказа такси
    - assert: |
        Отображается веб-вью заказа такси
        В поле Откуда - адрес начальной точки
        В поле Куда - адрес конечной точки
        Отображается кнопка "Заказать"
    - do: Тап на назад
    - assert: |
        Отображаются варианты автомобильного маршрута
        Отображается кнопка заказа такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Заказ такси через веб-вью в пешем маршруте:
    - info: |
        Включен эксперимент taxi_open_webview - web_view_if_no_go
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Я.GO установлено
        Пользователь авторизован
        Отображаются варианты пешего маршрута
    - do: Выбрать вариант маршрута на такси среди альтернативных
    - assert: Кнопка такси выделена
    - do: Тап на Заказать такси
    - assert: |
        Запустилось приложение Я.GO
        В поле Откуда - адрес начальной точки
        В поле Куда - адрес конечной точки
        Отображается кнопка "Заказать"
    - do: Вернуться в приложение Я.Карты
    - assert: |
        Отображается экран с вариантами пешего маршрута
        Отображается альтернативный вариант на такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Заказ такси через веб-вью в карточке организации:
    - info: |
        Включен эксперимент taxi_open_webview - web_view_always_open
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Я.GO не установлено
        Пользователь авторизован
        Открыта полная карточка организации
    - do: Тап на кнопку вызова такси
    - assert: |
        Отображается веб-вью заказа такси
        В поле Откуда - адрес ММП
        В поле Куда - адрес организации
        Отображается кнопка "Заказать"
    - do: Тап на назад
    - assert: Отображается полная карточка организации

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Заказ такси через веб-вью в карточке топонима:
    - info: |
        Включен эксперимент taxi_open_webview - web_view_if_no_go
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Я.GO установлено
        Пользователь авторизован
        Открыта полная карточка топонима
        В Я.GO добавлена карта оплаты
    - do: Тап на кнопку вызова такси
    - assert: |
        Запустилось приложение Я.GO
        В поле Откуда - адрес ММП
        В поле Куда - адрес топонима
        Отображается кнопка "Заказать"
    - do: Вернуться в приложение Я.Карты
    - assert: Отображается полная карточка топонима

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Заказ такси через веб-вью в карточке организации в оффлайне:
    - info: |
        Включен эксперимент taxi_open_webview - web_view_always_open
        Выключен эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Пользователь авторизован
        Открыта полная карточка организации
        Интернет отключен
    - do: Тап на кнопку вызова такси
    - assert: |
        Открывается веб-вью с сообщением об отсутствии интернета
        Отображается кнопка повтора
    - do: Подключить интернет
    - assert: Интернет соединение восстановлено
    - do: Тап на кнопку повтора
    - assert: |
        Отображается веб-вью заказа такси
        В поле Откуда - адрес ММП
        В поле Куда - адрес организации
        Отображается кнопка "Заказать"
    - do: Закрыть вебвью
    - assert: Отображается полная карточка организации

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Авторизация через веб-вью заказа такси в табе Такси:
    - info: |
        В Меню - Настройки - Debug-panel -> Experiments указать:
          taxi_open_webview - web_view_always_open
          taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Пользователь неавторизован
        Открыт экран с вариантами маршрута в табе Такси
    - do: Тап на Вызвать
    - assert: Отображается веб-вью заказа такси
    - do: Тап на Заказать
    - assert: Отображается поп-ап авторизации
    - do: Авторизоваться
    - assert: Отображается веб-вью заказа такси
    - do: Тап на Назад
    - assert: Отображается экран с вариантами маршрута в табе Такси
    - do: Перейти в меню
    - assert: Пользователь авторизован

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - integration_run:
        - kotlin


  #Обновить ТК когда будет сделана плашка на успешное завершение заказа
  Отображение кнопки "Вызов нового такси" в поп-ап "Заказ отменен":
    - info: При любом ответе через поп-ап "Заказ отменен" первоначально созданный заказ такси будет продолжать выполняться
    - preconditions: |
        ТК проходить на дев-сборке
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
        В дебаг-панели установить:
        `Webview -> Taxi webview base url -> testing`
        `Environment -> Passport Environment ->testing`
        `Environment -> Mobmaps Proxy host -> testing`
        `Environment -> PaymentSDK Environment ->testing`
        Авторизоваться аккаунтом тестового паспорта `yndx-kripp-le-ami606` `gen2752`
        Открыт главный экран приложения
    - do: |
        В Чарльз подготовить подмену через Map Local для ручки `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/taxi/orders/search`, используя файл ((https://jing.yandex-team.ru/files/zhekenova/Cancelled.TaxiStatus.json Отмена заказа))
    - assert: Подмена в сниффере НЕ включена
    - do: |
        Использовать интент: [collapsed-image](https://jing.yandex-team.ru/files/tdon/QR_CODE.png){title=QR-код}

        `yandexmaps://add_exp?taxi_open_webview=web_view_always_open&taxi_native_order_in_taxi_tab=null`
    - do: Перезапустить приложение
    - do: Построить произвольный маршрут на такси
    - do: Тап на Выбрать тариф
    - assert: Отображается вебвью такси
    - do: Тап на Заказать
    - do: Закрыть вебвью
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        Присутствует плашка такси с текущим статусом заказа
    - do: ВКЛючить подмену через Map Local
    - assert: |
        Подмена в сниффере включена
        На главном экране через несколько секунд появляется поп-ап "Заказ был отменен" с кнопками:
        - Вызвать новое такси
        - Пока не нужно
    - do: ВЫКлючить подмену через Map Local
    - do: Тап на "Вызвать новое такси"
    - assert: Отображается веб-вью заказа такси с текущим статусом заказа
    - do: Закрыть вебвью
    - assert: |
        Отображается главный экран приложения
        Присутствует плашка такси с текущим статусом заказа

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps


  Отображение кнопки "Пока не нужно" в поп-ап "Заказ отменен":
    - info: При любом ответе через поп-ап "Заказ отменен" первоначально созданный заказ такси будет продолжать выполняться
    - preconditions: |
        ТК проходить на дев-сборке
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
        В дебаг-панели установить:
        `Webview -> Taxi webview base url -> testing`
        `Environment -> Passport Environment ->testing`
        `Environment -> Mobmaps Proxy host -> testing`
        `Environment -> PaymentSDK Environment ->testing`
        Авторизоваться аккаунтом тестового паспорта `yndx-kripp-le-ami606` `gen2752`
        Открыт главный экран приложения
    - do: |
        В Чарльз подготовить подмену через Map Local для ручки `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/taxi/orders/search`, используя файл ((https://jing.yandex-team.ru/files/zhekenova/Cancelled.TaxiStatus.json Отмена заказа))
    - assert: Подмена в сниффере НЕ включена
    - do: |
        Использовать интент: [collapsed-image](https://jing.yandex-team.ru/files/tdon/QR_CODE.png){title=QR-код}

        `yandexmaps://add_exp?taxi_open_webview=web_view_always_open&taxi_native_order_in_taxi_tab=null`
    - do: Перезапустить приложение
    - do: Построить произвольный маршрут на такси
    - do: Тап на Выбрать тариф
    - assert: Отображается вебвью такси
    - do: Тап на Заказать
    - do: Закрыть вебвью
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        Присутствует плашка такси с текущим статусом заказа
    - do: ВКЛючить подмену через Map Local
    - assert: |
        Подмена в сниффере включена
        На главном экране через несколько секунд появляется поп-ап "Заказ был отменен" с кнопками:
        - Вызвать новое такси
        - Пока не нужно
    - do: ВЫКлючить подмену через Map Local
    - do: Тап на "Пока не нужно"
    - assert: |
        Отображается главный экран приложения
        Плашка такси не отображается

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps


##Эксперименты с такси в экшн-баре остановки и другие ОТ-экспы
  Построение маршрута такси через карточку остановки:
    - info: |
        Приложение Я.Go не установлено
        iOS: Включен эксперимент stops_action_bar_with_taxi
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыта карточка остановки ОТ
        Устройство в вертикальной ориентации
    - do: Просвайпать влево карусель action-бара
    - assert: |
        В action-баре отображаются кнопки:
        - маршрут
        - сохранить/удалить
        - расписание
        - кнопка такси с ценой поездки
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается полная карточка остановки
        Кнопки в action-баре по-прежнему отображаются
    - do: Тап на кнопку такси
    - assert: Происходит переход на страницу Google Play с приложением Я.Go

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Построение маршрута такси через карточку ж/д станции:
    - info: |
        Приложение Я.Go установлено
        iOS: Включен эксперимент stops_action_bar_with_taxi
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыта карточка ж/д станции
        Устройство в вертикальной ориентации
    - do: Просвайпать влево карусель action-бара
    - assert: |
        В action-баре отображаются кнопки:
        - маршрут
        - сохранить/удалить
        - расписание
        - открыть Яндекс.Электрички
        - кнопка такси с ценой поездки
    - do: Тап на кнопку такси
    - assert: Происходит переход в приложение Я.Go
    - do: Вернуться в приложение
    - assert: Отображается карточка ж/д станции
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается полная карточка ж/д станции
        В action-баре отображаются кнопки:
        - маршрут
        - сохранить/удалить
        - расписание
        - открыть Яндекс.Электрички
        - кнопка такси с ценой поездки
    - do: Тап на кнопку такси
    - assert: Происходит переход в приложение Я.Go

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отображение кнопки "Такси" в action-баре миникарточки метро:
    - info: |
        iOS: Получен эксперимент stops_action_bar_with_taxi
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        ММП в городе с метро
    - do: Тап на пин станции метро
    - assert: |
        Отображается миникарточка метро
        В action-баре отображаются кнопки в следующем порядке:
        - Маршрут
        - Такси
        - Открыть Яндекс.Метро
        - Расписание
    - do: Свернуть и развернуть приложение
    - assert: Кнопка Такси отображается второй по счету в action-баре
    - do: Тап на кнопку Такси в action-баре
    - assert: |
        - Если Я.Go не установлено - происходит переход на страницу Google Play/AppStrore с приложением Я.Go
        - Если Я.Go установлено - происходит переход в приложение Я.Go
        - С экпериментом taxi_open_webview -> wen_view_always_open откроется вебвью такси в картах

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Отображение кнопки "Такси" в action-баре мини-карточки станции электропоездов:
    - info: |
        ММП от станции электропоездов должно быть не более 500 км
        IOS: Получен эксперимент stops_action_bar_with_taxi
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
    - do: Тап на пин станции электропоездов (напр., Тула-1-Курская, рядом с ул. Путейская, 4)
    - assert: |
        Отображается мини-карточка станции электропоездов
        В action-баре отображаются кнопки в следующем порядке:
        - Маршрут
        - Расписание
        - Такси
        - Сохранить
        - Открыть Яндекс.Электрички
    - do: Свернуть и развернуть приложение
    - assert: Кнопка Такси отображается третьей по счету в action-баре
    - do: Тап на кнопку Такси в action-баре
    - assert: |
        - Если Я.Go не установлено - происходит переход на страницу Google Play/AppStrore с приложением Я.Go
        - Если Я.Go установлено - происходит переход в приложение Я.Go
        - С экпериментом taxi_open_webview -> wen_view_always_open откроется вебвью такси в картах

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - advertisement
    - testing:
        - acceptance_maps


  Построение маршрута такси через карточку метро:
    - preconditions: |
        Приложение Я.Go установлено
        iOS: Включен эксперимент stops_action_bar_with_taxi
        Эксперимент taxi_open_webwiew = null
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыта миникарточка станции метро
        ММП не более чем 300 км от станции метро
        Устройство в вертикальной ориентации
    - do: Просвайпать влево карусель action-бара
    - assert: |
        В action-баре отображаются кнопки:
        - маршрут
        - открыть Яндекс.Метро
        - кнопка такси с ценой поездки
        - расписание
    - do: Свернуть и развернуть приложение
    - assert: |
        Отображается карточка метро
        Кнопки в action-баре по-прежнему отображаются
    - do: Тап на кнопку такси
    - assert: Происходит переход в приложение Я.Go
    - do: Удалить приложение Я.Go
    - assert: Отображается главный экран устройства
    - do: Вернуться в приложение
    - assert: Отображается миникарточка станции метро
    - do: Сменить ориентацию устройства
    - assert: |
         Отображается полная карточка метро
          В action-баре отображаются кнопки:
          - маршрут
          - открыть Яндекс.Метро
          - кнопка такси с ценой поездки
          - расписание
    - do: Тап на кнопку такси
    - assert: Происходит переход на страницу Google Play с приложением Я.Go

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
      - acceptance_maps


  Отображение кнопки "Такси от" в action-баре миникарточки:
    - info: |
        Активны эксперименты: (ios)org_action_bar_with_taxi, (ios)stops_action_bar_with_taxi
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыта миникарточка организации
    - do: Просвайпать влево карусель action-бара
    - assert: В action-баре отображается кнопка "Такси от" с ценой поездки
    - do: Свернуть и развернуть приложение
    - assert: Кнопка в action-баре по-прежнему отображается
    - do: Открыть миникарточку топонима
    - assert: В action-баре отображается кнопка "Такси от" с ценой поездки
    - do: Открыть миникарточку остановки
    - assert: В action-баре отображается кнопка "Такси от" с ценой поездки
    - do: Открыть миникарточку метро
    - assert: В action-баре отображается кнопка "Такси от" с ценой поездки
    - do: Открыть миникарточку ж/д станции
    - assert: В action-баре отображается кнопка "Такси от" с ценой поездки

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Кнопка такси в альтернативах маршрутов ОТ в карточке остановки:
    - info: |
        ММП пользователя рядом с остановкой (расстояние от ММП до остановки не больше 100 м.)
        Подменить ММП можно на Android через Mock Location, на iOS через Debug-Panel -> Routes -> Enter your route
    - do: Открыть карточку остановки
    - assert: |
        Отображается полная карточка остановки
        В альтернативах маршрутов ОТ присутствует кнопка такси
    - do: Закрыть карточку остановки
    - assert: |
        Карточка остановки закрыта
        Отображается главный экран приложения
    - do: Открыть карточку остановки, которая дальше 100 м. от ММП
    - assert: |
        Открыта карточка остановки
        В альтернативах маршрутов ОТ кнопка такси отсутствует
        Кнопка такси отображается в блоке ниже
    - do: Закрыть карточку остановки
    - assert: |
        Карточка остановки закрыта
        Отображается главный экран приложения
    - do: Запретить доступ к ММП в приложении в настройках устройства
    - assert: ММП не определено
    - do: Открыть карточку остановки
    - assert: |
        Открыта карточка остановки
        В альтернативах маршрутов ОТ кнопка такси отсутствует
        Кнопка такси отображается в блоке ниже

    - platforms:
        - android
        - ios
    - tags:
        - advertisement
        - assessors
    - testing:
        - acceptance_maps




##Скидки
  Скидка на Такси в карточке организации:
    - info: |
        Устройство в вертикальной ориентации
        Включен эксперимент taxi_prices_with_discount
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Отображается главный экран
        Если на аккаунте нет скидки, можно увидеть ее с помощью подмены в сниффере: подменить строки через Breakpoints в ручке https://geointernal.mob.maps.yandex.net->v1->taxi->orders->estimate
        Строки (их нужно подменить в json везде, где встречаются):
          - "display_amount": "1500 Rub",
          - "display_name": "cost_without_discount"
    - do: Открыть карточку организации
    - assert: |
        Открыта карточка организации
        В теле карточки отображается кнопка вызова такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Карточка отображается в горизонтальной ориентации
        (ios) В теле карточки отображается кнопка вызова такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
        (android) Кнопка вызова Такси в теле карточки отсутствует
        В action-баре отображается кнопка Такси с итоговой ценой
    - do: Закрыть карточку организации
    - assert: Отображается главный экран

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Скидка на Такси в карточке ОТ:
    - info: |
        Устройство в горизонтальной ориентации
        Включены эксперименты:
          - taxi_prices_with_discount
          - stops_full_card_with_taxi
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Отображается главный экран
        Если на аккаунте нет скидки, можно увидеть ее с помощью подмены в сниффере: подменить строки через Breakpoints в ручке https://geointernal.mob.maps.yandex.net->v1->taxi->orders->estimate
        Строки:
          - "display_amount": "1500 Rub",
          - "display_name": "cost_without_discount"
    - do: Тап на пин остановки общественного транспорта
    - assert: |
        Отображается карточка остановки в горизонтальной ориентации
        (ios) В теле карточки отображается кнопка вызова такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
        В action-баре отображается кнопка Такси с итоговой ценой
    - do: Сменить ориентацию устройства  на вертикальную
    - assert: |
        Отображается карточка остановки в вертикальной ориентации
        В экшен-кнопках отображается кнопка вызова такси со стоимостью
        В теле карточки отображается кнопка вызова такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
    - do: Закрыть карточку остановки общественного транспорта
    - assert: Отображается главный экран

    - platforms:
        - ios


  Скидка на Такси в карточке топонима:
    - info: |
        Включен эксперимент taxi_prices_with_discount
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Устройство в вертикальной ориентации
        Отображается главный экран
        Если на аккаунте нет скидки, можно увидеть ее с помощью подмены в сниффере: подменить строки через Breakpoints в ручке https://geointernal.mob.maps.yandex.net->v1->taxi->orders->estimate
        Строки:
          - "display_amount": "1500 Rub",
          - "display_name": "cost_without_discount"
    - do: Открыть карточку топонима
    - assert: |
        Отображается  карточка топонима
        В теле карточки отображается кнопка вызова такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Отображается карточка топонима в горизонтальной ориентации
        (ios) В теле карточки отображается кнопка вызова такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
        (android) Кнопка вызова Такси в теле карточки отсутствует
        В action-баре отображается кнопка Такси с итоговой ценой

    - platforms:
          - ios
          - android


  Скидка на Такси на экране выбора маршрута:
    - info: |
        Устройство в вертикальной ориентации
        Включены эксперименты:
          - taxi_prices_with_discount
          - (ios)stops_full_card_with_taxi
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Отображается главный экран
        Если на аккаунте нет скидки, можно увидеть ее с помощью подмены в сниффере через MapLocal в ручке https://geointernal.mob.maps.yandex.net->v1->taxi->orders->estimate
        ((https://jing.yandex-team.ru/files/elenaborz/discount.2a80711.json Файл для подмены))
        Открыт экран выбора маршрута
    - do: Тап на таб Все
    - assert: |
        Отображается экран выбора маршрута
        В альтернативных маршрутах отображается маршрут такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
    - do: Тап на таб Общественный транспорт
    - assert: |
        Отображается экран выбора маршрута
        В альтернативных маршрутах отображается маршрут такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
    - do: Тап на таб Такси
    - assert: |
        Отображается экран выбора маршрута
        В сниппете маршрута отображается маршрут такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Отображается экран выбора маршрута в горизонтальной ориентации
        В сниппете маршрута отображается маршрут такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки
    - do: Тап на таб пешего маршрута
    - assert: |
        Отображается экран выбора маршрута в горизонтальной ориентации
        В сниппете маршрута отображается  маршрут такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки (если маршрут больше 10мин.)
    - do: Тап на таб автомаршрута
    - assert: |
        Отображается экран выбора маршрута в горизонтальной ориентации
        В альтернативных маршрутах отображается маршрут такси, где присутствует:
          - стоимость поездки со скидкой
          - зачеркнутая стоимость поездки без скидки

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


##Саджесты и табы На такси

  Отображение таба Такси на главном экране:
    - info: |
        Включен эксперимент taxi_tab_on_main_screen
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Устройство в вертикальной ориентации
        Отображается главный экран приложения
    - do: Тап на таб Такси
    - assert: Отображается экран-заглушка
    - do: Свернуть/развернуть приложение
    - assert: Отображается экран-заглушка
    - do: Тап Назад
    - assert: |
        Отображается главный экран приложения
        Присутствует таб Такси
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается главный экран приложения
        Присутствует таб Такси
    - do: Тап на таб Такси
    - assert: Отображается экран-заглушка в горизонтальной ориентации

    - platforms:
        - ios
        - android


  Отображение одинакового времени "на такси" в маршрутах и табе:
    - info: |
        Последний построенный маршрут был на такси
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыта карточка организации на большом расстоянии от пользователя
        В карточке присутствует время доезда такси (под заголовком и рейтингом)
    - do: Тап "Маршрут"
    - assert: |
        Открывается экран построения маршрутов на табе Такси
        Время "на такси" совпадает с временем в карточке организации
    - do: Тап на таб "Все"
    - assert: |
        Открывается экран построения маршрутов на табе "Все"
        Время "на такси" совпадает с временем в карточке организации
    - do: Тап на таб "ОТ"
    - assert: |
        Открывается экран построения маршрутов на табе "ОТ"
        Время "на такси" совпадает с временем в карточке организации
    - do: Тап на таб "Пешеходный маршрут"
    - assert: |
        Открывается экран построения маршрутов на табе "Пешеходные маршруты"
        В альтернативных маршрутах присутствует такси
        Время "на такси" совпадает с временем в карточке организации

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Просмотр пуш-уведомления о статусе заказа такси:
    - info: |
        Я.Go установлен
        Пользователь авторизован в картах и Я.Go под тестовым аккаунтом:
        Логин - yndxmapstest@yandex.ru, пароль - testTest4453, телефон +7 966 185 4790
        Получен эксперимент taxi_open_webview -> web_view_always_open
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Построить произвольный маршрут на такси
        Для тестирования подбирайте такой маршрут, чтобы ожидание машины составляло около 5 минут или более
        Необходимо отменить заказ до того как машина приедет в начальную точку во избежание снятия средств
        Не привязывайте к тестовому аккаунту личную банковскую карту
    - do: Тап на Заказать
    - assert: |
        Отображается вебвью такси
        Идет поиск машины
        Приложение Я.Go не открылось
    - do: Дождаться когда машина будет найдена
    - assert: |
        В статус-баре отображается иконка Карт
        Не отображается пуш от Я.Go
    - do: Развернуть штору устройства для просмотра пуш-уведомления
    - assert: |
        Текст в пуш-уведомлении - "Через N минут приедет..."
        В пуше данные совпадают с информацией в вебвью
    - do: Тап на пуш-уведомление
    - assert: Открыто вебвью такси с текущим статусом заказа
    - do: Тап на Отменить
    - do: Подтвердить отмену заказа
    - assert: Заказ успешно отменен

    - platforms:
        - ios
        - android
    - tags:
        - advertisement


  Отображение кнопки такси в Action-баре до 500 км включительно от ММП:
    - info: |
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыт спан карты с ММП
    - do: Открыть карточку организации до 500 км от ММП
    - assert: |
        Отображается карточка организации с кнопкой такси в Action-баре
    - do: Закрыть карточку организации
    - assert: |
        Карточка организации закрыта
        Отображается главный экран приложения

    - platforms:
        - android
        - ios
    - tags:
        - advertisement
        - assessors


  Отображение кнопки такси в Action-баре свыше 500 км от ММП:
    - info: |
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Открыт спан карты с ММП
    - do: Открыть карточку организации свыше 500 км от ММП
    - assert: |
        Открыта карточка организации без кнопки такси в Action-баре
    - do: Закрыть карточку организации
    - assert: |
        Карточка организации закрыта
        Отображается главный экран приложения

    - platforms:
        - android
        - ios
    - tags:
        - advertisement
        - assessors

  Эксперимент с выпиливанием Такси:
    - info: |
        Получен эксперимент no_taxi_everywhere
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Пользователь авторизован
        В последний раз строился автомобильный маршрут
        Директ - Рекламные объявления директа в поисковой выдаче и в карточке организации
        Директ бывает 2 видов:
        Провязанный с организацией
        Непровязанный (в нем не будет кнопки "Добавить фото")
    - do: Открыть  меню
    - assert: Отсутствует пункт "Поддержка такси"
    - do: Закрыть  меню
    - do: Построить произвольный маршрут
    - assert: |
        Построен произвольный автомаршрут
        В табах отсутствует такси
        В альтернативных маршрутах нет варианта с такси
    - do: Тап на "Все"
    - assert: В списке отсутствует вариант с такси
    - do: Тап на "Пешеходный маршрут"
    - assert: |
        В списке вариантов маршрута нет такси
        В табах отсутствует такси
    - do: Тап на "Общественный транспорт"
    - assert: В списке вариантов маршрута нет такси
    - do: Закрыть экран построения маршрутов
    - do: Открыть карточку любой организации
    - assert: В экшн-баре, под блоком "Панорама" и в табе "Обзор" отсутствует кнопка вызова такси
    - do: Закрыть карточку организации
    - do: Открыть карточку любого топонима
    - assert: В экшн-баре и в табе "Обзор" отсутствует кнопка вызова такси
    - do: Закрыть карточку топонима
    - do: Открыть карточку любой остановки
    - assert: В экшн-баре и под блоком с маршрутами отсутствует кнопка вызова такси
    - do: Закрыть карточку остановки
    - do: Произвести поиск по запросу "Окна рехау"
    - do: Открыть карточку директа
    - assert: В экшн-баре и в табе "Обзор" отсутствует кнопка вызова такси
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Эксперимент с временем поездки на такси на линии маршрута:
    - info: |
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Отображается главный экран приложения
        Устройство в вертикальной ориентации
    - do: Построить маршрут любым способом
    - assert: Отображается экран вариантов маршрута
    - do: Выбрать вариант на такси (если не выбран)
    - assert: |
        На линии маршрута отображается время поездки
        Около кнопки вызова такси отображается примерное время ожидания

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отображение времени поездки такси в верхнем табе с экспериментом taxi_open_webview:
    - info: |
        Эксперимент taxi_time_in_tab_above -> вкл
        Эксперимент taxi_open_webview -> WEB_VIEW_IF_NO_GO
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
    - do: Лонгтап по карте
    - assert: |
        Отображается лонгтап-меню
        В верхней части меню отображаются кнопки "Сохранить", "Отсюда" и "Сюда"
    - do: Тап на "Сюда"
    - assert: |
        Вверху экрана отображается плашка выбора типа маршрута
        У таба "Такси" отображается время поездки
    - do: Открыть таб Такси
    - assert: |
        Отображается карточка с указанием времени в пути, с примерной минимальной стоимостью поездки и кнопкой Выбрать тариф
        У таба "Такси" отображается время поездки

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отображение cообщения об ошибке при построении маршрута на такси при большом расстроянии между точками А и Б:
    - info: |
        taxi_native_order_in_taxi_tab - if no go
        Включить эксперимент taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Маршрут такси был построен последним
        Ошибка отображается при далеком расположении точек А и Б друг от друга
    - do: Построить маршурт из Москвы во Владивосток
    - assert: |
        Отображается текст "Попробуйте выбрать другой транспорт или немного сдвинуть стартовую или конечную точки"
        Ниже кнопка "Изменить маршрут"
    - do: Построить маршурт из Санкт-Петербурга до Таиланда
    - assert: |
        Отображается текст "Попробуйте выбрать другой транспорт или немного сдвинуть стартовую или конечную точки"
        Ниже кнопка "Изменить маршрут"

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps


  Отображение cообщения об ошибке при построении маршрута на такси при большом расстроянии между точками А и Б (ненативное такси):
    - info: |
        taxi_native_order_in_taxi_tab - null
        Перезапустить приложение
        Маршрут такси был построен последним
        Ошибка отображается при далеком расположении точек А и Б друг от друга
    - do: Построить маршурт из Москвы во Владивосток
    - assert: |
        Отображается текст "Попробуйте выбрать другой транспорт или немного сдвинуть стартовую или конечную точки"
        Ниже кнопка "Изменить маршрут"
    - do: Тап на "Изменить маршрут"
    - assert: |
        Отображаются поля ввода для ввода данных "Откуда" и "Куда"
    - do: Изменить данные в полях "Откуда" и "Куда" на Санкт-Петербург и Таиланд
    - assert: |
        В полях "Откуда" и "Куда" отображаются указанные адреса
    - do: Тап на "Построить"
    - assert: |
        Отображается текст "Попробуйте выбрать другой транспорт или немного сдвинуть стартовую или конечную точки"
        Ниже кнопка "Изменить маршрут"

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отображение сниппета альтернативы такси в авто-табе:
    - preconditions: Маршрут на авто был построен последним
    - do: |
        (iOS) Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/сниппет.png){title=QR-код}

        `yandexmaps://add_exp?taxi_in_auto_route`
    - do: Перезапустить приложение
    - do: Произвольным способом построить автомаршрут короче 55 километров
    - assert: |
        Открыт экран построения маршрута
        Выбран тип автомаршрут
        В вариантах маршрута отображается сниппет такси
        Сниппет такси отображается третьим, если вариантов автомаршрута 2 и больше

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение сниппета альтернативы такси в пешем табе:
    - preconditions: Пеший маршрут был построен последним
    - do: Произвольным способом построить пеший маршрут со временем в пути больше 10 минут
    - assert: |
        Открыт экран выбора вариантов пешего маршрута
        Выбран тип пеший маршрут
        В вариантах маршрута отображается сниппет такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отображение минимальной стоимости Такси в карточке организации:
    - preconditions: |
        На устройстве установлено приложение Я.Go
        Пользователь авторизован в Я.Go
        МЯК и Я.Go выдан доступ к геопозиции
        Открыт главный экран приложения МЯК
    - do: |
        Выключить эксперименты taxi_native_order_in_taxi_tab и taxi_open_webview, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/price.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=null&taxi_open_webview=null`
    - do: Перезапустить МЯК
    - do: Тап на пин организации
    - assert: |
        Открыта мини-карточка организации
        В экшн-баре присутствует кнопка такси с ценой поездки
    - do: Тап на кнопку такси
    - assert: |
        Открывается приложение Я.Go
        Минимальная стоимость в Я.Go соответствует цене, указанной в экшн-кнопке Такси в МЯК

    - platforms:
        - android
        - ios


  Отображение минимальной стоимости Такси в карточке топонима:
    - preconditions: |
        На устройстве установлено приложение Я.Go
        Пользователь авторизован в Я.Go
        МЯК и Я.Go выдан доступ к геопозиции
        Открыт главный экран приложения МЯК
    - do: |
        Выключить эксперименты taxi_native_order_in_taxi_tab и taxi_open_webview, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/price.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=null&taxi_open_webview=null`
    - do: Перезапустить МЯК
    - do: Тап на пин топонима
    - assert: |
        Открыта мини-карточка топонима
        В экшн-баре присутствует кнопка такси с ценой поездки
    - do: Тап на кнопку такси
    - assert: |
        Открывается приложение Я.Go
        Минимальная стоимость в Я.Go соответствует цене, указанной в экшн-кнопке Такси в МЯК

    - platforms:
        - android
        - ios


  Отображение минимальной стоимости Такси на экране построения маршрута в России:
    - preconditions: |
        На устройстве установлено приложение Я.Go
        Пользователь авторизован в Я.Go
        МЯК и Я.Go выдан доступ к геопозиции
        Открыт главный экран приложения МЯК
    - do: |
        Выключить эксперименты taxi_native_order_in_taxi_tab и taxi_open_webview, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/price.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=null&taxi_open_webview=null`
    - do: Перезапустить МЯК
    - do: Построить маршрут между двумя точками в Москве любым способом
    - do: Выбрать таб Такси
    - assert: |
        Открыт экран выбора типа маршрута
        Выбран тип маршрута на такси
        В шторе внизу экрана отображается цена поездки на такси и кнопка "Выбрать тариф"
    - do: Тап на Выбрать тариф
    - assert: |
        Открывается приложение Я.Go
        Минимальная стоимость в Я.Go соответствует цене, указанной в шторе в МЯК

    - platforms:
        - android
        - ios


  Отображение минимальной стоимости Такси на экране построения маршрута в Армении:
    - preconditions: |
        На устройстве установлено приложение Я.Go
        Пользователь авторизован в Я.Go
        МЯК и Я.Go выдан доступ к геопозиции
        Открыт главный экран приложения МЯК
    - do: |
        Выключить эксперименты taxi_native_order_in_taxi_tab и taxi_open_webview, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/price.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=null&taxi_open_webview=null`
    - do: Перезапустить МЯК
    - do: Построить маршрут между двумя точками в Ереване (Армения) любым способом
    - do: Выбрать таб Такси
    - assert: |
        Открыт экран выбора типа маршрута
        Выбран тип маршрута на такси
        В шторе внизу экрана отображается цена поездки на такси и кнопка "Выбрать тариф"
    - do: Тап на Выбрать тариф
    - assert: |
        Открывается приложение Я.Go
        Минимальная стоимость в Я.Go соответствует цене, указанной в шторе в МЯК

    - platforms:
        - android
        - ios


  Текстовый баннер mastercard в сниппете маршрута на такси:
    - do: |
        Выключить эксперименты, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/мастер.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=null&mastercard_taxi_banner_description=text-text`
    - do: Перезапустить МЯК
    - do: Построить маршрут произвольным способом
    - do: Выбрать таб Такси
    - assert: |
        Открыт экран выбора типа маршрута
        Выбран тип маршрута на такси
        В шторе внизу экрана отображается:
        - информация о поездке на такси с кнопкой "Выбрать тариф"
        - баннер с логотипом mastercard, текстом text-text и кнопкой закрытия в виде крестика
    - do: Тап на текст в баннере
    - assert: Ничего не изменилось
    - do: Тап на крестик в баннере
    - assert: |
        Баннер не отображается
        Информация о поездке на такси с кнопкой "Выбрать тариф" продолжает отображаться
    - do: Перезапустить МЯК
    - do: Построить новый маршрут на такси
    - assert: |
        Баннер не отображается
        Информация о поездке на такси с кнопкой "Выбрать тариф" отображается

    - platforms:
        - ios


  Добавление суффикса к параметру ref в ссылках такси:
    - preconditions: |
        ТК проходиться на дев-сборке
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
    - do: |
        Включить эксперименты, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/ref11.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=null&taxi_open_webview=web_view_always_open&taxi_ref_suffix=11`
    - do: Перезапустить МЯК
    - do: Построить маршрут на такси любым способом
    - do: Тап на Выбрать тариф
    - do: В сниффере [произвести](https://jing.yandex-team.ru/files/tdon/Screenshot%20at%20Jul%2013%2016-03-47.png) поиск параметра ref по всем ссылкам такси (cmd+F, прописываем параметры поиска, тап на Find)
    - assert: В сниффере во всех ссылка такси к параметру ref добавлен [суффикс](https://jing.yandex-team.ru/files/tdon/Screenshot%20at%20Jul%2013%2016-07-36.png) 11
    - do: Очистить историю текущей сессии в сниффере
    - do: Открыть главный экран МЯК
    - do: Выключить эксперимент `taxi_ref_suffix` (`Меню>Настройки>Дебаг-панель>Experiments`)
    - do: Перезапустить МЯК
    - do: Построить маршрут на такси любым способом
    - do: Тап на Выбрать тариф
    - do: В сниффере прооизвести поиск параметра ref по всем ссылкам такси
    - assert: В сниффере во всех ссылка такси к параметру [ref](https://jing.yandex-team.ru/files/tdon/Screenshot%20at%20Jul%2013%2016-24-55.png) суффикс не добавлен

    - platforms:
        - ios
        - android