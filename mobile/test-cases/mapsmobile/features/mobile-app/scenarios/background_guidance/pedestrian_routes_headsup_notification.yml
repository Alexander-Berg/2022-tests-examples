components: pedestrian_routes_headsup_notification
testing:
  - regress
platforms:
  - android
tags:
  - assessors

specs:

  Отображение пешеходной heads-up нотификации в фоне:
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: |
        Включено фоновое ведение (Меню - Настройки -> Маршрут -> Фоновое ведение)
        Отображается экран пешеходного ведения по маршруту
        В маршруте присутствует несколько маневров
    - do: |
        В ведении должна происходить симуляция движения:
        Меню > Настройки > Debug-panel > Routes > Demo movement
    - do: Свернуть приложение
    - assert: |
        Появляется всплывающее уведомление навигации, где указано:
        - Расстояние до следующего маневра
        - Стрелка маневра (поворот направо, поворот налево, разворот)
        Аннотации о маневрах озвучиваются в фоне

    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready


  Тап по heads-up нотификации:
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: Меню - Настройки - Маршруты - Фоновое ведение - Вкл
    - do: |
        Включить симуляцию движения:
        Меню > Настройки > Debug-panel > Routes > Demo movement
    - do: |
        Построить пеший маршрут с маневрами и подтвердить его 
        Свернуть приложение
    - assert: |
        Приложение в фоне
        Присутствуют голосовые аннотации и нотификации по маршруту
    - do: Тап по появившейся нотификации
    - assert: Открывается приложение

    - testing:
        - acceptance_maps