components: setting_background
testing:
  - regress
  - acceptance_maps
tags:
  - assessors

specs:
  Фоновое ведение. Настройка:
    - do: |
        Открыт экран Меню - Настройки - Маршруты
        Опция 'Фоновое ведение' по умолчанию включена
    - do: Тап на чекбокс Фоновое ведение
    - assert: Опция Фоновое ведение выключена
    - do: Открыть главный экран
    - assert: Открыт главный экран приложения
    - do: Перейти Меню - Настройки - Маршруты
    - assert: |
        Открыт экран Настройки - Маршруты
        Опция Фоновое ведение выключена
    - do: Перезапустить приложение
    - do: Перейти в Меню - Настройки - Маршруты
    - assert: |
        Открыт экран Настройки - Маршруты
        Опция 'Фоновое ведение' выключена
    - do: Тап на чекбокс 'Фоновое ведение'
    - assert: Опция 'Фоновое ведение' включена

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - newbie
    - testing:
        - lite_acceptance_maps

        
  Отсутсвие подсказок в фоновом режиме и фонового ведения при отключении в системных настройках во Фридрайве:
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> off
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: Меню - Настройки - Маршруты - Фоновое ведение  - Вкл
    - do: |
        Отображается экран ведения по автомаршруту
        Включить симуляцию движения: через Mock location
    - do: |
        Перейти в режим Навигатор, тапом по кнопке в таббаре
        Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости не появляются
    - do: Развернуть системную шторку свайном вниз
    - assert: В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости

    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready


  Отсутсвие фонового ведения при отключении в системных настройках во Фридрайве:
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: Меню - Настройки - Маршруты - Фоновое ведение  - Вкл
    - do: |
        Включить симуляцию движения: через Mock location
    - do: |
        Перейти в режим Навигатор, тапом по кнопке в таббаре
        Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости не появляются
    - do: Развернуть системную шторку свайном вниз
    - assert: В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости

    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready


  Отсутсвие подсказок в фоновом режиме при отключении в системных настройках (freedrive):
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> off 
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: Меню - Настройки - Маршруты - Фоновое ведение  - Вкл
    - do: |
        Включить симуляцию движения: через Mock location
    - do: |
        Перейти в режим Навигатор, тапом по кнопке в таббаре
        Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости не появляются
    - do: Развернуть системную шторку свайном вниз
    - assert: В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости

    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready


  Отсутсвие подсказок в фоновом режиме и фонового ведения при отключении в системных настройках:
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> off
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: Меню - Настройки - Маршруты - Фоновое ведение  - Вкл
    - do: |
        Включить симуляцию движения:
        Debug-panel > Routes > Demo movement
    - do: |
        Построить автомаршрут с маневрами
        Подтвердить маршрут
    - assert: Открыт экран ведения по маршруту
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости не появляются
    - do: Развернуть системную шторку свайном вниз
    - assert: В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости

    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready


  Отсутсвие фонового ведения при отключении в системных настройках:
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: Меню - Настройки - Маршруты - Фоновое ведение  - Вкл
    - do: |
        Включить симуляцию движения:
        Debug-panel > Routes > Demo movement
    - do: |
        Построить автомаршрут с маневрами
        Подтвердить маршрут
    - assert: Открыт экран ведения по маршруту
    - do: Свернуть приложение
    - assert: |
        Фоновое ведение отсутствует
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости не появляются
    - do: Развернуть системную шторку свайпом вниз
    - assert: В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости

    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready


  Отсутсвие подсказок в фоновом режиме при отключении в системных настройках:
    - do: |
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Подсказки в фоновом режиме -> off 
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Фоновое ведение -> on
        Системные настройки телефона -> Приложения -> Яндекс.карты -> Уведомления -> Уведомления на экране блокировки -> On
    - do: Меню - Настройки - Маршруты - Фоновое ведение  - Вкл
    - do: |
        Отображается экран ведения по автомаршруту
        Включить симуляцию движения:
        Debug-panel > Routes > Demo movement
    - do: |
        Построить автомаршрут с маневрами
        Подтвердить маршрут
    - assert: Открыт экран ведения по маршруту
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости не появляются
        В системной шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости

    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready