components: caches
testing:
  - regress
tags:
  - assessors

specs:
  Загрузка кэша из поиска:
    - info: |
        Выключен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Тап на строку поиска
    - assert: |
        Поле ввода в фокусе, мигает курсор
        Отображается плейсхолдер N городов (iOS)
        Вверху отображается горизонтальный список стран
        Выбранная страна выделена
        Снизу подгрузился список карт для страны:
        - Отображается размер в Мб для каждого кэша
        - Присутствует кнопка загрузки
        В загруженных картах кнопка загрузки отсутствует
        Отображается клавиатура
    - do: Тап на любую страну
    - assert: |
        Название выбранной страны выделено
        Отображается список доступных карт для выбранной страны и размер в Мб
        Для загруженных карт не отображается кнопка загрузки
        Отображаются табы с названием стран
        В каждой стране доступен список карт для загрузки
    - do: Сделать свайп вверх/вниз
    - assert: |
        Список карт для отдельной страны пролистывается
        При наличии в списке всего одного города, список не пролистывается
    - do: Ввести одну букву
    - assert: |
        Список стран пропадает
        Саджесты обновляются, согласно введённой букве
    - do: Тап по одной из найденных карт
    - assert: |
        Началась загрузка карты
        Отображается колесо загрузки
        Карты других городов не исчезают
    - do: Дождаться завершения загрузки
    - do: Тап на Отменить
    - assert: |
        Поиск закрылся
        Отображается экран Офлайн-карты
        В блоке Загруженные отображается скачанный ранее кэш

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - tags:
        - mapkit_ready
        - assessors


  Включение скачивания кэшей только по Wi-Fi:
    - info: |
        Мобильный интернет включен, Wi-Fi выключен
        кэш текущего региона не скачан
        Настройка "Загрузка только по Wi-Fi" включена (Меню -> Загрузка карт-> Шестеренка)
        Отображается экран Меню -> Загрузка карт
    - do: Тап на значок скачивания карты
    - assert: |
        Отображается поп-ап: загрузка через сотовую сеть запрещена с предложением разрешить загрузку без подключениями к Wi-Fi
        В поп-апе две кнопки Отменить и Разрешить \ Загрузить
    - do: Тап на Отменить
    - assert: Карта не скачивается

    - platfroms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Удаление скачанного кэша (iOS):
    - info: |
        Выключен эксперимент vmap3_enabled
        Скачан кэш текущего региона
        Отображается экран Меню -> Загрузка карт-> Офлайн-карты
    - do: Тап на Изменить
    - assert: |
        Слева от кэша отображается кнопка удаления
        Кнопка Изменить меняется на Готово
        Кнопка Готово активна
    - do: Тап по кнопке удаления
    - assert: |
        Строка с кэшем сдвигается влево
        Справа от кэша появляется кнопка Удалить
    - do: Тап на Удалить
    - assert: Кэш удален
    - do: Тап Назад
    - assert: Отображается меню
    - do: Тап на Загрузка карт
    - assert: Удаленный раннее кэш отсутствует

    - platfroms:
        - ios
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Удаление скачанного кэша (Android):
    - info: |
        Выключен эксперимент vmap3_enabled
        Скачан кэш текущего региона
        Отображается экран Меню -> Загрузка карт -> Офлайн-карты
    - do: Тап на три точки
    - assert: |
        Отображается штора с названием города с кнопкой Удалить
    - do: Тап на затемненную область экрана
    - assert: |
        Кэш не удален
        Отображается экран Офлайн-карт
    - do: Тап на три точки
    - assert: |
        Отображается штора с названием города и кнопкой Удалить
    - do: Тап на Удалить
    - assert: |
        Отображается экран Офлайн-карты
        Кэш удален
        Отображаются другие скачанные карты, если имеются
    - do: Закрыть экран Офлайн-карты
    - assert: Отображается меню
    - do: Тап на Загрузка карт
    - assert: Удаленный раннее кэш отсутствует

    - platforms:
        - android
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Работоспособность приложения в офлайн-режиме, если статус кэшей Outdated:
    - info: |
        Выключен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        В настройках приложения выключено автообновление кэшей:
        - Android: Меню -> Загрузка карт -> Настройки
        - iOS: Меню -> Настройки -> Офлайн-карты
        В Debug Panel -> Various 1 раз тап по simulate caches update
        Включен авиарежим
        Отображается главный экран приложения
    - do: Тап по строке поиска
    - assert: Отображается экран поиска
    - do: Тап по одной из категорий
    - assert: |
        Отображаются результаты поиска в офлайне
        Отображается иконка офлайн маршрутизации
    - do: Закрыть поиск
    - assert: Отображается главный экран приложения
    - do: Тап на таб Маршрут
    - assert: Открылся экран Маршрут
    - do: Ввести произвольный адрес в поле Куда
    - assert: |
        Открыт экран выбора вариантов маршрута
        В офлайн режиме отображается данные только для автомобильного типа маршрута
    - do: Тап на Поехали
    - assert: |
        Отображается экран ведения в офлайне
        На карте отображается линия маршрута и текущее местоположение
    - do: Завершить маршрут
    - assert: Открывается главный экран приложения

    - platfroms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Работоспособность приложения в офлайн-режиме, если статус кэшей Need update:
    - info: |
        Выключен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        Выключено автообновление кэшей
        В Debug Panel -> Various пять раз тап по Simulate caches update
        Включен авиарежим
        Отображается главный экран приложения
    - do: Тап по строке поиска
    - assert: Отображается экран поиска
    - do: Тап по одной из категорий
    - assert: |
        Отображаются результаты поиска в офлайне
        Отображается иконка офлайн маршрутизации
    - do: Закрыть поиск
    - assert: Отображается главный экран приложения
    - do: Тап на таб Маршрут
    - assert: Открылся экран Маршрут
    - do: Ввести произвольный адрес в поле Куда
    - assert: |
        Открыт экран выбора вариантов маршрута
        В офлайн режиме отображается данные только для автомобильного типа маршрута
    - do: Тап на Поехали
    - assert: |
        Отображается экран ведения в офлайне
        На карте отображается линия маршрута и текущее местоположение
    - do: Завершить маршрут
    - assert: Открывается главный экран приложения

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие кнопки обновить у кешей в состоянии Outdated:
    - info: |
        Выключен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        В настройках приложения выключено автообновление кэшей:
        - Android: Меню -> Загрузка карт -> Настройки
        - iOS: Меню -> Настройки -> Офлайн-карты
        Отображается главный экран приложения
    - do: Симулировать необходимость обновления кэшей в Debug Panel -> Various -> 1 раз тап по simulate caches update
    - do: Вернуться в меню
    - do: Тап Загрузка карт
    - assert: |
        Отображается список загруженных кэшей
        Кэши не скачиваются автоматически
        Кнопка Обновить не отображается

    - platfroms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Отображение экрана Офлайн-карты (Android):
    - info: |
        Открыт главный экран приложения
        Доступ к ММП разрешен
    - do: Тап на кнопку Меню
    - assert: |
        Отображается экран меню
        В меню присутствует кнопка Загрузка карт
    - do: Тап Загрузка карт
    - assert: |
        Отображается экран Офлайн карты
        Присутствуют кнопки настройки и закрытия экрана
        Ниже отображается поисковая строка
        В секции Рядом с вами отображается карта, содержащая ММП:
        - Указаны: название карты, размер, кнопка Загрузки
        Загруженные карты отображаются в секции Загруженные:
        - Указаны: название, размер
        - Отображается меню в виде трех точек

    - platforms:
        - android
    - tags:
        - assessors


  Отображение экрана Офлайн-карты (iOS):
    - info: |
        Открыт главный экран приложения
        Доступ к ММП разрешен
    - do: Тап на Меню
    - assert: |
        Открылось меню приложения
        В меню присутствует кнопка Загрузка карт
    - do: Тап Загрузка карт
    - assert: |
        Отображается экран Офлайн-карты
        Присутствуют кнопки Назад и Изменить
        Ниже строка поиска с лупой и плейсхолдер с количеством доступных городов
        Карты содержащие мое местоположение отображаются в секции Рядом с вами:
        - Указаны: название карты и размер
        - Рядом есть кнопка загрузки со стрелочкой вниз
        Загруженные карты отображаются в секции Загруженные
        - Указаны: название карты и её размер,
        - Справа от названия загруженной карты есть кнопка, открывающая данную карту

    - platforms:
        - ios
    - tags:
        - assessors


  Загрузка кэша из блока Рядом с вами:
    - info: |
        Выключен эксперимент vmap3_enabled
        Отображается главный экран приложения
        ММП определено
        Кэши текущего региона не скачаны
    - do: Тап Меню
    - assert: Отображается меню приложения
    - do: Тап на Загрузка карт
    - assert: |
        Отображается экран Офлайн-карты
        В блоке Рядом с вами отображается кэш текущего региона
    - do: Тап на кэш в блоке Рядом с вами
    - assert: Началась загрузка кэша
    - do: Дождаться окончания загрузки
    - assert: |
        Кэш текущего региона скачан
        Скачанный кэш отображается в блоке Загруженные
        Блок Рядом с вами не отображается

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Отображение пункта меню Папка с картами:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        Необходим девайс с подключенной картой памяти (SD-карта)
        Открыт экран карты
    - do: Открыть экран Офлайн-карты в настройках
    - assert: |
        На экране отображается строка Папка хранения,
        По умолчанию выбран вариант Память устройства,
        Для девайсов без слота для карты памяти или при отсутствии карты памяти в девайсе строка Папка хранения не отображается

    - platforms:
        - android
    - tags:
        - assessors
        - sd_card


  Отображение пункта настроек "Где хранить карты":
    - info: |
        Необходим девайс с подключенной картой памяти (SD-карта)
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Тап Меню -> Настройки
    - assert: |
        Открыт экран Настроек
        Присутствует пункт настроек "Где хранить карты"

    - platforms:
        - android
    - tags:
        - assessors
        - sd_card
        - new_settings


  Выбор памяти устройства в качестве дефолтного места хранения кэша на экране Настройки:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Отображается меню приложения
        В качестве хранилища выбрана SD-карта (Меню -> Загрузка карт -> Тап на кнопку настроек -> Папка хранения)
    - do: Тап на кнопку Загрузка карт
    - assert: Отображается экран Офлайн-карты
    - do: Тап на кнопку настроек
    - assert: |
        Отображается поп-ап Настройки с пунктами:
        - Папка хранения
        - Автообновление
        - Загрузка только по Wi-Fi
        - Удалить загруженные карты
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        Указан вариант Карта памяти
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Память устройства
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Память устройства установлена в качестве хранилища
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        Указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Закрыть поп-ап
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Память устройства установлена в качестве хранилища
    - do: Скачать любой кэш (Меню -> Загрузка карт)
    - do: Проверить что кэш скачан на память устройства (cкачанные файлы можно найти через проводник устройства)
    - assert: |
        Скачанные карты размещены на памяти устройства в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Новые настройки. Выбор памяти устройства в качестве дефолтного места хранения кэша:
    - info: В девайс установлена карта памяти (SD-карта)
    - do: Выключить эксперимент `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Тап Меню -> Настройки
    - assert: |
        Открыт экран Настроек
        Присутствует пункт настроек "Где хранить карты"
    - do: Тап "Где хранить карты"
    - assert: |
        Отображается диалог про хранение офлайн карт
        Открылся поп-ап "Где хранить карты"
        Предлагается 2 варианта: "На устройстве" и "На карте памяти"
        Под каждым вариантом указано количество свободного места
        Выбранный вариант отмечен галочкой
    - do: Выбрать "На устройстве"
    - assert: |
        Поп-ап "Где хранить карты" закрылся
        Отображается экран Настроек
    - do: Скачать любой кэш (Меню -> Загрузка карт)
    - do: Проверить что кэш скачан на память устройства (cкачанные файлы можно найти через проводник устройства)
    - assert: |
        Скачанные карты размещены на памяти устройства в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card
        - new_settings


  Выбор карты памяти в качестве дефолтного места хранения кэша на экране Настройки:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Отображается меню приложения
    - do: Тап на кнопку Загрузка карт
    - assert: Отображается экран Офлайн-карты
    - do: Тап на кнопку настроек
    - assert: |
        Отображается поп-ап Настройки с пунктами:
        - Папка хранения
        - Автообновление
        - Загрузка только по Wi-Fi
        - Удалить загруженные карты
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Карта памяти
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Карта памяти установлена в качестве хранилища
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        Указан вариант Карта памяти
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Закрыть поп-ап Куда сохранять карты?
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Карта памяти установлена в качестве хранилища
    - do: Скачать любой кэш (Меню -> Загрузка карт)
    - do: Проверить что кэш скачан на память устройства (cкачанные файлы можно найти через проводник устройства)
    - assert: |
        Скачанные карты размещены на карте памяти в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Новые настройки. Выбор карты памяти в качестве дефолтного места хранения кэша:
    - info: В девайс установлена карта памяти (SD-карта)
    - do: Выключить эксперимент `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Тап Меню -> Настройки
    - assert: |
        Открыт экран Настроек
        Присутствует пункт настроек "Где хранить карты"
    - do: Тап "Где хранить карты"
    - assert: |
        Отображается диалог про хранение офлайн карт
        Открылся поп-ап "Где хранить карты"
        Предлагается 2 варианта: "На устройстве" и "На карте памяти"
        Под каждым вариантом указано количество свободного места
        Выбранный вариант отмечен галочкой
    - do: Выбрать "На карте памяти"
    - assert: |
        Поп-ап "Где хранить карты" закрылся
        Отображается экран Настроек
    - do: Скачать любой кэш (Меню -> Загрузка карт)
    - do: Проверить что кэш скачан на память устройства (cкачанные файлы можно найти через проводник устройства)
    - assert: |
        Скачанные карты размещены на карте памяти в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card
        - new_settings


  Выбор памяти устройства в качестве дефолтного места хранения кэша из алерта с предложением скачать карту ближайшего региона:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        ММП определено
        В нижней части экрана отображается алерт с предложением скачать карту ближайшего региона
        Алерт отображается на второй запуск приложения
    - do: Тап Загрузить
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Закрыть поп-ап
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Память устройства назначается дефолтным хранилищем
        Начитается загрузка кэша на память устройства

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор карты памяти в качестве дефолтного места хранения кэша из алерта с предложением скачать карту ближайшего региона:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        ММП определено
        В нижней части экрана отображается алерт с предложением скачать карту ближайшего региона
        Алерт отображается на второй запуск приложения
    - do: Тап Загрузить
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Тап на Карта памяти
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        В качестве хранилища назначана карта памяти
        Начитается загрузка кэша на карту памяти

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор памяти устройства в качестве дефолтного места хранения кэша на экране Офлайн-карты:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        Отображается экран Меню -> Загрузка карт-> Офлайн-карты
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Память устройства
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Начитается загрузка кэша на память устройства
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Поп-ап Куда сохранять карты? не отображается
        Начитается загрузка кэша

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор карты памяти в качестве дефолтного места хранения кэша на экране Офлайн-карты:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        Отображается экран Меню -> Загрузка карт-> Офлайн-карты
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Карта памяти
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Начитается загрузка кэша на карту памяти
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Поп-ап Куда сохранять карты? не отображается
        Начитается загрузка кэша

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Наличие кэшей городов и регионов на tr_tr:
    - info: |
        Выключен эксперимент vmap3_enabled
        Локаль устройства tr_TR
        Отображается экран Haritaları indir (Тап меню -> Çevrimdışı haritalar)
    - do: Тап на строку поиска
    - assert: |
        Отображается горизонтальный список стран
        На турецкий переведены только турецкие города и регионы
        Остальные отображаются на анлийском
    - do: Выбрать любую страну
    - assert: |
        Размер загружаемого региона обозначается на том языке, который ранее был выставлен ранее
        На турецком - МВ

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - testing:
        - acceptance_maps


  Включение и выключении настройки автообновления кэшей:
    - info: |
        Отображается экран Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек (Android)
        Отображается экран Меню -> Настройки -> Офлайн-карты (iOS)
    - assert: Опция Автообновление по умолчанию выключена
    - do: Тап на свитчер в строке Автообновление
    - assert:
        Автообновление включено
        Изменилось положение свитчера и цвет
    - do: Тап на свитчер в строке Автообновление
    - assert:
        Автообновление выключено
        Изменилось положение свитчера и цвет

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Скачивание кэша при выключенной опции Загрузка только по Wi-Fi:
    - info: |
        Выключен эксперимент vmap3_enabled
        Имеется доступ к мобильному интернету и сети Wi-Fi
        Включены Wi-Fi и мобильный интернет
        В настройках выключена опция Загрузка только по Wi-Fi:
        (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
        Местоположение определено
        Кэши областей не загружены
        Отображается меню приложения
    - do: Тап на Загрузка карт
    - do: Тап по городу/области в блоке Рядом с вами
    - assert: Начинается скачивание кэша
    - do: Выключить Wi-Fi
    - do: Начать загрузку любого кэша
    - assert: Начинается скачивание кэша
    - do: Включить Wi-Fi
    - do: Выключить мобильный интернет
    - do: Начать загрузку любого кэша
    - assert: Начинается скачивание кэша
    - do: Выключить Wi-Fi
    - do: Выключить мобильный интернет
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение в нижней части экрана о том, что сеть отсутствует и загрузка начнётся автоматически после подключения к сети
        Сообщение пропадает через несколько секунд
    - do: Включить Wi-Fi и/или мобильный интернет
    - assert: Скачивание кэша стартует автоматически

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Скачивание кэша при включенной опции Загрузка только по Wi-Fi:
    - info: |
        Выключен эксперимент vmap3_enabled
        Имеется доступ к мобильному интернету и сети Wi-Fi
        Включены Wi-Fi и мобильный интернет
        В настройках Офлайн карт включена опция Загрузка только по Wi-Fi:
        (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
        Отображается экран Офлайн-карты
    - do: Начать скачивание любого кэша
    - assert: Начинается загрузка кэша
    - do: Дождаться заполнения прогресса скачивания кэша примерно на 1/5
    - do: |
        Выключить Wi-Fi на устройстве
        Подождать около минуты
    - assert: Загрузка кэша не продолжается
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение о том, что запрещена загрузка карт по мобильным данным
        Предлагается разрешить загрузку карт без Wi-Fi
        Отображаются кнопки согласия и отмены
    - do: Тап на кнопку отмены
    - assert: Загрузка кэша не началась
    - do: Выключить мобильный интернет
    - do: Включить Wi-Fi
    - assert: |
        Wi-Fi соединение восстановлено
        Загрузка кэша продолжается
    - do: Дождаться завершения загрузки
    - assert: Кэш успешно скачивается
    - do: Выключить Wi-Fi
    - do: Включить мобильный интернет
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение о том, что запрещена загрузка карт по мобильным данным
        Предлагается разрешить загрузку карт без Wi-Fi
        Отображаются кнопки согласия и отмены
    - do: Тап на кнопку согласия
    - assert: |
        Начинается загрузка кэша
        Кэш успешно загрузился
    - do: Выключить мобильный интернет и Wi-Fi
    - assert: Интернет соединение отсутсвует
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение в нижней части экрана о том, что сеть отсутствует и загрузка начнётся автоматически после подключения к сети
        Сообщение пропадает через несколько секунд
        Сообщение показывается лишь 1 раз
    - do: Включить мобильный интернет
    - assert: Cкачивание кэша стартует автоматически

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Перенос скачанных карт на карту памяти:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Скачанные файлы можно найти через проводник устройства:
        Открыть Проводник/Мои файлы -> Выбрать тип памяти (внутренняя или sd)
    - do: Скачать несколько кэшей на внутреннюю память устройства
    - assert: |
        Кэши успешно скачаны
        Кэши отображаются на экране Офлайн-карты
    - do: |
        В настройках Офлайн-карт выбрать Карта памяти в папке хранения:
        Меню -> Загрузка карта -> тап на кнопку настроек -> Папка хранения - Карта памяти
    - assert: |
        Карты перемещаются на карту памяти
        Скачанные карты отображаются в приложении
        Скачанные карты размещены на SD карте в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Извлечение SD карты из девайса:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled`(Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        SD-карта установлена в качестве места хранения кэшей (Меню -> Загрузка карт -> тап на кнопку Настроек -> Папка хранения -> Карта памяти)
        Скачанные файлы можно найти через проводник устройства:
        Открыть Проводник/Мои файлы -> Выбрать тип памяти (внутренняя или sd)
        Скачанные кэши размещены на SD карте в папке Files внутри папки приложения:
        - (Устройство\\Card\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Card\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
    - do: Загрузить любой кэш
    - assert: Кэш скачан
    - do: Проверить, что скачанный кэш размещен SD-карте
    - do: Изъять из девайса sd-карту
    - do: Запустить приложение
    - assert: Отображается главный экран приложения
    - do: Тап меню
    - assert: Отображается меню приложения
    - do: Тап на Загрузка карт
    - assert: |
        Отображается экран Офлайн-карты
        Скачанные кэши пропали
        Они снова доступны для скачивания на внутренню память устройства по умолчанию

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Transition Yandex Maps to SD card:
    - info: Необходим девайс с подключенной картой памяти (SD-карта)
    - do: Установить приложение
    - assert:  Приложение установлено
    - do: Зайти в настройки девайса в раздел Приложения / Управление приложениями и выбрать Яндекс.Карты
    - assert: Отображается экран О приложении для Яндекс.Карт в настройках телефона
    - do: Убедиться, что нет возможности переноса приложения на SD-карту девайса
    - assert: Кнопка для переноса приложения на SD-карту задизейблена

    - platforms:
        - android
    - tags:
        - sd_card


  Поиск карты для скачивания, добавление города:
    - info: Отображается экран Меню -> Загрузка карт-> Офлайн-карты
    - do: Тап на строку поиска
    - do: Ввести один (или более) символов
    - assert: |
        Если символ соответствует локали:
        - Отображается список саджестов (список найденных карт)
        Если символ не соответствует текущей локали или карт не найдено:
        - Отображается сообщение об отправке запроса на добавление города
        - Отображается кнопка отправки запроса
    - do: Тап по найденной карте
    - assert: |
        Началась загрузка карты
        Отображается колесо загрузки
    - do: Тап на строку поиска
    - do: Ввести рандомный набор символов
    - assert: |
        Отображается сообщение об отправке запроса на добавление города
        Отображается кнопка отправки запроса
    - do: Тап на кнопку отправки запроса
    - assert: |
        Android:
        - Отображается сообщение "Запрос отправлен"
        iOS:
        - Отображается экран Добавить карту с сообщением "Напишите нам, какой город вы хотите добавить"
        - Отображается поле ввода с веденным ранее набором символов
        - В поле ввода присутствует крестик для очистки
    - do: (iOS) Тап на Отправить
    - assert: (iOS) Запрос отправлен

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Ранжирование при поиске по регионам:
    - info: Открыт главный экран приложения
    - do: Тап по кнопке Меню
    - assert: Открыт экран Меню
    - do: Тап по Загрузка карт
    - assert: |
        Переход к экрану загрузки карт,
        В списке Рядом с вами отображается ближайший регион, если карта с ММП не загружена
    - do: Тап по строке поиска
    - assert: |
        В строке поиска отображается общее кол-во карт городов, которые можно загрузить,
        На экране отображается список городов которые можно загрузить,
        Под строкой поиска отображается строка с названиями стран
    - do: Ввести в строку поиска Омск при выбранной стране Россия
    - assert: |
        Логика ранжирования должна быть такой (в порядке уменьшения приоритета):
        1. Полное вхождение запроса в название региона
        2. Полное вхождение запроса в название одного из входящих в регион городов
        3. Вхождение запроса в начале названия региона
        4. Вхождение запроса в начале названия одного из входящих в регион городов
        5. Вхождения запроса в середине названий регионов
        6. Вхождения запроса в середине названия одного из входящих в регион городов

    - platforms:
        - ios
        - android


  Удаление кэша через Настройки на экране Офлайн-карт, если кэши скачаны:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        Скачано несколько кэшей (Меню -> Загрузка карт)
        Отображается экран:
        (Android) Меню -> Загрузка карт -> тап на нопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап на кнопку отмены
    - assert: Загруженные кэши не удалены
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап по кнопке удаления
    - assert: |
        (iOS) Кнопка Удалить загруженные карты становится неактивной
        (Android) Кнопка Удалить загруженные карты пропала

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Удаление кэша через новые Настройки, если кэши скачаны:
    - do: Выключить эксперимент `vmap3_enabled` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Скачать несколько кэшей (Меню -> Загрузка карт)
    - assert: Кэши скачанны
    - do: Открыть Меню -> Настройки
    - assert: |
        Открыт экран настроек
        Присутствует кнопка "Удалить офлайн-карты"
        Напротив кнопки отображается размер скаченных офлайн карт
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап на кнопку отмены(iOS) / Тап по экрану вне алерта(Android)
    - assert: Загруженные кэши не удалены
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап по кнопке удаления
    - assert: |
        Сообщение с текстом об удалении загруженных карт скрылось
        Отображается кнопка "Удалить офлайн-карты"
        Напротив кнопки не отображается размер скаченных офлайн карт


    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - new_settings


  Удаление кэша через Настройки на экране Офлайн-карт без скачивания кэшей:
    - info: |
        Выключить эксперименты `new_maps_settings` и `vmap3_enabled` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        Кэши не скачаны (Меню -> Загрузка карт)
        Прокрутить спан карты для загрузки данных
        Открыт экран Офлайн карты ((Android) Меню -> Загрузка карт -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты)
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап на кнопку отмены
    - assert: Загруженные кэши не удалены
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап по кнопке удаления
    - do: Подождать 10 - 40 секунд
    - assert: |
        (iOS) Кнопка Удалить загруженные карты становится неактивной
        (Android) Кнопка Удалить загруженные карты пропала

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Удаление кэша через новые Настройки без скачивания кэшей:
    - info: Кэши не скачаны (Меню -> Загрузка карт)
    - do: Выключить эксперимент `vmap3_enabled` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Прокрутить спан карты для загрузки данных
    - do: Открыть Меню -> Настройки
    - assert: |
        Открыт экран настроек
        Присутствует кнопка "Удалить офлайн-карты"
        Напротив кнопки отображается размер закешированных офлайн карт, если размер больше 1 MB
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап по кнопке удаления
    - assert: |
        Сообщение с текстом об удалении загруженных карт скрылось
        Отображается кнопка "Удалить офлайн-карты"
        Напротив кнопки не отображается размер скаченных офлайн карт
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - new_settings


  Обновление кэшей карт при включенном автообновлении:
    - info: |
        Выключен эксперимент vmap3_enabled
        При включенном автообновлении кэшей обновление происходит автоматически без участия пользователя
        Скачаны несколько кэшей
        Активирована симуляция устаревания кэшей в Debug Panel -> Various -> Simulate caches update -> Тап 5 раз
        Отображается экран:
        (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
        Автообновление выключено
    - do: Включить Автообновление
    - assert: Свитчер Автообновление активен
    - do: |
        Вернуться на экран загрузки кэшей:
        (Android) Закрыть поп-ап настроек
        (iOS) Настройки -> Назад -> Загрузка карт
    - assert: Происходит загрузка обновления кэшей
    - do: Отменить загрузку кэшей (Тап на колесо загрузки -> тап на кнопку подтверждения отмены загрузки)
    - assert: |
        Загрузка обновления кэшей отменена
        Отображется кнопка Обновить рядом с каждым загруженным кэшем
    - do: Выключить настройку автообновления
    - do: Включить настройку автообновления
    - do: Вернуться на экран загрузки кэшей
    - assert: Происходит загрузка обновления кэшей
    - do: Отменить загрузку кэшей
    - assert: |
        Загрузка обновления кэшей отменена
        Отображется кнопка Обновить рядом с каждым загруженным кэшем
    - do: Выключить настройку автообновления
    - do: Включить настройку автообновления
    - do: Вернуться на экран загрузки кэшей
    - assert: Происходит загрузка обновления кэшей
    - do: Дождаться окончания загрузки обновления
    - assert: |
        Кнопка Обновить не отображается
        Все кэши карт обновлены

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Обновления кэшей (Need update):
    - info: |
        Выключен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        Выключено автообновление кэшей
        В Debug Panel -> Various пять раз тап по Simulate caches update
        Отображается главный экран приложения
    - do: Тап по кнопке меню
    - assert: Отображается меню приложения
    - do: Тап по Загрузка карт
    - assert: |
        Отображается экран офлайн карт
        Возле каждого из кэшей отображается кнопка Обновить
    - do: Тап по Обновить
    - assert: |
        Началось обновление кэша
        Отображается круглый прогресс бар вместо кнопки Обновить
        После обновления кэша перестает отображается прогресс бар и кнопка Обновить

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие автообновление кэшей карт под экспериментом:
    - info: |
        Скачать несколько кэшей на девайс
        В настройках Офлайн-карт выключена опция Автообновление
        Android: включить эксперимент caches_autoupdate_on
    - do: В Debug Panel->Various включить опцию ‘simulate caches update’ 5 раз
    - assert: Отображается Debug Panel на экране Various
    - do: Вернуться в меню приложения
    - assert: Отображается экран меню
    - do: Тап на Загрузка карт
    - assert: |
        Отображаются скачанные карты с кнопкой обновить (N МБ)

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Отображение настроек в Офлайн-картах:
    - info: |
        В приложении присутствуют скачанные офлайн-карты
        Отображается меню приложения
    - do: Тап на Настройки
    - assert: В меню настроек отсутсвует блок Офлайн-карты
    - do: Вернуться в меню приложения
    - assert: Отображается экран меню
    - do: Тап на Загрузка карт
    - assert: Отображается экран офлайн-карты
    - do: Тап на шестеренку
    - assert: |
        Отображается штора с настройками:
        - Автообновление
        - Загруза только по Wi-Fi
        - Удалить загруженные карты

    - platforms:
        - android
    - testing:
        - acceptance_maps


  Определение рекомендуемых офлайн-карт без скачанного кэша:
    - info: |
        Открыт главный экран приложения
        У пользователя нет скачанного кэша карт
        На спане отображается ММП
    - do: Свайп спана карты на местность другого города, не соответствующего ММП
    - assert: На спане отображается местность другого города
    - do: Тап на Меню
    - do: Тап на Загрузка карт
    - assert: |
        Отображается экран "Офлайн-карты"
        Присутствует строка поиска
        Присутствует раздел рекомендуемых к загрузке офлайн-карт, соответствующих местности ММП
        Ниже присутствует раздел рекомендуемых офлайн-карт, соответствующих текущему спану карты

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Определение рекомендуемых офлайн-карт со скачанным кэшем:
    - info: |
        Открыт главный экран приложения
        У пользователя скачаны карты местности его ММП
        На спане отображается местность другого города, не соответствующего ММП
    - do: Тап на Меню
    - do: Тап на Загрузка карт
    - assert: |
        Отображается экран "Офлайн-карты"
        Присутствует строка поиска
        [iOS] В поиске обозначено количество городов
        Может присутствовать раздел "Рядом с вами" с рекомендуемыми к скачиванию картами
        Ниже присутствует раздел рекомендуемых офлайн-карт, соответствующих текущему спану карты
        Ниже присутствует раздел загруженных карт со скачанной ранее картой местности ММП

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Отображение рекомендуемых офлайн-карт в разделе видимой области карты:
    - info: |
        Открыт главный экран приложения
        На спане отображается местность другого города, не соответствующего ММП
    - do: Тап на Меню
    - do: Тап на Загрузка карт
    - assert: |
        Отображается экран "Офлайн-карты"
        Присутствует раздел рекомендуемых офлайн-карт, соответствующих местности текущему спану карты
        Могут предлагаться к скачиванию карты как отдельно города, так и области с городом
        Карты расположены в порядке увеличения размера

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Остановка загрузки кэша:
    - info: |
        Выключен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Начать загрузку любого кэша
    - assert: Начинается загрузка кэша
    - do: Тап на прогресс загрузки
    - assert: |
        Android:
        - Появилось сообщение "Отменить загрузку?"
        - Присутствуют кнопки Нет, Да
        iOS:
        - Отображаются кнопки Удалить загрузку, Отменить
    - do: (iOS) Тап Отменить / (Android) Тап Нет
    - assert: Загрузка кэша продолжается
    - do: Тап на прогресс загрузки
    - assert: |
        Android:
        - Появилось сообщение "Отменить загрузку?"
        - Присутствуют кнопки Нет, Да
        iOS:
        - Отображаются кнопки Удалить загрузку, Отменить
    - do: (iOS) Тап Удалить загрузку / (Android) Тап Да
    - assert: |
        Загрузка остановлена
        Кэш не скачан
    - do: Начать загрузку нескольких кэшей (больше двух)
    - assert: Происходит загрузка кэшей
    - do: Отменить загрузку нескольких кэшей (не всех)
    - assert: |
        Кэши, у которых была отменена загрузка, не скачаны
        Кэши, у которых загрузка не была отменена, скачаны
    - do: Начать загрузку нескольких кэшей (больше двух)
    - assert: Происходит загрузка кэшей
    - do: Отменить загрузку всех кэшей
    - assert: Кэши не скачаны

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Прерывание загрузки кэша при потери сети:
    - info: |
        Выключен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
        Кэш текущего региона не скачан
    - do: Тап на кнопку загрузки возле кэша
    - assert: Началась загрузка
    - do: Выключить интернет
    - assert: Скачивание кэша остановлено
    - do: Включить интернет
    - assert: |
        Интернет включен
        Загрузка продолжается
    - do: Дождаться загрузки кэша
    - assert: Кэш скачан

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Наличие кэшей городов и регионов на uk_UA:
    - info: |
        Выключен эксперимент vmap3_enabled
        Локаль устройства uk_UA
        Отображается экран Офлайн-карти (Тап меню -> Завантажити карти)
    - do: Тап на строку поиска
    - assert: |
        Отображается горизонтальный список стран
        На украинский переведены только украинские города и регионы
        Остальные отображаются на русском
    - do: Выбрать любую страну
    - assert: |
        Размер загружаемого региона обозначается на том языке, который ранее был выставлен ранее
        На украинском - МБ

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Наличие кэшей городов и регионов на tr_TR:
    - info: |
        Выключен эксперимент vmap3_enabled
        Локаль устройства tr_TR
        Отображается экран Çevrimdışı haritalar (Тап меню -> Haritaları indir)
    - do: Тап на строку поиска
    - assert: |
        Отображается горизонтальный список стран
        На турецкий переведены только турецкие города и регионы
        Остальные отображаются на анлийском
    - do: Выбрать любую страну
    - assert: |
        Размер загружаемого региона обозначается на том языке, который ранее был выставлен ранее
        На турецком - МВ

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Работоспособность новых кэшей на en_RU:
    - info: |
        Выключен эксперимент vmap3_enabled
        Локаль устройства en_RU
        Отображается экран Offline maps (Тап меню -> Download maps)
    - do: Тап в строку поиска
    - assert: |
        Отображается горизонтальный список стран
        Название стран и регионов на латинице
    - do: Ввести название текущего региона на латинице
    - assert: Отобразились результаты поиска
    - do: Тап по найденному региону
    - assert: Началась загрузка кэша
    - do: Дождаться загрузки кэша
    - assert: Кэш скачан
    - do: Выключить интернет
    - do: Вернуться на главный экран приложения
    - do: Открыть спан скачанного кэша
    - do: Выполнить поиск по запросу/категории
    - assert: Отображаются результаты поиска

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Работоспособность новых кэшей на uz_EN:
    - info: |
        Выключен эксперимент vmap3_enabled
        Локаль устройства uz_EN
        Отображается экран Oflayn xaritalar (Тап меню -> Xaritalarni yuklash)
        Кэш текущего региона не скачан
    - do: Тап в строку поиска
    - assert: |
        Отображается горизонтальный список стран
        Название стран и регионов на латинице
    - do: Ввести название текущего региона на латинице
    - assert: Отобразились результаты поиска
    - do: Тап по найденному региону
    - assert: Началась загрузка кэша
    - do: Дождаться загрузки кэша
    - assert: Кэш скачан
    - do: Выключить интернет
    - do: Вернуться на главный экран приложения
    - do: Построить автомобильный маршрут в пределах загруженного кэша
    - assert: |
        Маршрут успешно построен
        Отображается экран выбора маршрута
    - do: Перейти в ведение по маршруту
    - assert: Отображается экран ведения в офлайне

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Скачивание кэша в фоне (Android):
    - info: |
        Выключен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Начать загрузку любого кэша
    - assert: Происходит загрузка кэша
    - do: Свернуть приложение
    - assert: |
        Приложение в фоне
        Отображается главный экран устройства
    - do: Свайпом вниз раскрыть штору уведомлений
    - assert: |
        Отображается уведомление о загрузке кэша
        Кэш продолжает скачиваться в фоне
    - do: Тап по уведомлению
    - assert: |
        Отображается экран Офлайн-карты
        Загрузка кэша продолжается
    - do: Свернуть приложение
    - do: Дождаться окончания загрузки кэша
    - do: Развернуть приложение
    - assert: |
        Отображается экран Офлайн-карты
        Скачанный ранее кэш отображается в блоке Загруженные

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Скачивание кэша в фоне (iOS):
    - info: |
        Выключен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Начать загрузку любого кэша
    - assert: Происходит загрузка кэша
    - do: Свернуть приложение
    - assert: |
        Приложение в фоне
        Отображается главный экран устройства
        Загрузка кэша в фоне продолжается
    - do: Развернуть приложение
    - assert: |
        Отображается экран Офлайн-карты
        Загрузка кэша продолжается
    - do: Свернуть приложение
    - do: Дождаться окончания загрузки кэша
    - do: Развернуть приложение
    - assert: |
        Отображается экран Офлайн-карты
        Скачанный ранее кэш отображается в блоке Загруженные

    - platforms:
        - ios
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Загрузка кэша из поиска, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Тап на строку поиска
    - assert: |
        Поле ввода в фокусе, мигает курсор
        Отображается плейсхолдер N городов (iOS)
        Вверху отображается горизонтальный список стран
        Выбранная страна выделена
        Снизу подгрузился список карт для страны:
        - Отображается размер в Мб для каждого кэша
        - Присутствует кнопка загрузки
        В загруженных картах кнопка загрузки отсутствует
        Отображается клавиатура
    - do: Тап на любую страну
    - assert: |
        Название выбранной страны выделено
        Отображается список доступных карт для выбранной страны и размер в Мб
        Для загруженных карт не отображается кнопка загрузки
        Отображаются табы с названием стран
        В каждой стране доступен список карт для загрузки
    - do: Сделать свайп вверх/вниз
    - assert: |
        Список карт для отдельной страны пролистывается
        При наличии в списке всего одного города, список не пролистывается
    - do: Ввести одну букву
    - assert: |
        Список стран пропадает
        Саджесты обновляются, согласно введённой букве
    - do: Тап по одной из найденных карт
    - assert: |
        Началась загрузка карты
        Отображается колесо загрузки
        Карты других городов не исчезают
    - do: Дождаться завершения загрузки
    - do: Тап на Отменить
    - assert: |
        Поиск закрылся
        Отображается экран Офлайн-карты
        В блоке Загруженные отображается скачанный ранее кэш

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - tags:
        - mapkit_ready
        - assessors


  Удаление скачанного кэша (iOS), vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Скачан кэш текущего региона
        Отображается экран Меню -> Загрузка карт-> Офлайн-карты
    - do: Тап на Изменить
    - assert: |
        Слева от кэша отображается кнопка удаления
        Кнопка Изменить меняется на Готово
        Кнопка Готово активна
    - do: Тап по кнопке удаления
    - assert: |
        Строка с кэшем сдвигается влево
        Справа от кэша появляется кнопка Удалить
    - do: Тап на Удалить
    - assert: Кэш удален
    - do: Тап Назад
    - assert: Отображается меню
    - do: Тап на Загрузка карт
    - assert: Удаленный раннее кэш отсутствует

    - platfroms:
        - ios
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Удаление скачанного кэша (Android), vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Скачан кэш текущего региона
        Отображается экран Меню -> Загрузка карт -> Офлайн-карты
    - do: Тап на три точки
    - assert: |
        Отображается штора с названием региона с кнопкой Удалить
    - do: Тап на затемненную область экрана
    - assert: |
        Кэш не удален
        Отображается экран Офлайн-карт
    - do: Тап на три точки
    - assert: |
        Отображается штора с названием региона и кнопкой Удалить
    - do: Тап на Удалить
    - assert: |
        Отображается экран Офлайн-карты
        Кэш удален
        Отображаются другие скачанные карты, если имеются
    - do: Закрыть экран Офлайн-карты
    - assert: Отображается меню
    - do: Тап на Загрузка карт
    - assert: Удаленный раннее кэш отсутствует

    - platforms:
        - android
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Работоспособность приложения в офлайн-режиме, если статус кэшей Outdated, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        В настройках приложения выключено автообновление кэшей:
        - Android: Меню -> Загрузка карт -> Настройки
        - iOS: Меню -> Настройки -> Офлайн-карты
        В Debug Panel -> Various 1 раз тап по simulate caches update
        Включен авиарежим
        Отображается главный экран приложения
    - do: Тап по строке поиска
    - assert: Отображается экран поиска
    - do: Тап по одной из категорий
    - assert: |
        Отображаются результаты поиска в офлайне
        Отображается иконка офлайн маршрутизации
    - do: Закрыть поиск
    - assert: Отображается главный экран приложения
    - do: Тап на таб Маршрут
    - assert: Открылся экран Маршрут
    - do: Ввести произвольный адрес в поле Куда
    - assert: |
        Открыт экран выбора вариантов маршрута
        В офлайн режиме отображается данные только для автомобильного типа маршрута
    - do: Тап на Поехали
    - assert: |
        Отображается экран ведения в офлайне
        На карте отображается линия маршрута и текущее местоположение
    - do: Завершить маршрут
    - assert: Открывается главный экран приложения

    - platfroms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Работоспособность приложения в офлайн-режиме, если статус кэшей Need update, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        Выключено автообновление кэшей
        В Debug Panel -> Various пять раз тап по Simulate caches update
        Включен авиарежим
        Отображается главный экран приложения
    - do: Тап по строке поиска
    - assert: Отображается экран поиска
    - do: Тап по одной из категорий
    - assert: |
        Отображаются результаты поиска в офлайне
        Отображается иконка офлайн маршрутизации
    - do: Закрыть поиск
    - assert: Отображается главный экран приложения
    - do: Тап на таб Маршрут
    - assert: Открылся экран Маршрут
    - do: Ввести произвольный адрес в поле Куда
    - assert: |
        Открыт экран выбора вариантов маршрута
        В офлайн режиме отображается данные только для автомобильного типа маршрута
    - do: Тап на Поехали
    - assert: |
        Отображается экран ведения в офлайне
        На карте отображается линия маршрута и текущее местоположение
    - do: Завершить маршрут
    - assert: Открывается главный экран приложения

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие кнопки обновить у кешей в состоянии Outdated, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        В настройках приложения выключено автообновление кэшей:
        - Android: Меню -> Загрузка карт -> Настройки
        - iOS: Меню -> Настройки -> Офлайн-карты
        Отображается главный экран приложения
    - do: Симулировать необходимость обновления кэшей в Debug Panel -> Various -> 1 раз тап по simulate caches update
    - do: Вернуться в меню
    - do: Тап Загрузка карт
    - assert: |
        Отображается список загруженных кэшей
        Кэши не скачиваются автоматически
        Кнопка Обновить не отображается

    - platfroms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Загрузка кэша из блока Рядом с вами, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Отображается главный экран приложения
        ММП определено
        Кэши текущего региона не скачаны
    - do: Тап Меню
    - assert: Отображается меню приложения
    - do: Тап на Загрузка карт
    - assert: |
        Отображается экран Офлайн-карты
        В блоке Рядом с вами отображается кэш текущего региона
    - do: Тап на кэш в блоке Рядом с вами
    - assert: Началась загрузка кэша
    - do: Дождаться окончания загрузки
    - assert: |
        Кэш текущего региона скачан
        Скачанный кэш отображается в блоке Загруженные
        Блок Рядом с вами не отображается

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Выбор памяти устройства в качестве дефолтного места хранения кэша на экране Настройки, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Отображается меню приложения
        В качестве хранилища выбрана SD-карта (Меню -> Загрузка карт -> Тап на кнопку настроек -> Папка хранения)
    - do: Тап на кнопку Загрузка карт
    - assert: Отображается экран Офлайн-карты
    - do: Тап на кнопку настроек
    - assert: |
        Отображается поп-ап Настройки с пунктами:
        - Папка хранения
        - Автообновление
        - Загрузка только по Wi-Fi
        - Удалить загруженные карты
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        Указан вариант Карта памяти
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Память устройства
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Память устройства установлена в качестве хранилища
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        Указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Закрыть поп-ап
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Память устройства установлена в качестве хранилища
    - do: Скачать любой кэш (Меню -> Загрузка карт)
    - do: Проверить что кэш скачан на память устройства (cкачанные файлы можно найти через проводник устройства)
    - assert: |
        Скачанные карты размещены на памяти устройства в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор карты памяти в качестве дефолтного места хранения кэша на экране Настройки, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Отображается меню приложения
    - do: Тап на кнопку Загрузка карт
    - assert: Отображается экран Офлайн-карты
    - do: Тап на кнопку настроек
    - assert: |
        Отображается поп-ап Настройки с пунктами:
        - Папка хранения
        - Автообновление
        - Загрузка только по Wi-Fi
        - Удалить загруженные карты
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Карта памяти
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Карта памяти установлена в качестве хранилища
    - do: Тап на Папка хранения
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        Указан вариант Карта памяти
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Закрыть поп-ап Куда сохранять карты?
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Отображает поп-ап Настройки
        Карта памяти установлена в качестве хранилища
    - do: Скачать любой кэш (Меню -> Загрузка карт)
    - do: Проверить что кэш скачан на память устройства (cкачанные файлы можно найти через проводник устройства)
    - assert: |
        Скачанные карты размещены на карте памяти в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор памяти устройства в качестве дефолтного места хранения кэша из алерта с предложением скачать карту ближайшего региона, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        ММП определено
        В нижней части экрана отображается алерт с предложением скачать карту ближайшего региона
        Алерт отображается на второй запуск приложения
    - do: Тап Загрузить
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Закрыть поп-ап
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Память устройства назначается дефолтным хранилищем
        Начитается загрузка кэша на память устройства

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор карты памяти в качестве дефолтного места хранения кэша из алерта с предложением скачать карту ближайшего региона, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        ММП определено
        В нижней части экрана отображается алерт с предложением скачать карту ближайшего региона
        Алерт отображается на второй запуск приложения
    - do: Тап Загрузить
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Тап на Карта памяти
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        В качестве хранилища назначана карта памяти
        Начитается загрузка кэша на карту памяти

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор памяти устройства в качестве дефолтного места хранения кэша на экране Офлайн-карты, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        Отображается экран Меню -> Загрузка карт-> Офлайн-карты
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Память устройства
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Начитается загрузка кэша на память устройства
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Поп-ап Куда сохранять карты? не отображается
        Начитается загрузка кэша

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Выбор карты памяти в качестве дефолтного места хранения кэша на экране Офлайн-карты, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Установить приложение начисто или очистить данные приложения
        Отображается экран Меню -> Загрузка карт-> Офлайн-карты
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Открылся поп-ап Куда сохранять карты?
        Предлагается 2 варианта: Память устройства и Карта памяти
        По дефолту указан вариант Память устройства
        Под каждым вариантом указано количество свободного места
        Справа внизу кнопка Отменить
    - do: Выбрать Карта памяти
    - assert: |
        Поп-ап Куда сохранять карты? закрылся
        Начитается загрузка кэша на карту памяти
    - do: В строке поиска ввести запрос по городу
    - assert: Отображаются результаты поиска
    - do: Тап на любой кэш
    - assert: |
        Поп-ап Куда сохранять карты? не отображается
        Начитается загрузка кэша

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Обновление кэша на vmap3, если кэш был скачан на vmap2:
    - info: |
        Выключен эксперимент vmap3_enabled
        Автообновление кэшей выключено (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты
        Удалены загруженные карты (Android) Меню -> Загрузка карт -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Загрузить кэш любого города/региона
    - assert: Кэш скачан
    - do: Включить эксперимент vmap3_enabled
    - assert: Эксперимент vmap3_enabled включен
    - do: Перезапустить приложение
    - do: Активировать симуляцию устаревания кэшей в Debug Panel -> Various -> Simulate caches update -> Тап 5 раз
    - do: Вернуться на экран Офлайн-карты
    - assert: |
        Отображается экран Офлайн-карты
        Рядом со скачанным кэшем отображается кнопка Обновить

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - testing:
        - acceptance_maps


  Скачивание кэша при выключенной опции Загрузка только по Wi-Fi, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Имеется доступ к мобильному интернету и сети Wi-Fi
        Включены Wi-Fi и мобильный интернет
        В настройках выключена опция Загрузка только по Wi-Fi:
        (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
        Местоположение определено
        Кэши областей не загружены
        Отображается меню приложения
    - do: Тап на Загрузка карт
    - do: Тап по городу/области в блоке Рядом с вами
    - assert: Начинается скачивание кэша
    - do: Выключить Wi-Fi
    - do: Начать загрузку любого кэша
    - assert: Начинается скачивание кэша
    - do: Включить Wi-Fi
    - do: Выключить мобильный интернет
    - do: Начать загрузку любого кэша
    - assert: Начинается скачивание кэша
    - do: Выключить Wi-Fi
    - do: Выключить мобильный интернет
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение в нижней части экрана о том, что сеть отсутствует и загрузка начнётся автоматически после подключения к сети
        Сообщение пропадает через несколько секунд
    - do: Включить Wi-Fi и/или мобильный интернет
    - assert: Скачивание кэша стартует автоматически

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Скачивание кэша при включенной опции Загрузка только по Wi-Fi, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Имеется доступ к мобильному интернету и сети Wi-Fi
        Включены Wi-Fi и мобильный интернет
        В настройках Офлайн карт включена опция Загрузка только по Wi-Fi:
        (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
        Отображается экран Офлайн-карты
    - do: Начать скачивание любого кэша
    - assert: Начинается загрузка кэша
    - do: Дождаться заполнения прогресса скачивания кэша примерно на 1/5
    - do: |
        Выключить Wi-Fi на устройстве
        Подождать около минуты
    - assert: Загрузка кэша не продолжается
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение о том, что запрещена загрузка карт по мобильным данным
        Предлагается разрешить загрузку карт без Wi-Fi
        Отображаются кнопки согласия и отмены
    - do: Тап на кнопку отмены
    - assert: Загрузка кэша не началась
    - do: Выключить мобильный интернет
    - do: Включить Wi-Fi
    - assert: |
        Wi-Fi соединение восстановлено
        Загрузка кэша продолжается
    - do: Дождаться завершения загрузки
    - assert: Кэш успешно скачивается
    - do: Выключить Wi-Fi
    - do: Включить мобильный интернет
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение о том, что запрещена загрузка карт по мобильным данным
        Предлагается разрешить загрузку карт без Wi-Fi
        Отображаются кнопки согласия и отмены
    - do: Тап на кнопку согласия
    - assert: |
        Начинается загрузка кэша
        Кэш успешно загрузился
    - do: Выключить мобильный интернет и Wi-Fi
    - assert: Интернет соединение отсутсвует
    - do: Начать загрузку любого кэша
    - assert: |
        Появляется сообщение в нижней части экрана о том, что сеть отсутствует и загрузка начнётся автоматически после подключения к сети
        Сообщение пропадает через несколько секунд
        Сообщение показывается лишь 1 раз
    - do: Включить мобильный интернет
    - assert: Cкачивание кэша стартует автоматически

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Перенос скачанных карт на карту памяти, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        Скачанные файлы можно найти через проводник устройства:
        Открыть Проводник/Мои файлы -> Выбрать тип памяти (внутренняя или sd)
    - do: Скачать несколько кэшей на внутреннюю память устройства
    - assert: |
        Кэши успешно скачаны
        Кэши отображаются на экране Офлайн-карты
    - do: |
        В настройках Офлайн-карт выбрать Карта памяти в папке хранения:
        Меню -> Загрузка карта -> тап на кнопку настроек -> Папка хранения - Карта памяти
    - assert: |
        Карты перемещаются на карту памяти
        Скачанные карты отображаются в приложении
        Скачанные карты размещены на SD карте в папке Files внутри папки приложения
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Извлечение SD карты из девайса, vmap3:
    - info: |
        Выключить эксперимент `new_maps_settings`(Меню -> Настройки -> Debug-Panel - Experiments)
        Включен эксперимент vmap3_enabled
        Закрыть дебаг панель
        Перезапустить приложение
        В девайс установлена карта памяти (SD-карта)
        SD-карта установлена в качестве места хранения кэшей (Меню -> Загрузка карт -> тап на кнопку Настроек -> Папка хранения -> Карта памяти)
        Скачанные файлы можно найти через проводник устройства:
        Открыть Проводник/Мои файлы -> Выбрать тип памяти (внутренняя или sd)
        Скачанные кэши размещены на SD карте в папке Files внутри папки приложения:
        Для релизных сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для сборок trunk путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.debug\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
        Для pr-сборок путь:
        - (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\cache\\image_manager_disk_cache)
        - или в (Устройство\\Внутренняя память\\Android\\data\\ru.yandex.yandexmaps.pr\\files\\mapkit\\offline_cashes\\папка и в ней files/driving, files/search2, files/vmap2fb)
    - do: Загрузить любой кэш
    - assert: Кэш скачан
    - do: Проверить, что скачанный кэш размещен SD-карте
    - do: Изъять из девайса sd-карту
    - do: Запустить приложение
    - assert: Отображается главный экран приложения
    - do: Тап меню
    - assert: Отображается меню приложения
    - do: Тап на Загрузка карт
    - assert: |
        Отображается экран Офлайн-карты
        Скачанные кэши пропали
        Они снова доступны для скачивания на внутренню память устройства по умолчанию

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - sd_card


  Удаление кэша через Настройки на экране Офлайн-карт, если кэши скачаны, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        Скачано несколько кэшей (Меню -> Загрузка карт)
        Отображается экран:
        (Android) Меню -> Загрузка карт -> тап на нопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап на кнопку отмены
    - assert: Загруженные кэши не удалены
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап по кнопке удаления
    - assert: |
        (iOS) Кнопка Удалить загруженные карты становится неактивной
        (Android) Кнопка Удалить загруженные карты пропала

    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Удаление кэша через новые Настройки, если кэши скачаны, vmap3:
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/vmap3_and_newSettings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings&vmap3_enabled`
    - do: Перезапустить приложение
    - do: Скачать несколько кэшей (Меню -> Загрузка карт)
    - assert: Кэши скачанны
    - do: Открыть Меню -> Настройки
    - assert: |
        Открыт экран настроек
        Присутствует кнопка "Удалить офлайн-карты"
        Напротив кнопки отображается размер скаченных офлайн карт
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап на кнопку отмены(iOS) / Тап по системной кнопке назад(Android)
    - assert: Загруженные кэши не удалены
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап по кнопке удаления
    - assert: |
        Сообщение с текстом об удалении загруженных карт скрылось
        Отображается кнопка "Удалить офлайн-карты"
        Напротив кнопки не отображается размер скаченных офлайн карт


    - platforms:
        - android
        - ios
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - new_settings


  Удаление кэша через Настройки на экране Офлайн-карт без скачивания кэшей, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        Кэши не скачаны (Меню -> Загрузка карт)
        Прокрутить спан карты для загрузки данных
        Открыт экран Офлайн карты ((Android) Меню -> Загрузка карт -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты)
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап на кнопку отмены
    - assert: Загруженные кэши не удалены
    - do: Тап по Удалить загруженные карты (N МБ)
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап по кнопке удаления
    - do: Подождать 10 - 40 секунд
    - assert: |
        (iOS) Кнопка Удалить загруженные карты становится неактивной
        (Android) Кнопка Удалить загруженные карты пропала

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Удаление кэша через новые Настройки без скачивания кэшей, vmap3:
    - info: |
        Кэши не скачаны (Меню -> Загрузка карт)
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/vmap3_and_newSettings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings&vmap3_enabled`
    - do: Перезапустить приложение
    - do: Прокрутить спан карты для загрузки данных
    - do: Открыть Меню -> Настройки
    - assert: |
        Открыт экран настроек
        Присутствует кнопка "Удалить офлайн-карты"
        Напротив кнопки отображается размер закешированных офлайн карт, если размер больше 1 MB
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап по кнопке удаления
    - assert: |
        Сообщение с текстом об удалении загруженных карт скрылось
        Отображается кнопка "Удалить офлайн-карты"
        Напротив кнопки не отображается размер скаченных офлайн карт
    - do: Тап по "Удалить офлайн-карты"
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены(iOS) и подтверждения удаления

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
        - new_settings


  Обновление кэшей карт при включенном автообновлении, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        При включенном автообновлении кэшей обновление происходит автоматически без участия пользователя
        Скачаны несколько кэшей
        Активирована симуляция устаревания кэшей в Debug Panel -> Various -> Simulate caches update -> Тап 5 раз
        Отображается экран:
        (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
        Автообновление выключено
    - do: Включить Автообновление
    - assert: Свитчер Автообновление активен
    - do: |
        Вернуться на экран загрузки кэшей:
        (Android) Закрыть поп-ап настроек
        (iOS) Настройки -> Назад -> Загрузка карт
    - assert: Происходит загрузка обновления кэшей
    - do: Отменить загрузку кэшей (Тап на колесо загрузки -> тап на кнопку подтверждения отмены загрузки)
    - assert: |
        Загрузка обновления кэшей отменена
        Отображется кнопка Обновить рядом с каждым загруженным кэшем
    - do: Выключить настройку автообновления
    - do: Включить настройку автообновления
    - do: Вернуться на экран загрузки кэшей
    - assert: Происходит загрузка обновления кэшей
    - do: Отменить загрузку кэшей
    - assert: |
        Загрузка обновления кэшей отменена
        Отображется кнопка Обновить рядом с каждым загруженным кэшем
    - do: Выключить настройку автообновления
    - do: Включить настройку автообновления
    - do: Вернуться на экран загрузки кэшей
    - assert: Происходит загрузка обновления кэшей
    - do: Дождаться окончания загрузки обновления
    - assert: |
        Кнопка Обновить не отображается
        Все кэши карт обновлены

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Обновления кэшей (Need update), vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Загружен кэш одного или нескольких регионов
        Выключено автообновление кэшей
        В Debug Panel -> Various пять раз тап по Simulate caches update
        Отображается главный экран приложения
    - do: Тап по кнопке меню
    - assert: Отображается меню приложения
    - do: Тап по Загрузка карт
    - assert: |
        Отображается экран офлайн карт
        Возле каждого из кэшей отображается кнопка Обновить
    - do: Тап по Обновить
    - assert: |
        Началось обновление кэша
        Отображается круглый прогресс бар вместо кнопки Обновить
        После обновления кэша перестает отображается прогресс бар и кнопка Обновить

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - testing:
        - acceptance_maps


  Остановка загрузки кэша, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Начать загрузку любого кэша
    - assert: Начинается загрузка кэша
    - do: Тап на прогресс загрузки
    - assert: |
        Android:
        - Появилось сообщение "Отменить загрузку?"
        - Присутствуют кнопки Нет, Да
        iOS:
        - Отображаются кнопки Удалить загрузку, Отменить
    - do: (iOS) Тап Отменить / (Android) Тап Нет
    - assert: Загрузка кэша продолжается
    - do: Тап на прогресс загрузки
    - assert: |
        Android:
        - Появилось сообщение "Отменить загрузку?"
        - Присутствуют кнопки Нет, Да
        iOS:
        - Отображаются кнопки Удалить загрузку, Отменить
    - do: (iOS) Тап Удалить загрузку / (Android) Тап Да
    - assert: |
        Загрузка остановлена
        Кэш не скачан
    - do: Начать загрузку нескольких кэшей (больше двух)
    - assert: Происходит загрузка кэшей
    - do: Отменить загрузку нескольких кэшей (не всех)
    - assert: |
        Кэши, у которых была отменена загрузка, не скачаны
        Кэши, у которых загрузка не была отменена, скачаны
    - do: Начать загрузку нескольких кэшей (больше двух)
    - assert: Происходит загрузка кэшей
    - do: Отменить загрузку всех кэшей
    - assert: Кэши не скачаны

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Прерывание загрузки кэша при потери сети, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
        Кэш текущего региона не скачан
    - do: Тап на кнопку загрузки возле кэша
    - assert: Началась загрузка
    - do: Выключить интернет
    - assert: Скачивание кэша остановлено
    - do: Включить интернет
    - assert: |
        Интернет включен
        Загрузка продолжается
    - do: Дождаться загрузки кэша
    - assert: Кэш скачан

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Наличие кэшей городов и регионов на uk_UA, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Локаль устройства uk_UA
        Отображается экран Офлайн-карти (Тап меню -> Завантажити карти)
    - do: Тап на строку поиска
    - assert: |
        Отображается горизонтальный список стран
        На украинский переведены только украинские города и регионы
        Остальные отображаются на русском
    - do: Выбрать любую страну
    - assert: |
        Размер загружаемого региона обозначается на том языке, который ранее был выставлен ранее
        На украинском - МБ

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Наличие кэшей городов и регионов на tr_TR, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Локаль устройства tr_TR
        Отображается экран Çevrimdışı haritalar (Тап меню -> Haritaları indir)
    - do: Тап на строку поиска
    - assert: |
        Отображается горизонтальный список стран
        На турецкий переведены только турецкие города и регионы
        Остальные отображаются на анлийском
    - do: Выбрать любую страну
    - assert: |
        Размер загружаемого региона обозначается на том языке, который ранее был выставлен ранее
        На турецком - МВ

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Работоспособность новых кэшей на en_RU, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Локаль устройства en_RU
        Отображается экран Offline maps (Тап меню -> Download maps)
    - do: Тап в строку поиска
    - assert: |
        Отображается горизонтальный список стран
        Название стран и регионов на латинице
    - do: Ввести название текущего региона на латинице
    - assert: Отобразились результаты поиска
    - do: Тап по найденному региону
    - assert: Началась загрузка кэша
    - do: Дождаться загрузки кэша
    - assert: Кэш скачан
    - do: Выключить интернет
    - do: Вернуться на главный экран приложения
    - do: Открыть спан скачанного кэша
    - do: Выполнить поиск по запросу/категории
    - assert: Отображаются результаты поиска

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Работоспособность новых кэшей на uz_EN, vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Локаль устройства uz_EN
        Отображается экран Oflayn xaritalar (Тап меню -> Xaritalarni yuklash)
        Кэш текущего региона не скачан
    - do: Тап в строку поиска
    - assert: |
        Отображается горизонтальный список стран
        Название стран и регионов на латинице
    - do: Ввести название текущего региона на латинице
    - assert: Отобразились результаты поиска
    - do: Тап по найденному региону
    - assert: Началась загрузка кэша
    - do: Дождаться загрузки кэша
    - assert: Кэш скачан
    - do: Выключить интернет
    - do: Вернуться на главный экран приложения
    - do: Построить автомобильный маршрут в пределах загруженного кэша
    - assert: |
        Маршрут успешно построен
        Отображается экран выбора маршрута
    - do: Перейти в ведение по маршруту
    - assert: Отображается экран ведения в офлайне

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Скачивание кэша в фоне (Android), vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Начать загрузку любого кэша
    - assert: Происходит загрузка кэша
    - do: Свернуть приложение
    - assert: |
        Приложение в фоне
        Отображается главный экран устройства
    - do: Свайпом вниз раскрыть штору уведомлений
    - assert: |
        Отображается уведомление о загрузке кэша
        Кэш продолжает скачиваться в фоне
    - do: Тап по уведомлению
    - assert: |
        Отображается экран Офлайн-карты
        Загрузка кэша продолжается
    - do: Свернуть приложение
    - do: Дождаться окончания загрузки кэша
    - do: Развернуть приложение
    - assert: |
        Отображается экран Офлайн-карты
        Скачанный ранее кэш отображается в блоке Загруженные

    - platforms:
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Скачивание кэша в фоне (iOS), vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Начать загрузку любого кэша
    - assert: Происходит загрузка кэша
    - do: Свернуть приложение
    - assert: |
        Приложение в фоне
        Отображается главный экран устройства
        Загрузка кэша в фоне продолжается
    - do: Развернуть приложение
    - assert: |
        Отображается экран Офлайн-карты
        Загрузка кэша продолжается
    - do: Свернуть приложение
    - do: Дождаться окончания загрузки кэша
    - do: Развернуть приложение
    - assert: |
        Отображается экран Офлайн-карты
        Скачанный ранее кэш отображается в блоке Загруженные

    - platforms:
        - ios
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors
    - tags:
        - newbie


  Обновление кэша в vmap3, если кэш был скачан в vmap2:
    - info:
        Выключен эксперимент vmap3_enabled
        Автообновление кэшей выключено (Android) Меню -> Загрузка карт-> Офлайн-карты -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты
        Удалены загруженные карты (Android) Меню -> Загрузка карт -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Загрузить кэш любого города/региона
    - assert: Кэш скачан
    - do: Включить эксперимент vmap3_enabled
    - assert: Эксперимент vmap3_enabled включен
    - do: Перезапустить приложение
    - do: Активировать симуляцию устаревания кэшей в Debug Panel -> Various -> Simulate caches update -> Тап 5 раз
    - do: Вернуться на экран Офлайн-карты
    - assert: |
        Отображается экран Офлайн-карты
        Рядом со скачанным кэшем отображается кнопка Обновить
    - do: Тап Обновить
    - assert: Началась загрузка обновления кэша
    - do: Дождаться окончания загрузки обновления
    - assert: |
        Обновление скачано
        Кнопка Обновить не отображается

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Отображение карты в офлайн режиме в vmap3, если скачан кэш в vmap2:
    - info:
        Выключен эксперимент vmap3_enabled
        Включен интернет
        Удалены загруженные карты (Android) Меню -> Загрузка карт -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
        Кэш текущего региона не скачан
    - do: Скачать кэш текущего региона
    - assert: Кэш скачан
    - do: Включить эксперимент vmap3_enabled
    - do: Перезагрузить приложение
    - do: Выключить интернет
    - assert: |
        Интернет выключен
        Отображается главный экран приложения
        Карта отображается корректно
    - do: Свайпать карту в пределах скачанного региона
    - assert: Карта отображается корректно

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Удаление кэша в vmap2, если кэш был скачан в vmap3:
    - info: |
        Включен эксперимент vmap3_enabled
        Выключить эксперимент `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
        Закрыть дебаг панель
        Перезапустить приложение
        Кэши не скачаны
        Удалены загруженные карты (Android) Меню -> Загрузка карт -> Тап на кнопку настроек / (iOS) Меню -> Настройки -> Офлайн-карты
        Включен инернет
        Отображается экран Офлайн-карты (Меню -> Загрузка карт)
    - do: Скачать любой кэш
    - assert: Кэш скачан
    - do: Выключить эксперимент vmap3_enabled
    - assert: Эксперимент vmap3_enabled выключен
    - do: Перезагрузить приложение
    - do: |
        Открыть экран:
        (Android) Меню -> Загрузка карт -> Тап на кнопку настроек
        (iOS) Меню -> Настройки -> Офлайн-карты
    - assert: |
        (Android) Отображается поп-ап Настройки
        (iOS) Отображается экран настроек Офлайн-карты
        Присутствует кнопка Удалить загруженные карты
    - do: Тап на Удалить загруженные карты
    - assert: |
        Отображается сообщение с текстом об удалении загруженных карт
        Присутствуют кнопки отмены и удаления
    - do: Тап по кнопке удаления
    - assert: |
        Загруженный ранее кэш удален
        (iOS) Кнопка Удалить загруженные карты становится неактивной
        (Android) Кнопка Удалить загруженные карты пропала
    - do: |
        Вернуться на экран Офлайн-карты:
        (Android) Закрыть поп-ап
        (iOS) Тап Настройки -> Тап Назад -> Тап Загрузка карт
    - assert: |
        Отображается экран Офлайн-карты
        Блок Загруженные отсутсвует

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - mapkit_ready
        - assessors


  Загрузка офлайн-карты через поиск:
    - info: |
        ММП определено
    - do: Перейти в Меню > Загрузка карт
    - do: Тап на строку Поиск
    - assert: Открыт экран поиска офлайн-карт
    - do: Тап на любой населенный пункт из списка
    - assert: |
        Происходит загрузка оффлайн-карты населенного пункта
        Напротив названия отображается прогресс-бар
    - do: Дождаться загрузки карты
    - assert: Прогресс-бар пропадает
    - do: Тап "Отменить"
    - assert: Населенный пункт отображается в списке "Загруженные"

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отмена загрузки офлайн-карты:
    - info: |
        Открыт экран Офлайн-карты в Меню
        ММП определено
        Идет загрузка произвольной офлайн-карты
    - do: Тап на Отмену загрузки
    - assert: |
        Загрузка приостановлена
        Открыт экран подтверждения отмены
    - do: Подтвердить отмену
    - assert: |
        Офлайн карта не загружается

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Удаление офлайн-карты:
    - info: |
        Открыт экран Офлайн-карты в Меню
        ММП определено
        Загружена офлайн-карта
    - do: |
        Удалить офлайн-карту
    - assert: |
        Офлайн-карта удалена

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Загрузка офлайн-карты:
    - estimatedTime: 7m
    - info: |
        ММП определено
        Отсутствуют ранее скачанные оффлайн-карты
    - do: Перейти в Меню > Загрузка карт
    - assert: |
        Отображается экран Офлайн-карты
        Отображается блок "Рядом с вами" со списком населенных пунктов
    - do: Тап на одно из названий населенного пункта
    - assert: |
        Появляется блок "Загруженные"
        Название населенного пункта начинает отображаться в блоке "Загруженные"
        Из блока "Рядом с вами" назание населенного пункта пропадает
        Происходит загрузка оффлайн-карты населенного пункта
        Напротив названия отображается прогресс-бар
    - do: Дождаться загрузки карты
    - assert: |
        Прогресс-бар пропадает
        Населенный пункт отображается в списке "Загруженные"

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
