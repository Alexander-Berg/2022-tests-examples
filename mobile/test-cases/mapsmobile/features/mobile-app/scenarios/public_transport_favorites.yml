testing:
  - regress
components: public_transport_favorites

specs:
  Открытие экрана Мой транспорт без добавленных закладок (пользователь авторизован):
    - info: |
        Пользователь авторизован
        Маршруты ОТ/Остановки не добавлены в закладки
        Открыто меню
    - do: Тап по кнопке Закладки и мой транспорт
    - assert: |
        Отображается экран Закладки на последнем закрытом табе
        По умолчанию отображается таб Мои места
        iOS: Экран закладок можно свайпать за верхний край
    - do: Тап по табу Остановки
    - assert: |
        Отображается кнопка Закрыть
        Присутствуют три таба “Мои места” “Остановки” и “Маршруты”
        Отображается заглушка
        iOS: Экран закладок можно свайпать за верхний край
    - do: Тап по табу Маршруты
    - assert: |
        Открывается экран Закладки на табе “Маршурты”
        Отображается кнопка Закрыть
        Присутствуют три таба “Мои места” “Остановки” и “Маршруты”
        Отображается заглушка
        iOS: Экран закладок можно свайпать за верхний край
    - do: Тап по кнопке “Закрыть”
    - assert: |
        Отображается меню приложения

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin


  Авторизация на экране закладок в табе остановок без добавленных закладок:
    - info: |
        Пользователь не авторизован
        В избранном нет сохраненного транспорта и остановок
        Отображается меню приложения
    - do: Тап на кнопку Закладки и Мой транспорт
    - do: Тап на таб Остановки
    - assert: |
        Отображается текст-заглушка о сохранении транспорта в избранном
        Присутсвует сообщение с кнопкой авторизации
    - do: Тап на кнопку авторизации
    - assert: Отображается экран авторизации/карусель аккаунтов
    - do: Закрыть отобразившийся экран
    - assert: По-прежнему отображается экран Закладки, открытый на табе Остановки
    - do: Тап на кнопку авторизации
    - assert: Отображается экран авторизации/карусель аккаунтов
    - do: Авторизоваться аккаунтом без избранного ОТ
    - assert: |
        По-прежнему отображается экран Закладки, открытый на табе Остановки
        Отображается текст-заглушка о сохранении транспорта в избранном
        Сообщение с кнопкой авторизации не отображается
    - do: Разлогиниться в приложении
    - do: Вернуться на экран закладок
    - assert: |
        Открыт таб Остановки
        Отображается текст-заглушка о сохранении транспорта в избранном
        Присутсвует сообщение с кнопкой авторизации
    - do: Авторизоваться аккаунтом с избранным ОТ
    - assert: |
        Отображается список остановок, добавленных пользователем
        Сообщение с кнопкой авторизации не отображается

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin


  Авторизация на экране Закладки (таб Маршруты) без добавленных закладок:
    - info: |
        Пользователь не авторизован
        В избранном нет сохраненного транспорта и остановок
        Открыто меню
    - do: Тап на кнопку Закладки и Мой транспорт
    - assert: |
        По умолчанию открыт таб Места экрана Закладки
    - do: Тап по табу Маршруты
    - assert: |
        Открывается экран Закладки на табе “Маршурты”
        Отображается текст-заглушка о сохранении транспорта в избранном
        Ниже отображается предложение авторизоваться с кнопкой входа
    - do: Тап на кнопку авторизации
    - assert: Отображается экран авторизации/карусель аккаунтов
    - do: Закрыть отобразившийся экран
    - assert: По-прежнему отображается экран Закладки, открытый на табе Маршруты
    - do: Тап на кнопку авторизации
    - assert: Отображается экран авторизации/карусель аккаунтов
    - do: Авторизоваться аккаунтом без избранного ОТ
    - assert: |
        По-прежнему отображается экран Закладки, открытый на табе Маршруты
        Отображается текст-заглушка о сохранении транспорта в избранном
        Предложение авторизоваться не отображается
    - do: Разлогиниться в приложении и вернуться в Закладки
    - assert: |
        Открыт экран Закладки на табе “Маршурты”
        Отображается текст-заглушка о сохранении транспорта в избранном
        Ниже отображается предложение авторизоваться с кнопкой входа
    - do: Авторизоваться аккаунтом с избранным ОТ
    - assert: Отображается список маршрутов, добавленных пользователем

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Добавление транспорта в избранное:
    - info: |
        На аккаунте нет сохраненного транспорта
        После установки сборки транспорт не был добавлен в избранное
        Приложение запущено
        Открыта главная карта
        Включен слой транспорта
    - do: Тап по пину транспорта
    - assert: Открывается карточка транспорта
    - do: Тап по кнопке Сохранить
    - assert: Появляется поп-ап
    - do: Тап по кнопке Понятно
    - assert: |
        Поп-ап закрылся
        Отображается  карточка остановки
        Вместо кнопки Сохранить отображается кнопка Удалить
    - do: Закрыть карточку транспорта
    - assert: Открыта главная карта
    - do: Тап по пину транспорта любого другого маршрута
    - assert: Открывается карточка транспорта
    - do: Тап по кнопке Сохранить
    - assert: |
        Поп-ап не появляется
        Отображается  карточка транспорта
        Вместо кнопки Сохранить отображается кнопка Удалить

    - tags:
        - assessors
        - use_map
        - newbie
    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
    - testing:
        - lite_acceptance_maps

  Добавление остановки общественного транспорта в избранное:
    - info: |
        На аккаунте нет сохраненного транспорта
        После установки сборки остановки не были добавлены в избранное
        Приложение запущено
        Открыта главная карта
    - do: Тап по иконке остановки
    - assert: Открыта карточка остановки общественного транспорта
    - do: Тап по Сохранить в Мой транспорт
    - assert: Появляется поп-ап
    - do: Свайпом закрыть поп-ап
    - assert: Поп-ап закрыт
    - do: Тап по иконке другой остановки
    - assert: Открыта карточка остановки общественного транспорта
    - do: Тап по Сохранить
    - assert: Поп-ап не появляется

    - tags:
        - assessors
        - use_map
        - newbie
    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
    - testing:
        - lite_acceptance_maps

  Добавление остановки в избранное:
    - info: |
        Ранее пользователь не добавлял остановки в закладки
        Открыта карточка остановки (Тап на остановку на карте)
    - do: Тап на кнопку Сохранить
    - assert: |
        Отображается  поп-ап об успешном добавлении  остановки в закладки
        Ниже отображается кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается  карточка остановки
        Вместо кнопки Сохранить отображается кнопка Удалить
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        При повороте ничего не съехало
        Карточка остановки отображается слева
    - do: Тап по крестику в карточке остановки
    - assert: |
        Отображается карта с контролами
        Пин добавленной в избранное остановки отображается в желтом цвете

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps

  Удаление маршрута из Мой Транспорт:
    - info: |
        Раннее маршруты уже были добавлены в Мой транспорт
        Включен слой ОТ и саджест Мой транспорт
    - do: Открыть карточку избранного маршрута
    - assert:  |
        Открыта мини-карточка избранного маршрута
        Приутствует кнопка Удалить
    - do: Тап на Удалить
    - assert:
        Открыта мини-карточка маршрута
        Приутствует кнопка сохранения в избранное
    - do: Закрыть карточку маршрута
    - assert: |
        Отображается главный экран приложения
        На карте не отображается маршрут, который только что удалили
    - do: Выключить чекбокс Мой транспорт
    - assert: |
        Отображается весь транспорт на карте
        Ранее удаленный из избранного маршрут отображается на карте
    - do: Добавить другой маршрут в избранное
    - assert: |
        Маршрут добавлен в избранное
    - do: Включить чекбокс Мой транспорт
    - assert: |
        Отображается избранный транспорт на карте
        Ранее добавленный в избранное маршрут отображается на карте

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
        - newbie
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - kotlin

  Отображение меток ОТ при добавленном маршруте в закладки:
    - do: Тап на таб "Транспорт"
    - do: Тап на пин остановки
    - do: Тап на произвольный маршрут
    - assert: |
        Отображается карточка маршрута
        В карточке присуствует кнопка сохранения маршрута
    - do: Тап на кнопку сохранения маршрута
    - assert: |
        Кнопка сохранения маршрута изменила состояние на активное
        Надпись "Сохранить" заменилась на "Удалить"
    - do: Закрыть карточку маршрута
    - do: Закрыть карточку остановки
    - assert: |
        Отображается главный экран МЯК в режиме Транспорт
        На экране отображаются живые метки всех машрутов, включая добавленный в Избранное
    - do: Тап на остановку ОТ, через которую не ходит маршрут, добавленный в Избранное
    - assert: На карте отображаются только живые метки маршрутов, которые проходят через эту остановку
    - do: Тап на любой маршрут в карточке остановки
    - assert: На карте отображаются живые метки только выбранного маршрута

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Открытие экрана Мой транспорт с добавленными закладками:
    - info: Отображается меню приложения
    - do: Тап по кнопке Закладки и мой транспорт
    - assert: Отображается экран мест и закладок
    - do: Тап по табу Остановки
    - assert: |
        Открыт таб Остановки
        На IOS присутствует грип в верху карточки, на Android грип отсутствует
        Справа от заголовка отображается кнопка Закрыть в виде крестика
        Ниже находятся табы Места, Остановки и Маршруты
        Таб Остановки выделен
        Android Ниже расположен список добавленных закладок с Остановками
        iOS Ниже расположены сниппеты остановок
    - do: Тап по табу Маршруты
    - assert: |
        Открыт таб Маршруты
        На IOS присутствует грип в верху карточки, на Android грип отсутствует
        Справа от заголовка отображается кнопка Закрыть в виде крестика
        Ниже находятся табы Места, Остановки и Маршруты
        Открыт таб Маршруты
        Ниже расположен список добавленных маршрутов в закладки
        У маршрута отображается иконка, его номер и тип (Троллейбус, Автобус и тд)
    - do: Тап по кнопке Закрыть
    - assert: |
        Экран мест и закладок закрылся
        Отображается меню

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin

  Удаление остановки из избранного:
    - info: |
        Открыт главный экран  приложения
        Пользователь авторизован
        Ранее пользователь добавил несколько остановок в избранное
    - do: Тап на избранную остановку ОТ
    - assert: |
        Отображается миникарточка остановки ОТ
        (Android) В нижней части экрана кнопки в action-баре: Маршрут, Удалить, Расписание, Такси.
        (IOS) В нижней части экрана кнопки action-баре: Маршрут, Удалить, Такси, Поделиться.
    - do: Тап на кнопку Удалить
    - assert: |
        Закладка удаляется
        В карточке остановки вместо кнопки Удалить отображается Сохранить
    - do: Тап на крестик в карточке остановки
    - assert: |
        Карточка остановки закрылась
        Отображается карта
        На карте вместо пина избранной остановки отображается стандартный пин
    - do: Тап по кнопке меню
    - assert:  Открывается главное меню экрана
    - do: Тап на раздел Закладки и мой транспорт
    - assert: |
        Отображается экран Закладки
        Ниже три раздела Мои места, Остановки и Маршруты
        В разделе Остановки отображаются  избранные остановки
        В списке отсутствует остановка, которая была удалена в шаге 2

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
        - newbie
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - integration_run:
        - kotlin

  Синхронизация избранных остановок неавторизованного пользователя при авторизации:
    - info: |
        Пользователь не авторизован
        Отображается главный экран приложения
    - do: Добавить несколько остановок в закладки
    - do: Открыть меню приложения
    - do: Авторизоваться аккаунтом с добавленными остановками в закладки
    - assert: Пользователь авторизован
    - do: Перейти на экран закладок
    - do: Тап на таб Остановки
    - assert: В табе Остановки присутсвуют остановки, добавленные неавторизованным пользователем
    - do: Вернуться в меню
    - do: Разлогиниться
    - do: Вернуться на экран закладок
    - assert: Список избранных остановок пуст

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Синхронизация избранных маршрутов неавторизованного пользователя при авторизации:
    - info: |
        Пользователь не авторизован
        Отображается главный экран приложения
    - do: Добавить несколько маршрутов ОТ в закладки
    - do: Открыть меню приложения
    - do: Авторизоваться аккаунтом с добавленными маршрутами ОТ в закладки
    - assert: Пользователь авторизован
    - do: Перейти на экран закладок (Меню->Закладки и мой транспорт)
    - do: Выбрать вкладку Маршруты
    - assert: Присутствуют маршруты ОТ, добавленные неавторизованным пользователем
    - do: Вернуться в меню
    - do: Разлогиниться
    - do: Вернуться на экран закладок
    - assert: Список избранных маршрутов пуст

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin


  Отображение попапа при добавлении маршрута в Мой Транспорт:
    - info: |
        Раннее маршруты в Мой Транспорт НЕ были добавлены
        Слой ОТ выключен
        Устройство в вертикальной ориентации
        Открыта карточка маршрута (Тап на остановку на карте -> Тап на маршрут ОТ)
    - do: Тап на Сохранить
    - assert: |
        Отображается поп-ап об успешном добавлении в закладки
        Ниже кнопка Понятно
    - do: Изменить ориентацию на горизонтальную
    - assert:  Поп-ап по-прежнему отображается
    - do: Тап на Понятно
    - assert:  Поп-ап скрылся Отображается карточка маршрута Кнопка Сохранить  изменила состояние на Удалить

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Переход к карточке остановки с экрана Мой транспорт:
    - info: |
        В избранное добавлены карточки остановок
        В избранное не добавлены маршруты
        Открыто меню
    - do: Тап по кнопке Закладки и мой транспорт
    - assert: |
        Отображается экран Закладки(Android)/Мои места и транспорт(iOS) на последнем закрытом табе
        По умолчанию отображается таб Места
    - do: Тап по табу Остановки
    - assert: |
        Открывается экран с заголовком Закладки(Android)/Мои места и транспорт(iOS)
        На IOS присутствует грип в верху карточки, на Android грип отсутствует
        Справа от заголовка находится кнопка Закрыть
        Ниже находятся три таба: Места, Остановки и Маршруты
        Открыт таб Остановки
        Ниже расположены сниппеты остановок, в сниппете присутствуют название остановки и блоки маршрутов, которые ходят через эту остановку
    - do: Тап по названию любой остановки
    - assert: |
        Открывается мини-карточка остановки
        Пин остановки поднят
        Пин остановки отображается жёлтым цветом
        В карточке остановки отображается шапка
        Шапка отделена от основного блока карточки разделителем
        В основном блоке отображается список маршрутов, проходищих через избранную остановку
        (Android) В нижней части экрана кнопки в action-баре: Маршрут, Удалить, Расписание, Такси.
        (IOS) В нижней части экрана кнопки action-баре: Маршрут, Удалить, Расписание, Такси, Поделиться.
    - do: Свайпом раскрыть карточку
    - assert: |
        Открывается полная карточка остановки
    - do: Тап на любой маршрут из списка
    - assert: |
        Открывается мини-карточка маршрута
        В карточке присутствует блок с описанием маршрута
        Отображается кнопка "Другие рейсы маршрута" с возможностью изменить рейс
        Внизу расположена кнопка Сохранить со значком закладки и Расписание
        Значок не окрашен
    - do: Тап на Сохранить
    - assert: Появился поп-ап о сохранении маршрута в Закладки(Android)/Мои транспорт(iOS)
    - do: Тап на Понятно
    - assert: |
        Поп-ап закрылся
        Открыта мини-карточка маршрута
        В карточке присутствует блок с описанием маршрута
        Отображается кнопка "Другие рейсы маршрута" с возможностью изменить рейс
        Внизу расположена кнопка "Удалить" со значком закладки
        Значок окрашен
    - do: Закрыть карточку
    - assert: |
        Открывается мини-карточка остановки
        Пин остановки поднят
        Пин остановки отображается жёлтым цветом
        В карточке остановки отображается шапка
        Шапка отделена от основного блока карточки разделителем
        В основном блоке отображается блок Сохранённые маршруты с добавленным маршрутом
        Ниже отображается блок со списком маршрутов, проходящих через избранную остановку
        Внизу карточки отображены кнопки: Маршрут, Удалить, Расписание, Такси

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps

  Переход к карточке маршрута с экрана Мой транспорт:
    - info: |
        В избранное добавлены карточки маршрутов
        По умолчанию отображается таб Места в пункте "Закладки и мой транспорт", если пользователь не переключался между табами
        Открыто меню (Тап на таб Меню)
    - do: Тап по кнопке "Закладки и мой транспорт"
    - assert: |
        Отображается экран "Мои места и транспорт" на последнем закрытом табе
    - do: Тап по табу Остановки
    - assert: |
        Отображается экран "Мои места и транспорт"
        Отображаются избранные остановки (если добавлены)
    - do: Тап на табе Маршруты
    - assert: |
        Открыт экран "Мои места и транспорт"
        Открыт таб Маршруты
        Ниже расположен список избранных маршрутов
        У маршрутов отображается иконка, название типа транспорта и номер
    - do: Выбрать маршрут из списка
    - assert: |
        Цвет линии маршрута - серый для электричек, канатных дорог и фуникулёра, фиолетовый для трамваев, троллейбусов, автобусов и маршруток
        Открывается мини-карточка маршрута
        Отображается кнопка "Другие рейсы маршрута" с возможностью изменить рейс
        Внизу расположена кнопка Удалить со значком закладки, значок окрашен, и кнопка Расписание
    - do: Раскрыть мини-карточку
    - assert: |
        Открыта полная карточка маршрута
        В карточке присутствует блок с описанием маршрута
        Отображается кнопка "Другие рейсы маршрута" с возможностью изменить рейс
        Внизу расположена кнопка Удалить со значком закладки, значок окрашен, и кнопка Расписание

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Удаление избранных маршрутов и остановок из Мой транспорт через экран редактирования авторизованным пользователем:
    - info: |
        Пользователь авторизован
        На аккаунте имеются избранные остановки и маршруты
        Открыт главный экран приложения
    - do: Тап по кнопке меню
    - assert:  Открывается главное меню экрана
    - do: Тап на кнопку Закладки и Мой транспорт
    - assert: |
        Анимировано открывается экран Закладки на табе Остановки
        iOS присутствует грип в верху карточки, Android грип отсутствует Ниже находятся три таба Мои места “Остановки” и “Маршруты” По умолчанию открыт таб “Остановки” Если есть избранные остановки, то ниже расположен список добавленных закладок с Остановками
        Если избранных остановок нет, то ниже отображается текст-заглушка
        Нажмите (иконка в виде закладки) в карточке остановки, чтобы она появилась в этом разделе Если на табе есть избранные маршруты, кнопка редактирования активна и задизейблена если маршруты отсутствуют
    - do: Тап на три точки
    - assert: |
        Открывается новый поп-ап
        Сверху присутствует грип
        Ниже заголовок Мой транспорт Справа кнопка Готово
        Ниже табы Остановки и Маршруты Если есть избранные остановки, то ниже расположен список добавленных закладок с Остановками Справа у каждой строки кнопка удаления в виде красного круга с белым минусом Если избранных остановок нет, то отображается текст-заглушка
    - do: Тап на минус у любой строки
    - assert:  Справа от строки анимировано выползает кнопка Удалить
    - do: Тап на Удалить
    - assert: |
        Выбранная строка удаляется
        Отображается список избранных остановок без остановки, которая была удалена в предыдущем шаге

    - platforms:
        - ios
    - tags:
        - assessors

  Удаление избранных маршрутов и остановок из Мой транспорт через экран редактирования авторизованным пользователем на табе Маршруты:
    - info: |
        Пользователь авторизован
        На аккаунте имеются избранные остановки и маршруты
        Открыт главный экран приложения
    - do: Тап по кнопке меню
    - assert:  Открывается главное меню экрана
    - do: Тап на кнопку Закладки и Мой транспорт
    - assert: |
        Анимировано открывается экран Закладки на табе Остановки
        Слева от заголовка кнопка редактирования, справа кнопка закрыть
        iOS присутствует грип в верху карточки, Android грип отсутствует Ниже находятся три таба Мои места “Остановки” и “Маршруты” По умолчанию открыт таб “Остановки” Если есть избранные остановки, то ниже расположен список добавленных закладок с Остановками
        Если избранных остановок нет, то ниже отображается текст-заглушка
        Нажмите (иконка в виде закладки) в карточке остановки, чтобы она появилась в этом разделе Если на табе есть избранные маршруты, кнопка редактирования активна и задизейблена если маршруты отсутствуют
    - do: Перейти на таб Маршруты
    - do: Тап на кнопку редактирования
    - assert: |
        Открывается новый поп-ап
        Сверху присутствует грип
        Ниже заголовок Закладки Справа кнопка Готово
        Ниже избранные избранные маршруты
        Если избранных маршрутов нет, то отображается текст-заглушка
    - do: Тап на минус у любой строки
    - assert:  Справа от строки анимировано выползает кнопка Удалить
    - do: Тап на Удалить
    - assert: |
        Выбранная строка удаляется
        Отображается список избранных маршрутов без остановки, которая был удалена в предыдущем шаге

    - platforms:
        - ios
    - tags:
        - assessors

  Удаление избранных маршрутов и остановок из Мой транспорт через экран редактирования неавторизованным пользователем:
    - info: |
        Пользователь не авторизован
        В избранное добавлены маршруты и остановки
        Открыт главный экран приложения
    - do: Тап по кнопке меню
    - assert:  Открывается главное меню экрана
    - do: Тап на кнопку Закладки и Мой транспорт
    - assert:  Анимировано открывается экран Закладки на табе Остановки
    - do: Перейти на таб Маршруты
    - do: Тап на кнопку редактирования
    - assert: |
        Открывается новый поп-ап с заголовком Мой транспорт Сверху присутствует грип Справа кнопка Готово Ниже табы Остановки и Маршруты
        Справа у каждой строки кнопка удаления в виде красного круга с белым минусом
        Если избранных остановок нет, то отображается текст-заглушка
    - do: Тап на минус у любой строки
    - assert:  Справа от строки анимировано выползает кнопка Удалить
    - do: Тап на Удалить
    - assert:  Выбранная строка удаляется  Отображается список избранных остановок без остановки, которая была удалена в предыдущем шаге

    - platforms:
        - ios
    - tags:
        - assessors

  Удаление избранных маршрутов и остановок из Мой транспорт через экран редактирования неавторизованным пользователем на табе маршруты:
    - info: |
        Пользователь не авторизован
        В избранное добавлены маршруты и остановки
        Открыт главный экран приложения
    - do: Тап по кнопке меню
    - assert:  Открывается главное меню экрана
    - do: Тап на кнопку Закладки и Мой транспорт
    - assert:  Анимировано открывается экран Закладки на табе Остановки
    - do: Тап на кнопку редактирования
    - assert: |
        Открывается новый поп-ап с заголовком Мой транспорт Сверху присутствует грип Справа кнопка Готово Ниже табы Остановки и Маршруты
        Справа у каждой строки кнопка удаления в виде красного круга с белым минусом
        Если избранных маршрутов нет, то отображается текст-заглушка
    - do: Тап на минус у любой строки
    - assert:  Справа от строки анимировано выползает кнопка Удалить
    - do: Тап на Удалить
    - assert:  Выбранная строка удаляется  Отображается список избранных маршрутов без маршрута, который был удален в предыдущем шаге

    - platforms:
        - ios
    - tags:
        - assessors


  Удаление всех избранных маршрутов и остановок на экране закладок, пользователь авторизован:
    - info: |
        Добавлены маршруты и остановки в избранное
        Открыть главный экран приложения
        Пользователь авторизован
    - do: Тап по кнопке меню
    - assert: Отображается меню приложения
    - do: Тап на Закладки и мой транспорт
    - assert: |
        Анимировано открывается экран закладок
        По умолчанию отображается таб, который был открыт последним
    - do: Открыть таб Остановки
    - do: Тап на кнопку редактирования напротив сниппета любой остановки
    - assert: |
        Открывается поп-ап с кнопками:
        - (iOS) Переименовать, Удалить
        - (Android) Редактировать, Удалить
    - do: Тап Удалить
    - assert: |
        Отображается поп-ап подтверждения удаления с кнопками
        - (iOS) Удалить, Отменить
        - (Android) Удалить
    - do: Тап Удалить
    - assert: Остановка удалена из закладок
    - do: Удалить аналогичным образом и другие остановки
    - assert: |
        Таб Остановки пуст
        Ниже отображается текст-заглушка 'Нажмите (иконка в виде закладки) в карточке остановки, чтобы она появилась в этом разделе'
    - do: Перейти на таб Маршруты
    - assert: Таб Маршруты активен
    - do: Удалить все маршруты из избранного
    - assert: |
        Таб Маршруты пуст
        Ниже отображается текст-заглушка “Нажмите (иконка в виде закладки) в карточке маршрута, чтобы она появилась в этом разделе”
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        На карте не отображаются избранные остановки
        В карточках остановок отсутствуют избранные маршруты

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Удаление всех избранных маршрутов и остановок на экране закладок, пользователь неавторизован:
    - info: |
        Добавлены маршруты и остановки в избранное
        Открыть главный экран приложения
        Пользователь неавторизован
    - do: Тап по кнопке меню
    - assert: Отображается меню приложения
    - do: Тап на Закладки и мой транспорт
    - assert: |
        Анимировано открывается экран закладок
        По умолчанию отображается таб, который был открыт последним
    - do: Открыть таб Остановки
    - do: Тап на кнопку редактирования напротив сниппета любой остановки
    - assert: |
        Открывается поп-ап с кнопками:
        - (iOS) Переименовать, Удалить
        - (Android) Редактировать, Удалить
    - do: Тап Удалить
    - assert: |
        Отображается поп-ап подтверждения удаления с кнопками
        - (iOS) Удалить, Отменить
        - (Android) Удалить
    - do: Тап Удалить
    - assert: Остановка удалена из закладок
    - do: Удалить аналогичным образом и другие остановки
    - assert: |
        Таб Остановки пуст
        Ниже отображается текст-заглушка 'Нажмите (иконка в виде закладки) в карточке остановки, чтобы она появилась в этом разделе'
    - do: Перейти на таб Маршруты
    - assert: Таб Маршруты активен
    - do: Удалить все маршруты из избранного
    - assert: |
        Таб Маршруты пуст
        Ниже отображается текст-заглушка “Нажмите (иконка в виде закладки) в карточке маршрута, чтобы она появилась в этом разделе”
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        На карте не отображаются избранные остановки
        В карточках остановок отсутствуют избранные маршруты

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Отображение сниппета остановки на экране Мой транспорт, если в ней меньше 4 маршрутов:
    - info: |
        У пользователя добавлены избранное остановки, у которых 3, 2, 1 маршрут (маршруты не добавлены в избранное)
        Открыто меню
    - do: Тап на кнопку Закладки и мой транспорт
    - assert: Открылся экран закладки
    - do: Тап по табу Остановки
    - assert: |
        Открылся экран Закладки на табе “Остановки”
        Отображаются все блоки с маршрутами (3 - если 3 маршрута, 2 - если 2 маршрута, 1 - если 1 маршрут)
        Следующий сниппет остановки отображается через широкий разделитель

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Отображение сниппета остановки на экране Мой транспорт, если в ней больше 3 маршрутов:
    - info: |
        У пользователя добавлены избранное остановки, у которых больше 3 маршрутов
        Избранных маршрутов нет
        Открыто меню
    - do: Тап на кнопку Закладки и мой транспорт
    - assert: Открылся экран закладки
    - do: Тап по табу Остановки
    - assert: |
        Открылся экран Закладки на табе “Остановки”
        Отображаются первые два ближайших к остановке маршрута, другие маршруты скрыты под кнопкой Еще N маршрутов
        Следующий сниппет остановки отображается через широкий разделитель
    - do: Тап на кнопку Еще N маршрутов
    - assert: |
        Кнопка изменилась на Свернуть
        Список скрытых маршрутов развернулся
    - do: Тап на кнопку “Свернуть”
    - assert: |
        Кнопка изменилась на “Еще N маршрутов”
        Список маршрутов свернулся, отображаются только два ближайших к остановке маршрута

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Отображение сниппета остановки на экране Мой транспорт, если в ней есть избранные маршруты:
    - info: |
        У пользователя добавлена избранная остановка, у которых больше 3 маршрутов (маршруты не добавлены в избранное)
        Открыто меню
    - do: Тап на кнопку Закладки и мой транспорт
    - assert: Открылся экран закладки
    - do: Тап по табу Остановки
    - assert: |
        Открылся экран Закладки на табе “Остановки”
        Присутствуют три таба “Места” “Остановки” и “Маршруты”
        Отображаются сниппеты остановок, в которых присутствуют:
          - Название остановки
          - Расстояние до остановки (если местоположение определено)
          - Блоки с маршрутами, в которых есть: иконка соответствующего типа маршрута, номер, интервал движения или время приезда следующего транспорта
          - Блоки маршрутов c разделенной линией-разделителем
          - Первые два ближайших к остановке маршрута
          - Другие маршруты скрыты под кнопкой Еще N маршрутов
          - Следующий сниппет остановки отображается через широкий разделитель
    - do: Тап на маршрут в остановке, в которой больше 3 маршрутов и не один из них не добавлен в избранное
    - assert: |
        Пин избранной остановки активен
        Произошел призум к спану с меткой и остановкой ОТ
        Открывается миникарточка маршрута
        Внизу присутствуют кнопка Сохранить в мой транспорт
    - do: Тап на кнопку “Сохранить”
    - assert: Кнопка изменяется на Удалить
    - do: Тап на крестик в миникарточке
    - assert: |
        Открывается экран Закладки
        В снипете остановки, у которой был добавлен избранный маршрут, отображается только он, другие маршруты скрыты
        Ниже отображается Еще N маршрутов (где N: количество маршрутов - 1)
    - do: Добавить все оставшиеся маршруты на этой остановке в избранное
    - assert: В сниппете остановки отображаются все маршруты, не зависимо от их количества

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Отображение сниппета остановки на экране Мой транспорт, если в ней есть сохраненные маршруты:
    - info: |
        У пользователя добавлена избранная остановка, у которых больше 3 маршрутов (маршруты не добавлены в избранное)
        Открыто меню
    - do: Тап на кнопку Закладки и мой транспорт
    - assert: Открылся экран закладки
    - do: Тап по табу Остановки
    - assert: |
        Открылся экран Закладки на табе “Остановки”
        Присутствуют три таба “Места” “Остановки” и “Маршруты”
        Отображаются сниппеты остановок, в которых присутствуют - Название остановки (если название не влезает в одну строку, оно зарекается троеточием)
        Под названием остановки отображается расстояние до остановки (если местоположение определено)
        Ниже блоки с маршрутами, в которых есть иконка соответствующего типа маршрута, номер, интервал движения или время приезда следующего транспорта
        Блоки маршрутов разделены линией-разделителем
        Отображаются первые два ближайших к остановке маршрута, другие маршруты скрыты под кнопкой Еще N маршрутов
        Следующий сниппет остановки отображается через широкий разделитель
    - do: Тап на маршрут в остановке, в которой больше 3 маршрутов и не один из них не добавлен в избранное
    - assert: |
        Пин избранной остановки активен
        Произошел призум к спану с меткой и остановкой ОТ
        Открывается миникарточка маршрута
        Внизу присутствуют кнопка Удалить
    - do: Тап на Удалить
    - assert: Кнопка изменяется на Сохранить
    - do: Тап на Сохранить
    - do: Тап на крестик в миникарточке
    - assert: |
        Открывается экран Закладки
        В снипете остановки, у которой был добавлен избранный маршрут, отображается только он, другие маршруты скрыты
        Ниже отображается Еще N маршрутов (где N: количество маршрутов - 1)
    - do: Добавить все оставшиеся маршруты на этой остановке в избранное
    - assert: В сниппете остановки отображаются все маршруты, не зависимо от их количества

    - platforms:
        - android
    - tags:
       - assessors
    - testing:
        - acceptance_maps

  Отображение ошибки Нет соединения с интернетом на экране закладок:
    - info: |
        У пользователя добавлены остановки в избранное
        Выключен интернет
        Открыт главный экран приложения
    - do: Тап по кнопке меню
    - assert: Отображается меню приложения
    - do: Тап на Закладки и мой транспорт
    - do: Тап на таб Остановки
    - assert: |
        Открывается экран закладок
        Справа от заголовка кнопка закрыть
        Ниже находятся табы Места, Остановки и Маршруты
        Активен таб Остановки
    - do: Включить интернет
    - do: Тап на кнопку Попробовать снова
    - assert: |
        Происходит загрузка сниппетов остановок
        Через некоторое время отображаются сниппеты остановок

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit
        - kotlin

  Сортировка остановок и маршрутов на экране закладок:
    - info: |
        У пользователя добавлены избранные остановки и маршруты
        ММП определено
        Отображается главный экран приложения
    - do: Тап по кнопке меню
    - assert: Открывается главное меню приложения
    - do: Тап на Закладки и Мой транспорт
    - do: Тап на таб Остановки
    - assert: |
        Отображается экран закладок на табе Остановки
        Отображаются виджеты остановок
        Под названием остановки отображается расстояние до нее
        Остановки отсортированы по близости к пользователю
        Самые ближайшие вверху
    - do: Тап на таб Маршруты
    - assert: |
        Отображаются добавленные маршруты
        Маршруты отсортированы по порядку добавления
        Последние добавленные внизу
    - do: Закрыть экран закладок
    - do: Закрыть меню приложения
    - assert: Отображается главный экран приложения
    - do: Запретить доступ к геолокации для приложения в настройках устройства
    - do: Тап по кнопке меню
    - assert: Открывается главное меню приложения
    - do: Тап на Закладки и мой транспорт
    - do: Тап на таб Остановки
    - assert: |
        Открывается экран закладок
        Отображаются виджеты остановок
        Расстояние до остановки не отображается
        Остановки отсортированы по порядку добавления
        Последние добавленные внизу
    - do: Тап на таб Маршруты
    - assert: |
        Отображаются добавленные маршруты
        Маршруты отсортированы по порядку добавления
        Последние добавленные внизу

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit

  Удаление невалидной избранной остановки из карточки:
    - info: |
        В Мой транспорт добавлены невалидные остановки
        Невалидную остановку можно добавить только на Android:
        Чтобы добавить невалидную остановку:
        В Дебаг-панели в разделе Various тап на пункт "Fill invalid stops and lines"
        Невалидную остановку можно добавить только на Android
        Для проверки кейса на iOS, нужно добавить невалидную остановку с помощью устройства Android, на тот же аккаунт, который используется для тестирования iOS
        Отображается экран Закладки, таб Остановки
    - do: Тап на невалидную остановку
    - assert: |
        Отображается миникарточка остановки ОТ
        В ней отображается:
        - сообщение 'Не удалось загрузить информацию'
        - кнопка обновления
        - кнопка закрытия
        - кнопка удаления
    - do: Тап на кнопку удаления
    - assert: |
        Кнопка меняется на загрузочный стаб
        Если после этого карточка остановки загрузится, то появится кнопка сохранения
    - do: Тап на кнопку закрытия
    - assert: |
        Отображается экран Закладки на табе Остановки
        Удалённая невалидная остановка не отображается

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit

  Удаление невалидного избранного маршрута из карточки:
    - info: |
        В закладки добавлены невалидные маршруты
        Чтобы добавить невалидный маршрут:
        В дебаг-панели в разделе Various тап на пункт "Fill invalid stops and lines"
        Невалидный маршрут можно добавить только на Android
        Для проверки кейса на iOS, нужно добавить невалидный маршрут с помощью устройства Android, на тот же аккаунт который используется для тестирования iOS
        Отображается экран Закладки на табе Маршруты
    - do: Тап на невалидный маршрут
    - assert: |
        Отображается мини-карточка маршрута ОТ
        Присутствует сообщение 'Ошибка загрузки'
        Отображается кнопка удаления
    - do: Тап на кнопку удаления
    - assert: |
        Кнопка меняется на загрузочный стаб
        Если после этого карточка маршрута загрузится, то появится кнопка сохранения
    - do: Закрыть карточку маршрута
    - assert: |
        Отображается экран Закладки на табе Маршруты
        Удалённый невалидный маршрут не отображается

    - platforms:
        - ios
    - tags:
        - assessors
        - mapkit_ready
        - newbie
    - integration_run:
        - mapkit


  Отображение ошибки загрузки в сниппетах остановок на экране Мой транспорт:
    - info: |
        У пользователя добавлены такое количество остановок в избранное, чтобы на экране Мой транспорт был скролл
    - do: Тап по кнопке меню
    - assert:  Открывается главное меню экрана
    - do: Тап на кнопку Закладки и Мой транспорт
    - assert: |
        Анимировано открывается экран Закладки на табе Остановки
        Слева от заголовка кнопка редактирования, справа кнопка закрыть
        Ниже находятся три таба Мои места “Остановки” и “Маршруты”
        По умолчанию открыт таб “Остановки” Если есть избранные остановки, то ниже расположен список добавленных закладок с Остановками Если избранных остановок нет, то ниже отображается текст-заглушка Нажмите (иконка в виде закладки) в карточке остановки, чтобы она появилась в этом разделе Если на табе есть избранные маршруты, кнопка редактирования активна и задизейблена если маршруты отсутствуют
    - do: Включить авиарежим
    - do: Прокрутить экран Закладки свайпом
    - assert: |
        Остановки, которые еще не нагрузились, отображаются в состоянии загрузки
        Через некоторое время в сниппете остановки на месте маршрутов отображается текст Ошибка загрузки

    - platforms:
        - ios
    - tags:
        - assessors

  Переход на экран закладок на аккаунте с остановкой без маршрутов в избранном:
    - info: |
        У пользователя нет сохраненных в закладки маршрутов и остановок
        Отображается главный экран приложения
    - do: |
        Сохранить остановку без маршрутов в закладки
        Напр., [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/без_маршрутов.png){title=QR-код}

        `https://yandex.ru/maps/org/21281312827`
    - do: Тап по кнопке меню
    - assert: Открывается главное меню экрана
    - do: Тап по кнопке Закладки и мой транспорт
    - assert: Открылся экран закладки
    - do: Тап по табу Остановки
    - assert: Сохраненная ранее остановка без маршрутов не отображается
    - do: Тап на таб Места
    - do: Открыть список, выбранный для сохранения остановки
    - assert: Отображается сохраненная ранее остановка ОТ

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Отображение избранного транспорта при активной кнопке Мой транспорт»:
    - info: |
        У пользователя добавлены маршруты в избранное
        Открыт главный экран приложения
    - do: Тап на таб “Транспорт”
    - assert: |
        На карте отображаются метки общественного транспорта
        Кнопка слоя транспорта стала активной Изменилось цветовое оформление подложки
        Кнопка “Мой транспорт” отображается рядом с саджестами
    - do: Тап на Мой транспорт
    - assert: |
        На карте стали отображаться только живые метки избранных маршрутов
        Чек-бокс на кнопке стал активным
    - do: Тап на маршрут ОТ
    - assert: |
        Отображается линия маршрута
        Отображается миникарточка выбранного маршрута
        В нижней части экрана кнопка  “Удалить”
    - do: Тап на Удалить
    - assert:  Кнопка изменила название на “Сохранить”
    - do: Тап на крестик в карточке маршрута
    - assert: |
        Отображается главный экран приложения
        На карте отображаются живые метки избранных маршрутов
        Метки удаленного маршрута не отображаются
        Если был удален последний избранный маршрут- на карте отображаются все метки общественного транспорта, чек-бокс кнопки “Мой транспорт” не активен
    - do: Тап на Мой транспорт
    - assert: |
        На карте отображаются метки общественного транспорта
        Чек-бокс на кнопке становится не активным
        Если нет избранных маршрутов- отображается поп-ап Эта кнопка оставляет на карте только избранный транспорт с инструкцией как его добавить и кнопка Понятно

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - use_map
        - newbie
    - testing:
        - acceptance_maps
        - lite_acceptance_maps

  Хинт при показе избранных меток в режиме «Транспорт»:
    - info: |
        Пользователь авторизован
        Добавлены маршруты в избранное
        Открыт главный экран приложения
    - do: Тап на таб Транспорт
    - assert: |
        Включен слой транспорта
        На карте отображаются метки ОТ
    - do: Тап на “Мой транспорт”
    - assert: |
        На карте отображаются только метки избранных маршрутов
        Отображается хинт над кнопкой Мой транспорт:
          - ios: На карте остался только сохранённый транспорт
          - android: На карте останутся только сохранённые маршруты
    - do: Подождать 5 секунд / Тап в любом месте
    - assert:  Хинт пропал
    - do: Тап на Мой транспорт
    - assert: |
        На карте отображаются все метки ОТ
        Отображается хинт над кнопкой “Мой транспорт”
          - ios: На карте показан весь транспорт
          - android: На карте будет показан весь транспорт
    - do: Подождать 5 секунд / Тап в любом месте
    - assert:  Хинт пропал
    - do: Перезагрузить приложение и повторить шаги с переключением чек-бокса Мой транспорт еще 2 раза
    - assert: |
        На второй раз снова отображается хинт и пропадает через 5 секунд или при любом взаимодействии с картой
        На третий раз хинт не отображается

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Удаление избранных маршрутов из Мой транспорт через экран редактирования:
    - info: |
        Пользователь авторизован
        На аккаунте имеются избранные остановки и маршруты
        Открыт главный экран приложения
    - do: Тап по кнопке меню
    - assert:  Открывается главное меню экрана
    - do: Тап по кнопке Закладки и мой транспорт
    - assert: Открылся экран закладки
    - do: Тап по табу Маршруты
    - assert: |
        Открывается таб маршруты
    - do: Тап на кнопку редактирования
    - assert: |
        Открывается режим редактирования
    - do: Тап в чекбокс любого элемента
    - assert:  Чекбокс выделен Кнопка Удалить активна
    - do: Тап на Удалить
    - assert:  Выбранная строка удаляется

    - platforms:
        - android
    - tags:
        - assessors


  Проверка логики кнопки Мой транспорт на главном экране:
    - info: |
        У пользователя нет избранных маршрутов
        Пользователь неавторизован
        Отображается главный экран приложения
    - do: Тап на таб “Транспорт”
    - assert: |
        На карте отображаются метки общественного транспорта
        Кнопка слоя транспорта стала активной
        Изменилось цветовое оформление подложки
        Кнопка “Мой транспорт” отображается рядом с саджестами
    - do: Тап на Мой транспорт
    - assert: |
        Отображается поп-ап Эта кнопка оставляет на карте только избранный транспорт с инструкцией как его добавить и кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается главный экран приложения
        Таб Транспорт активен Чек-бокс напротив кнопки Мой транспорт не активен
    - do: Тап на Мой транспорт
    - assert: |
        Отображается поп-ап Эта кнопка оставляет на карте только избранный транспорт с инструкцией как его добавить и кнопка Понятно
    - do: Сменить ориентацию устройства
    - assert: Элементы экрана не съехали и не пропали Слева отображается поп-ап “Эта кнопка оставляет на карте только избранный транспорт” с инструкцией как его добавить и кнопка “Понятно”
    - do: Тап на Понятно
    - assert: |
        Отображается главный экран приложения Таб Транспорт активен
        Чек-бокс напротив кнопки Мой транспорт не активен
    - do: Открыть карточку любого ОТ маршрута и добавить его в избранное
    - assert: |
        Иконка закладки изменила цвет
        Кнопка называется Удалить
        При первом добавлении маршрута в избранное отображается поп-ап об успешном добавлении маршрута  в закладки, в поп-апе отображается заголовок “ Маршрут сохранен в Мой транспорт”, Ниже текст “ Теперь он отображается выше других маршрутов в карточках остановок” Ниже отображается кнопка “Понятно”
    - do: Закрыть поп-ап и тап на Мой транспорт
    - assert: |
        На карте отображаются только живые метки избранных маршрутов
        Чек-бокс на кнопке стал активным
    - do: Выгрузить приложение из памяти
    - assert: |
        Отображается экран устройства
        Приложение отсутствует в списке запущенных
    - do: Запустить МЯК
    - assert: |
        Отображается главный экран приложения
        Таб Транспорт активен  Чек-бокс напротив кнопки “Мой транспорт” активен
        На карте отображаются только живые метки избранных маршрутов
    - do: Авторизоваться под пользователем у которого есть избранные маршруты ОТ
    - assert: Пользователь авторизован
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        Таб Транспорт активен
        Чек-бокс напротив кнопки “Мой транспорт” активен
        На карте отображаются только живые метки избранных маршрутов
    - do: Тап на таб “Транспорт”
    - assert: |
        Изменилось цветовое оформление подложки
        Кнопка слоя транспорта неактивна
        Кнопка “Мой транспорт” не отображается рядом с саджестами
    - do: Тап на таб “Транспорт”
    - assert: |
        Изменилось цветовое оформление подложки
        Таб Транспорт активен  Чек-бокс напротив кнопки “Мой транспорт” активен
        На карте отображаются только живые метки избранных маршрутов
    - do: Выйти из аккаунта в личном кабинете
    - assert: Пользователь не авторизован
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        Таб Транспорт активен
        Чек-бокс напротив кнопки “Мой транспорт” неактивен
        На карте отображаются все метки общественного транспорта
    - do: Тап на Мой транспорт
    - assert: |
        Отображается поп-ап Эта кнопка оставляет на карте только избранный транспорт с инструкцией как его добавить и кнопка Понятно

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - use_map
    - integration_run:
        - kotlin

  Отображение ночного маршрута ОТ:
    - info: Отображается главный экран приложения
    - do: Открыть карточку ночного маршрута ОТ любым способом
    - assert: |
        Отображается карточка маршрута
        В заголовке карточки отображается тип и номер ОТ, приписка Ночной Может отображаться кнопка Другие рейсы маршрута
        Отображается список остановок на маршруте
    - do: Тап Сохранить в Мой транспорт
    - assert:  Маршрут сохранен в избранное
    - do: Тап на любую остановку из списка
    - assert: |
        Отображается карточка остановки
        Первым маршрутом отображается сохраненный ночной маршрут
        У сохраненного маршрута отображается приписка Ночной
    - do: Тап Сохранить в Мой транспорт
    - assert:  Остановка сохранена в избранное
    - do: Закрыть все карточки ОТ
    - assert:  Отображается Главный экран приложения
    - do: Открыть закладки (Меню - Закладки)
    - assert:  Отображается таб Мои места
    - do: Тап Остановки
    - assert: |
        Отображается экран Остановки
        В списке отображается сохраненная остановка с ночным маршрутом
        У сохраненного маршрута отображается приписка Ночной
    - do: Тап Маршруты
    - assert: |
        Отображается экран Маршруты
        В списке отображается сохраненный ночной маршрут
        У сохраненного маршрута отображается приписка Ночной
    - do: Закрыть избранное и построить маршрут на общественном транспорте, проходящий по линии ночного маршрута ОТ
    - assert:  В списке вариантов отображается вариант на ночном маршруте
    - do: Тап Посмотреть на карте
    - assert: |
        Отображаются сниппет и детали маршрута
        У ночного транспорта отображается приписка

    - platforms:
        - android
        - ios
    - tags:
        - assessors

  Редактирование названия избранной остановки:  # MAPSMOBILETEST-634
    - info: |
        Пользователь авторизован
        У пользователя присутствуют избранные остановки
    - do: Тап Меню
    - assert: Отображается меню приложения
    - do: Тап Закладки и мой транспорт
    - assert: Отображается экран Мои места и транспорт
    - do: Тап по табу Остановки
    - assert: |
        Отображается экран Мои места и транспорт на табе Остановки
    - do: Тап по кнопке контекстного меню
    - assert: |
        Отображается поп-ап редактирования остановки
        Android: присутствуют кнопки Редактировать, Удалить
        iOS: присутствуют кнопки Переименовать, Удалить
    - do: Тап на Редактировать/Переименовать
    - assert: Отображается поп-ап редактирования названия
    - do: Изменить название остановки и тап Сохранить
    - assert: Название остановки в списке избранного изменилось
    - do: Перейти в карточку переименованной остановки
    - assert: В карточке остановки отображается оригинальное название
    - do: Перезапустить приложение и перейти на таб Остановок в закладках
    - assert: Название переименованной остановки не изменилось на оффициальную

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin

  Отмена внесения изменений при редактировании названия избранной остановки: # MAPSMOBILETEST-634
    - info: |
        Пользователь авторизован
        У пользователя присутствуют избранные остановки
        Отображается экран закладки на табе Остановки
    - do: Тап по кнопке редактирования
    - assert: |
        Отображается режим редактирования остановок
        Напротив названия остановок присутствует кнопка редактирования
    - do: Тап по кнопке редактирования около названия остановки
    - assert: Отображается поп-ап редактирования названия
    - do: Тап по кнопке, очистки поля ввода, в виде X
    - assert: |
        Поле ввода очистилось
        Кнопка сохранить не активна
    - do: Изменить ориентацию устройства
    - assert: |
        Поле ввода пустое
        Кнопка сохранить не активна
    - do: Ввести любое название в поле ввода
    - assert: Кнопка сохранить стала активной
    - do: Тап по кнопке Отменить
    - assert: изменения в названии к остановке не применились

    - platforms:
        - android
        - ios
    - tags:
        - assessors

  Открытие маршрута с экрана закладок: #MAPSMOBILETEST-727
    - info: |
        Пользователь авторизован
        У пользователя присутвуют избранные остановки и маршруты ОТ
        Отображается экран Закладки на табе Остановки
    - do: Тап по маршруту ОТ
    - assert: |
        Пин избранной остановки активен
        Произошел призум к спану с меткой и остановкой ОТ
    - do: Закрыть карточку маршрута
    - assert: |
        Отображается экран Закладки на табе Остановки
    - do: Тап по табу Маршруты
    - assert: |
        Отображается экран Закладки на табе Маршруты
    - do: Тап по маршруту ОТ
    - assert: |
        Отображается линия маршрута на спане карты
        Отображается кнопка "Другие рейсы" с возможностью изменить рейс
        Не у всех маршрутов есть другие рейсы
        Если необходимо то, произошел призум к линии маршрута

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps

  Добавление карточки ОТ, в которых отсутствует список транспорта:
    - info: |
        На спане карты город в котором есть карточки ОТ без транспорта
    - do: Тап на остановку ОТ без транспорта (Например, Птицефабрика)
    - assert:  Открылась мини карточка остановки ОТ Пин остановки выделился и поднялся
    - do: Раскрыть карточку ОТ
    - assert: Под название остановки присутствует подстрочник Остановка общественного транспорта
    - do: Тап на экшен кнопку закладка
    - assert:  появился поп-ап Добавить место в список
    - do: Тап на Избранное
    - assert: |
        Чек-бок напротив Избранного выбрался
    - do: Тап на Готово
    - assert: |
        На том же месте появился пин с закладкой
        В карточке ОТ экшн-кнопка становится выделенной
        В карточке ОТ появился пункт В списке Избранное (IOS)
    - do: Закрыть карточку ОТ
    - assert:  Открыт главный экран приложения
    - do: Перейти закладки (Меню - Закладки)
    - assert: |
        Открыт таб Мои места
        Есть список Избранное
    - do: Тап на Избранное
    - assert:  Добавленная карточка ОТ отобразилась в списке

    - platforms:
        - android
        - ios
    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps

  Сохранение состояния фильтра Мой транспорт:
    - info: |
        Пользователь авторизован
        У пользователя есть избранный транспорт
        Включен таб Транспорт
    - do: Тап на Мой транспорт
    - assert: На карте отображается избранный транспорт
    - do: Свернуть приложение
    - assert: Приложение работает в фоне
    - do: Развернуть приложение
    - assert: Состояние таба и чек-бокса сохранилось
    - do: Перезапустить приложение
    - assert: Состояние таба и чек-бокса сохранилось
    - do: Отключить фильтр Мой транспорт
    - do: Свернуть приложение
    - assert: Приложение работает в фоне
    - do: Развернуть приложение
    - assert: Состояние таба и чек-бокса сохранилось
    - do: Перезапустить приложение
    - assert: Состояние таба и чек-бокса сохранилось

    - platforms:
        - ios
        - android
    - testing:
        - lite_acceptance_maps
    - tags:
        - assessors



