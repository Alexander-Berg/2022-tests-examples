components: via_points
testing:
  - regress

specs:
  Добавление промежуточной точки в режиме ведения по автомаршруту (миникарточка):
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Открыт экран ведения по автомаршруту
    - do: На карте Тап на кнопку лупы (поиск)
    - assert: Октрывается форма поиска со списком категорий
    - do: Тап по 'Ещё'
    - assert: Открывается экран поиска  Сверху отображается поисковая строка Под поисковой строкой находятся Категории
    - do: Ввести поисковый запрос или Тап на любую категорию
    - assert: На карте появляются пины результатов поиска
    - do: Тап на любой пин
    - assert: Открывается миникарточка места кнопкой Сюда/Заехать
    - do: Тап по кнопке 'Заехать'
    - assert: |
        Отображается экран ведения по маршруту
        Линия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились

    - platforms:
      - ios
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в режиме ведения по автомаршруту (полная карточка):
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Открыт экран ведения по автомаршруту
    - do: Тап на кнопку в виде лупы
    - assert: Открывается меню со списком категорий и кнопкой Ещё
    - do: Тап на Ещё
    - assert: Открывается экран поиска с поисковой строкой и списком категорий
    - do: Ввести поисковый запрос или Тап на любую категорию
    - assert:  На карте появляются пины с результатами поиска
    - do: Тап на любой пин (отзумить карту, если не было пина на отображаемом участке карты)
    - assert: Открывается мини карточка места с кнопкой 'Маршрут'
    - do: Тап по мини карточке места
    - assert: Открылась полная карточка места с кнопкой 'Маршрут'
    - do: Тап по кнопке 'Маршрут'
    - assert: |
        Отобразились две кнопки: 'Заехать' и 'Сюда'
    - do: Тап по кнопке 'Заехать'
    - assert: |
        Отображается экран ведения по маршруту
        Линия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Удаление промежуточных точек:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Открыт экран ведения по автомаршруту
    - do: Добавить несколько промежуточных точек через поиск или через тап по обьекту на карте
    - assert: Промежуточные точки добавлены в маршрут
    - do: Тап по промежуточной точке
    - assert: открывается мини-карточка места/организации и кнопка 'Удалить'
    - do: Тап по кнопке 'Удалить'
    - assert: |
        Промежуточная точка удаляется
        Карточка организации/места закрывается
        Открывается экран выбора вариантов маршрута
        Расстояния и время пересчитываются

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map
      - newbie
    - testing:
      - lite_acceptance_maps


  Удаление промежуточных точек для полных карточек:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Открыт экран ведения по автомаршруту
    - do: Добавить несколько промежуточных точек через поиск или через тап по обьекту на карте
    - assert: Промежуточные точки добавлены в маршрут
    - do: Тап по промежуточной точке
    - assert: открывается мини-карточка места/организации и кнопка 'Удалить'
    - do: Открыть полную карточку места/организации
    - assert: Открывается полная карточка места/организации
    - do: Тап на "Удалить"
    - assert: |
        Промежуточная точка удаляется
        Карточка организации/места закрывается
        Открывается экран выбора вариантов маршрута
        Расстояния и время пересчитываются

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map
      - newbie
    - testing:
      - lite_acceptance_maps


  Промежуточная точка через лонгтап:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Открыт экран ведения по автомаршруту
    - do: Лонг-тап по карте в любом месте
    - assert: |
        Появилось лонг-тап меню
        На карте отображается поднятый пин в месте лонг-тапа
        В лонг-тап меню отображаются:
          Отсюда
          Заехать
          Сюда
          Что здесь?
          Добавить объект
          Добавить дорожное событие
          Панорама
    - do: Тап по кнопке 'Заехать'
    - assert: |
        Происходит переход к экрану выбора типа маршрута
        Изменена линия маршрута
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменены
        Промежуточная точка появилась в прогрессе маршрута (в навбаре)
    - do: Тап по кнопке 'Поехали'
    - assert:  Открыт экран ведения по измененному автомаршруту

    - platforms:
      - android
      - ios
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки через меню:
    - info: |
        info: Построить произвольный автомобильный маршрут Открыт экран выбора вариантов маршрута
    - do:  Тап в навбаре кнопку в виде 3 вертикальных точек
    - assert:  В нижней части экрана появилось меню (на iPad посередине)
    - do: Тап 'Добавить точку'
    - assert:  Открыт экран добавления промежуточной точки Поле 'Добавить точку' вверху экрана Справа поля кнопка Отменить Под полем отображаются кнопки 'Моё местоположение','Указать на карте','Голосовой ввод' На экране отображается блок Дом/Работа, блок истории и закладок (если пользователь авторизован) Фокус в поле ввода, отображается клавиатура
    - do: Тап 'Отменить'
    - assert:  Открыт экран выбора вариантов маршрута Раскрыта шторка Меню скрыто
    - do: Повторить шаги начальные шаги в landscape ориентации для маршрутов ОТ/пешего/вело
    - assert:  Результат идентичный шагам ранее

    - platforms:
      - ios
    - tags:
      - assessors


  Добавление промежуточной точки через лонг-тап меню на экране вариантов маршрута:
    - info: |
        Построить произвольный автомобильный маршрут
        Открыт экран выбора вариантов маршрута
    - do: Лонг-тап на карте
    - assert:  |
        Открылось лонг-тап меню
        Присутсвуют кнопки Отсюда, Заехать, Сюда
    - do: Тап на Заехать
    - assert:  |
        Лонг-тап меню скрылось
        На карте появилась промежуточная точка в месте тапа
        Маршрут перестроился
        В навбаре отображаются пункты Откуда, Куда: 2 места
    - do: Добавить еще 7 промежуточных точек
    - assert: |
        В навбаре отображаются пункты Откуда, Куда: 9 мест
    - do: Лонг-тап на карте
    - assert: |
        Открылось лонг-тап меню
        Присутсвуют кнопки Отсюда, Заехать, Сюда
    - do: Тап на Заехать
    - assert:  |
        Отображается сообщение "На маршруте может быть только 10 точек" с кнопкой Изменить маршрут
    - do: Тап на Изменить маршрут
    - assert: |
        Раскрывается экран построенного маршрута со всеми точками
        Отображается сообщение "На маршруте может быть только 10 точек" с кнопкой Ок
    - do: Тап на крестик справа у двух из промежуточных точек
    - assert:  |
        Точки удалились
        Cообщение "На маршруте может быть только 10 точек" с кнопкой Ок не отображается
    - do: Тап на Готово
    - assert:  |
        Маршрут построен
        Точки отображаются на карте
        В навбаре отображаются пункты Откуда, Куда: 8 мест
    - do: Тап на промежуточную точку
    - assert:  |
        Открылась мини-карточка топонима
        Вместо кнопки построения маршрут отображается кнопка 'Удалить'
    - do: Удалить все добавленные точки
    - assert: |
        Открыт экран выбора вариантов маршрута
        Промежуточные точки отсутствуют
        В навбаре отображается только 'Откуда' и 'Куда'

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map
      - newbie
    - testing:
      - lite_acceptance_maps


  Проезд через промежуточные точки на авто:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Построен произвольный автомобильный маршрут
        Добавлены две промежуточные точки
        Открыт экран выбора вариантов маршрута
    - do: Тап на Поехали!
    - assert:  Открыт экран ведения по маршруту. На линии маршрута отображаются промежуточные точки
    - do: Проехать до первой промежуточной точки
    - assert:  При 'наезде' на промежуточную точку воспроизводится аннотация 'Вы приехали в промежуточную точку' Промежуточная точка пропадает с линии маршрута на карте
    - do: Доехать до следующей промежуточной точки
    - assert:  Результат идентичный шагу ранее Если промежуточная точка находится перед маневром, то вначале произносится аннотация о маневре, а после о прибытии в точку
    - do: Доехать до конца маршрута
    - assert: Ведение автоматически завершилось

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map
      - newbie
    - testing:
      - lite_acceptance_maps


  Добавление промежуточной точки на экране Маршрут:
    - info: |
        Пользователь не авторизован
        ММП определено
        Открыт экран 'Маршрут'
    - do: Тап 'Куда'
    - assert:  |
        Поле 'Куда' переместилось в верхнюю часть экрана
        Справа кнопка 'Отменить' (iOS)
        Фокус в поле ввода
        Под полем находятся кнопки 'Указать на карте' и 'Голосовой ввод'
        Отображается клавиатура
    - do: Ввести произвольный адрес, не совпадающий с текущим местоположением
    - do: Тап на саджест
    - assert:  |
        Открыт экран выбора вариантов маршрута
        Маршрут построен
        На карте отображается линия маршрута
        Тип маршрута соответствует последнему выбранному
        Внизу экрана мини-карточка маршрута с кнопкой 'Поехали'
        В левом верхнем углу стрелка 'назад'
    - do: Тап стрелку 'назад'
    - assert: |
        Открыт экран построения маршрута
        В поле начальной точки 'Мое местоположение'
        В поле конечной точки адрес из шага ранее
        Ниже отображается поле 'Добавить точку' с иконкой '+'
        Справа от каждого поля отображаются две горизонтальные линии
        В правом верхнем углу активна кнопка 'Далее'
    - do: Тап 'Добавить точку'
    - assert: |
        Поле 'Добавить точку' переместилось в верхнюю часть экрана
        Иконка '+' пропала
        Справа кнопка 'Отменить' (iOS)
        Фокус в поле ввода
        Под полем находятся кнопки 'Моё местоположение','Указать на карте','Голосовой ввод'
        Отображается клавиатура
    - do: Тап 'Мое местоположение'
    - assert: |
        Открыт экран 'Маршрут'
        В поле с адресом из шага ранее отображается иконка с цифрой '1' (iOS)
        Под этим полем появилось еще одно, в котором указано 'Мое местоположение' с иконкой в виде стрелки
        Ниже отображается 'Добавить точку'

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - newbie
    - testing:
        - lite_acceptance_maps


  Сход с маршрута с промежуточными точками:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Построен произвольный автомобильный маршрут с промежуточной точкой
        Открыт экран выбора вариантов маршрута
    - do: Тап на Поехали
    - assert: Открыт экран ведения по маршруту
    - do: Начать движение по маршруту, отличному от предложенного приложением
    - assert: |
        Маршрут перестроился
        Промежуточная точка отображается на линии маршрута

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки из карточки организации с экрана Маршрут:
    - info: |
        Устройство в вертикальной ориентации
        Пользователь не авторизован
        Местоположение определено
    - do: Выключить эксперимент no_routes_tab (Настройки - Debug Panel - Experiments)
    - do: Перезапустить приложение
    - do: Тап на таб Маршруты
    - assert: Открыт экран Маршрут
    - do: Сменить ориентацию девайса
    - assert: |
        Отображается экран Маршрут в горизонтальной ориентации
        Экран Маршрут отображается слева экрана
        Справа экрана отображается карта
    - do: Тап на любое POI на карте
    - assert: |
        Открылась карточка организации
        В карточке присутствует кнопка Маршрут
    - do: Тап на Маршрут
    - assert: |
        Отображается экран вариантов маршрутов
        В поле Куда адрес конечной точки

    - platforms:
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в режиме ведения по автомаршруту (Миникарточка):
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Открыт экран ведения по автомаршруту
    - do: На карте Тап на кнопку лупы (поиск)
    - assert: Открывается форма поиска со списком категорий
    - do: Тап по ‘Ещё’
    - assert: Открывается экран поиска Сверху отображается поисковая строка Под поисковой строкой находятся разделы ‘Категории’ и ‘История’
    - do: Ввести поисковый запрос или Тап на любую категорию
    - assert: На карте появляются пины результатов поиска
    - do: Тап на любой пин
    - assert: Открывается мини карточка места с кнопкой Сюда/Заехать
    - do: Тап по кнопке 'Заехать'
    - assert: |
        Отображается экран выбора варианта маршрута
        Линия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились

    - platforms:
      - android
      - ios
    - tags:
      - assessors
      - use_map


  Добавление нескольких промежуточных точек в режиме ведения по автомаршруту:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Открыт главный экран приложения
    - do: Построить любым способом автомобильный маршрут
    - assert:  Открылся экран выбора варианта маршрута
    - do: Тап на 'Поехали'
    - assert:  Отображается экран введения по маршруту
    - do: Тап на экран
    - assert: Появляется таббар внизу экрана
    - do: Тап на лупу в левом нижнем углу
    - assert:  Появился экран с категориями поиска
    - do: Выбрать 'Где поесть'
    - assert:  На экране появились пины организаций соотвествующий категории
    - do: Лонг-тап на любой пин
    - assert: |
        Открыт экран Что Здесь
    - do: Тап на 'Заехать'
    - assert:  |
        После добавления точки:
        Открыт экран выбора вариантов маршрута
        Промежуточные точки добавились
        Линия маршрута изменилась
        Время и расстояние маршрута изменились
    - do: Тап на 'Поехали' / 'Продолжить'
    - assert:  Отображается экран введения по маршруту (ведение запускается с точки старта)
    - do: Тап на любой объект на карте и выбрать в появившемся окошке 'Заехать'
    - assert: |
        После добавления точки:
        Открыт экран выбора вариантов маршрута
        Промежуточные точки добавились
        Линия маршрута изменилась
        Время и расстояние маршрута изменились
        Добавленная точка никуда не делась

    - platforms:
      - android
      - ios
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в режиме ведения по пешему  маршруту (лонгтап):
    - info: |
        info: Открыт экран ведения по пешему маршруту
    - do: Лонг-тап по карте в любом месте
    - assert: |
        Появилось лонг-тап меню На карте отображается поднятый пин в месте лонг-тапа
        В лонг-тап меню отображаются: Отсюда, Зайти, Сюда, Что здесь?, Добавить объект, Добавить дорожное событие, Панорама
    - do: Тап по кнопке 'Зайти'
    - assert:  Происходит переход к экрану выбора типа маршрута Изменена геометрия маршрута Промежуточная точка добавилась к маршруту Время и расстояние маршрута изменены Промежуточная точка появилась в прогрессе маршрута (в навбаре)
    - do: Тап по кнопке 'Начать'
    - assert:  Открыт экран ведения по измененному пешему маршруту

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Удаление промежуточных точек (пеший маршрут):
    - info: |
        Открыт экран ведения по пешему маршруту
        В маршруте присутствует несколько промежуточных точек
    - do: Тап по промежуточной точке
    - assert: |
        Поднимается пин промежуточной точки с номером (если точек несколько)
        Открывается мини карточка места/организации и кнопка 'Удалить'
    - do: Тап по кнопке ‘Удалить’
    - assert: |
        Промежуточная точка удаляется
        Открывается экран выбора варианта маршрута
        Другие промежуточные точки отображаются геометрия маршрута меняется
    - do: Тап на Начать
    - assert: |
        Открывается экран ведения по маршруту
        Удаленная промежуточная точка не отображается
        Не удаленные промежуточные точки отображаются

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление точки в пеший маршрут через меню (Добавить точку):
    - info: Открыт главный экран приложения
    - do: Построить произвольный пеший маршрут
    - assert: Открыт экран выбора вариантов маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert: |
        Открывается экран добавления промежуточной точки
        Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
        Под строкой 'Добавить точку' отображаются саджесты 'Указать на карте' и 'Голосовой ввод', может отображаться также 'Моё местоположение'
        Ниже отображается блок 'Дом/Работа' (если пользователь авторизован)
        Далее отображается 'История' Ниже  отображаются закладки (если пользователь авторизован)
    - do: Ввести произвольный адрес или название  организации  в  плейсхолдере 'Добавить точку'
    - assert:  Отображаются саджесты В саджестах указан название организации,адрес и расстояние
    - do: Тап на саджест + (iOS) тап 'Далее'
    - assert:  Отображается экран выбора варианта маршрута Геометрия маршрута поменялась Точка добавлена к маршруту Время и расстояние маршрута изменились
    - do: Свернуть и развернуть приложение
    - assert:  Отображается экран выбора варианта маршрута, ничего не съехало

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - tags:
      - assessors

  Добавление промежуточной точки в режиме ведения по велосипедному маршруту (лонгтап):
    - info: |
        Открыт экран ведения по велосипедному маршруту
    - do: Лонг-тап по карте в любом месте
    - assert: |
        Появилось лонг-тап меню
        На карте отображается поднятый пин в месте лонг-тапа
        В лонг-тап меню отображаются: Отсюда, Заехать, Сюда, Что здесь?, Добавить объект, Добавить дорожное событие, Панорама
    - do: Тап по кнопке 'Заехать'
    - assert: |
        Происходит переход к экрану выбора типа маршрута
        Изменена линия маршрута
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменены
        Может отображаться предупреждение  'С выездом на проезжую часть'
        Промежуточная точка появилась в прогрессе маршрута (в навбаре, если выбран маршрут 'Авто')
    - do: Тап по кнопке 'Поехали'
    - assert:  Открыт экран ведения по измененному велосипедному  маршруту

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки через лонг-тап в режиме ведения по ОТ-маршруту :
    - info: |
        Устройство в вертикальной ориентации
        Построен произвольный ОТ-маршрут
        Открыт экран выбора вариантов маршрута
    - do: Тап на Посмотреть на карте
    - assert: |
        Открываются детали маршрута
        Внизу отображается кнопка Поехали
    - do: Тап на Поехали
    - assert: Открыт экран ведения по ОТ-маршруту
    - do: Лонг-тап по карте в любом месте
    - assert: |
        На карте отображается поднятый пин в месте лонг-тапа
        Появилось лонг-тап меню
        Присутсвуют кнопки Отсюда, Заехать, Сюда
    - do: Тап на Заехать
    - assert: |
        Происходит переход к экрану выбора типа маршрута
        Время и расстояние маршрута изменены
        Промежуточная точка появилась в прогрессе маршрута
    - do: Тап на 'Посмотреть на карте'
    - assert: |
        Отображается экран деталей маршрута
        На карте отображается измененный маршрут с промежуточной точкой
    - do: Сменить ориентацию устройства
    - assert: |
        Отображается экран деталей маршрута в горизонтальной ориентации
        На карте отображается измененный маршрут с промежуточной точкой

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - tags:
      - assessors
      - use_map
      - newbie


  Добавление промежуточной точки в режиме ведения по пешему маршруту (миникарточка):
    - info: |
        info: Открыт экран ведения по пешему маршруту
    - do: Тап на пин или на любой объект
    - assert:  Открывается мини карточка места  с кнопками 'Сюда' и 'Зайти' в экшн-баре
    - do: Тап по кнопке 'Зайти'
    - assert:  Отображается экран выбора варианта маршрута Геометрия маршрута поменялась Промежуточная точка добавилась к маршруту Время и расстояние маршрута изменились
    - do: Сменить ориентацию устройства на горизонтальную
    - assert:  При повороте ничего не съехало Экран выбора варианта маршрута отображается слева Справа отображается геометрия маршрута

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в режиме ведения по пешему маршруту (полная карточка):
    - info: |
        info: Открыт экран ведения по пешему маршруту
    - do: Тап на пин или на любой объект
    - assert:  Открывается мини карточка места с кнопками 'Сюда' и 'Зайти' в экшн-баре
    - do: Тап по мини карточке места
    - assert:  Открылась полная карточка места с кнопками 'Сюда' и 'Зайти' в экшн-баре
    - do: Тап по кнопке 'Зайти'
    - assert:  Отображается экран выбора варианта маршрута Геометрия маршрута поменялась Промежуточная точка добавилась к маршруту Время и расстояние маршрута изменились

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление нескольких промежуточных точек в режиме ведения по пешему маршруту:
    - info: |
        info: Открыт экран ведения по пешему маршруту
    - do: Добавить несколько промежуточных точек
    - assert: |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточные точки добавились к маршруту Время и расстояние маршрута изменились

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в пеший маршрут через меню (История):
  - info: |
      Ранее производился поиск по разным адресам
      Построен маршрут между произвольными точками
      Открыт экран выбора варианта маршрута на вкладке пешего маршрута
  - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
  - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
  - do: Тап на 'Добавить точку'
  - assert: |
      Открывается экран добавления промежуточной точки
      Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
      iOS Под строкой 'Добавить точку' могут отображаться кнопки  'Моё местоположение' (если соседние точки маршрута не являются ММП), 'Указать на карте', 'Голосовой ввод'
      Android  Под строкой 'Добавить точку' может отображаться кнопка  'Моё местоположение' (если соседние точки маршрута не являются ММП) Ниже отображаются 'Дом/Работа'
      Ниже блок с историей маршрутов Ниже отображаются закладки ( если пользователь авторизован)
      Android: Над клавиатурой отображается плашка 'Указать на карте' с кнопкой вызова спичкита
  - do: Тап на  любой вариант из истории (для iOS еще тап на 'Далее')
  - assert: |
      Отображается экран выбора варианта маршрута
      Геометрия маршрута поменялась
      Промежуточная точка добавилась к маршруту
      Время и расстояние маршрута изменились

  - platforms:
    - ios
    - android
  - tags:
    - assessors
    - use_map


  Добавление промежуточных точек в пешеходный маршрут:
    - info: |
        Построен произвольный пешеходный маршрут без промежуточных точек
        Движение по маршруту не начато
    - do: Тап на поле 'Откуда/Куда'
    - assert:  В поле откуда отображается 'Моё местоположение' В поле куда отображается 'Пункт назначения' Отображается строка 'Добавить точку' Знак пешеходного маршрута и времени в пути (iOS) Кнопка 'Построить'/(Android) Кнопка 'Готово'
    - do: Тап на поле 'Добавить точку'
    - assert:  |
        Отображается строка 'Добавить точку' с мигающим курсором
        Ниже строка 'Моё местоположение' Блок 'Дом/Работа'
        Блока с адресами из истории Под полем ввода отображаются саджесты 'Указать на карте' и 'Голосовой ввод'
        Раскрыта клавиатура ввода текста
    - do: Ввести адрес в 'Добавить точку' и тап на предложенный саджест
    - assert: |
        Отобразился экран редактирования маршрута
        Поле 'Куда' из шага №1 стало промежуточной точкой
        В поле 'Куда' отображается новое место назначения
        Отображается поле 'Добавить точку'
        Знак пешеходного маршрута и время в пути (время в пути перерасчитано с учетом изменений в маршруте)
        Кнопка 'Готово'
    - do: Тап на 'Готово'
    - assert: |
        Отображается экран маршрута Отображаются поля 'Откуда', 'Куда'
        Активна иконка пешеходного маршрута
        На спане карты построен маршрут с учетом промежуточной точки Внизу экрана отображается: Время в пути, Расстояние, Кнопка 'Начать'
    - do: Лонгтап на карте
    - assert: |
        Открылось лонгтап меню: Отсюда, Зайти, Сюда, Что здесь?, Добавить объект, Добавить ДС, Панорама
    - do: Тап на 'Зайти'
    - assert:  Маршрут перестроен с учетом новой промежуточной точки Время и расстояние на маршруте пересчитано Между полями 'Откуда' и 'Куда' отображается 'Через 2 точки'
    - do: Тап на произвольный пин/топоним/закладку на спане карты
    - assert:  Открылась миникарточка выбранного пина/топонима/закладки В карточке отображается название/адрес Отображается расстояние до объекта Отображается кнопка 'Сюда' и 'Заехать'/'Зайти'
    - do: Тап на 'Заехать'/'Зайти'
    - assert:  Маршрут перестроен с учетом новой промежуточной точки Время и расстояние на маршруте пересчитано Между полями ‘Откуда’ и ‘Куда’ отображается ‘Через 3 точки’
    - do: Тап на 'Начать'
    - assert:  |
        Активировалось ведение по маршруту Спан карты призумился до 17 зума
        Вверху отображаются: Кнопка 'Закрыть', Расстояние / Время в пути

    - platforms:
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в пеший маршрут через меню (Избранное):
    - info: |
        Пользователь авторизован В 'Избранное' добавлены закладки
        Открыт экран выбора варианта маршрута на вкладке пешего маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert:  |
        Открывается экран добавления промежуточной точки
        Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
        Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП Ниже отображаются кнопка 'Мое местоположение' и 'Дом/Работа'
        Далее отображается 'История' Ниже отображаются закладки ( если пользователь авторизован)
        Android: Отображается плашка 'Указать на карте' с кнопкой вызова спичкита
        iOS: Отображаются строки 'Моё местоположение', 'Указать на карте' и 'Голосовой ввод'
    - do: Тап в 'Избранное' или другой список
    - assert:  Отображается экран избранного списка  В нем отображаются адреса и организации
    - do: Тап на любой адрес/организацию
    - assert: |
        iOS: Отображается экран изменения маршрута
        Последняя точка маршрута соотвествует выбраной точке из списка 'Избранное'
        Android: Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились
    - do: |
        iOS: Тап на 'Далее'
    - assert: |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в пеший маршрут через меню (Дом/Работа):
    - info: |
        Пользователь авторизован
        В 'Дом/Работа' добавлены адреса
        Открыт экран выбора варианта маршрута на вкладке пешего маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert: |
        Открывается экран добавления промежуточной точки
        Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
        Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП
        Ниже отображаются саджесты 'Мое местоположение', Указать на карте, Голосовой ввод и 'Дом/Работа' Далее отображается 'История'
        Ниже отображаются закладки ( если пользователь авторизован)
        Android: Отображается плашка 'Указать на карте' с кнопкой вызова спичкита
        iOS: Отображаются строки 'Моё местоположение', 'Указать на карте' и 'Голосовой ввод'
    - do: Тап на 'Работа' или Дом'
    - assert:  |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в режиме ведения по вело-маршруту (миникарточка):
    - info: |
        Открыт экран ведения по вело-маршруту
    - do: Тап на пин или на любой объект
    - assert:  Отобразились две кнопки - 'Заехать' и 'Сюда'
    - do: Тап по кнопке 'Заехать'
    - assert: |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        При повороте ничего не съехало
        Экран выбора варианта маршрута отображается слева
        Справа отображается геометрия маршрута

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map

  Добавление промежуточной точки в режиме ведения по вело-маршруту (полная карточка):
    - info: Открыт экран ведения по вело-маршруту
    - do: Тап на пин или на любой объект
    - assert:  Открывается мини карточка места с кнопками 'Заехать' и 'Сюда'
    - do: Тап по мини карточке места
    - assert:  Открылась полная карточка места с кнопкой 'Заехать' и 'Сюда'
    - do: Тап по кнопке 'Заехать'
    - assert: |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились
        На карте различные участки маршрута окрашены в разные цвета
                    * Участки с выездом на проезжую часть
                    * Участки на закрытой территории
                    * Участки маршрута по велодорожке
                    * Отображаются лестницы на маршруте

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Удаление промежуточных точек (вело-маршрут):
    - info: |
        Построен произвольный веломаршрут
        Открыт экран выбора вариантов маршрута
    - do: Лонг-тап на карте и выбрать 'Заехать'/'Зайти'
    - assert: |
        Открыт экран выбора вариантов маршрута Маршрут построен
        На линии маршрута отображается промежуточная точка
        На карте различные участки маршрута окрашены в разные цвета
          * Участки с выездом на проезжую часть
          * Участки на закрытой территории
          * Участки маршрута по велодорожке
          * Отображаются лестницы на маршруте
        iOS: точки пронумерованы
        Время в подсказках над альтернативными маршрутами увеличилось
        Время возле типов маршрута увеличилось
        Если маршрут какого-то типа нельзя построить (например, слишком длинный для пешеходного), то время заменяется на троеточие
        Внизу экрана свернутый список маршрутов (если присутствуют альтернативные)
        Есть кнопка Поехали
    - do: Добавить несколько промежуточных
    - do: Тап по промежуточной точке
    - assert: |
        поднимается пин промежуточной точки с номером ( если точек несколько)
        открывается мини карточка места/организации и кнопка 'Удалить'
    - do: Тап по кнопке ‘Удалить’
    - assert:  |
        Промежуточная точка удаляется
        Открывается экран выбора варианта маршрута
        Другие промежуточные точки отображаются
        Геометрия маршрута меняется
        Может отображаться предупреждение 'С выездом на проезжую часть'
    - do: Тап на 'Поехали'
    - assert:  открывается экран ведения по маршруту удаленная промежуточная точка не отображается не удаленные промежуточные точки отображаются
    - do: Повторить добавление несколько промежуточных точек и тапов на них, а затем удалить
    - assert:  |
        Промежуточная точка удаляется
        Открывается экран выбора варианта маршрута
        Другие промежуточные точки отображаются
        Геометрия маршрута меняется
        Может отображаться предупреждение 'С выездом на проезжую часть'

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_maps
    - tags:
      - assessors
      - use_map


  Добавление нескольких промежуточных точек в режиме ведения по вело-маршруту:
    - info: Открыт экран ведения по вело-маршруту
    - do: Добавить несколько промежуточных точек
    - assert: |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточные точки добавились к маршруту
        Время и расстояние маршрута изменились Может отображаться предупреждение 'С выездом на проезжую часть'

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки вело-маршрут через меню ( Добавить точку):
    - info: |
        Построен маршрут между произвольными точками
        Открыт экран выбора варианта маршрута на вкладке вело-маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert: |
        Открывается экран добавления промежуточной точки
        Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
        Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП
        Ниже отображаются кнопки 'Мое местоположение', 'Указать на карте', 'Голосовой ввод' и 'Дом/Работа'
        Далее отображается 'История' Ниже  отображаются закладки ( если пользователь авторизован)
        Android: Отображается плашка 'Указать на карте' с кнопкой вызова спичкита
        iOS: Отображаются строки 'Моё местоположение', 'Указать на карте' и 'Голосовой ввод'
    - do: Ввести произвольный адрес или название  организации  в  плейсхолдере 'Добавить точку'
    - assert:  Отображаются саджесты В саджестах указан название организации,адрес и расстояние
    - do: Тап на саджест
    - assert: |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились
        Может отображаться предупреждение 'С выездом на проезжую часть'
        На карте различные участки маршрута окрашены в разные цвета
          * Участки с выездом на проезжую часть
          * Участки на закрытой территории
          * Участки маршрута по велодорожке
          * Отображаются лестницы на маршруте
    - do: Свернуть и развернуть приложение
    - assert:  Отображается экран выбора варианта маршрута, ничего не съехало

    - platforms:
      - ios
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки вело-маршрут через меню (История):
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert:  Открывается экран добавления промежуточной точки Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку' Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП Ниже отображаются кнопка 'Мое местоположение' и 'Дом/Работа' Далее отображается 'История' Ниже отображаются закладки ( если пользователь авторизован) Отображается плашка 'Указать на карте' с кнопкой вызова спичкита
    - do: Тап на  любой вариант из истории
    - assert: iOS К списку точек маршрута добавилась промежуточная точкаAndroid Отображается экран выбора варианта маршрута Геометрия маршрута поменялась Промежуточная точка добавилась к маршруту Время и расстояние маршрута изменились Может отображаться предупреждение 'С выездом на проезжую часть'
    - do: iOS Тап на кнопку 'Далее'
    - assert:  |
              Отображается экран выбора варианта маршрута
              Геометрия маршрута поменялась
              Промежуточная точка добавилась к маршруту
              Время и расстояние маршрута изменились
              На карте различные участки маршрута окрашены в разные цвета
                  * Участки с выездом на проезжую часть
                  * Участки на закрытой территории
                  * Участки маршрута по велодорожке
                  * Отображаются лестницы на маршруте
              Может отображаться предупреждение 'С выездом на проезжую часть'

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в вело-маршрут через меню (Избранное):
    - info: |
        Пользователь авторизован
        В 'Избранное' добавлены закладки
        Открыт экран выбора варианта маршрута на вкладке вело-маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert: |
        Открывается экран добавления промежуточной точки
        Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
        Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП
        Ниже отображаются кнопка 'Мое местоположение' и 'Дом/Работа'
        Далее отображается 'История'
        Ниже отображаются закладки ( если пользователь авторизован)
        Отображается 'Указать на карте' с кнопкой вызова спичкита
    - do: Тап в 'Избранное' или другой список
    - assert:  Отображается экран избранного списка  В нем отображаются адреса и организации
    - do: Тап на любой адрес/организацию
    - assert: |
        Отобразился экран редактирования маршрута
        Присутствует адрес начальной точки
        Присутствует адрес промежуточной точки
        Присутствует адрес конечной точки
        Отображается поле ‘Добавить точку’
        Знак вело маршрута и время в пути Кнопка ‘Далее’
    - do: Тап на кнопку 'Далее'
    - assert: |
        Отображается экран выбора варианта маршрута
        Геометрия маршрута поменялась
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились
        На карте различные участки маршрута окрашены в разные цвета
          * Участки с выездом на проезжую часть
          * Участки на закрытой территории
          * Участки маршрута по велодорожке
          * Отображаются лестницы на маршруте
        Может отображаться предупреждение 'С выездом на проезжую часть'

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в  вело-маршрут через меню (Дом/Работа):
    - info: |
        Пользователь авторизован
        В 'Дом/Работа' добавлены адреса
        Открыта экран выбора варианта маршрута на вкладке вело-маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert:  Открывается экран добавления промежуточной точки Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку' Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП Ниже отображаются кнопка 'Мое местоположение' и 'Дом/Работа' Далее отображается 'История' Ниже отображаются закладки ( если пользователь авторизован) Отображается плашка 'Указать на карте' с кнопкой вызова спичкита
    - do: Тап на 'Работа' или Дом'
    - assert:  Отобразился экран редактирования маршрута Присутствует поле с начальной точкой Присутствует поле с промежуточной точкой Присутствует поле с конечной точкой Знак вело маршрута и время в пути (время в пути перерасчитано с учетом изменений в маршруте) Кнопка ‘Далее’
    - do: Тап на кнопку 'Далее'
    - assert:  |
              Отображается экран выбора варианта маршрута
              Геометрия маршрута поменялась
              Промежуточная точка добавилась к маршруту
              Время и расстояние маршрута изменились
              На карте различные участки маршрута окрашены в разные цвета
                * Участки с выездом на проезжую часть
                * Участки на закрытой территории
                * Участки маршрута по велодорожке
                * Отображаются лестницы на маршруте
              Может отображаться предупреждение 'С выездом на проезжую часть'

    - platforms:
      - ios
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки через мини-карточку в режиме ведения по ОТ-маршруту:
    - info: |
        Устройство в вертикальной ориентации
        Построен произвольный ОТ-маршрута
        Отображается экран выбора маршрута
    - do: Тап на Посмотреть на карте
    - assert: |
        Отображается экран деталей маршрута
        Внизу отображается кнопка Поехали
    - do: Тап на Поехали
    - assert: Отображается экран ведения по ОТ-маршруту
    - do: Тап на любое POI на карте
    - assert: |
        Открывается мини-карточка объекта
        Присутствуют кнопки Сюда и Заехать
    - do: Тап на Заехать
    - assert: |
        Происходит переход к экрану выбора типа маршрута
        Время и расстояние маршрута изменены
        Промежуточная точка появилась в прогрессе маршрута
    - do: Тап на 'Посмотреть на карте'
    - assert: |
        Отображается экран деталей маршрута
        На карте отображается измененный маршрут с промежуточной точкой
    - do: Сменить ориентацию устройства
    - assert: |
        Отображается экран деталей маршрута в горизонтальной ориентации
        На карте отображается измененный маршрут с промежуточной точкой

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в режиме ведения по  маршруту ОТ (полная карточка):
    - info: Открыт экран ведения по маршруту ОТ
    - do: Тап на пин или на любое объект
    - assert:  Открывается мини карточка места с желтой кнопкой 'Маршрут'
    - do: Тап по мини карточке места
    - assert:  Открылась полная карточка места с кнопкой 'Маршрут'
    - do: Тап по кнопке 'Маршрут'
    - assert:  Отобразились две кнопки - 'Заехать' и 'Сюда'
    - do: Тап по кнопке 'Заехать'
    - assert:  Происходит переход к экрану выбора типа маршрута Время и расстояние маршрута изменены Промежуточная точка появилась в прогрессе маршрута (в навбаре)
    - do: Тап на 'Посмотреть на карте'
    - assert:  Отображается кнопка Назад, продолжительность маршрута и время  отправления/прибытия  На карте отображается измененный  маршрут  Отображаются детали маршрута

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Удаление промежуточных точек (ведение по маршруту ОТ):
    - info: Открыт экран ведения по маршруту ОТ В маршруте присутствует несколько промежуточных точек
    - do: Тап по промежуточной точке
    - assert:  поднимается пин промежуточной точки с номером ( если точек несколько) открывается мини карточка места/организации и желтая кнопка 'Удалить'
    - do: Тап по кнопке ‘Удалить’
    - assert: открывается экран выбора типа маршрута промежуточная точка исчезла другие промежуточные точки отображаются время и расстояние маршрута изменены
    - do: Открыть экран ведения по маршруту ОТ
    - assert:  открывается экран ведения по маршруту удаленная промежуточная точка не отображается не удаленные промежуточные точки отображаются
    - do: Повторить шаги c тапом на промежуточную точку и тапом на Удалить
    - assert:  промежуточная точка удаляется открывается экран выбора варианта маршрута другие промежуточные точки отображаются

    - platforms:
      - android
    - tags:
      - assessors
      - use_map


  Добавление нескольких промежуточных точек в режиме ведения по маршруту ОТ:
    - info: Открыт экран ведения по маршруту ОТ
    - do: Добавить несколько промежуточных точек
    - assert:  Отображается экран выбора варианта маршрута Промежуточные точки добавились к маршруту Время и расстояние маршрута изменились
    - do: Тап на 'Посмотреть на карте'
    - assert:  Отображается кнопка Назад, продолжительность маршрута и время отправления/прибытия На карте отображается измененный маршрут Отображаются детали маршрута

    - platforms:
      - ios
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в маршрут ОТ  через меню ( Добавить точку):
    - info: |
        Построен маршрут между произвольными точками
        Открыт экран  выбора варианта маршрута на вкладке ОТ маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert:  Открывается экран добавления промежуточной точки Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку' _Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП_ Под полем ввода отображаются саджесты 'Указать на карте' и 'Голосовой ввод' Ниже отображаются 'Дом/Работа' Далее отображается 'История' Ниже  отображаются закладки ( если пользователь авторизован)
    - do: Ввести произвольный адрес или название  организации  в  плейсхолдере 'Добавить точку'
    - assert:  Отображаются саджесты В саджестах указан название организации,адрес и расстояние
    - do: Тап на саджест
    - assert: Android Отображается экран выбора варианта маршрута Промежуточная точка добавилась к маршруту Время и расстояние маршрута изменилисьiOS К списку точек маршрута добавилась промежуточная точка Время маршрута изменилось
    - do: iOS Тап на кнопку 'Далее'
    - assert:  Отображается экран выбора варианта маршрута Промежуточная точка добавилась к маршруту Время маршрута соответствует времени с 4го шага Расстояние маршрута изменилось
    - do: Тап на 'Посмотреть на карте'
    - assert:  Отображается кнопка Назад, продолжительность маршрута и время отправления/прибытия На карте отображается измененный маршрут Отображаются детали маршрута
    - do: Свернуть и развернуть приложение
    - assert:  Отображается кнопка Назад, экран выбора варианта маршрута, ничего не съехало

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в маршрут ОТ  через меню (История):
    - info: |
        Ранее производился поиск по разным адресам
        Построен маршрут между произвольными точками
        Открыт экран выбора варианта маршрута на вкладке маршрута ОТ
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert: |
        Открыт экран добавления промежуточной точки
        Поле 'Добавить точку' вверху экрана
        Справа поля кнопка Отменить
        iOS Под полем отображаются кнопки ‘Моё местоположение’, ‘Указать на карте’,‘Голосовой ввод’
        iOS На экране отображается блок Дом/Работа, блок истории и закладок (если пользователь авторизован)
        Фокус в поле ввода, отображается клавиатура
        Над клавиатурой отображается плашка 'Указать на карте' с кнопкой вызова спичкита Android
    - do: Тап на  любой вариант из истории
    - assert: |
        Android Отображается экран выбора варианта маршрута
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменилисьiOS К списку точек маршрута добавилась промежуточная точка Время маршрута изменилось
    - do: iOS Тап на кнопку 'Далее'
    - assert:  Отображается экран выбора варианта маршрута Промежуточная точка добавилась к маршруту Время маршрута соответствует времени с 3го шага Расстояние маршрута изменилось
    - do: Тап на 'Посмотреть на карте'
    - assert:  Отображается кнопка Назад, продолжительность маршрута и время отправления/прибытия На карте отображается измененный маршрут Отображаются детали маршрута

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки в маршрут ОТ  через меню (Избранное):
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert:  Открывается экран добавления промежуточной точки Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку' Под строкой 'Добавить точку' может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП Ниже отображаются кнопка 'Мое местоположение' и 'Дом/Работа' Далее отображается 'История' Ниже отображаются закладки ( если пользователь авторизован) Отображается плашка 'Указать на карте' с кнопкой вызова спичкита
    - do: Тап в 'Избранное' или другой список
    - assert:  Отображается экран избранного списка  В нем отображаются адреса и организации
    - do: Тап на любой адрес/организацию
    - assert: Android Отображается экран выбора варианта маршрута Промежуточная точка добавилась к маршруту Время и расстояние маршрута изменилисьiOS К списку точек маршрута добавилась промежуточная точка Время маршрута изменилось
    - do: iOS Тап на кнопку 'Далее'
    - assert:  Отображается экран выбора варианта маршрута Промежуточная точка добавилась к маршруту Время маршрута соответствует времени с 4го шага Расстояние маршрута изменилось
    - do: Тап на 'Посмотреть на карте'
    - assert:  Отображается кнопка Назад, продолжительность маршрута и время отправления/прибытия На карте отображается измененный маршрут Отображаются детали маршрута

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map

  Добавление промежуточной точки в маршрут ОТ  через меню (Дом/Работа):
    - info: |
        1 Пользователь авторизован
        2 В 'Дом/Работа' добавлены адреса
        3 Построен произвольный маршрут ОТ
        4 Открыт экран выбора вариантов маршрутаЕсли ММП находится около закладки 'Дом/Работа', то на экране построения маршрута они отображаться не будут
    - do: Тап вверху на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert: |
        Открывается экран добавления промежуточной точки
        Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
        Под строкой 'Добавить точку' может отображаются саджесты 'Указать на карте' и 'Голосовой ввод'
        Может отображаться саджест 'Моё местоположение', если соседние точки маршрута не являются ММП
        Ниже отображается блок 'Дом/Работа' Далее отображается 'История'
        Ниже отображаются закладки
    - do: Тап на 'Работа' или Дом'
    - assert: |
        Android - Отображается экран выбора варианта маршрута
        Промежуточная точка добавилась к маршруту
        Время и расстояние маршрута изменились

        iOS - К списку точек маршрута добавилась промежуточная точка
        Время маршрута изменилось
    - do: iOS Тап на кнопку 'Далее'
    - assert: |
        Отображается экран выбора варианта маршрута
        Промежуточная точка добавилась к маршруту
        Расстояние маршрута изменилось
    - do: Тап на 'Посмотреть на карте'
    - assert: |
        Отображается кнопка Назад, продолжительность маршрута и время отправления/прибытия
        На карте отображается измененный маршрут Отображаются детали маршрута

    - platforms:
      - ios
      - android
    - tags:
      - assessors
      - use_map


  Проверка ограничения количества промежуточных точек при построении маршрута при добавлении промежуточной точкичерез лонгтап:
  - info: Отображается экран с построенным автомобильным маршрутом с 7-ю промежуточными точками
  - do: Добавить 8-ую промежуточную точку в маршруте
  - assert: |
      В верхней части экрана отображаются кнопки 'Назад', 'Меню'
      В данных о маршруте отображаются точки 'Откуда', 'Куда' и количество промежуточных точек
      На спане карты отображается построенный маршрут с 8-ю промежуточными точками
  - do: Лонгтап на спане карты
  - assert: |
      На экране отображается лонгтап меню: Кнопки 'Отсюда' и 'Сюда' активны, Кнопка 'Заехать' не активна и выделена серым цветом
      Под кнопками 'Отсюда', 'Сюда' и 'Заехать' отображается сообщение 'На маршруте может быть только 10 точек' и кнопка 'ОК'
      Ниже отображаются: 'Что здесь?', 'Добавить дорожное событие', 'Панорама'
  - do: Тап по 'Заехать'
  - assert:  Промежуточная точка не добавлена Ничего не изменилось
  - do: Тап по 'ОК'
  - assert:  На экране отображается лонг-тап меню Сообщение ‘Вы уже выбрали максимальное число точек’ и кнопка ‘ОК’ на экране не отображается Кнопка 'Заехать' не активна
  - do: Закрыть лонг-тап меню
  - assert: |
      В верхней части экрана отображаются кнопки ‘Назад’, ‘Меню’
      В данных о маршруте отображается: ‘Откуда’, ‘Через 8 точек’, ‘Куда’
      На спане карты отображается построенный маршрут с 8-ю промежуточными точками
      Внизу экрана отображаются: Время/Расстояние по маршруту, Кнопка поехали
  - do: Лонг-тап на спане карты
  - assert: |
      На экране отображается лонгтап меню: Кнопки 'Отсюда' и 'Сюда' активны
      Кнопка 'Заехать' не активна и выделена серым цветом
      Сообщение 'Вы уже выбрали максимальное число точек' и кнопка 'ОК' отображаются
      Ниже отображаются: 'Что здесь?', 'Добавить дорожное событие', 'Панорама'
  - do: Повторить все шаги для маршрута ОТ, пешеходного и велосипедного маршрутов

  - platforms:
    - ios
  - integration_run:
    - mapkit
  - tags:
    - assessors
    - use_map


  Проверка ограничения количества промежуточных точек при построении маршрута при добавлении промежуточной точки через карточку организации/топонима:
    - do: Добавить 8-ую промежуточную точку в маршруте
    - assert: |
        В верхней части экрана отображаются кнопки 'Назад', 'Меню'
        В данных о маршруте отображается 'Откуда', 'Через 8 точек', 'Куда'
        На спане карты отображается построенный маршрут с 8-ю промежуточными точками
        Внизу экрана отображаются: Время/Расстояние по маршруту, Кнопка поехали
    - do: Открыть миникарточку организации/топононима
    - assert: |
        На экране отображается миникарточка организации/топонима: Название организации / адрес топонима, Расстояние до организации/топонима, В нижней отображаются экшн-кнопки
    - do: Тап по 'Маршрут'
    - assert:  Открывается экран построения маршрута Конечная точка изменилась на органиазцию из ранее выбранной Промежуточные точки отображаются на маршруте
    - do: Повторить все шаги для маршрута ОТ, пешеходного и велосипедного маршрутов

    - platforms:
      - ios
    - tags:
      - assessors
      - use_map


  Проверка ограничения количества промежуточных точек при построении маршрута при добавлении промежуточной точки через меню маршрута:
    - info:  Отображается экран с построенным автомобильным маршрутом с 7-ю промежуточными точками
    - do: Добавить 8-ую промежуточную точку в маршруте
    - assert: |
        В верхней части экрана отображаются кнопки 'Назад', 'Меню'
        В данных о маршруте отображается: 'Откуда', 'Через 8 точек', 'Куда'
        На спане карты отображается построенный маршрут с 8-ю промежуточными точками
        Внизу экрана отображаются: Время/Расстояние по маршруту, Кнопка поехали
    - do: Тап по 'Откуда'/'Через'/'Куда'
    - assert: |
        Раскрывается меню маршрута
        Под полем 'Куда' отображается сообщение - 'На маршруте может быть только 10 точек' и кнопка 'ОК'
        Под полем конечной точки маршрута отображается время движения по маршруту и кнопка 'Построить' Строка 'Добавить точку' не отображается
    - do: Тап на 'ОК'
    - assert:  Отображается начальная точка, конечная точка и промежуточные точки построенного маршрута Сообщение ‘Вы уже выбрали максимальное число точек’ не отображается Строка 'Добавить точку' не отображается
    - do: Повторить все шаги для маршрута ОТ, пешеходного и велосипедного маршрутов
    - do: Тап на 'Построить'
    - assert: |
        На спане карты отображается построенный маршрут
        В верхней части экрана отображаются кнопки ‘Назад’, ‘Меню’
        В данных о маршруте отображается: ‘Откуда’, ‘Через 8 точек’, ‘Куда’
        Внизу экрана отображаются: Время/Расстояние по маршруту, Кнопка поехали
    - do: Тап на 'Меню'
    - assert: |
        Раскрылось меню маршрута: Изменить маршрут, Параметры маршрута, Добавить точку, Поделиться маршрутом, Сообщить об ошибке, Отменить
    - do: Тап на 'Изменить маршрут'
    - assert:  Раскрывается меню маршрута Сообщение - ‘На маршруте может быть только 10 точек’ и кнопка ‘ОК’ отображаются Под полем конечной точки маршрута отображается время движения по маршруту и кнопка ‘Построить’ Строка ‘Добавить точку’ не отображается
    - do: Тап на 'Построить'
    - assert: |
        На спане карты отображается построенный маршрут
        В верхней части экрана отображаются кнопки ‘Назад’, ‘Меню’
        В данных о маршруте отображается: ‘Откуда’, ‘Через 8 точек’, ‘Куда’
        Внизу экрана отображаются: Время/Расстояние по маршруту, Кнопка поехали

    - platforms:
      - ios
    - tags:
      - assessors
      - use_map


  Проверка ограничения количества промежуточных точек при ведении по маршруту при добавлении промежуточной точки через лонгтап:
    - info: |
        В ведении должна происходить симуляция движения:
        Debug-panel > Routes > Demo movement
        Отображается экран с построенным автомобильным маршрутом с 8-ю промежуточными точками
    - do: Тап на 'Поехали'
    - assert:  Открывается экран ведения по маршруту В прогресс баре маршрута отображается 8 промежуточных точек
    - do: Лонгтап на спане карты
    - assert: |
        На экране отображается лонгтап меню: Кнопки 'Отсюда' и 'Сюда' активны, Кнопка 'Заехать' не активна и выделена серым цветом
        Под кнопками 'Отсюда', 'Сюда' и 'Заехать' отображается сообщение 'Вы уже выбрали максимальное число точек' и кнопка 'ОК'
        Ниже отображаются: 'Что здесь?', 'Добавить дорожное событие', 'Панорама'
    - do: Тап по 'Заехать'
    - assert:  Промежуточная точка не добавлена Ничего не изменилось
    - do: Тап по 'ОК'
    - assert:  На экране отображается лонг-тап меню Сообщение ‘Вы уже выбрали максимальное число точек’ и кнопка ‘ОК’ на экране не отображается Кнопка 'Заехать' не активна
    - do: Закрыть лонг-тап меню
    - assert:  Отображается экран ведения по маршруту В прогресс баре маршрута отображается 8 промежуточных точек
    - do: Лонг-тап на спане карты
    - assert: |
        На экране отображается лонгтап меню: Кнопки 'Отсюда' и 'Сюда' активны, Кнопка 'Заехать' не активна и выделена серым цветом
        Сообщение 'Вы уже выбрали максимальное число точек' и кнопка 'ОК' отображаются
        Ниже отображаются: 'Что здесь?', 'Добавить дорожное событие', 'Панорама'
    - do: Тап по ‘Заехать’
    - assert:  Промежуточная точка не добавлена Ничего не изменилось
    - do: Повторить все шаги для маршрута ОТ, пешеходного и велосипедного маршрутов

    - platforms:
      - ios
    - tags:
      - assessors
      - use_map


  Проверка ограничения количества промежуточных точек при ведении по маршруту при добавлении промежуточной точки через карточку организации/топонима:
    - info: |
        В ведении должна происходить симуляция движения:
        На Android: Debug-panel > Routes > Demo movement
        Отображается экран с построенным автомобильным маршрутом с 8-ю промежуточными точками
    - do: Тап на 'Поехали'
    - assert:  Открывается экран ведения по маршруту В прогресс баре маршрута отображается 8 промежуточных точек
    - do: Открыть карточку топонима/организации
    - assert: |
        На экране отображается миникарточка организации/топонима: Название организации / адрес топонима, Расстояние до организации/топонима, В нижней отображаются экшн-кнопки
    - do: Тап по 'Маршрут'
    - assert:  Открывается экран построения маршрута Маршрут отображается с промежуточными точками В поле откуда отображается - Моё местоположение В поле куда отображается ранее выбранная Организация/топоним
    - do: Повторить все шаги для маршрута ОТ, пешеходного и велосипедного маршрутов

    - platforms:
      - ios
    - tags:
      - assessors


  Проверка ограничения количества промежуточных точек при ведении по маршруту при добавлении промежуточной точки через поиск:
    - do: Тап на 'Поехали'
    - assert:  Открывается экран ведения по маршруту В прогресс баре маршрута отображается 8 промежуточных точек
    - do: Тап на 'Поиск'
    - assert: |
        Раскрывается меню поиска: В верхней части меню отображается грип, Под грипом отображается кнопка голосового поиска, Отображаются поисковые категории
    - do: |
        Тап на поисковую категорию (например: 'Где поесть')
    - assert:  На экране ведения по маршруту отображаются пины поисковой выдачи В левом нижнем углу отображается запрос поисковой категории
    - do: Тап по пину поисковой выдачи
    - assert: |
        Пины организации на карте отображается поднятым
        Открывается миникарточка организации
        В миникарточке отображаются: Название, Режим работы, Рейтинг и кол-во оценок, Режим работы, Расстояние и время до места Отображается блок экшн кнопок
    - do: Тап по 'Маршрут'
    - assert:  Открывается экран построения маршрута Маршрут отображается с промежуточными точками В поле откуда отображается - Моё местоположение В поле куда отображается ранее выбранная Организация

    - platforms:
      - ios
    - tags:
      - assessors
      - use_map


  Добавление промежуточной точки вело-маршрут через Меню (Добавить точку):
    - info: |
        Построиен маршрут между произвольными точками
        Открыт экран  выбора варианта маршрута на вкладке вело-маршрута
    - do: Тап в навбаре на кнопку в виде 3 вертикальных точек
    - assert:  Отображается меню с возможностью изменения маршрута и добавления точки
    - do: Тап на 'Добавить точку'
    - assert: |
        Открывается экран добавления промежуточной точки
        Отображается поле ввода промежуточной точки с плейсхолдером 'Добавить точку'
        Ниже отображаются кнопки 'Дом/Работа'
        Под полем ввода отображаются саджесты 'Указать на карте' и 'Голосовой ввод'
        Под полем ввода может отображаться 'Моё местоположение'
    - do: Ввести произвольный адрес или название  организации  в  плейсхолдере 'Добавить точку'
    - assert:  Отображаются саджесты В саджестах указан название организации,адрес и расстояние
    - do: Тап на саджест
    - assert:  Отображается экран выбора варианта маршрута Геометрия маршрута поменялась Промежуточная точка добавилась к маршруту Время и расстояние маршрута изменились Может отображаться предупреждение 'С выездом на проезжую часть'
    - do: Свернуть и развернуть приложение
    - assert:  Отображается экран выбора варианта маршрута, ничего не съехало

    - platforms:
      - android
    - integration_run:
      - mapkit
    - tags:
      - assessors
      - use_map


  Проход через промежуточные точки на пешем и вело маршруте:
    - info: |
        В ведении должна происходить симуляция движения:
        На Android: через Mock Location
        На iOS: через Enter your route в дебаг-панели
        info:
          1 Построить произвольный пешеходный маршрут с двумя промежуточными точками
          2 Открыт экран выбора вариантов маршрута
    - do: Тап на 'Начать'
    - assert:  Открыт экран ведения по маршруту
    - do: Пройти до первой промежуточной точки
    - assert:  При проходе через промежуточную точку она пропадает с линии маршрута на карте
    - do: Дойти до следующей промежуточной точки
    - assert:  Результат идентичный раннему На экране больше не отображается промежуточных точек, старые точки не появляются, маршрут не перестраивается
    - do: Дойти до конца маршрута
    - assert:  Промежуточные точки не отображаются на карте, старые точки не появляются, маршрут не перестраивается
    - do: Повторить кейс для веломаршрута
    - assert:  Результаты соответствуют шагам

    - platforms:
      - ios
    - tags:
      - assessors
      - use_map


  Оптимизация автомаршрута при добавлении 2+ промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" неактивна
    - do: Тапом на "Добавить точку" добавить 2 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка "Оптимизировать" стала активной
    - do: Тап на "Оптимизировать"
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация автомаршрута при изменении порядка промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" не активна
    - do: Тапом на "Добавить точку" добавить 3 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка Оптимизировать стала активной
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна
    - do: Изменить порядок промежуточных точек лонг-тапом (две горизонтальные линии)
    - assert: |
        Порядок точек изменился
        Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: Маршрут оптимизирован

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация автомаршрута при добавлении 10 промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" не активна
    - do: Тапом на "Добавить точку" добавить 8 промежуточных точек
    - assert: |
        В шторке отображаются 10 точек (начальная, конечная и 8 промежуточных)
        Внизу шторки отображается надпись На маршруте может быть только 10 точек
        Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация ОТ маршрута при добавлении 2+ промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить ОТ маршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" неактивна
    - do: Тапом на "Добавить точку" добавить 2 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка "Оптимизировать" стала активной
    - do: Тап на "Оптимизировать"
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация ОТ маршрута при изменении порядка промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить ОТ маршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" не активна
    - do: Тапом на "Добавить точку" добавить 3 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка Оптимизировать стала активной
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна
    - do: Изменить порядок промежуточных точек лонг-тапом (две горизонтальные линии)
    - assert: |
        Порядок точек изменился
        Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: Маршрут оптимизирован

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация ОТ маршрута при добавлении 10 промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить ОТ маршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" не активна
    - do: Тапом на "Добавить точку" добавить 8 промежуточных точек
    - assert: |
        В шторке отображаются 10 точек (начальная, конечная и 8 промежуточных)
        Внизу шторки отображается надпись На маршруте может быть только 10 точек
        Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация пешего маршрута при добавлении 2+ промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить пеший маршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" неактивна
    - do: Тапом на "Добавить точку" добавить 2 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка "Оптимизировать" стала активной
    - do: Тап на "Оптимизировать"
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация пешего маршрута при изменении порядка промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить пеший маршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" не активна
    - do: Тапом на "Добавить точку" добавить 3 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка Оптимизировать стала активной
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна
    - do: Изменить порядок промежуточных точек лонг-тапом (две горизонтальные линии)
    - assert: |
        Порядок точек изменился
        Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: Маршрут оптимизирован

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация пешего маршрута при добавлении 10 промежуточных точек:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить пеший маршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" не активна
    - do: Тапом на "Добавить точку" добавить 8 промежуточных точек
    - assert: |
        В шторке отображаются 10 точек (начальная, конечная и 8 промежуточных)
        Внизу шторки отображается надпись На маршруте может быть только 10 точек
        Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Переход на другой тип маршрута после оптимизации:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка Оптимизировать неактивна
    - do: Тапом на "Добавить точку" добавить 3 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна
    - do: Тап на Готово
    - do: Выбрать пеший маршрут
    - do: Тап на адрес вверху экрана
    - assert: |
        Кнопка Оптимизировать активна
        В левом углу отображается кол-во времени
    - do: Оптимизировать маршрут
    - assert: Маршрут оптимизирован

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация автомаршрута при добавлении 2+ промежуточных точек в горизонтальной ориентации:
    - info: |
        Открыт главный экран приложения
        Устройство находится в горизонтальной ориентации
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка "Оптимизировать" неактивна
    - do: Тапом на "Добавить точку" добавить 2 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка "Оптимизировать" стала активной
    - do: Тап на "Оптимизировать"
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация маршрута при добавлении 2+ промежуточных точек через карточку организации:
    - info: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на карточку организации
    - assert: Открывается мини-карточка организации
    - do: Тап на "Заехать"
    - assert: Открывается экран обзора маршрута
    - do: Еще 2 раза тап на "Заехать" в любых карточках орги
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка "Оптимизировать" активна
    - do: Тап на "Оптимизировать"
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация автомаршрута при включении и отключении интернета:
    - info: Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка Оптимизировать неактивна
    - do: Тапом на "Добавить точку" добавить 2 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка Оптимизировать активна
    - do: Отключить интернет на устройстве
    - assert: Кнопка Оптимизировать неактивна
    - do: Включить интернет
    - assert: Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Оптимизация автомаршрута, построенного через офлайн карты:
    - info: |
        Скачаны офлайн-карты текущего региона
        Открыт главный экран приложения
    - do: |
        Использовать интент:
        [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-27%20в%2013.36.04.png){title=QR-код}

        `yandexmaps://add_exp?points_route_optimization`
    - do: Перезапустить приложение
    - do: Отключить интернет на устройстве
    - do: Построить автомаршрут
    - assert: Открыт экран обзора маршрута
    - do: Тап на адрес вверху экрана
    - assert: |
        Отображается шторка для построения промежуточных точек
        В правом углу шторки кнопка Оптимизировать неактивна
    - do: Тапом на "Добавить точку" добавить 2 промежуточные точки
    - assert: |
        Добавленные точки отображаются в шторке
        В левом углу отображается кол-во времени в пути
        Кнопка Оптимизировать неактивна
    - do: Включить интернет
    - assert: Кнопка Оптимизировать активна
    - do: Тап на Оптимизировать
    - assert: |
        Появляется спиннер
        По окончании оптимизации появляется надпись Маршрут оптимален
        Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
        Кнопка Оптимизировать неактивна

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Добавление промежуточной точки при тапе на Заехать:
    - info: Открыт главный экран приложения
    - do: Тап по любой POI
    - do: Тап на "Маршрут"
    - assert: |
        Открыт экран обзора маршрута
        Строится маршрут до выбранного POI
    - do: Тап на Поехали
    - assert: Произошел переход в режим ведения
    - do: Долгий тап в любое место на карте
    - do: Тап на "Заехать"
    - assert: |
        Открыт экран обзора маршрута
        Маршрут перестраивается с учетом промежуточной точки

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Оптимизация автомаршрута в режиме Навигатор с экспериментом:
   - info: |
      Открыт главный экран приложения
      Ранее были построены маршруты
   - do: |
       Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/optim%2Bnavi%2Bmodels.png){title=QR-код}

       `yandexmaps://add_exp?routes_new_screen_from_modes&points_route_optimization&service_navi&service_architecture`
   - do: Перезапустить приложение после применения интента
   - do: Тап по табу Навигатор в таббаре
   - assert: |
       Включен режим Навигатора
       Над тулбаром отображаюся маршрутные саджесты
   - do: Тап на любой маршрутный саджест
   - assert: Построен автомобильный маршрут
   - do:  Тап в навбаре кнопку в виде 3 вертикальных точек
   - assert:  В нижней части экрана появилось меню (на iPad посередине)
   - do: Тап 'Добавить точку'
   - assert: Открыт экран добавления промежуточной точки
   - do: Ввести название любой организации
   - do: Тап на любой саджест в поисковой выдачи
   - aseert: |
       Отображается экран Маршрут
       Промежуточная точка добавилась
       Кнопка Оптимизировать неактивна
   - do: Тап Добавить точку
   - do: Тап на любой саджест в блоке История
   - aseert: |
       Отображается экран Маршрут
       Промежуточная точка добавилась
       Кнопка Оптимизировать стала активной
   - do: Тап Оптимизировать
   - assert: |
       По окончании оптимизации появляется надпись Маршрут оптимален
       Отображается оптимизированный маршрут (порядок мест может не измениться, если маршрут уже был оптимален)
       Кнопка Оптимизировать неактивна
   - do: Тап Готово
   - assert:  |
       Построен автомобильный маршрут
       Точки отображаются на карте
       В навбаре отображаются пункты Откуда, Куда: 3 места
       Вверху экрана НЕ отображается плашка с табами выбора типа маршрута


