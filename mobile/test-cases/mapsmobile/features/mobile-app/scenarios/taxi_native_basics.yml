components: taxi_native_basics
testing:
  - regress

specs:

  Просмотр плашки со статусом заказа нативного такси:
    - info: |
        Устройство в вертикальной ориентации
        В дебаг-панели:
          Webview -> Taxi webview base url -> testing
          Environment -> Passport Environment ->testing
          Environment -> Mobmaps Proxy host -> testing
          Environment -> PaymentSDK Environment ->testing
          Для экспериментов taxi_native_order_in_taxi_tab и taxi_open_webview установлено значение -> web_view_always_open
        Авторизоваться аккаунтом тестового паспорта yndx-kripp-le-ami606 gen2752
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
    - do: Построить произвольный маршрут на такси
    - do: Тап на Заказать
    - assert: |
        Отображается вебвью такси
        Идет поиск машины
    - do: Закрыть вебвью
    - assert: Отображается экран выбора маршрута
    - do: Закрыть экран выбора маршрута
    - assert: |
        Отображается главный экран приложения
        Отображается плашка со статусом "Поиск машины"
    - do: Дождаться смены статуса в плашке
    - assert: |
        Отображается плашка со статусом "Будет через N минут.."
        В плашке указаны данные об автомобиле
    - do: Сменить ориентацию девайса
    - assert: Отображается плашка в горизонтальной ориентации
    - do: Дождаться смены статуса в плашке
    - assert: |
        Отображается плашка со статусом "Машина ожидает"
        В плашке указаны данные об автомобиле
    - do: Свернуть и развернуть приложение
    - assert: Плашка продолжает отображаться
    - do: Тап на Смотреть
    - assert: |
        Открывается вебвью заказа
        В вебвью данные соответвуют данным в плашке
    - do: Тап на Отменить
    - do: Подтвердить отмену заказа
    - assert: Заказ отменен
    - do: Закрыть вебвью
    - assert: |
        Открыт главный экран приложения
        Плашка со статусом заказа не отображается

    - platforms:
        - ios
        - android
    - tags:
        - advertisement
        - newbie
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin


  Выход из аккаунта во время заказа нативного такси:
    - info: |
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
        В дебаг-панели:
          Webview -> Taxi webview base url -> testing
          Environment -> Passport Environment ->testing
          Environment -> Mobmaps Proxy host -> testing
          Environment -> PaymentSDK Environment ->testing
          Для экспериментов taxi_native_order_in_taxi_tab и taxi_open_webview установлено значение web_view_always_open
        Авторизоваться аккаунтом тестового паспорта yndx-kripp-le-ami606 gen2752
        Авторизоваться по ссылке https://passport-test.yandex.ru на ПК под тем же аккаунтом
        В профиле на ПК выбрать - Управление аккаунтом -> Входы и устройства
        Построить произвольный маршрут на такси
    - do: Тап на Заказать
    - assert: |
        Отображается вебвью такси
        Идет поиск машины
    - do: Дождаться назначения машины
    - assert: Отображается статус "Будет через N минут.."
    - do: На ПК тап на Выйти на всех устройствах
    - do: Подтвердить выход со всех устройств
    - assert: |
        В вебвью карт произошел разлогин
        Отображается форма ввода пароля для аккаунта
    - do: Войти в аккаунт
    - assert: В вебвью отображается действующий заказ
    - do: Закрыть вебвью
    - do: Закрыть экран выбора вариантов маршрута
    - assert: На главном экране отображается плашка со статусом заказа такси
    - do: Тап в плашке на Смотреть
    - assert: Открыто вебвью заказа
    - do: Тап на Отменить
    - do: Подтвердить отмену заказа
    - assert: Заказ отменен

    - platforms:
        - ios
        - android
    - tags:
        - advertisement
    - testing:
        - acceptance_maps


  Отображение нативного такси в в Я.Картах, если приложение Я.Go не установлено при параметре if_no_go:
    - info: |
        Приложение Я.Go не установлено
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение if_no_go
        Пользователь авторизован
    - do: Тап на таб "Маршруты" в таббаре
    - assert: Открылся экран построения маршрута
    - do: Построить произвольный маршрут на такси
    - assert: |
        Построен маршрут на такси
        В верхней части экрана отображается плашка с табами выбора типа маршрута
        В нижней части экрана отображается нативная карточка выбора тарифов с указанием стоимости по каждому тарифу
        В карточке также отображается способ выбора оплаты, комментарии и кнопка Заказать такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отсутствие нативного такси в Я.Картах, если приложение Я.Go установлено при параметре if_no_go:
    - info: |
        Приложение Я.Go установлено
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение if_no_go
        Пользователь авторизован
    - do: Тап на таб "Маршруты" в таббаре
    - assert: Открылся экран построения маршрута
    - do: Построить произвольный маршрут на такси
    - assert: |
        Построен маршрут на такси
        Вверху экрана отображается плашка с табами выбора типа маршрута
        В нижней части экрана отсутствует нативная карточка выбора тарифов с указанием стоимости по каждому тарифу
        Вместо нее отображается карточка с указанием времени в пути, с примерной минимальной стоимостью поездки и кнопкой Выбрать тариф

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Переключение тарифов нативного такси:
    - info:
        Устройство в вертикальной ориентации
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение always_open
        Пользователь авторизован
    - do: Построить маршрут на такси любым способом
    - assert: |
        Отображается плашка с табами выбора типа маршрута
        Выбран таб Такси
        Построен маршрут
        В нижней части экрана отображается нативная карточка выбора тарифов с указанием стоимости по каждому тарифу
        Стоимость выбранного тарифа в карточке совпадает со стоимостью указанной в табе
    - do: Тап по другому тарифу
    - assert: |
        Выделен выбранный тариф
        Стоимость выбранного тарифа в карточке совпадает со стоимостью в табе
    - do: Перевернуть устройство в горизонтальную ориентацию
    - assert: |
        Приложение отображается в горизонтальной ориентации
        Экран с табами маршрутов и нативной карточкой отображается в горизонтальной ориентации
    - do: Проскроллить тарифы и тап по другому тарифу
    - assert: |
        Выделен выбранный тариф
        Стоимость выбранного тарифа в карточке совпадает со стоимостью в табе
    - do: Тап по другому тарифу
    - assert: |
        Выделен выбранный тариф
        Стоимость выбранного тарифа в карточке совпадает со стоимостью в табе

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отображение времени поездки такси в верхнем табе в нативном такси:
    - info: |
        В дебаг-панели:
          Эксперимент taxi_time_in_tab_above -> вкл
          Для эксперимента taxi_native_order_in_taxi_tab установлено значение always_open
    - do: Построить любой маршрут
    - assert: |
        Построен маршрут
        Отображается плашка с табами выбора типа маршрута
        У таба "Такси" отображается время поездки
    - do: Тап по табу "Такси"
    - assert: |
        У таба "Такси" отображается время поездки
        Внизу экрана отображается нативная карточка выбора тарифов с указанием стоимости по каждому тарифу

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие тарифов при выключенном эксперименте нативного такси:
    - info:
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение null
        Пользователь авторизован
    - do: Тап на таб "Маршруты" в таббаре
    - assert: Открылся экран построения маршрута
    - do: Построить произвольный маршрут на такси
    - assert: |
        Построен маршрут на такси
        Вверху экрана отображается плашка с табами выбора типа маршрута
        В нижней части экрана отсутствует нативная карточка выбора тарифов с указанием стоимости по каждому тарифу
        Вместо нее отображается карточка с указанием времени в пути, с примерной минимальной стоимостью поездки и кнопкой Выбрать тариф

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отображение тарифов при включенном эксперименте нативного такси:
    - info:
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение always_open
        Пользователь авторизован
    - do: Тап на таб "Маршруты" в таббаре
    - assert: Открылся экран построения маршрута
    - do: Построить произвольный маршрут на такси
    - assert: |
        Построен маршрут на такси
        В верхней части экрана отображается плашка с табами выбора типа маршрута
        В нижней части экрана отображается нативная карточка выбора тарифов с указанием стоимости по каждому тарифу
        В карточке также отображается способ выбора оплаты, комментарии и кнопка Заказать такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - integration_run:
        - kotlin


  Комментирование поездки в табе с нативным такси:
    - info: |
        Пользователь авторизован
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение always_open
    - do: Тап на таб "Маршруты" в таббаре
    - assert: Открылся экран построения маршрута
    - do: Построить произвольный маршрут на такси
    - assert: |
        Построен маршрут на такси
        В нижней части экрана отображается нативная карточка такси с тарифами
    - do: Развернуть карточку для отображения блока с комментарием
    - assert: Отображается блок комментирования
    - do: Тап по блоку комментирования
    - assert: Открывается экран редактирования комментария
    - do: Ввести любой текст в одну строку и тап Готово
    - assert: |
        Экран редактирования закрывается
        Введенный текст отображается в блоке комментирования

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Редактирование комментария в табе с нативным такси:
    - info: |
        Пользователь авторизован
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение always_open
    - do: Тап на таб "Маршруты" в таббаре
    - assert: Открылся экран построения маршрута
    - do: Построить произвольный маршрут на такси
    - assert: |
        Построен маршрут на такси
        В нижней части экрана отображается нативная карточка такси с тарифами
    - do: Развернуть карточку для отображения блока с комментарием
    - assert: Отображается блок комментирования
    - do: Тап по блоку комментирования
    - assert: Открывается экран редактирования комментария
    - do: Ввести любой многострочный текст и тап Готово
    - assert: |
        Экран редактирования закрывается
        Введенный текст отображается в блоке комментирования
        Не поместившийся текст скрывается троеточием
    - do: Тап по блоку комментирования
    - assert: |
        Открывается экран редактирования комментария
        На экране отображается введенный ранее комментарий
    - do: Очистить комментарий и ввести одно слово
    - assert: |
        Текст в комментарии удаляется
        Отображается новый текст в одну строку
    - do: Тап Готово
    - assert: |
        Экран редактирования закрывается
        Введенный текст отображается в блоке комментирования без троеточия

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в таб Такси из карточки организации:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин организации
    - assert: Открывается карточка организации
    - do: Раскрыть карточку
    - assert: |
        - Отображается полная карточка организации
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors
        - newbie
    - testing:
        - acceptance_maps


  Переход в таб Такси из action-бара карточки организации:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин организации
    - assert: |
        - Отображается карточка организации
        - В action-баре отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси в action-баре
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в таб Такси из карточки топонима:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин топонима
    - assert: Открывается карточка топонима
    - do: Раскрыть карточку
    - assert: |
        - Отображается полная карточка топонима
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в таб Такси из action-бара карточки топонима:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин топонима
    - assert: |
        - Отображается карточка топонима
        - В action-баре отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси в action-баре
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в таб Такси из карточки остановки:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин остановки
    - assert: Открывается карточка остановки
    - do: Раскрыть карточку
    - assert: |
        - Отображается полная карточка остановки
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из action-бара карточки остановки:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин остановки
    - assert: |
        - Отображается карточка остановки
        - В action-баре отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси в action-баре
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из карточки парковки с нулевым ценником:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Включен парковочный слой
    - do: Тап на пин парковки с нулевым ценником
    - assert: Открывается карточка парковки
    - do: Раскрыть карточку
    - assert: |
        - Отображается полная карточка парковки
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из action-бара карточки парковки с нулевым ценником:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Включен парковочный слой
    - do: Тап на пин парковки с нулевым ценником
    - assert: |
        - Отображается карточка парковки с нулевым ценником
        - В action-баре отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси в action-баре
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из карточки парковки с ненулевым ценником:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Включен парковочный слой
    - do: Тап на пин парковки с ненулевым ценником
    - assert: Открывается карточка парковки
    - do: Раскрыть карточку
    - assert: |
        - Отображается полная карточка парковки
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из action-бара карточки парковки с ненулевым ценником:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Включен парковочный слой
    - do: Тап на пин парковки с ненулевым ценником
    - assert: |
        - Отображается карточка парковки с ненулевым ценником
        - В action-баре отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси в action-баре
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из карточки полигональной парковки:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Включен парковочный слой
    - do: Тап на пин полигональной парковки
    - assert: Открывается карточка парковки
    - do: Раскрыть карточку
    - assert: |
        - Отображается полная карточка парковки
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из action-бара карточки полигональной парковки:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Включен парковочный слой
    - do: Тап на пин полигональной парковки
    - assert: |
        - Отображается карточка полигональной парковки
        - В action-баре отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси в action-баре
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из карточки метро:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин метро
    - assert: Открывается карточка метро
    - do: Раскрыть карточку
    - assert: |
        - Отображается полная карточка метро
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из action-бара карточки метро:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
    - do: Тап на пин метро
    - assert: |
        - Отображается карточка метро
        - В action-баре отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси в action-баре
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из таба Все:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Построен маршрут
    - do: Тап на таб Все
    - assert: |
        - Отображается таб Все
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в таб Такси из таба На авто:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Построен маршрут
    - do: Тап на таб На авто
    - assert: |
        - Отображается таб На авто
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - do: Тап на Поехали
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Переход в таб Такси из таба Пешком:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Построен маршрут
    - do: Тап на таб Пешком
    - assert: |
        - Отображается таб Пешком
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - do: Тап на Начать
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в таб Такси из таба Общественного Транспорта:
    - info: |
        - Выставлен эксперимент `Debug Panel - Experiments - open_taxi_tab_from_all_buttons = always_open`
        - Построен маршрут
    - do: Тап на таб Общественного Транспорта
    - assert: |
        - Отображается таб Общественного Транспорта
        - Отображается кнопка вызова Такси
    - do: Тап на кнопку вызова Такси
    - assert: Происходит переход в таб Такси

    - platforms:
        - android
    - tags:
        - assessors


  Удаление комментария в табе с нативным такси:
    - info: |
        Пользователь авторизован
        В дебаг-панели для эксперимента taxi_native_order_in_taxi_tab установлено значение always_open
    - do: Тап на таб "Маршруты" в таббаре
    - assert: Открылся экран построения маршрута
    - do: Построить произвольный маршрут на такси
    - assert: |
        Построен маршрут на такси
        В нижней части экрана отображается нативная карточка такси с тарифами
    - do: Развернуть карточку для отображения блока с комментарием
    - assert: Отображается блок комментирования
    - do: Тап по блоку комментирования
    - assert: Открывается экран редактирования комментария
    - do: Ввести любой текст и тап Готово
    - assert: |
        Экран редактирования закрывается
        Введенный текст отображается в блоке комментирования
        Не поместившийся текст скрывается троеточием
    - do: Тап по блоку комментирования
    - assert: |
        Открывается экран редактирования комментария
        На экране отображается введенный ранее комментарий
    - do: Очистить комментарий полностью
    - assert: |
        Текст в комментарии удаляется
    - do: Тап Готово
    - assert: |
        Экран редактирования закрывается
        Блок с комментарием пустой

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Сохранение плашки с состоянием заказа при перезапуске приложения:
    - info: |
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
        В дебаг-панели:
          Webview -> Taxi webview base url -> testing
          Environment -> Passport Environment ->testing
          Environment -> Mobmaps Proxy host -> testing
          Environment -> PaymentSDK Environment ->testing
          Для экспериментов taxi_native_order_in_taxi_tab и taxi_open_webview установлено значение -> web_view_always_open
        Авторизоваться аккаунтом тестового паспорта yndx-kripp-le-ami606 gen2752
    - do: Построить произвольный маршрут на такси
    - do: Тап на Заказать
    - assert: |
        Отображается вебвью такси
        Идет поиск машины
    - do: Закрыть вебвью
    - assert: Отображается экран выбора маршрута
    - do: Закрыть экран выбора маршрута
    - assert: |
        Отображается главный экран приложения
        Отображается плашка со статусом "Поиск машины"
    - do: Свернуть приложение и убрать из списка запущенных
    - assert: Приложение не отображается в списке запущенных
    - do: Запустить приложение
    - assert: Плашка со статусом заказа отображается

    - platforms:
        - android
        - ios
    - tags:
        - advertisement


  Маршрутные саджесты в табе "Такси":
    - info: |
        Приложение Я.Go не установлено
        Открыт главный экран приложения
        Все расстояния данного ТК измеряются только по прямой
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/такси.png){title=QR-код}

        `yandexmaps://add_exp?taxi_tab_on_main_screen&taxi_native_order_in_taxi_tab=always_open`
    - do: Перезапустить приложение
    - do: Тап на таб Такси
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
    - do: |
        В шторке такси тап на Куда > Указать на карте
        На карте указать место на расстоянии меньше чем 1000м от пина точки "откуда"
        Тап на Готово
    - assert: Отображается экран выбора маршрутов
    - do: Тап Назад
    - assert: |
        Открыт таб Такси
        В шторке такси не появился маршрутный саджест с новым адресом
    - do: |
        В шторке такси тап на Куда > Указать на карте
        На карте указать место на расстоянии больше чем 1000м от пина точки "откуда"
        Тап на Готово
    - assert: Отображается экран выбора маршрутов
    - do: Тап Назад
    - assert: |
        Открыт таб Такси
        В шторке такси отображается маршрутный саджест с адресом, на который был построен маршрут
        У саджеста присутствует время доезда
    - do: |
        В шторке такси тап на Куда > Указать на карте
        На карте указать место на расстоянии меньше чем 250м от предыдущей точки, но больше чем 250м от пина точки "откуда"
        Тап на Готово
    - assert: Отображается экран выбора маршрутов
    - do: Тап Назад
    - assert: |
        Открыт таб Такси
        Отображается маршрутный саджест с последним адресом, на который был построен маршрут
        У саджеста присутствует время доезда
        Маршрутный саджест с предыдущим адресом не отображается

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors

  Количество маршрутных саджестов в табе "Такси":
    - info: |
        В дебаг-панели включены эксперименты:
          Experiments > taxi_tab_on_main_screen
          Experiments > taxi_native_order_in_taxi_tab со значением ALWAYS_OPEN
        Приложение Я.Go не установлено
        Дом и Работа не указаны
        Ранее маршруты не были построены
        Открыт главный экран приложения
        Все расстояния данного ТК измеряются только по прямой
    - do: Тап на таб Такси
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
    - do: Четыре или более раз построить маршруты до произвольных точек, находящихся на расстоянии более, чем 250м от пина точки "откуда" и друг от друга
    - assert: |
        Открыт таб Такси
        В шторке такси отображаются маршрутные саджесты трех последних адресов из истории
        У саджестов присутствует время доезда

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Саджест Дом в табе Такси:
    - info: |
        В дебаг-панели включен эксперимент Experiments > taxi_tab_on_main_screen
        Включить эксперимент taxi_native_order_in_taxi_tab = if_no_go
        Приложение Я.Go не установлено
        Указан Дом в закладках пользователя
        Открыт главный экран приложения
        Все расстояния данного ТК измеряются только по прямой
    - do: Тап на таб Такси
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Дом будет более 1 км, но меньше 300 км
    - assert: |
        В шторке такси отображается саджест Дом
        Саджест Дом отображается перед маршрутными саджестами
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Дом будет менее 1 км
    - assert: В шторке такси саджест Дом не отображается
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Дом будет более 300 км
    - assert: В шторке такси саджест Дом не отображается

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Саджест Работа в табе Такси:
    - info: |
        В дебаг-панели включен эксперимент Experiments > taxi_tab_on_main_screen
        Включить эксперимент taxi_native_order_in_taxi_tab = if_no_go
        Приложение Я.Go не установлено
        Указана Работа в закладках пользователя
        Открыт главный экран приложения
        Все расстояния данного ТК измеряются только по прямой
    - do: Тап на таб Такси
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Работа будет более 1 км, но меньше 300 км
    - assert: |
        В шторке такси отображается саджест Работа
        Саджест Работа отображается перед маршрутными саджестами
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Работа будет менее 1 км
    - assert: В шторке такси саджест Работа не отображается
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Работа будет более 300 км
    - assert: В шторке такси саджест Работа не отображается

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение маршрутов в саджестах Такси:
    - info: |
        В дебаг-панели включен эксперимент Experiments > taxi_tab_on_main_screen
        Включить эксперимент taxi_native_order_in_taxi_tab = if_no_go
        Приложение Я.Go не установлено
        Открыт главный экран приложения
        Все расстояния данного ТК измеряются только по прямой
    - do: Построить маршрут любым способом на расстояние больше 1000м, но меньше 300км
    - assert: Отображается экран выбора маршрутов
    - do: Тап Назад
    - assert: Открыт главный экран приложения
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
        В шторке отображается саджест с адресом построенного маршрута после саджестов Дом/Работа (если есть)
    - do: |
        Закрыть шторку такси
        Тап на таб Навигатор
        Построить маршрут любым способом на расстояние больше 1000м но меньше 300км
    - assert: Отображается экран выбора маршрутов
    - do: Тап Назад
    - assert: Открыт экран Навигатора
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
        В шторке отображается саджест с адресом построенного маршрута после саджестов Дом/Работа (если есть)

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Заказ такси через саджест:
    - info: |
        Почистить данные приложения или удалить приложение и поставить заново
        Нужно тестировать во внутренней сети (подключить к Charles с включенным TunnelBlick)
        Дебаг-панель -> Webview -> Taxi webview base url -> testing
        Дебаг-панель -> Webview -> Taxi orders history webview base url -> testing
        Дебаг-панель -> Environment -> Passport Environment -> TESTING
        Дебаг-панель -> Environment -> Mobmaps Proxy host -> TESTING
        Дебаг-панель -> Environment -> PaymentSDK Environment -> TESTING
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением ALWAYS_OPEN
        Авторизоваться аккаунтом тестового паспорта yndx-kripp-le-ami606 gen2752
        В шторке такси есть маршрутные саджесты (если нет, построить любой маршрут на дистанцию больше 250м)
    - do: Тап на таб Такси
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
        В шторке есть маршрутные саджесты
    - do: Тап на саджест
    - do: Тап на Заказать Такси (оплата наличными)
    - assert: Отображается экран с Лицензионным соглашением
    - do: Принять лицензионное соглашение
    - assert: Происходит переход в вебвью, идет поиск машины
    - do: Закрыть вебвью и вернуться на главный экран
    - assert: Отображается плашка со статусом заказа
    - do: Дождаться пока заказ пройдет через все статусы (поиск, машина едет к вам, в пути, прибыли)
    - assert: Плашка с заказом не отображается
    - do: Тап меню - История поездок и заказов
    - assert: Отображается завершенная поездка

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps


  Саджест Дом не дублируется в результирующем саджесте:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением ALWAYS_OPEN
        Указан Дом в закладках пользователя
        Открыт главный экран приложения
        Все расстояния данного ТК измеряются только по прямой
    - do: Тап на таб Такси
    - assert: |
            Открывается шторка такси
            На карте есть пин точки "Откуда" который соответствует ММП пользователя
            В поле Откуда показан адрес, на который указывает пин
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Дом будет более 1 км, но меньше 300 км
    - assert: |
            В шторке такси отображается саджест Дом
            Саджест Дом отображается перед маршрутными саджестами
    - do: Тап на саджест Дом
    - assert: |
        Открывается экран выбора маршрута
        Отображается надпись "Дом" в поле Куда
        Выбран транспорт Такси
        Есть кнопка "Заказать такси"
    - do: |
        Вернуться на главный экран приложения (2 раза тап Назад)
        Тап на Маршруты в таббаре
        Перейти на вкладку Такси
    - assert: |
        Отображается экран построения маршрута
        В истории отсутствует саджест Дом или саджест с адресом Дом

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Саджест Работа не дублируется в результирующем саджесте:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением ALWAYS_OPEN
        Указан Работа в закладках пользователя
        Открыт главный экран приложения
        Все расстояния данного ТК измеряются только по прямой
    - do: Тап на таб Такси
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
    - do: Перемещать карту до тех пор, пока расстояние между пином "Откуда" и Работа будет более 1 км, но меньше 300 км
    - assert: |
        В шторке такси отображается саджест Работа
        Саджест Работа отображается перед маршрутными саджестами
    - do: Тап на саджест Работа
    - assert: |
        Открывается экран выбора маршрута
        В поле Куда отображается надпись "Работа"
        Выбран транспорт Такси
        Есть кнопка "Заказать такси"
    - do: |
        Вернуться на главный экран приложения (2 раза тап Назад)
        Тап на Маршруты в таббаре
        Перейти на вкладку Такси
    - assert: |
        Отображается экран построения маршрута
        В истории отсутствует саджест Работа или саджест с адресом Работы

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отображение табика такси. Негативный сценарий. Я.Go установлен:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе установлено приложение Я.Go
    - do: Перезапустить приложение
    - assert: В таббаре отсутствует табик Такси

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение табика такси. Позитивный сценарий. Я.Go установлен:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением ALWAYS_OPEN
        На девайсе установлено приложение Я.Go
    - do: Перезапустить приложение
    - assert: В таббаре присутствует табик Такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отсутствие дублирования заказов в нативной карточке такси:
    - info: |
        Устройство подключено ко внутренней сети через Charles или PDAS
        В дебаг-панели установить:
            `Webview -> Taxi webview base url -> testing`
            `Environment -> Passport Environment -> testing`
            `Environment -> Mobmaps Proxy host -> testing`
            `Environment -> PaymentSDK Environment -> testing`
            `Experiments -> taxi_native_order_in_taxi_tab -> always_open`
            `Experiments -> taxi_open_webview -> web_view_always_open`
        Пользователь авторизован аккаунтом тестового паспорта, который может быть сгенерирован ботом в Telegram https://t.me/qabmo_bot
        Перезагрузить приложение
    - do: Построить маршрут
    - do: Перейти в таб Такси
    - do: Тап на Заказать
    - assert: |
        В Charles приходит ручка `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/taxi/orders/draft`
        Отображается вебвью такси
        Идет поиск машины
    - do: Дождаться взятия заказа
    - assert: |
        Отображается машина
        Отображается надпись "Через N мин приедет..." с и информацией об автомобиле
    - do: Выйти из вебвью
    - do: Выйти на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        Внизу экрана отображается плашка со статусом заказа
    - do: Построить другой маршрут на такси
    - do: Тап на Заказать
    - assert: |
        В Charles НЕ приходит ручка `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/taxi/orders/draft`
        Отображается вебвью с ранее созданным заказом

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps


  Установка пина Откуда в табе такси:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
    - do: Свайпом изменить местоположение пина Откуда на локацию в рамках региона с поддержкой такси
    - assert: |
        Во время свайпа шторка такси сворачивается везде, кроме iPad
        После установки пина Откуда шторка такси разворачивается
        В поле ввода адреса Откуда плейсходер "Уточняем" меняется на адрес установленного пина
    - do: Поставить пин Откуда в локацию, недоступную для вызова такси(например,Тихий океан)
    - assert: |
        Пин Откуда отображается как запрещающий знак
        В табе такси отображается текст о невозможности заказа такси сюда

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Установка пина Куда в табе такси:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на такси в таббаре
    - assert: |
        Отображается шторка такси
    - do: Тап на поле Куда в шторке такси
    - assert: |
        Отображается экран Куда
    - do: По очереди выбрать все варианты указания точки "Куда" (Мое местоположение, Указать на карте, Голосовой ввод) в рамках региона с поддержкой такси
    - assert: |
        Отображается экран выбора варианта маршрута
        Выбран способ такси
        Точа Куда соответствует указанному адресу
        Присутствует кнопка "Заказать такси"
    - do: Выйти из экрана выбора варианта маршрута
    - do: Тап на поле Куда в табике такси
    - assert: |
        Отображается экран Куда
    - do: Выбрать вариант Указать на карте
    - do: Поставить пин Куда в локацию, недоступную для вызова такси(например,Тихий океан)
    - do: Тап на Готово
    - assert: |
        Отображается экран выбора варианта маршрута
        Выбран способ такси
        Внизу появляется сообщение о невозможности изменить маршрут
        Присутствует кнопка Изменить маршрут

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Изменение времени в саджестах таба такси при изменении местоположения пользователя:
    - info: |
        Сделана подмена геолокации пользователя через mock locations (android) и xcode (ios)
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        В приложении уже были построены автомаршруты
    - do: Тап на такси в таббаре
    - assert: |
        Отображается шторка такси
        В шторке такси отображаются саджесты
    - do: Выключить подмену геолокации пользователя
    - assert: |
        Происходит возврат к фактическому местоположению пользователя в приложении
        Изменяется время саджестов в шторке такси

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps


  Отображение плашки заказа такси в режиме автомобильного ведения:
    - info: |
        Девайс в вертикальной ориентации
        Девайс подключен к Charles во внутренней сети
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        Дебаг-панель -> Webview -> Taxi webview base url -> testing
        Дебаг-панель -> Environment -> Passport Environment -> TESTING
        Дебаг-панель -> Environment -> Mobmaps Proxy host -> TESTING
        Дебаг-панель -> Environment -> PaymentSDK Environment -> TESTING
        Авторизоваться в приложении аккаунтом тестового паспорта
        На девайсе не установлено приложение Я.Go
        Пользователем оформлен заказ такси (Построить маршрут - Открыть таб Такси - Авторизоваться - Заказать)
        На главном экране приложения отображается плашка заказа такси со статусом заказа
    - do: Построить маршрут и начать автомобильное ведение по нему
    - assert: |
        Плашка заказа такси отображается под ЕТА плашкой
        Название улицы не перекрывает курсор
    - do: Сменить ориентацию девайса на горизонтальную
    - assert: |
        Плашка ЕТА отображается в левой нижней части экрана
        Плашка заказа такси отображается под плашкой ЕТА
        Название улицы не перекрывает курсор

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Открытие плашки заказа такси из единой плашки заказов:
    - info: |
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
        Дебаг-панель -> Environment -> Passport Environment -> TESTING
        Дебаг-панель -> Environment -> Mobmaps Proxy host -> TESTING
        Дебаг-панель -> Environment -> PaymentSDK Environment -> TESTING
        Дебаг-панель -> Environment -> Taxi environment -> TESTING
        Дебаг-панель -> Webview -> Taxi webview base url -> testing
        Дебаг-панель -> Features -> Allow invalid cards
        Дебаг-панель -> Feauture -> Use flag ignor_telematics (for fake scooter)
        Использовать интенты:

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=ALWAYS_OPEN&kicksharing_on`
        [collapsed-image](https://jing.yandex-team.ru/files/alina-butba/exp-2.png){title=QR-код}

        Выйти из Дебаг-панели
        Перезапустить приложение
        Авторизоваться аккаунтом тестового паспорта yndx-kripp-le-ami606 gen2752
        Спан г. Москва
        Включен самокатный слой по тапу на саджест "Самокаты"
    - do: Тап на самокат
    - do: Тап на кнопку Забронировать
    - assert: Отображается карточка заказа в режиме бесплатного ожидания
    - do: Начать поездку
    - do: Построить маршрут в пределах видимой области экрана
    - assert: Построен маршрут
    - do: Перейти в таб Такси
    - do: Тап Заказать такси
    - do: Принять лицензионное соглашение
    - do: Закрыть вебвью и вернуться на главный экран
    - do: Перейти к единой плашке с иконками Самоката и Такси
    - do: Тап на плашку
    - assert: |
        Единая плашка раскрылась
        Отображаются плашки заказов самоката и Такси
        У каждой плашки отображается актуальный статус
    - do: Сменить ориентацию девайса
    - assert: |
        Плашки не свернулись в единую плашку
    - do: Сменить ориентацию девайса
    - assert: Плашки не свернулись в единую плашку
    - do: Тап на плашку заказа Такси
    - assert: Отображается Webview заказа Такси
    - do: Закрыть Webview заказа Такси
    - assert: |
        Отображаются плашки заказов такси и самоката
    - do: Тап на пустое пространство на карте
    - assert: Отображается единая плашка заказов

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Установка пина Откуда в табе такси (оффлайн):
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Девайс в оффлайн режиме
    - do: Тап на такси в таббаре
    - assert: |
        Отображается Пин Откуда
        В табе такси отображается текст об отсутствии интернет - соединения
        Отображается кнопка Попробовать еще раз
    - do: Изменить местоположение пина Откуда
    - assert: |
        Отображается Пин Откуда
        В табе такси отображается текст об отсутствии интернет - соединения
        Отображается кнопка Попробовать еще раз
    - do: Перейти в онлайн режим
    - do: Тап на кнопку Попробовать еще раз
    - assert: |
        Отображается пин Откуда
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Установка пина Откуда в табе такси (переход в оффлайн режим):
    - info: |
        Дебаг-панель -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Девайс в онлайн режиме
    - do: Тап на такси в таббаре
    - assert: |
        Отображается шторка такси
        Отображается пин Откуда на месте ММП
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин
    - do: Перейти в оффлайн режим
    - assert: |
        Отображается шторка такси
        Отображается пин Откуда на месте ММП
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин
    - do: Изменить местоположение пина Откуда
    - assert: |
        Пин Откуда отображается с точкой внутри (или отображается без времени доезда)
        В табе такси отображается текст об отсутствии интернет - соединения
        Отображается кнопка Попробовать еще раз
    - do: Перейти в онлайн режим
    - assert: |
        Пин Откуда отображается с точкой внутри (или отображается без времени доезда)
        В табе такси отображается текст об отсутствии интернет - соединения
        Отображается кнопка Попробовать еще раз
    - do: Изменить местоположение пина Откуда
    - assert: |
        Отображается шторка такси
        Отображается пин Откуда на месте ММП
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Установка пина Откуда в табе такси (регион вне поддержки):
    - info: |
        Дебаг-панель -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Девайс в онлайн режиме
    - do: Тап на такси в таббаре
    - assert: |
        Отображается шторка такси
        Отображается пин Откуда на месте ММП
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин
    - do: Изменить местоположение пина Откуда на регион с отсутствием поддержки такси (например, на океан / море)
    - assert: |
        Отображается пин Откуда в виде запрещающего знака
        В табе такси отображается текст о невозможности заказать сюда такси
        Присутствует кнопка Изменить маршрут
    - do: Изменить местоположение пина Откуда на регион с поддержкой такси
    - assert: |
        Отображается шторка такси
        Отображается пин Откуда
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Скролл карты при выборе таба Такси:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на такси в таббаре
    - assert: |
        Отображается шторка такси
        Отображается пин Откуда на месте ММП
        У пина точки "Откуда" отображается время приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин
    - do: Тап по кнопке Назад, расположенной выше плашки такси
    - assert: Открывается главный экран приложения
    - do: Сдвинуть карту таким образом, чтобы курсор оказался за границей экрана
    - do: Тап на такси в таббаре
    - assert: |
        Производится сдвиг карты к текущему местоположению курсора
        Отображается пин Откуда на месте ММП
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
        В поле Откуда показан адрес, на который указывает пин

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Установка пина Откуда через Мое местоположение экрана Откуда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
    - do: Изменить свайпом местоположение пина точки Откуда
    - assert: В поле Откуда изменился адрес местоположения пина точки Откуда
    - do: Тап на поле Откуда в шторке такси
    - assert: |
        Открылся экран Откуда
    - do: Очистить любым способом установленный адрес в поле ввода Откуда (IOS)
    - do: Тап на Мое местоположение
    - assert: |
        Отображается шторка такси
        В поле Откуда отображается адрес местоположения пользователя
        Пин точки Откуда соответствует новому адресу
        У пина точки Откуда отображается время до приезда такси в минутах в центре пина

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Установка пина Откуда через Указать на карте экрана Откуда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
        У пина точки "Откуда" отображается время до приезда такси в минутах в цнтре пина
    - do: Тап на поле Откуда в шторке такси
    - assert: |
        Открылся экран Откуда
    - do: Очистить любым способом установленный адрес в поле ввода Откуда (IOS)
    - do: Тап на Указать на карте
    - assert: |
        Отображается красный пин
        Внизу экрана панель с кнопкой Готово и отображением адреса пина
    - do: Изменить положение пина
    - assert: в нижней панели над кнопкой Готово отображается новый адрес пина
    - do: Тап на Готово
    - assert: |
        Отображается шторка такси
        Отображается пин точки Откуда
        У пина точки Откуда отображается время до приезда такси в минутах в центре пина
        В поле Откуда отображается адрес установленного пина
        Пин точки Откуда соответствует новому адресу

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Установка пина Откуда через Голосовой ввод экрана Откуда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует ММП пользователя
        В поле Откуда показан адрес, на который указывает пин
        У пина точки "Откуда" отображается время приезда такси в минутах в центре пина
    - do: Тап на поле Откуда в шторке такси
    - assert: |
        Открылся экран Откуда
    - do: Тап на Голосовой ввод
    - do: Разрешить приложению записывать аудио
    - assert: |
        Отображается экрана голосового ввода данных
    - do: произнести адрес точки Откуда (например - Измайловский бульвар 38)
    - assert: |
        Отображается шторка такси
        В поле Откуда отображается адрес, произнесенный пользователем
        Пин точки Откуда соответствует новому адресу
        У пина точки Откуда отображается время до приезда такси в минутах в центре пина

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Установка пина Куда через Мое местоположение экрана Куда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Открыта шторка такси
        У пина точки Откуда адрес отличается от ММП
    - do: Тап на поле Куда в шторке такси
    - assert: |
        Открылся экран Куда
    - do: Тап на Мое местоположение
    - assert: |
        Отображается экран построения маршрута
        Выбран тип маршрута Такси
        В поле Куда в верхнем табе отображается адрес текст "Мое местоположение"
        В поле Откуда отображается адрес установленного пина Откуда
        Отображаются тарифы нативного такси
        Отображается кнопка Заказать такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Установка пина Куда через Указать на карте экрана Куда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Открыта шторка такси
    - do: Тап на поле Куда в шторке такси
    - assert: |
        Открылся экран Куда
    - do: Тап на указать на карте
    - assert: |
        Отображается черный пин
        Внизу экрана панель с кнопкой Готово и отображением адреса пина
    - do: Изменить положение пина
    - do: Тап на Готово
    - assert: |
        Отображается экран построения маршрута
        Выбран тип маршрута Такси
        В поле Куда в верхнем табе отображается адрес установленного пина Куда
        В поле Откуда отображается адрес установленного пина Откуда
        Отображаются тарифы нативного такси
        Отображается кнопка Заказать такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Установка адреса Куда через Голосовой ввод экрана Куда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Открыта шторка такси
    - do: Тап на поле Куда в шторке такси
    - assert: |
        Открылся экран Куда
    - do: Тап на Голосовой ввод
    - do: Разрешить приложению записывать аудио
    - assert: |
        Отображается экрана голосового ввода данных
    - do: произнести адрес точки Куда
    - assert: |
        Отображается экран построения маршрута
        Выбран тип маршрута Такси
        В поле Куда в верхнем табе отображается произнесенный пользователем адрес
        В поле Откуда отображается адрес установленного пина Откуда
        Отображаются тарифы нативного такси
        Отображается кнопка Заказать такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие выхода из шторки такси через свайп вправо:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на такси в табе
    - assert: |
        Отображается шторка такси
        Отображается пин точки Откуда на месте ММП
    - do: Попытаться закрыть шторку такси свайпом вправо
    - assert: |
        Шторка такси не закрывается
    - do: Закрыть шторку такси тапом на стрелку
    - assert: |
        Шторка такси закрылась
        Отображается главный экран приложения

    - platforms:
        - ios
    - tags:
        - assessors


  Установка адреса точки Откуда в такси через Дом экрана Откуда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Пользователь авторизован
        У пользователя установлены Дом и Работа в закладках
        Местоположение пользователя в 100 км от местоположения Дома и Работы
    - do: Тап на такси в табе
    - assert: |
        Отображается шторка такси
        Отображается пин точки Откуда на месте ММП
        У пина точки Откуда отображается адрес ММП
        У пина точки Откуда Отображается время в минутах
    - do: Тап на поле Откуда в шторке такси
    - assert: |
        Отображается экран Откуда
        в сниппетах отображаются Дом и Работа
    - do: Тап на Дом
    - assert: |
        Отображается шторка такси
        Отображается пин точки Откуда на месте нахождения закладки Дом
        В поле ввода Откуда отображается надпись "Дом"
        У установленного пина отображается время до приезда такси в минутах в центре пина

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Установка адреса точки Откуда в такси через Работа экрана Откуда:
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Пользователь авторизован
        У пользователя установлены Дом и Работа в закладках
        Местоположение пользователя в 100 км от местоположения Дома и Работы
    - do: Тап на такси в табе
    - assert: |
        Отображается шторка такси
        Отображается пин точки Откуда на месте ММП
        У пина точки Откуда отображается адрес ММП
        У пина точки Откуда Отображается время приезда такси в минутах в центре установленного пина
    - do: Тап на поле Откуда в шторке такси
    - assert: |
        Отображается экран Откуда
        в сниппетах отображаются Дом и Работа
    - do: Тап на Работа
    - assert: |
        Отображается шторка такси
        Отображается пин точки Откуда на месте нахождения закладки Работа
        В поле ввода Откуда отображается надпись "Работа"
        У установленного пина отображается время до приезда такси в минутах в центре пина

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Установка адреса точки Куда в такси через Работа экрана Куда:
    - info: |
        (IOS) Не получен эксперимент `routes_new_screen_from_modes` (Меню - Настройки - Debag panel - Experiments)
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Пользователь авторизован
        У пользователя установлены Дом и Работа в закладках
        Местоположение пользователя в 100 км от местоположения Дома и Работы
        Установлен пин точки Откуда
        У пина точки Откуда отображается время до приезда такси в минутах в центре пина
    - do: Тап на поле Куда
    - assert: |
        Отображается экран Куда
        в сниппетах отображаются Дом и Работа
    - do: Тап на Работа
    - assert: |
        Отображается экран построения маршрута
        Выбран тип маршрута Такси
        В поле Куда в верхнем табе отображается надпись "Работа"
        В поле Откуда отображается адрес установленного пина Откуда
        Отображаются тарифы нативного такси
        Отображается кнопка Заказать такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Установка адреса точки Куда в такси через Дом экрана Куда:
    - info: |
        (IOS) Не получен эксперимент `routes_new_screen_from_modes` (Меню - Настройки - Debag panel - Experiments)
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
        Пользователь авторизован
        У пользователя установлены Дом и Работа в закладках
        Местоположение пользователя в 100 км от местоположения Дома и Работы
        Установлен пин точки Откуда
        У пина точки Откуда отображается время до приезда такси в минутах в центре пина
    - do: Тап на поле Куда
    - assert: |
        Отображается экран Куда
        в сниппетах отображаются Дом и Работа
    - do: Тап на Дом
    - assert: |
        Отображается экран построения маршрута
        Выбран тип маршрута Такси
        В поле Куда в верхнем табе отображается надпись "Дом"
        В поле Откуда отображается адрес установленного пина Откуда
        Отображаются тарифы нативного такси
        Отображается кнопка Заказать такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Установка пина Откуда в табе такси (отсутствие разрешения о местоположении пользователя):
    - info: |
        Дебаг-панель -> Environment -> Experiments > taxi_tab_on_main_screen -> ON
        В дебаг-панели включить эксперимент taxi_native_order_in_taxi_tab со значением IF_NO_GO
        На девайсе не установлено приложение Я.Go
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте есть пин точки "Откуда" который соответствует центру экрана
        В поле Откуда показан адрес, на который указывает пин
        У пина точки "Откуда" отображается время до приезда такси в минутах в центре пина
    - do: Тап на курсор определения местоположения
    - assert: |
        Отображается уведомление о разрешении геолокации
    - do: Предоставить разрешение
    - do: Тап на курсор определения местоположения
    - assert: |
        Отображается шторка такси
        В поле Откуда отображается адрес ММП пользователя
        Пин точки Откуда соответствует ММП
        У пина точки Откуда отображается время до приезда такси в минутах в центре пина

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Создание новых taxiUserId при логине и открытии вебвью такси:
    - info: |
        Нужно тестировать во внутренней сети (подключить к Charles с включенным TunnelBlick)
        Дебаг-панель -> Webview -> Taxi webview base url -> testing
        Дебаг-панель -> Environment -> Passport Environment -> TESTING
        Дебаг-панель -> Environment -> Mobmaps Proxy host -> TESTING
        Дебаг-панель -> Environment -> PaymentSDK Environment -> TESTING
        Включить эксперимент Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN.
        Сгенерить с помощью телеграм-бота https://t.me/qabmo_bot аккаунт тестового паспорта. В сообщении, которое выдаст бот, будет указан PUID и телефон (помним про это).
        Залогиниться им в МЯК
    - do: В админке https://tariff-editor.taxi.tst.yandex-team.ru/passengers поискать пользователя по PUID
    - assert: Убедиться, что в результатах будет ровно 1 строка. Это означает, что сгенерился 1 taxiUserId
    - do: Заказать такси через карточку с тарифами в экране маршрутов
    - assert: Убедиться, что откроется вебвью такси и там будет показан статус заказа
    - do: Зайти в админку https://tariff-editor.taxi.tst.yandex-team.ru/passengers, поискать по тому же PUID
    - assert: Убедиться, что в результатах поиска 2 строки. Второй taxiUserId сгенерил вебвью
    - do: Убить приложение
    - do: Открыть его заново
    - do: Зайти в админку https://tariff-editor.taxi.tst.yandex-team.ru/passengers, поискать по тому же PUID
    - assert: Убедиться, что в результатах всё ещё 2 строки

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps

        - acceptance_maps


  Отключение 3D режима на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить 3D режим через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Изменился наклон карты (Отключился 3D режим)

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отключение слоя Парковки на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить слой Парковки через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Отключился слой Парковки

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отключение слоя Движущийся транспорт на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить слой Движущийся транспорт через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Отключился с слой Движущийся транспорт

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отключение слоя Панорамы на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить слой Панорамы через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Отключился слой Панорамы

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отображение слоя ДС на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить слой ДС через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Слой ДС отображается на карте

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отключение слоя ДС на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить слой ДС через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        ДС не отображаюся на карте

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отображение Закладок на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить слой Закладки через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Слой ДС отображаются на карте

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отключение Закладок на карте в табе Такси:
    - info: |
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено приложение Яндекс Go
    - do: Включить слой Закладки через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Слой Закладки не отображается на карте

    - platforms:
       - ios
    - tags:
       - assessors
    - testing:
       - acceptance_maps


  Отображение контрола Пробок в табе Такси:
    - info:
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Включить слой Пробки через контрол слоёв на главном экране
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        В правом верхнем углу отображается активный контрол пробок
        На карте отображается слой Пробки
        В зависимости от города может отображаться балл пробок
    - do: Тап на контрол пробок
    - assert: |
        Слой пробок отключился
        Балл пробок и цветовая индикация загруженности дорог не отображаются
        Контрол пробок перестал показывать бальность пробок
    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отображение контролов зума в табе Такси:
    - info:
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Отображаются контролы зума
    - do: Тап на контрол увеличения зума
    - assert: Карта призумилась
    - do: Тап на контрол уменьшения зума
    - assert: Карта отзумилась

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отображение контрола ММП в табе Такси:
    - info:
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Отображается контролл ММП
    - do: Сдвинуть спан карты
    - do: Тап на контрол ММП
    - assert: |
        Спан карты отцентрировался по ММП
        Метка выбора точки для Такси встала на метку ММП

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переключение между табами Такси и Навигатор:
    - info:
        Получен эксперимент %%Debug-panel -> experiments -> taxi_tab_on_main_screen%%
        Получен эксперимент %%Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO%%
        Не установлено Яндекс Go
    - do: Тап на таб Навигатор
    - assert: Открылся таб Навигатор
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси
        Стиль карты перестал быть как в табе Навигатор

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Переключение между табами Такси и Транспорт:
    - info:
        Получен эксперимент Debug-panel -> experiments -> taxi_tab_on_main_screen
        Получен эксперимент Debug-panel -> experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO
        Не установлено Яндекс Go
    - do: Тап на таб Транспорт
    - assert: |
        Открылся таб Транспорт
        Транспорт отображается на карте
        Таббар скрылся
    - do: Тап Назад
    - assert: |
        Закрылся таб Транспорт
        Транспорт перестал отображаться на карте
        Отображается таббар
    - do: Тап на таб Такси
    - assert: |
        Открылся таб Такси

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


        - acceptance_maps

  Режим следования за меткой ММП при переходе в таб Такси и выходе на главный экран:
    - info: |
        На девайсе не установлено приложение Я.Go
        Дебаг-панель -> Environment -> Experiments -> taxi_tab_on_main_screen -> ON
        Дебаг-панель -> Environment -> Experiments -> taxi_native_order_in_taxi_tab -> IF_NO_GO
        Дебаг-панель -> Routes -> Demo movement -> ON
        Включена симуляция движения метки Я через подмену ММП:
        [iOS] Дебаг-панель -> Routes -> Enter your route -> построить любой маршрут
        [Android] Построить любой маршрут через приложение Mock Locations
    - do: Открыть главный экран приложения
    - assert: |
         Отображается движущаяся метка Я
         Включен режим следования за меткой Я
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается шторка такси
        На карте отображается движущаяся метка Я
        Режим следования за меткой выключен
        Пин точки "Откуда" не следует за меткой Я, зафиксирован на карте
    - do: Тап на ММП
    - assert: |
        Происходит призум пина точки "Откуда" к месту ММП
        На карте отображается движущаяся метка Я
        Режим следования за меткой выключен
        Пин точки "Откуда" не следует за меткой
    - do: Тап на стрелку Назад для выхода из таба Такси
    - assert: Отображается главный экран приложения
    - do: Тап на ММП
    - assert: |
        Карта центрируется на движущейся метке Я
        Режим следования за меткой включен

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Изменение спана в табе Такси:
    - info: |
        Debug-panel -> Experiments -> taxi_tab_on_main_screen -> ON
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Тап на таб Такси
    - assert: |
        Отображается шторка такси
        Отображается красный пин на месте ММП
        В поле Откуда показан адрес, на который указывает нога пина
    - do: Произвольно сместить спан карты, чтобы метка МПП перестала быть видна
    - assert: |
        В поле Откуда отображается адрес, который находится под ногой пина
    - do: Тап на контрол МПП
    - assert: |
        Нога пина указывает на ММП
        Адрес в поле Откуда обновился на адрес МПП

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Определение адреса под ногой пина в табе Такси:
    - info: |
        Debug-panel -> Experiments -> taxi_tab_on_main_screen -> ON
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Тап на таб Такси
    - assert: |
        Отображается шторка такси
        Отображается красный пин на месте ММП
        В поле Откуда показан адрес, на который указывает нога пина
    - do: Тап Куда в шторке такси
    - assert: |
        Открыт экран выбора точки назначения
    - do: Тап Отменить
    - do: Произвольно сместить спан карты
    - assert: |
        В поле Откуда отображается адрес на который указывает нога пина

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Построение маршрута такси из таба Такси:
    - info: |
        Debug-panel -> Experiments -> taxi_tab_on_main_screen -> ON
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Тап на таб Такси
    - do: Тап Куда
    - do: Ввести в поле ввода название организации на расстоянии от 1км до 300км от МПП
    - assert: |
        Открыт экран построения маршрута такси от МПП до организации
        Отображается нативная карточка выбора тарифов
    - do: Тап Назад
    - assert: |
        Отображается шторка такси
        Внизу отображается саджест с названием организации к которой был построен маршрут
    - do: Тап на саджест
    - assert: |
        Открыт экран построения маршрута такси от МПП до организации
        Отображаются нативная карточка выбора тарифов
    - do: Тап Откуда
    - do: Ввести произвольный адрес в строке Откуда
    - do: Тап Построить
    - assert: |
        Открыт экран построения маршрута такси
        Отображаются саджесты с ценами
    - do: Вернуться на предыдущий экран (Android - системной кнопкой назад, iOS - тап на стрелку в навбаре)
    - assert: |
        Отображается шторка такси
        В поле откуда отображается адрес введеный на предыдущем шаге
        Нога пина указывает на этот адрес

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Перемещение пина в табе Такси при ручном вводе адреса:
    - info: |
        Debug-panel -> Experiments -> taxi_tab_on_main_screen -> ON
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Тап на таб Такси
    - assert: |
        Отображается шторка такси
        Отображается красный пин на месте ММП
        В поле Откуда показан адрес, на который указывает нога пина
    - do: Тап Откуда
    - do: В поле ввода ввести "Кремль", тап Найти
    - assert: |
        Отображается шторка такси
        Нога пина на карте указывает на Кремль

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Сворачивание шторки такси при изменении спана:
    - info: |
        Debug-panel -> Experiments -> taxi_tab_on_main_screen -> ON
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Тап на таб Такси
    - assert: |
        Отображается шторка такси
        Отображается красный пин на месте ММП
        В поле Откуда показан адрес, на который указывает нога пина
    - do: Произвольно сместить спан карты свайпом
    - assert: |
        Пока происходит перемещение пина по карте шторка такси свернута, отображается только заголовок
        Когда скрол карты останавливается шторка открыта полностью
        В поле Откуда указан адрес на который указывает нога пина

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Включение 2D режима в табе Такси:
    - info: |
        Debug-panel -> Experiments -> taxi_tab_on_main_screen -> ON
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Включить режим отображения карты в 3D (Слои -> 3D)
    - do: Тап на таб Такси
    - assert: |
        Отображается шторка такси
        Отображается красный пин на месте ММП
        В поле Откуда показан адрес, на который указывает нога пина
    - do: Тап Откуда
    - do: В поле ввода ввести "Кремль", тап Найти
    - assert: |
        Отображается шторка такси
        Нога пина на карте указывает на Кремль
        Отображение карты происходит в 2D

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Экран ошибки нативного такси при маршруте с промежуточной точкой:
    - info: |
        Девайс в вертикальной ориентации
        Пользователь авторизован
        Последним построенным маршрутом был любой кроме такси
        Открыт главный экран приложения
    - do: |
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
    - do: Тап на кнопку "Маршруты в табе"
    - assert: Отображается экран построения маршрута
    - do: Тап на поле ввода "Куда"
    - do: Тап на кнопку "Указать на карте"
    - assert: |
        Отображается спан карты
        Отображается пин Куда
        Отображается панель с кнопкой "Готово"
    - do: Свайпом изменить местоположение пина
    - do: Тап на кнопку "Готово"
    - assert: |
        Отображается экран с построенным маршрутом
        Внизу отображается панель с кнопкой "Поехали", кнопкой параметров маршрута и вариантами маршрута
        Вверху экрана отображается панель с видами транспорта, кнопкой меню изменения маршрута, стрелкой выхода из экрана построенного маршрута
        Выбран тип транспорта "Автомобиль"
    - do: Любым способом добавить промежуточную точку в построенный маршрут
    - assert: Отображается экран построенного маршрута с промежуточной точкой
    - do: Тап на транспорт "Такси"
    - assert: |
        Отображается нижняя панель с текстом о невозможности построить маршрут на такси и кнопкой "Изменить маршрут"

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Отсутствие пина точек "Откуда" и "Куда" при возвращении в таб Такси с экрана маршрутов:
    - info: |
        Включены экспериенты через интент:
        [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-04-07%20в%2016.27.02.png){title=QR-код}
        `yandexmaps://add_exp?taxi_tab_on_main_screen&taxi_native_order_in_taxi_tab=ALWAYS_OPEN`
        Перезапустить приложение
        Отображается главный экран приложения
    - do: Тап на таб Такси в таббаре внизу экрана
    - assert: |
        Открывается сервис Такси
        Отображается шторка такси
        Отображается красный пин на месте ММП
        В шторе отображается поле "Откуда" с адресом пина ММП
        Отображается поле "Куда" без адреса
    - do: Тап на поле ввода "Куда"
    - do: Тап на кнопку "Указать на карте"
    - assert: |
        Отображается спан карты
        Отображается пин Куда
        Отображается шторка с кнопкой "Готово"
    - do: Свайпом изменить местоположение пина
    - do: Тап на кнопку "Готово"
    - assert: |
        Отображается экран с построенным маршрутом
        На участке с картой отображаются поднятые пины точек "Откуда" и "Куда"
    - do: Тап Назад
    - assert: |
        Экран построения маршрута закрылся
        Отображается сервис Такси со шторкой
    - do: Произвольно сместить спан карты свайпом
    - assert: |
        Нога пина указывает на новый адрес
        В поле Откуда указан адрес, на который указывает нога пина
        Поднятые пины точек "Откуда" и "Куда", построенные на экране маршрутов, отсутствуют на участке с картой

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Переход в приложение Яндекс.Go при выбранном режиме "Другие тарифы":
    - info: |
        На устройстве установлено приложение Яндекс.Go из стора
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Построить любым способом маршрут между двумя точками в Москве
    - assert: Построился маршрут
    - do: Перейти в таб Такси
    - assert: |
        В списке тарифов присутствует пункт "Другие тарифы"
        В нижней панели есть кнопка с текстом "Перейти в Яндекс.Go"
        В верхней панели экрана маршрутов (где разные типы маршрутов) в табе такси показан текст "от <минимальная цена из тех тарифов, которые доступны>"
    - do: Нажать на кнопку "Перейти в Яндекс.Go"
    - assert: |
        Открылось приложение Яндекс.Go
        Построен маршрут
        Точки Откуда и Куда совпадают с выбранными в МЯК
    - platforms:
        - android
    - tags:
        - assessors


  Переход в стор при выбранном режиме "Другие тарифы", если Яндекс.Go не установлено:
    - info: |
        На устройстве НЕ установлено приложение Яндекс.Go
        Debug-panel -> Experiments -> taxi_native_order_in_taxi_tab -> Custom Value -> ALWAYS_OPEN
        Перезапустить приложение после включения экспериментов
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Построить любым способом маршрут между двумя точками в Москве
    - assert: Построился маршрут
    - do: Перейти в таб Такси
    - assert: |
        В списке тарифов присутствует пункт "Другие тарифы"
        В нижней панели есть кнопка с текстом "Перейти в Яндекс.Go"
        В верхней панели экрана маршрутов (где разные типы маршрутов) в табе такси показан текст "от <минимальная цена из тех тарифов, которые доступны>"
    - do: Нажать на кнопку "Перейти в Яндекс.Go"
    - assert: |
        Открылся стор на странице Яндекс.Go
    - platforms:
        - android
    - tags:
        - assessors


  Переход в вебвью по тапу на таб Такси на главном экране, если есть активный заказ:
    - info: |
        Устройство подключено ко внутренней сети через Charles или PDAS
        В дебаг-панели установить:
          `Webview -> Taxi webview base url -> testing`
          `Environment -> Passport Environment ->testing`
          `Environment -> Mobmaps Proxy host -> testing`
          `Environment -> PaymentSDK Environment ->testing`
        Авторизоваться аккаунтом тестового паспорта `yndx-kripp-le-ami606 gen2752`
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/такси.png){title=QR-код}

        `yandexmaps://add_exp?taxi_tab_on_main_screen&taxi_native_order_in_taxi_tab=always_open`
    - do: Перезапустить приложение
    - do: Тап на таб Такси
    - assert: Открылась шторка такси
    - do: Построить маршрут на такси произвольным способом
    - assert: Открылся экран с тарифами такси
    - do: Заказать такси
    - assert: |
        Открылось вебвью такси
        Отображается информация о заказе
    - do: Выйти из вебвью такси
    - do: Вернуться на главный экран приложения
    - assert: Показывается плашка статуса заказа такси
    - do: Тап на таб Такси
    - assert: |
        Открылось вебвью такси
        Отображается информация о заказе

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - advertisement


  Отсутствие вращения карты при открытой шторке такси:
    - info: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-04-07%20в%2016.27.02.png){title=QR-код}

        `yandexmaps://add_exp?taxi_tab_on_main_screen&taxi_native_order_in_taxi_tab=ALWAYS_OPEN`
    - do: Перезапустить приложение
    - do: Выключить эксперимент `taxi_pin_on_map_fixation_on_zoom_and_rotation_gestures_disabled` (Меню -> Настройки-> Дебаг-панель -> Experiments)
    - do: Вернуться на главный экран приложения
    - do: Перезапустить приложение
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается сервис Такси
        Отображается шторка такси
        Отображается красный пин на месте ММП
    - do: Попытаться повращать карту
    - assert: Карта не вращается
    - do: Изменить ориентацию устройства на горизонтальную
    - assert: Отображается шторка такси
    - do: Повращать карту
    - assert: Карта не вращается

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Вращение карты при открытой шторке такси:
    - info: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/maaryma/Снимок%20экрана%202022-04-20%20в%2018.51.49.png){title=QR-код}

        `yandexmaps://add_exp?taxi_tab_on_main_screen&taxi_native_order_in_taxi_tab=ALWAYS_OPEN&taxi_pin_on_map_fixation_on_zoom_and_rotation_gestures_disabled`
    - do: Перезапустить приложение
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается сервис Такси
        Отображается шторка такси
        Отображается красный пин на месте ММП
    - do: Попытаться повращать карту
    - assert: Карта вращается
    - do: Изменить ориентацию устройства на горизонтальную
    - assert: Отображается шторка такси
    - do: Повращать карту
    - assert: Карта вращается

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Фокус камеры на пин при зуме карты:
    - info: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-04-07%20в%2016.27.02.png){title=QR-код}

        `yandexmaps://add_exp?taxi_tab_on_main_screen&taxi_native_order_in_taxi_tab=ALWAYS_OPEN`
    - do: Перезапустить приложение
    - do: Выключить эксперимент `taxi_pin_on_map_fixation_on_zoom_and_rotation_gestures_disabled` (Меню -> Настройки-> Дебаг-панель -> Experiments)
    - do: Вернуться на главный экран приложения
    - do: Перезапустить приложение
    - do: Тап на таб Такси в таббаре
    - assert: |
        Открывается сервис Такси
        Отображается шторка такси
        Отображается красный пин на месте ММП
    - do: Изменить зум карты
    - assert: Точкой фокуса камеры при зуме является место, на которое указывает пин
    - do: Изменить ориентацию устройства на горизонтальную
    - assert: Отображается шторка такси
    - do: Изменить зум карты
    - assert: Точкой фокуса камеры при зуме является место, на которое указывает пин

    - platforms:
        - android
        - ios
    - tags:
        - assessors

  Авторизация через карточку такси:
    - info: Пользователь НЕ авторизован
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/gringauz/frame.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=always_open`
    - do: Перезапустить приложение
    - do: Построить маршрут на такси любым способом
    - assert: |
        Построен маршрут на такси
        В верхней части экрана отображается плашка с табами выбора типа маршрута
        В нижней части экрана отображается нативная карточка выбора тарифов с указанием стоимости по каждому тарифу
        В карточке также отображается кнопка авторизации
    - do: Тап на кнопку авторизации
    - do: Залогиниться произвольным аккаунтом
    - assert: |
        Пользователь авторизован
        Кнопка авторизация заменилась кнопкой заказа такси
        Маршрут на такси не сбросился
        В верхней части экрана отображается плашка с табами выбора типа маршрута
        В нижней части экрана отображается:
          - нативная карточка выбора тарифов с указанием стоимости по каждому тарифу
          - кнопка выбора способа оплаты
          - кнопка оставления комментария к заказу

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - integration_run:
        - am


  Добавление телефона через карточку такси:
    - preconditions: |
        К аккаунту, используемому при тестировании не привязан телефон
        Удалить его можно через веб-интерфейс паспорта `passport.yandex.ru`
    - do: Почистить данные приложения или удалить приложение и поставить заново
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/gringauz/frame.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=always_open`
    - do: Перезапустить приложение
    - do: Авторизоваться
    - do: Построить маршрут на такси любым способом
    - do: Перейти в таб такси на экране маршрутов
    - do: Тап на кнопку заказа такси
    - assert: Появилась плашка с просьбой привязать к аккаунту телефон
    - do: Тап на кнопку добавления телефона
    - assert: Открылся экран паспорта по добавлению телефона
    - do: Пройти процесс добавления телефона
    - assert: Произошел возврат на экран выбора тарифа на такси
    - assert: В веб-интерфейсе паспорта (`passport.yandex.ru`) виден привязанный телефон
    - do: Тап на кнопку заказа такси
    - assert: Показалась плашка с просьбой принять лицензионное соглашение


    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors
    - integration_run:
        - am


  Обновленный вид плашки со статусом заказа такси на главном экране:
    - preconditions: |
        Пользователь не вызывал такси ранее
        Устройство подключено ко внутренней сети через Charles или PDAS
        В дебаг-панели установить:
            `Webview -> Taxi webview base url -> testing`
            `Environment -> Passport Environment -> testing`
            `Environment -> Mobmaps Proxy host -> testing`
            `Environment -> PaymentSDK Environment -> testing`
        Пользователь авторизован аккаунтом тестового паспорта, например `yndx-kripp-le-ami606` `gen2752`
        Девайс в вертикальной ориентации
    - do: |
        Включить эксперименты, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/taxxi.png){title=QR-код}

        `yandexmaps://add_exp?taxi_native_order_in_taxi_tab=always_open&taxi_open_webview=web_view_always_open&orders_tracking_new_api`
    - do: Перезапустить МЯК
    - do: Построить маршрут на такси любым способом
    - do: Написать в комментарии к заказу `speed-300, wait-10`
    - do: Тап на Готово
    - do: Тап на кнопку заказа
    - do: Принять условия соглашения
    - assert: Отображается вебвью такси
    - do: Вернуться на главный экран МЯК
    - assert: Отображается плашка со статусом Поиск машины
    - do: Дождаться взятия заказа
    - assert: |
        Отображается плашка с текстом "Будет через N мин" и информацие об автомобиле:
        - цвет и марка автомобиля
        - гос. номер авто
    - do: Тап на плашку
    - assert: |
        Открывается вебвью такси
        Информация об автомобиле в плашке совпадает с данной информацией в вебвью
    - do: Вернуться на главный экран МЯК
    - assert: Отображается плашка с текущим статусом заказа и информацие об автомобиле
    - do: Сменить ориентацию девайса на горизонтальную
    - assert: |
        Отображается плашка с текущим статусом заказа и информацие об автомобиле
        Плашка находится справа от таббара
    - do: Дождаться пока заказ пройдет через остальные статусы (машина ожидает, N мин в пути)
    - assert: После окончания поездки плашка со статусом заказа не отображается

    - platforms:
        - android
        - ios


  Обновленный вид плашки со статусом заказа такси в сервисе Транспорт/Навигатор:
    - preconditions: |
        Пользователь не вызывал такси ранее
        Устройство подключено ко внутренней сети через Charles или PDAS
        В дебаг-панели установить:
            `Webview -> Taxi webview base url -> testing`
            `Environment -> Passport Environment -> testing`
            `Environment -> Mobmaps Proxy host -> testing`
            `Environment -> PaymentSDK Environment -> testing`
        Пользователь авторизован аккаунтом тестового паспорта, например `yndx-kripp-le-ami606` `gen2752`
        Девайс в вертикальной ориентации
    - do: |
        Включить эксперименты, используя интент [collapsed-image](https://jing.yandex-team.ru/files/tdon/tab.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&service_architecture&taxi_native_order_in_taxi_tab=always_open&taxi_open_webview=web_view_always_open&orders_tracking_new_api`
    - do: Перезапустить МЯК
    - do: Построить маршрут на такси любым способом
    - do: Написать в комментарии к заказу `speed-300, wait-10`
    - do: Тап на Готово
    - do: Тап на кнопку заказа
    - do: Принять условия соглашения
    - assert: Отображается вебвью такси
    - do: Вернуться на главный экран МЯК
    - assert: Отображается плашка с текущим статусом заказа такси
    - do: Тап на таб Навигатор
    - assert: |
        Открыт экран сервиса Навигатор
        Плашка с текущим статусом заказа такси не отображается
    - do: Вернуться назад
    - assert: |
        Отображается главный экран
        Присутствует плашка с текущим статусом заказа такси
    - do: Тап на таб Транспорт
    - assert: |
        Открыт экран сервиса Транспорт
        Плашка с текущим статусом заказа такси не отображается
    - do: Вернуться назад
    - assert: |
        Отображается главный экран
        Присутствует плашка с текущим статусом заказа такси

    - platforms:
        - android
        - ios
