testing:
  - regress
components: gas_service
integration_run:
  - tanker_sdk

specs:
  Появление таба Заправки в таббаре:
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезапустить приложение с выгрузкой памяти
    - assert: |
        - Открыт главный экран приложения
        - В таббаре на главном экране появился новый таб Заправки

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Исчезновение саджеста Я.Заправки:
    - info: Пользовтель авторизован
    - do: |
        Включить эксперименты с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_gas_stations.jpg){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations&show_gas_stations_in_suggest`
    - do: Перезапустить приложение с выгрузкой памяти
    - assert: |
        - Открыт главный экран приложения
        - Саджест АЗС над таббаром не отображается
    - do: Выключить эксперимент `service_gas_stations` (Меню - Настройки - Debug Panel - Experiments)
    - do: Перезапустить приложение с выгрузкой памяти
    - assert: Саджест АЗС над таббаром отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сворачивание поисковой строки в сервисе Заправки:
    - info: Пользователь неавторизован
    - do: |
        Включен эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - do: Тап на таб Заправки в таббаре
    - assert: |
        Поисковая строка свернулась до иконки меню
        Таббар анимированно уехал вниз
        Открылся экран с заголовком Заправки
    - do: Тап назад
    - do: Авторизоваться
    - do: Тап на таб Заправки
    - assert: |
        Поисковая строка свернулась до иконки аватара
        Таббар анимированно уехал вниз
        Открылся экран с заголовком Заправки

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Контролы пробок в сервисе Заправки:
    - do: |
        Включен эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - assert: Отображается главный экран приложения
    - do: Тап на контрол пробок
    - assert: |
        На карте появился слой пробок
        Контрол пробок активен
        В некоторых городах конрол показывает бальность пробок
    - do: Тап на таб Заправки в таббаре
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображается слой пробок
        Контрол пробок остаётся активным
    - do: Тап на контрол пробок
    - assert: |
        Слой пробок отключился
        Контрол пробок исчез
    - do: Тап назад
    - assert:
        Экран Заправки закрылся
        Отображается главный экран приложения
        Контрол пробок отображается неактивным
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        Контрол пробок не отображается
        Контрол слоёв съезжает вверх экрана

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Поисковая выдача сервиса Заправки:
    - do: |
        Включен эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - do: Тап на таб Заправки в таббаре
    - assert: |
        Открылся экран с заголовком Заправки
        Поисковая выдача отображается без шторы серпа
        На карте отображаются пины АЗС
        Внизу экрана отображаются фильтры

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отключение директ рекламы в сервисе Заправки:
    - info: |
        Выключен эксперимент service_gas_stations
        Открыт главный экран приложения
    - do: Тап на поисковую строку
    - do: Произвести поиск по запросу АЗС
    - assert: Появился Серп с результами поиска АЗС
    - do: В Серпе тап на заправку с директ рекламой
    - assert: Поднялся пин заправки (запомнить этот пин)
    - - do: |
          Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

          `yandexmaps://add_exp?service_gas_stations`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - do: Тап на пин АЗС с директ рекламой
    - assert: Директ реклама не отображается в карточке АЗС

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Кнопка назад в сервисе Заправки:
    - do: |
        Включен эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - do: Отображается главный экран приложения
    - do: Тап на таб Заправки в таббаре
    - assert: |
        Открылся сервис Заправки
        На карте отображаются пины АЗС
        Над фильтрами отображается кнопка назад
    - do: Тап на кнопку назад
    - assert:
        Сервис Заправки закрылся
        Отображается главный экран приложения
        На карте не отображаются пины АЗС

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Состояние загрузки в сервисе Заправки:
    - do: |
        Включен эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - do: Отображается главный экран приложения
    - do: Тап на таб Заправки в таббаре
    - assert: |
        Открылся экран Заправки
        Внизу экрана на короткое время отобразился лоадер с текстом: Ищем АЗС
    - do: Сменить спан
    - assert: Текст "Ищем АЗС" больше не отобразился

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Состояние ошибки в сервисе Заправки:
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - do: Отображается главный экран приложения
    - do: Навести спан карты на местность без АЗС (например Баренцево море)
    - do: Тап на таб Заправки в таббаре
    - assert: Внизу экрана отобразился текст "Ничего не найдено"
    - do: Сменить спан на территорию с заправками
    - assert: На спане появились пины заправок
    - do: Вернуть спан карты к территории без АЗС
    - assert: Текст "Ничего не найдено" больше не отобразился

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Состояние "Нет соединения с сетью" в сервисе Заправки:
    - info: Включен авиарежим
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - do: Отображается главный экран приложения
    - do: Тап на таб Заправки в таббаре
    - assert: Внизу экрана отобразился текст "Нет соединения с сетью"
    - do: Выключить авиарежим
    - do: Тап на "Нет соединения с сетью"
    - assert: Появляется плашка с кнопкой "Повторить"
    - do: Тап на "Повторить"
    - assert: На карте отображаются пины АЗС

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сервис Заправки в офлайн с загруженой картой:
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Приложение перезагружено после включения эксперимента
    - do: Загрузить офлайн карту текущего региона (Меню - Загрузка карт - Загрузить)
    - do: Включить авиарежим
    - do: Тап на таб Заправки в таббаре
    - assert: |
        Открылся экран Заправки
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сервис Заправки при выгрузке приложения из памяти:
    - do: |
        Включен эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение после включения эксперимента
    - assert: Открыт главный экран приложения
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран Заправки
        На спане отображаются пины АЗС
    - do: Выгрузить приложения из памяти
    - do: Открыть приложение
    - assert: |
        Открылся главный экран приложения
        Сервис Заправки выключен
        Таб "Заправки" в таббаре неактивен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сервис Заправки. Подгрузка поисковой выдачи АЗС при свайпе карты:
    - info: Устройтство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/gas_stations.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение после включения эксперимента
    - assert: Открыт главный экран приложения
    - do: Тап на таб Заправки
    - assert: |
        Открылся сервис Заправки
        На карте отображаются пины АЗС
    - do: Свайп карты
    - assert: |
        Поисковая выдача пинов АЗС обновилась
    - do: Сменить ориентацию устройства
    - assert: |
        Сервис Заправки отображается в горизонтальной ориентации
        На карте отображаются пины АЗС
    - do: Свайп карты
    - assert: |
        Поисковая выдача пинов АЗС обновилась

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сервис Заправки. Отображение табов в таббаре:
    - do: |
        Получены эксперименты с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/service_gas_stations%26no_routes_tab.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations&no_routes_tab`
    - do: Перезагрузить приложение после включения эксперимента
    - do: Открыть главный экран приложения
    - do: Авторизоваться (на аккаунте присутствуют места Дом, Работа) Также, ранее были построены маршруты
    - assert: |
        - Таб "Маршруты" в таббаре отсутствует
        - Порядок табов следующий: Поиск - Навигатор - Заправки - Транспорт
        - Отображается саджест "Куда?", находящийся первым в блоке саджестов
    - do: Отключить эксперимент no_routes_tab (Меню - Настройки - Debug Panel - Experiments)
    - do: Перезагрузить приложение после отключение эксперимента
    - assert: |
        - Саджест "Куда" находится последним в блоке саджестов
        - В таббаре появился таб "Маршруты"
        - Порядок табов следующий: Поиск - Маршруты - Навигатор - Заправки - Транспорт

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сервис Заправки. UI отображение элементов:
    - do: |
        Получены эксперименты с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/service_gas_stations%26no_routes_tab.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations&no_routes_tab`
    - do: Перезагрузить приложение после включения эксперимента
    - assert: Открыт главный экран приложения
    - do: Тап на таб Заправки
    - assert: |
        - Отображаются поисковые пины
        - Открылся экран с заголовком Заправки
        - Слева от заголовка отображается контролл "меню"
        - Справа от заголовка отображается контролл слоев
        - Справа отображаются контролы зума
        - Снизу отображаются фильтры
        - Над фильтрами слева отображается контролл "назад"
        - Над фильтрами справа отображается контролл ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сервис Заправки. UI отображение элементов при открытой карточки заправки. Вертикальная ориентация:
    - preconditions: Устройство в вертикальной ориентации
    - do: Включить эксперименты используя интент
        [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/service_gas_stations%26no_routes_tab.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations&no_routes_tab`
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: Открыт главный экран приложения
    - do: Тап на таб Заправки в таббаре
    - do: Тап на пин заправки
    - assert: |
        - Открылась мини карточка заправки
        - Вверху экрана заголовок Заправки
        - Слева от заголовка отображается контролл меню
        - Справа от заголовка отображается контролл слоев
        - Справа отображаются контролы зума
        - Под контроллами зума отображается контролл ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. UI отображение элементов при открытой карточки заправки. Горизонтальная ориентация:
    - preconditions: Устройство в горизонтальной ориентации
    - do: Включить эксперименты используя интент
        [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/service_gas_stations%26no_routes_tab.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations&no_routes_tab`
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: Открыт главный экран приложения
    - do: Тап на таб Заправки в таббаре
    - do: Тап на пин заправки
    - assert: |
        - Открылась карточка заправки
        - Вверху экран заголовок Заправки (для Android)
        - Слева от заголовка отображается контролл меню (для Android)
        - Справа от заголовка отображается контролл слоев
        - Справа отображаются контролы зума
        - Под контроллами зума отображается контролл ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  UI фильтров в сервисе Заправки:
    - info: Открыт главный экран приложения
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-05-24%2012%3A44%3A23.f4547f4.jpg){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - do: Тап на кнопку фильтров
    - do: Выбрать несколько фильтров поиска в рамках одной категории (например, в фильтре Топливо выбрать АИ-92 и АИ-95 и т.п.)
    - do: Вернуться на экран поисковой выдачи
    - assert: |
        Выбранный фильтр выделен цветом
        Выбранный фильтр не отличается по высоте от остальных

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Тап на кнопку Заправок в тулбаре сервиса Нави:
    - preconditions: |
        Открыт главный экран приложения
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        При нажатии кнопка становится активной и происходит поисковый запрос "АЗС"

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Состояние поиска АЗС при оффлайне:
    - preconditions: |
        Открыт главный экран приложения
        Интернет соединение отсутствует
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        Отоброжается плашка ошибки "Нет соединения с сетью"
    - do: Тап по плашке с ошибкой
    - assert:
        Открывается штора с сообщением об отсутствии соединения с интернетом и кнопка "Повторить"

    - platforms:
        - android
    - tags:
        - assessors


  Состояние поиска АЗС в оффлайн с загруженой картой:
    - preconditions: |
        Открыт главный экран приложения
        Скачана карта города ММП
        Интернет соединение отсутствует
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        При нажатии кнопка становится активной и происходит поисковый запрос "АЗС"

    - platforms:
        - android
    - tags:
        - assessors


  Состояние поиска АЗС при отсутствии результатов:
    - preconditions: |
        Открыт главный экран приложения
        ММП в Баренцевом море
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        Открывается штора с сообщением, что ничего не найдено

    - platforms:
        - android
    - tags:
        - assessors


  Ожидание результатов поиска АЗС:
    - preconditions: |
        Открыт главный экран приложения
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        До открытия результатов поискового запроса отображается плашка с загрузкой "Ищем АЗС"

    - platforms:
        - android
    - tags:
        - assessors


  Тулбар сервиса Нави при смене ориентации:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Сменить ориентацию на горизонтальную
    - assert:
        Тулбар располагается справа, все кнопки корректно отображаются

    - platforms:
        - android
    - tags:
        - assessors


  Смена ориентации при активной кнопке Заправок:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        При нажатии кнопка становится активной и происходит поисковый запрос "АЗС"
    - do: Сменить ориентацию на горизонтальную
    - assert:
        Тулбар располагается справа, все кнопки и фильтры поиска корректно отображаются

    - platforms:
        - android
    - tags:
        - assessors


  Смена день/ночь при активной кнопке Заправок в сервисе Нави:
    - preconditions: |
        Открыт главный экран приложения
        Debug-panel -> Various -> Shake to toggle night mode - вкл
        Включен дневной режим
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        При нажатии кнопка становится активной и происходит поисковый запрос "АЗС"
    - do: Встряхнуть девайс для смены режима на ночной
    - assert:
        Режим сменился на ночной, все кнопки и фильтры остались на своих местах


    - platforms:
        - android
    - tags:
        - assessors


  Выход из сервиса Нави:
    - preconditions: |
        Открыт главный экран приложения
    - do: |
        Включить эксперимент 'service_navi', используя интент
        `yandexmaps://add_exp?service_navi`

        [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: |
        Включить эксперимент 'gas_stations_in_toolbar', используя интент
        `yandexmaps://add_exp?gas_stations_in_toolbar`

        [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        При нажатии кнопка становится активной и происходит поисковый запрос "АЗС"
    - do: Тап на кнопку выхода из сервиса Нави в приложении
    - assert: |
        На карте не отображаются пины заправок
        Тулбар Сервиса Навигатора скрывается
        Происходит выход из сервиса
        Отображается главный экран приложения

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Тап по хардварной кнопке Назад в сервисе Нави при активной кнопке Заправок:
    - preconditions: |
        Открыт главный экран приложения
    - do: Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Включить эксперимент 'gas_stations_in_toolbar', используя интент `yandexmaps://add_exp?gas_stations_in_toolbar` [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/%D0%B3%D0%B0%D1%81%D1%82%D1%83%D0%BB%D0%B1%D0%B0%D1%80.f681d89.png){title=QR-код}
    - do: Перезапустить приложние
    - assert:
        В сервисе Нави отображается тулбар
        В тулбаре отображается кнопка Заправок
    - do: Тап на кнопку Заправок в тулбаре сервиса Нави
    - assert:
        При нажатии кнопка становится активной и происходит поисковый запрос "АЗС"
    - do: Тап по хардварной кнопке Назад на девайсе
    - assert:
        Отжимается тогл Заправок
        Выход из сервиса Нави не происходит

    - platforms:
        - android
    - tags:
        - assessors


  Отсутствие фильтров поиска заправок в вертикальной ориентации, при открытии карточек не АЗС:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}
        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Внизу экрана отображаются фильтры поиска и кнопка назад
    - do: Тап на пин организации, которая не является результатом поиска (не АЗС)
    - assert: |
        Открылась мини-карточка организации
        Фильтры поиска и кнопка назад не отображаются
    - do: Закрыть мини-карточку организации
    - do: Тап на топоним
    - assert: |
        Открылась мини-карточка топонима
        Фильтры поиска и кнопка назад не отображаются
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отсутствие фильтров поиска заправок в горизонтальной ориентации, при открытии карточек не АЗС:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}
        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Внизу экрана отображаются фильтры поиска и кнопка назад
    - do: Тап на пин организации, которая не является результатом поиска (не АЗС)
    - assert: |
        Открылась карточка организации
        Фильтры поиска и кнопка назад не отображаются
    - do: Закрыть карточку организации
    - do: Тап на топоним
    - assert: |
        Открылась карточка топонима
        Фильтры поиска и кнопка назад не отображаются
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Тапабельность контролла ММП в вертикальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
        Приложению выдан доступ к ММП
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствует контролл ММП
    - do: Переместить произвольно спан карты
    - do: Тап на контролл ММП
    - assert: |
        Контролл ММП тапабелен и меняет свое состояние
        Спан карты центрируется на точке ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Тапабельность контролла ММП в горизонтальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
        Приложению выдан доступ к ММП
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствует контролл ММП
    - do: Переместить произвольно спан карты
    - do: Тап на контролл ММП
    - assert: |
        Контролл ММП тапабелен и меняет свое состояние
        Спан карты центрируется на точке ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Открытие шторы слоев в вертикальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствует конролл слоев
    - do: Тап на контролл слоев
    - assert: Открылась штора слоев
    - do: Закрыть штору
    - assert: |
        Открыт экран с заголовком Заправки
        Контрол слоев присутствует

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Открытие шторы слоев в горизонтальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствует конролл слоев
    - do: Тап на контролл слоев
    - assert: Открылась штора слоев
    - do: Закрыть штору
    - assert: |
        Открыт экран с заголовком Заправки
        Контролл слоев присутствует

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Зум карты с помощью контроллов в вертикальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствуют контроллы увеличения и уменьшения зума
    - do: Тап на контролл увеличения зума
    - assert: Зум карты увеличился
    - do: Тап на контролл уменьшения зума
    - assert: Зум карты уменьшился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Зум карты с помощью контроллов в горизонтальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствуют контроллы увеличения и уменьшения зума
    - do: Тап на контролл увеличения зума
    - assert: Зум карты увеличился
    - do: Тап на контролл уменьшения зума
    - assert: Зум карты уменьшился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Зум карты дабл-тапом в вертикальной ориентации:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
    - do: Дабл-тап двумя пальцами по карте
    - assert: Зум карты уменьшился
    - do: Дабл-тап одним пальцем по карте
    - assert: Зум карты увеличился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Зум карты дабл-тапом в горизонтальной ориентации:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
    - do: Дабл-тап двумя пальцами по карте
    - assert: Зум карты уменьшился
    - do: Дабл-тап одним пальцем по карте
    - assert: Зум карты увеличился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Открытие меню в вертикальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствует конролл меню
    - do: Тап на контролл меню
    - assert: Открылось меню
    - do: Закрыть меню
    - assert: |
        Открыт экран с заголовком Заправки
        Присутствует конролл меню

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Заправки. Открытие меню в горизонтальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Присутствует конролл меню
    - do: Тап на контролл меню
    - assert: Открылось меню
    - do: Закрыть меню
    - assert: |
        Открыт экран с заголовком Заправки
        Присутствует конролл меню

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Автомобильная кастомизация подложки в сервисе Заправок:
    - info: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Применилась автомобильная кастомизация подложки
    - do: Выйти из сервиса Заправок
    - assert: Автомобильная кастомизация отсутствует
    - do: Изменить ориентацию устройства
    - assert: Устройство в горизонтальной ориентации
    - do: Тап на таб Заправки
    - assert:
        Открылся экран с заголовком Заправки
        Автомобильная кастомизация подложки применена

    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Автомобильная кастомизация подложки в сервисе Заправок. Офлайн-карты:
    - info: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
        Cкачаны офлайн-карты текущего региона
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Включить авиарежим
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Применилась автомобильная кастомизация подложки
    - do: Выйти из сервиса Заправок
    - assert: Автомобильная кастомизация отсутствует
    - do: Изменить ориентацию устройства
    - assert: Устройство в горизонтальной ориентации
    - do: Тап на таб Заправки
    - assert:
        Открылся экран с заголовком Заправки
        Автомобильная кастомизация подложки применена

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Автомобильная кастомизация подложки в сервисе Заправок. Перезагрузка приложения:
    - info: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/tdon/gas.png){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Применилась автомобильная кастомизация подложки
    - do: Перезагрузить приложение с выгрузкой из памяти
    - assert: |
        Открылся главный экран приложения
        Сервис Заправок не активен
        Отсутствует автомобильная кастомизация
    - do: Тап на таб Заправки
    - assert: |
        Открылся экран с заголовком Заправки
        На карте отображаются пины АЗС
        Применилась автомобильная кастомизация подложки

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Автоматическое открытие карточки заправки при заезде на полигон АЗС с включенным табом Заправки:
    - info: |
        Устройство в вертикальной ориентации
        Включена симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/minbulat/код){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение
    - do: Тап на таб Заправки
    - assert: Отображается слой заправок на карте
    - do: Построить маршрут до полигона АЗС с оплатой в Картах и запустить симуляцию (Debug-panel > Routes > Enter your ruote)
    - assert: Началась симуляция движения
    - do: Дождаться заезда на полигон АЗС
    - assert: При заезде на полигон АЗС открывается карточка заправки
    - do: Сменить ориентацию устройства на горизантальную
    - assert: Отображается карточка заправки в горизонтальной ориентации

    - tags:
        - assessors
    - platforms:
        - ios


  Автоматическое открытие и закрытие карточки заправки при заезде на полигон АЗС с включенным табом Заправки:
    - info: |
        Устройство в вертикальной ориентации
        Включена симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/minbulat/код){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение
    - do: Тап на таб Заправки
    - assert: Отображается слой заправок на карте
    - do: Построить маршрут с проездом через полигон АЗС с оплатой в Картах и запустить симуляцию (Debug-panel > Routes > Enter your ruote)
    - assert: Началась симуляция движения
    - do: Дождаться заезда на полигон АЗС
    - assert: При заезде на полигон АЗС открывается карточка заправки
    - do: Дождаться выезда с полигона АЗС
    - assert: При выезде с полигона АЗС карточка заправки закрывается

    - testing:
        - acceptance_maps
    - tags:
        - assessors
    - platforms:
        - ios
        - android


  Автоматическое открытие карточки заправки при заезде на полигон АЗС с построенным маршрутом при включенном табе Заправок:
    - info: |
        Устройство в вертикальной ориентации
        Включена симуляция движения:
        Debug-panel > Routes > Demo movement
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/minbulat/код){title=QR-код}

        `yandexmaps://add_exp?service_gas_stations`
    - do: Перезагрузить приложение
    - do: Тап на таб Заправки
    - assert: Включен слой Заправок
    - do: Построить автомобильный маршрут до полигона АЗС с оплатой в Картах
    - assert: Маршрут построен
    - do: Тап Поехали
    - assert: Началась симуляция движения
    - do: Дождаться заезда на полигон АЗС
    - assert: При заезде на полигон АЗС открывается карточка заправки

    - tags:
        - assessors
    - platforms:
        - ios
        - android