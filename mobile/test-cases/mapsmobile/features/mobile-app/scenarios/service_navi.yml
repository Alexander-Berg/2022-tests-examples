components: service_navi
testing:
  - regress

specs:
  Включение сервиса Навигатор:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Пользователь неавторизован
        Для Android эксперимент 'service_navi' выключен
    - do: Тап на таб Навигатор (Для Android)
    - assert: |
        Таббар не скрылся
        Тулбар не появился
        Отсутствует кнопка назад
        Поисковая строка отображается не в свёрнутом виде
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - do: Тап на таб Навигатор
    - assert: |
        Таббар скрылся
        Тулбар появился
        Тулбар не закрывает курсор
        Отображается кнопка назад
        Поисковая строка сворачивается в иконку меню
        Отображается контрол добавления ДС
        Отображается контрол вызова Алисы
        Вверху экрана отображается заголовок Навигатор

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сворачивание поисковой строки до иконки пользователя:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Пользователь авторизован
    - do: Для Android включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - do: Тап на таб Навигатор
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        Поисковая строка свернулась до иконки с аватаром пользователя

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Поиск через тулбар:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
    - do: Закрыть Debug-Panel
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - do: Тап на таб "Навигатор"
    - assert: |
        Открылся сервис Навигатор
        Внизу экрана отображается тулбар
        Тулбар не закрывает курсор
    - do: Тап на кнопку поиска в тулбаре
    - assert: Открылся экран поиска
    - do: Тап на категорию поиска
    - assert: |
        Появился СЕРП
        В поисковой строке отображается название категории, по которой был произведён поиск
    - do: Тап на крестик на СЕРПе
    - assert: Отображается главный экран сервиса Навигатор

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Поиск по категории из тулбара через компонент CommonMenuManager:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: |
        Включить эксперименты через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2016.39.56.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager&service_navi`
    - do: Перезапустить приложение для активации экспериментов
    - assert: |
        Открылся сервис Навигатор
        Внизу экрана отображается тулбар
    - do: Тап на кнопку поиска в тулбаре
    - assert: Открылся экран поиска
    - do: Тап на любую категорию поиска
    - assert: |
        Появился СЕРП
        В поисковой строке отображается название категории, по которой был произведён поиск
    - do: Тап на крестик
    - assert: Отображается главный экран сервиса Навигатор

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Построение маршрута на экране из кнопки в тулбаре:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert: |
        Открылся сервис Навигатор
        Внизу экрана отображается тулбар
        Тулбар не закрывает курсор
    - do: Тап на кнопку с иконкой закладок на тулбаре
    - assert: Открылся экран Маршрут
    - do: Ввести адрес в поле Откуда
    - do: Ввести адрес в поле Куда
    - assert: На карте построился маршрут по выбранным точкам

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие настроек из тулбара:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert: |
        Открылся сервис Навигатор
        Внизу экрана отображается тулбар
        Тулбар не закрывает курсор
    - do: Тап на кнопку с иконкой настроек
    - assert: Открылась штора с настройками
    - do: Тап на свободную область карты
    - assert: Быстрые настройки закрылись

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Добавление ДС через контрол ДС в залогине:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Пользователь авторизован
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        На экране отображается контрол добавления ДС
    - do: Тап на контрол добавления ДС
    - assert: Открылся экран добавления ДС
    - do: Выбрать любой тип ДС
    - do: Добавить комментарий к ДС
    - do: Тап на кнопку Отправить
    - assert: |
        На несколько секунд отобразилась плашка Спасибо
        Созданное ДС появилось на карте

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Добавление ДС через контрол ДС в незалогине:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Пользователь неавторизован
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        На экране отображается контрол добавления ДС
    - do: Тап на контрол добавления ДС
    - assert: Появился запрос авторизации
    - do: Тап на Не сейчас
    - assert: |
        Закрылся экран авторизации
        Отображается гллавный экран сервиса Навигатор
    - do: Тап на контрол добавления ДС
    - assert: Появился запрос авторизации
    - do: Тап на войти
    - do: Авторизоваться
    - assert: Открылся экран добавления ДС
    - do: Выбрать любой тип ДС
    - do: Добавить комментарий к ДС
    - do: Тап на кнопку Отправить
    - assert: |
        На несколько секунд отобразилась плашка Спасибо
        Созданное ДС появилось на карте

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Построение маршрута через саджесты сервиса:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Пользователь авторизован
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        Над тулбаром отображаются маршрутные саджесты
    - do: Тап на маршрутный саджест
    - assert: На карте построен маршрут в точку из саджеста
    - do: Тап на кнопку назад
    - assert: Отображается гланый экран сервиса Навигатор

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Поиск через контрол Алисы:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Пользователь авторизован
        Ранее не было дан доступ к микрофону
        Алиса не была запущена ранее
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        Отображается контрол Алисы
    - do: Тап на контрол Алисы
    - assert: Появился системный запрос на доступ к микрофону
    - do: Тап на Запретить
    - assert: |
        Запрос исчез
        Открыт главный экран сервиса Навигатор
    - do: Дать доступ к микрофону для МЯК в настройках
    - do: Тап на контрол Алисы
    - assert: |
        Открылась штора с аннотацией Алисы
        Алиса озвучивает весь текст из шторы

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Включение/выключение слоя пробок через контрол:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        Отображается активный контрол пробок
        В зависимости от города на контроле может отображаться бальность пробок
        На карте отображается слой пробок
    - do: Тап на контрол пробок
    - assert: |
        Контрол стал неактивным
        На карте не отображается слой пробок

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Поиск через тулбар в ведении по маршруту:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
    - do: Закрыть Debug-Panel
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Отображается тулбар без кнопки вариантов маршрута
        Тулбар не закрывает курсор
    - do: Запустить ведение по маршруту
    - assert: Появился новый тулбар с дополнительной кнопкой вариантов маршрута
    - do: Тап на кнопку поиска в тулбаре
    - assert: Открылся экран поиска
    - do: Тап на категорию поиска
    - assert: |
        Появилась плашка с названием категории и крестиком
        Пины поисковых организаций отображаются вдоль маршрута
    - do: Тап на крестик на плашке
    - assert: |
        Отображается экран ведения по маршруту
        Поисковые пины исчезли с карты

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Поиск по категории через компонент CommonMenuManager из тулбара в ведении:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: |
        Включить эксперименты через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2016.39.56.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager&service_navi`
    - do: Перезапустить приложение для активации экспериментов
    - do: Тап на таб Навигатор
    - assert:
        Открылся сервис Навигатор
        Отображается тулбар без кнопки вариантов маршрута
        Тулбар не закрывает курсор
    - do: Запустить ведение по маршруту
    - assert: Появился тулбар с дополнительной кнопкой вариантов маршрута
    - do: Тап на кнопку поиска в тулбаре
    - assert: Открылся экран поиска
    - do: Тап на любую категорию поиска
    - assert: |
        Появилась плашка с названием категории и крестиком
        Пины поисковых организаций отображаются вдоль маршрута
    - do: Тап на крестик на плашке
    - assert: |
        Отображается экран ведения по маршруту
        Поисковые пины исчезли с карты

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Просмотр вариантов маршрута через кнопку на тулбаре в ведении:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Отображается тулбар без кнопки вариантов маршрута
        Тулбар не закрывает курсор
    - do: Запустить ведение по маршруту с несколькими вариантами маршрута
    - assert: |
        Происходит ведение по маршруту
        Появился новый тул бар с дополнительной кнопкой вариантов маршрута
    - do: Тап на кнопку вариантов маршрута
    - assert: |
        Отображаются варианты маршрута на карте
        Отображаются кнопки соответствующие вариантам маршрута
        Отображается кнопка Продолжить маршрут
    - do: Тап на кнопку продолжить маршрут
    - assert: Продолжается ведение по маршруту

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Построение маршрута в ведении:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        Отображается тулбар без кнопки вариантов маршрута
    - do: Запустить ведение по маршруту
    - assert: |
        Происходит ведение по маршруту
        Появился новый тул бар с дополнительной кнопкой вариантов маршрута
    - do: Тап на кнопку с иконкой закладок на тулбаре
    - assert: Открылся экран Маршрут
    - do: Ввести в поле ввода Откуда адрес отличный от текущего в маршруте
    - do: Ввести в поле ввода Куда адрес отличный от текущего в маршруте
    - assert: На карте отобразился маршрут построенный по новым точкам
    - do: Тап на кнопку назад
    - assert: Произошёл возврат к экрану Маршрут
    - do: Тап на кнопку назад
    - assert: |
        На карте не отображается последний построенный маршрут
        На карте отображается маршрут на котором было запущено ведение

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие быстрых настроек в ведении:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        Отображается тулбар без кнопки вариантов маршрута
    - do: Запустить ведение по маршруту
    - assert: |
        Происходит ведение по маршруту
        Появился новый тул бар с дополнительной кнопкой вариантов маршрута
    - do: Тап на кнопку быстрых настроек на тулбаре
    - assert: Открылась штора быстрых настроек
    - do: Тап на свободную область карты
    - assert: Штора быстрых настроек закрылась

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Включение/выключение слоя парковок:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Слой парковки выключен
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
        Отображается не активный контрол парковок
        На карте не отображается слой парковок
    - do: Тап на контрол парковок
    - assert: |
        Контрол парковок стал активным
        На карте не отображается слой парковок

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие карточек в сервисе Навигатор:
    - info: |
        Устройство в вертикальной ориентации
        Открыт главный экран приложения
        Слой парковки выключен
    - do: Для Android Включить эксперимент 'service_navi', используя интент `yandexmaps://add_exp?service_navi` [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}
    - do: Перезапустить приложение
    - assert:
        Открылся сервис Навигатор
        Тулбар не закрывает курсор
    - do: Тап на топоним
    - assert: Открылась карточка топонима
    - do: Тап на пин организации
    - do:
        Открылась карточка организации
    - do: Тап на остановку ОТ
    - assert: Открылась карточка остановки ОТ

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображения пункта настройки фридрайв в меню:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Открыть настройки маршрутов Меню - Настройки - Маршруты
    - assert: |
        В настройках маршрута есть пункт «Навигация включается автоматически»
        У пункта «Навигация включается автоматически» есть тумблер переключения

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Экран перехода в режим фридрайв:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - assert: |
        Происходит симуляция движения
        Через несколько секунд открывается экран перехода в режим фридрайв
        На экране присутствуют:
          - контролы скорости
          - кнопка "Назад"
          - стрелка местоположения
          - кнопка "Включаем навигацию"
          - кнопка перехода в настройки «Не включать автоматически»

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps



  Экран фридрайв:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - assert: |
        Происходит симуляция движения
        Через несколько секунд открывается экран перехода в режим фридрайв
    - do: Тап на кнопку "Включаем навигацию"
    - assert: |
        Происходит переход в режим фридрайв в навигаторе
        На экране присутствуют:
         - контролы скорости
         - кнопка Назад
         - стрелка места положения
         - маршрутный саджест

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  При выключенной настройке не происходит переход в режим фридрайв с главного экрана:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Выключить настройку включения фридрайв Меню - Настройки - Маршруты - Навигация включается автоматически
    - assert: Пункт «Навигация включается автоматически» выключен
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - assert: |
        Происходит симуляция движения
        Приложение не переходит в режим фридрайв

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Включение фридрайв с главного экрана:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - assert: |
        Происходит симуляция движения
        Через несколько секунд открывается экран перехода в режим фридрайв
        Происходит таймер обратного отсчета включения режима фридрайв (изменяется заливка кнопки «Включаем навигацию»)
    - do: Дождаться окончания таймера обратного отсчета
    - assert: Происходит переход в режим фридрайв

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Включение фридрайв в режиме навигатор:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - do: Тап на таб Навигатор
    - assert: |
        Происходит симуляция движения
        Включается режим фридрайв без обратного отсчета

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Режим фридрайв не включается если пользователь отменил включение фридрайв в этой сессии:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - assert: |
        Происходит симуляция движения
        Через несколько секунд открывается экран перехода в режим фридрайв
        Происходит обратный отсчет включения режима фридрайв (изменяется заливка кнопки «Включаем навигацию»)
    - do: Тап на кнопку назад до перехода на экран фридрайв
    - assert: |
        Открыт главный эран карт
        Происходит движения в режиме фридрайв
        Экран перехода в режим фридрайв в сервис Навигатор больше не показывается в этой сессии

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переход в настройки с экрана включения режима фридрайв:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your Enter your route`
    - do: Перейти на главный экран приложения
    - assert: |
        Происходит симуляция движения
        Через несколько секунд открывается экран перехода в режим фридрайв
        Происходит обратный отсчет включения режима фридрайв (изменяется заливка копки «Включаем навигацию»)
    - do: Тап на кнопку «Не включать автоматически»
    - assert: |
        Происходит переход в настройки маршрутов
        Тумблер напротив настройки «Навигация включается автоматически» переход в неактивное состояние
    - do: Тап назад
    - assert: |
        Происходит переход на главный экран
        Происходит симуляция движения
        Режим фридрайв не включается

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Режим фридрайв не включается если приложение в фоне:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - assert: Происходит симуляция движения
    - do: Свернуть приложения до включения режима фридрайв
    - do: Подождать 10-15 секунд
    - do: Открыть приложение
    - assert: |
        Открыт главный экран приложения
        Происходит симуляция движения
        Режим фридрайв не включился

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Режим фридрайв не включается если пользователь находится на экране транспорт:
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26freedrive_start_second%3D5%26freedrive_time_button_on%3D10){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - do: Тап на таб Транспорт
    - assert: |
        Открыт экран Транспорт
        Происходит симуляция движения
        Режим фридрайв не включился

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Режим фридрайв не включается если пользователь включил слой самокаты:
    - info: |
        Пользователь авторизован
        ММП в Москве/Краснодаре
    - do: Включить интент
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/freedrive_scooter){title=QR-код}

        `yandexmaps://add_exp?service_navi&freedrive_start_second=5&freedrive_time_button_on=10&kicksharing_on`
    - do: Перезапустить приложение
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement` и `Debug Panel - Routes - Enter your route`
    - do: Перейти на главный экран приложения
    - do: Тап по чекбоксу включения слоя cамокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций
        Происходит симуляция движения
        Режим фридрайв не включился

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Таб Заправки в тулбаре при движении по маршруту:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: |
        Открыт экран ведения по маршруту
        В тулбаре на экране ведения появился новый таб Заправки

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Поиск заправок через таб Заправки в тулбаре при движении по маршруту:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        Поисковая выдача отображается без шторы серпа
        На карте отображаются пины АЗС
        Внизу экрана отображаются фильтры

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Состояние загрузки при поиске заправок через таб Заправки в тулбаре при движении по маршруту:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        Происходит поиск заправок
        Внизу экрана на короткое время отобразился лоадер с текстом: Ищем АЗС

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Состояние "Нет соединения с сетью" через таб Заправки в тулбаре при движении по маршруту:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на Поехали
    - assert: Открыт экран ведения по маршруту
    - do: Включить авиарежим
    - do: Тап на таб Заправки в тулбаре
    - assert: Внизу экрана отобразился текст "Нет соединения с сетью"
    - do: Выключить авиарежим
    - do: Тап на "Нет соединения с сетью"
    - assert: Появляется плашка с кнопкой "Повторить"
    - do: Тап на "Повторить"
    - assert: На карте отображаются пины АЗС

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Поиск заправок через таб Заправки в тулбаре при движении по маршруту в офлайн с кэшем:
    - info:  Загружена офлайн карта (Меню - Загрузка карт - Загрузить)
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Включить авиарежим
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Возврат состояния таба Заправки при выгрузке приложения из памяти в неактивное состояние:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на таб Заправки в тулбаре
    - assert: На спане отображаются пины АЗС
    - do: Выгрузить приложения из памяти
    - do: Открыть приложение
    - assert: |
        Открылся экран ведения по маршруту
        Таб "Заправки" в тулбаре неактивен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Фильтрация результатов при поиске заправок через Таб Заправки во время движения по маршруту:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры
    - do: Применить любой фильтр
    - assert: |
        Поисковая выдача соответствует фильтру
        В блоке Фильтры выделен соответствующий фильтр

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Фильтрование результатов поиска через таб Заправки во время движения по маршруту:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры
    - do: Тап на кнопку все фильтры
    - assert: Отображается экран Фильтры
    - do: Выбрать несколько фильтров
    - do: |
        iOS: Тап на Показать результаты
        Android: Тап на стрелку назад сверху
    - assert: |
        Поисковая выдача соответствует выбранным фильтрам
        В блоке Фильтры выделены соответствующие фильтры

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Сброс всех фильтров при поиске заправок через таб Заправки во время движения по маршруту:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на Поехали
    - assert: Открыт экран ведения по маршруту
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры
    - do: Применить несколько любых фильтров
    - assert: |
        Поисковая выдача соответствует фильтру
        В блоке Фильтры выделены соответствующие фильтры
    - do: Тап по кнопке фильтров
    - assert: Отображается экран Фильтры
    - do: Тап на Сбросить все
    - assert: Фильтры, установленные ранее, сброшены
    - do:
        (ios) Тап на Показать результаты
        (Android) Тап на кнопку Назад
    - assert: |
        Поисковая выдача изменилась
        В списке результатов - все АЗС

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Таб Заправки в тулбаре в режиме фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: |
        Открыт экран сервиса Навигатор
        В тулбаре появился новый таб Заправки

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Поиск заправок через таб Заправки в тулбаре в фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        Поисковая выдача отображается без шторы серпа
        На карте отображаются пины АЗС
        Внизу экрана отображаются фильтры

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Состояние загрузки при поиске заправок через таб Заправки в тулбаре в фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        Происходит поиск заправок
        Внизу экрана на короткое время отобразился лоадер с текстом: Ищем АЗС

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Состояние "Нет соединения с сетью" через таб Заправки в тулбаре в фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Включить авиарежим
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: Внизу экрана отобразился текст "Нет соединения с сетью"
    - do: Выключить авиарежим
    - do: Тап на "Нет соединения с сетью"
    - assert: Появляется плашка с кнопкой "Повторить"
    - do: Тап на "Повторить"
    - assert: На карте отображаются пины АЗС

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Поиск заправок через таб Заправки в тулбаре в фридрайв в офлайн с загруженной картой:
    - info: Загружена офлайн карта (Меню - Загрузка карт - Загрузить)
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Включить авиарежим
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Возврат состояния таба Заправки при выгрузке приложения из памяти в неактивное состояние в фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: На спане отображаются пины АЗС
    - do: Выгрузить приложения из памяти
    - do: Открыть приложение
    - assert: |
        Отображается главный экран приложения
        Пины азс не отображаются

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  Фильтрация результатов при поиске заправок через Таб Заправки в фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры
    - do: Применить любой фильтр
    - assert: |
        Поисковая выдача соответствует фильтру
        В блоке Фильтры выделен соответствующий фильтр

    - platforms:
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Фильтрование результатов поиска через таб Заправки в фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры
    - do: Тап на кнопку все фильтры
    - assert: Отображается экран Фильтры
    - do: Выбрать несколько фильтров
    - do: Тап на Показать результаты
    - assert: |
        Поисковая выдача соответствует выбранным фильтрам
        В блоке Фильтры выделены соответствующие фильтры

    - platforms:
        - ios
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Сброс всех фильтров при поиске заправок через таб Заправки в фридрайв:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Тап на Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры
    - do: Применить несколько любых фильтров
    - assert: |
        Поисковая выдача соответствует фильтру
        В блоке Фильтры выделены соответствующие фильтры
    - do: Тап по кнопке  "Все фильтры"
    - assert: Отображается экран Фильтры
    - do: Тап на Сбросить все
    - assert: Фильтры, установленные ранее, сброшены
    - do: Тап на Показать результаты
    - assert: |
        Поисковая выдача изменилась
        В списке результатов - все АЗС

    - platforms:
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Сервис Навигатор. UI отображение элементов. Вертикальная ориентация:
    - preconditions: Устройство в вертикальной ориентации
    - do: |
        Для Android Включить эксперименты используя интент
        [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: Открыт главный экран приложения
    - do: Тап на таб Навигатор в таборе
    - assert: |
        - Открылся экран с заголовком Навигатор
        - Слева от заголовка отображается контролл меню
        - Справа от заголовка отображается контролл пробок
        - Под контролем пробок отображается контрол парковок
        - Справа отображаются контролы зума
        - Слева отображается контролы дорожные события и Алиса
        - Снизу отоброжается тулбар
        - Над тулбаром отображается маршрутный саджест (может отображаться несколько маршрутных саджестов)
        - Слева над маршрутным саджестом отображается  кнопка назад
        - Справа над маршрутным саджестом отображается контролл ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps

  Сервис Навигатор. UI отображение элементов. Горизонтальная ориентация:
    - preconditions: Устройство в горизонтальной ориентации
    - do: Для Android Включить эксперименты используя интент
        [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: Открыт главный экран приложения
    - do: Тап на таб "Навигатор" в таббаре
    - assert: |
        - Открылся экран с заголовком Навигатор
        - Слева от заголовка отображается контрол меню
        - Справа отображается тул бар
        - Левее тулбара отображается контрол пробок
        - Под контролом пробок отображается контрол парковок
        - Под контролом парковок отображается контролы зума
        - Под контролами зума отображается контрол ММП
        - Слева отображается контролы дорожные события и Алиса

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Сервис Навигатор. UI отображение элементов при открытой карточки организации. Вертикальная ориентация:
    - preconditions: Устройство в вертикальной ориентации
    - do: Для Android Включить эксперименты используя интент
        [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: Открыт главный экран приложения
    - do: Тап на таб Навигатор в тулбаре
    - do: Тап на пин любой организации на карте
    - assert: |
        - Открылась мини карточка организации
        - Вверху экран заголовок Навигатор
        - Слева от заголовка отображается контролл "меню"
        - Справа от заголовка отображается контролл пробок
        - Под контролем пробок отображается контрол парковок
        - Справа отображаются контролы зума
        - Слева отображается контролы дорожные события и Алиса
        - Справа над карточкой организации отображается контролл ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. UI отображение элементов при открытой карточки организации. Горизонтальная ориентация:
    - preconditions: Устройство в горизонтальной ориентации
    - do: Для Android Включить эксперименты используя интент
        [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: Открыт главный экран приложения
    - do: Тап на таб Навигатор в тулбаре
    - do: Тап на пин любой организации на карте
    - assert: |
        - Открылась карточка организации
        - Вверху экран заголовок Навигатор (для Android)
        - Слева от заголовка отображается контрол меню (для Android)
        - Справа отображается тул бар (для Android)
        - Отображается контролл пробок
        - Под контроллом пробок отображается контрол парковок
        - Под контроллом парковок отображается контролы зума
        - Под контроллом зума отображается контролл ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Выход из таба заправок:
    - do: |
        Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Включить симуляцию движения через `Debug Panel - Routes - Demo movement`
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Открыть главный экран приложения
    - do: Построить автомаршрут любым способом
    - do: Тап на поехали
    - assert: |
        Открыт экран ведения по маршруту
        В тулбаре на экране ведения появился новый таб Заправки
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На спане отображаются пины АЗС
        Внизу экрана отображаются фильтры
    - do: Тап на системную кнопку назад
    - assert: |
        Произошел выход из таба заправок
        Сервис Навигатора не сбросился

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - tanker_sdk


  UI фильтров заправок в сервисе Навигатор:
    - info: Открыт главный экран приложения
    - do: |
        Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-05-24%2012%3A54%3A13.f39447c.jpg){title=QR-код}

        `yandexmaps://add_exp?gas_stations_in_toolbar&service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - do: Тап на таб Заправки
    - do: Тап на кнопку фильтров
    - do: Выбрать несколько фильтров поиска в рамках одной категории (например, в фильтре Топливо выбрать АИ-92 и АИ-95 и т.п)
    - do: Вернуться на экран поисковой выдачи
    - assert: |
          Выбранный фильтр выделен цветом
          Выбранный фильтр не отличается по высоте от остальных

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - tanker_sdk


  Сервис Навигатор. Тапабельность контролла ММП в вертикальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
        Приложению выдан доступ к ММП
    - do: |
        Для Android Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: |
        Открылся экран с заголовком Навигатор
        Присутствует контролл ММП
    - do: Переместить произвольно спан карты
    - do: Тап на контролл ММП
    - assert: |
        Контролл ММП тапабелен и меняет свое состояние
        Спан карты центрируется на точке ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. Тапабельность контролла ММП при активном табе Заправки в горизонтальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
        Приложению выдан доступ к ММП
    - do: |
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi%26gas_stations_in_toolbar.png){title=QR-код}

        `yandexmaps://add_exp?service_navi&gas_stations_in_toolbar`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: |
        Открылся экран с заголовком Навигатор
        Присутствует контролл ММП
        Отображается тулбар
        В тулбаре присутствует таб Заправки
    - do: Тап на таб Заправки в тулбаре
    - assert: |
        На карте отображаются пины АЗС
        Присутствует контролл ММП
    - do: Переместить произвольно спан карты
    - do: Тап на контролл ММП
    - assert: |
        Контролл ММП тапабелен и меняет свое состояние
        Спан карты центрируется на точке ММП

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. Зум карты с помощью контроллов в вертикальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Для Android Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: |
        Открылся экран с заголовком Навигатор
        Присутствуют контроллы увеличения и уменьшения зума
    - do: Тап на контролл увеличения зума
    - assert: Зум карты увеличился
    - do: Тап на контролл уменьшения зума
    - assert: Зум карты уменьшился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. Зум карты с помощью контроллов в горизонтальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Для Android Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: |
        Открылся экран с заголовком Навигатор
        Присутствуют контроллы увеличения и уменьшения зума
    - do: Тап на контролл увеличения зума
    - assert: Зум карты увеличился
    - do: Тап на контролл уменьшения зума
    - assert: Зум карты уменьшился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. Зум карты дабл-тапом в вертикальной ориентации:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Для Android Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: Открылся экран с заголовком Навигатор
    - do: Дабл-тап двумя пальцами по карте
    - assert: Зум карты уменьшился
    - do: Дабл-тап одним пальцем по карте
    - assert: Зум карты увеличился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. Зум карты дабл-тапом в горизонтальной ориентации:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Для Android Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: Открылся экран с заголовком Навигатор
    - do: Дабл-тап двумя пальцами по карте
    - assert: Зум карты уменьшился
    - do: Дабл-тап одним пальцем по карте
    - assert: Зум карты увеличился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. Открытие меню в вертикальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в вертикальной ориентации
    - do: |
        Для Android Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: |
        Открылся экран с заголовком Навигатор
        Присутствует конролл меню
    - do: Тап на контролл меню
    - assert: Открылось меню
    - do: Закрыть меню
    - assert: |
        Открыт экран с заголовком Навигатор
        Присутствует конролл меню

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Сервис Навигатор. Открытие меню в горизонтальной ориентации устройства:
    - preconditions: |
        Открыт главный экран приложения
        Устройство в горизонтальной ориентации
    - do: |
        Для Android Включить эксперимент с помощью интента [collapsed-image](https://jing.yandex-team.ru/files/elenaborz/IMAGE%202022-04-06%2011%3A38%3A26.75c9c5e.jpg){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - do: Тап на таб Навигатор
    - assert: |
        Открылся экран с заголовком Навигатор
        Присутствует конролл меню
    - do: Тап на контролл меню
    - assert: Открылось меню
    - do: Закрыть меню
    - assert: |
        Открыт экран с заголовком Навигатор
        Присутствует конролл меню

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Запрос доступа к данным движения и фитнеса через таб навигатор:
    - info: Ранее не был выдан Запрос доступа к данным движения и фитнеса
    - do: |
        - Использовать интент
        [collapsed-image](https://jing.yandex-team.ru/files/dabrynskaya/Снимок%20экрана%202022-06-17%20в%2015.52.54.png){title=QR-код}

        `yandexmaps://add_exp?freedrive_from_route_and_turn_off=enabled`
        Перезагрузить приложение
    - do: Тап на таб нави
    - assert: Отображется запрос доступа к данным движения и фитнеса

    - platforms:
        - ios

  Построение автомаршрута в сервисе Навигатор после перезапуска если ранее был выбран другой тип транспорта:
    - do: |
        Для Android Включить эксперимент с помощью интента
        [collapsed-image](https://jing.yandex-team.ru/files/lsherst/service_navi.png){title=QR-код}

        `yandexmaps://add_exp?service_navi`
    - do: Перезапустить приложение с выгрузкой памяти
    - do: Тап на таб Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Построить маршрут любым способом
    - assert: |
        - Открыт экран выбора маршрута
        - Поумолчанию выбран тип транспорта авто
    - do: Выбрать любой тип транспорта, кроме автомобильного
    - assert: Маршрут изменился с учетом выбранного типа транспорта
    - do: Сбросить маршрут
    - do: Перезапустить приложение
    - assert: Открыт главный экран приложения
    - do: Тап на таб Навигатор в таббаре
    - assert: Открыт экран сервиса Навигатор
    - do: Построить маршрут любым способом
    - assert: |
        - Открыт экран выбора маршрута
        - Поумолчанию выбран тип транспорта авто

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps