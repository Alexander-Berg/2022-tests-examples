components: scooters
testing:
  - regress
tags:
  - advertisement

aliases:
  - &testing_scooter_on
    - info: |
        Устройство подключено к Чарльзу во внутренней сети (отключить тунель-> настроить Чарльз-> включить туннель)
    - do: |
        Включить тестовые окружения (`Меню -> Настройки -> Debug-Panel -> Environment`):
        * `Passport environment -> TESTING`
        * `Mobmaps proxy host -> Testing`
        * `PaymentSDK Environment -> TESTING`
        * `Taxi Environment -> TESTING`
    - do: |
        Включить фичёвые тычки (`Меню -> Настройки -> Debug-Panel -> Features):
        * `Use flag 'ignore telematics' (for fake scooters)`
        * `Accept scooters terms of use`
        * `Allow invalid cards`
    - do: Закрыть дебаг-панель
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить МЯК
    - do: Авторизоваться в аккаунт `m4pst3st2` с паролем `yandex123`
    - do: Включить саджест "Самокаты" на главном экране



specs:

  Построение пешеходного маршрута до парковки самоката:
    - info: |
        Пользователь авторизован
        ММП в Москве/Краснодаре
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Тап по чекбоксу включения слоя cамокатов в панели саджестов
    - assert: На карте появились иконки самокатов и парковочных станций
    - do: Тап на пин самоката
    - assert: |
        Открыта карточка бронирования самоката
        До самоката проложена линия пешего маршрута от ММП
        На линии отображается подсказка со временем маршрута
    - do: Свернуть и развернуть приложение
    - assert: |
        На спане продолжают отображаться:
        - пин самоката
        - линия пешего маршрута
        - подсказка со временем маршрута
        Открыта карточка бронирования самоката

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
        - mapkit_ready
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin
        - mapkit


  Вытеснение карточки самоката другими карточками:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        Включен слой отображения самокатов
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Тап на пин самоката
    - assert: Отображается карточка бронирования самоката с линией маршрута
    - do: Тап на пин остановки
    - assert: |
        Пин, линия маршрута и карточка самоката скрываются
        Пин остановки поднят
        Карточка остановки открыта
    - do: Тап на пин самоката
    - assert: Отображается карточка бронирования самоката с линией маршрута
    - do: Тап на пин организации/топонима
    - assert: |
        Пин, линия маршрута и карточка самоката скрываются
        Пин организации/топонима выделен
        Открыта миникарточка органиации/топонима
    - do: Тап на пин самоката
    - assert: Отображается карточка бронирования самоката с линией маршрута
    - do: Тап на пин ДС
    - assert: |
        Пин, линия маршрута и карточка самоката скрываются
        Пин ДС выделен
        Открыта карточка ДС

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Выключение слоя самокатов в режиме Навигатор:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Тап по чекбоксу включения слоя cамокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций
        Справа от саджеста самокатов отображается саджест "Считать QR"
    - do: Тап на таб Навигатор
    - assert: |
        С карты пропали все элементы слоя cамокатов
        Саджест слоя самокатов исчез
        Саджест "Считать QR" исчез
        Режим Навигатор включен
        Маршрутный саджест не перекрывает иконку местоположения
    - do: Тап на таб Навигатор
    - assert: |
        Режим Навигатора выключен
        На карте появились иконки самокатов и парковочных станций
        Саджест "Считать QR" отображается справа от саджеста самокатов

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Выключение слоя самокатов в ведении:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Тап по чекбоксу включения слоя cамокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций
    - do: Построить произвольный автомаршрут
    - assert: Отображается экран выбора маршрута
    - do: Перейти в ведение
    - assert: |
        С карты пропали все элементы слоя cамокатов
        Саджест слоя самокатов исчез
        Отображается экран ведения по маршруту

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Выключение слоя самокатов в режиме Транспорт:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Тап по чекбоксу включения слоя cамокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        Справа от саджеста самокатов отображается саджест "Считать QR"
        На карте появились иконки самокатов и парковочных станций
    - do: Тап на таб Транспорт
    - assert: |
        С карты пропали все элементы слоя cамокатов
        Саджест слоя самокатов исчез
        Саджест "Считать QR" исчез
        На карте отображаются живые метки ОТ
    - do: Тап на таб Транспорт
    - assert: |
        Живые метки ОТ скрылись
        Таб Транспорт выключен
        На карте появились иконки самокатов и парковочных станций
        Отображается саджест "Считать QR"

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Взаимодействие с чекбоксом самокатов:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        зум <12
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - do: Повернуть устройство в горизонтальную ориентацию
    - assert: |
        Чекбокс остается активным
        Иконки самокатов и парковочных станций отображаются
        На карте выделены участки с областью работы самокатов
        Справа от саджеста самокатов отображается саджест "Считать QR"
    - do: Сменить спан карт на другой город (Далеко от зоны самокатов)
    - assert: Чекбокс остается активным
    - do: Отзумиться на >16 зум
    - assert: Чекбокс остается активным
    - do: Тап на пин любой организации
    - assert: Открыта карточка организации
    - do: Закрыть карточку организации
    - assert: |
        Чекбокс остается активным
        Саджест "Считать QR" отображается
    - do: Разлогиниться
    - assert: |
        Чекбокс неактивен
        На карте не отображаются иконки самокатов и парковочных станций
        Не отображается саджест "Считать QR"

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация при включении слоя самокатов:
    - info: |
        Пользователь не авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        Зум <16
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Открывается экран с предложением авторизации
        На экране присутствуют: текст "Войдите в профиль"
        Кнопка "Войти"
        Кнопка "Не сейчас"
    - do: Тап "Не сейчас""
    - assert: |
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        Чекбокс неактивен
        Экран авторизации закрылся
    - do: Тап на чекбокс самокатов
    - assert: Открывается экран с предложением авторизации
    - do: Тап на кнопку авторизации
    - assert: Открыт экран авторизации
    - do: Тап на затемненный участок экрана/спан
    - assert: |
        Экран авторизации закрылся
        Чекбокс неактивен
    - do: Повернуть устройство в горизонтальную ориентацию
    - assert: Устройство в горизонтальной ориентации
    - do: Тап на чекбокс самокатов
    - assert: Открывается экран с предложением авторизации
    - do: Тап на кнопку авторизации
    - assert: Открывается экран авторизации
    - do: Авторизоваться
    - assert: |
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        Чекбокс самокатов активен
        Включается самокатный слой
        Появляются пины самокатов
        Справа от саджеста самокатов отображается саджест "Считать QR"

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin


  Разрешение на доступ к камере на экране сканирования QR-кода:
    - info: |
        Доступ к камере не выдавался ранее
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - assert: Открыт главный экран приложения
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - do: Тап на саджест для считывания QR-кода
    - assert: Отображается запрос доступа к камере
    - do: Отклонить запрос доступа
    - assert: |
        Открыто вебвью "Введите номер самоката"
        Отображается клавиатура и панель отображения номера вида "000000"
        Кнопка "Назад к камере" не отображается
    - do: Закрыть вебвью
    - do: Тап на саджет для считывания QR-кода
    - assert: Отображается запрос доступа к камере
    - do: Разрешить доступ
    - assert: |
        Запущена камера девайса
        Отображается вебвью "Найдите QR-код на руле"
    - do: Сменить ориентацию устройства
    - assert: Вебвью продолжает отображаться в вертикальной ориентации

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход к карточке бронирования самоката через сканирование QR-кода:
    - info: |
        Доступ к камере выдан
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - do: |
        - Сгенерировать QR-код на сайте http://qrcoder.ru/ из сылки https://go.yandex/scooters?number=scooter_number, где scooter_number заменить на номер самоката (например 7302)
        - Номер самоката может состоять из 4-х, 5-ти или 6-ти цифр и отображается в карточке самоката
    - do: Тап на саджест "Считать QR"
    - assert: |
        Запущена камера девайса
        Отображается вебвью "Найдите QR-код на руле"
        В вебвью отображается:
        - рамка для сканирования QR-кода
        - кнопка закрытия вебвью
        - кнопка фонарика
        - кнопка "Ввести номер самоката"
        Клавиатура ввода не отображается
    - do: Навести камеру на сгенерированный QR-код
    - assert: |
        Код считан корректно
        Отображается спан карты и карточка бронирования самоката

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin


  Переход к карточке бронирования самоката через ввод кода:
    - info: |
        Доступ к камере не выдавался ранее
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        Номер самоката может состоять из 4-х, 5-ти или 6-ти цифр и отображается в карточке самоката
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - do: Тап на саджест "Считать QR"
    - assert: Отображается запрос доступа к камере
    - do: Отклонить запрос на доступ к камере
    - assert: |
        В вебвью отображается
        - заголовок "Введите номер самоката"
        - клавиатура
        - панель отображения кода вида "000000"
        - крестик для закрытия вебвью
        Камера девайса не запущена
        Кнопка "Назад к камере" не отображается
    - do: Ввести номер самоката
    - assert: Отображается спан карты и карточка бронирования самоката
    - do: Закрыть карточку самоката
    - do: Тап на саджест "Считать QR"
    - assert: Отображается запрос доступа к камере
    - do: Разрешить доступ
    - assert: |
        Запущена камера девайса
        Отображается вебвью "Найдите QR-код на руле"
    - do: Тап на кнопку "Ввести номер самоката"
    - assert: |
        Отображается вебвью "Введите номер самоката"
        Отображается кнопка "Назад к камере"
    - do: Ввести номер самоката
    - assert: Отображается спан карты и карточка бронирования самоката

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - newbie


  Отображение полигонов самокатного слоя при разных зумах карты:
    - info: |
        Пользователь авторизован
        На спане карта Москвы/Краснодара/Санкт-Петербурга
        Зум карты от 21 до ~14 (масштаб отображения может меняться в зависимости от ответа API Яндекс.Go)
        К полигонам самокатного слоя относятся зоны ограничения скорости и зона доступности самокатов
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс активен
        Отображаются иконки самокатов и полигоны самокатного слоя
    - do: Отдалять зум до исчезновения иконок самокатов и парковочных станций
    - assert: |
        Иконки самокатов и парковочных станций исчезли
        Полигоны самокатного слоя отображаются
    - do: Продолжить отдалять зум
    - assert: |
        Полигоны самокатного слоя исчезли
    - do: Приближать зум до появления иконок самокатов и парковоных станций
    - assert: |
        Отображаются иконки самокатов и парковочных станций
        Полигоны самокатного слоя появились

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Включение слоя самокатов по URL-схеме в режиме Навигатор:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
        Справа от саджеста самокатов отображается саджест "Считать QR"
    - do: Тап на таб Навигатор
    - assert: |
        С карты пропали все элементы слоя cамокатов
        Режим Навигатор включен
        Маршрутный саджест не перекрывает иконку местоположения
        Саджест считывания qr кода не отображается
    - do: Перейти по схеме вида yandexmaps://maps.yandex.ru/?l=kicksharing
    - assert: |
        Режим Навигатора выключен
        Чекбокс включения самокатов активен
        Отображается саджест "Считать QR"

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - kotlin


  Включение слоя самокатов по URL-схеме в режиме ОТ:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на таб Транспорт
    - assert: |
        С карты пропали все элементы слоя cамокатов
        На карте отображаются живые метки ОТ
    - do: Перейти по схеме вида yandexmaps://maps.yandex.ru/?l=kicksharing
    - assert: |
        Режим ОТ выключен
        Чекбокс включения самокатов активен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - kotlin



  Включение слоя самокатов по URL-схеме в ведении:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Построить любой маршрут
    - assert: Отображается экран выбора маршрута
    - do: Перейти по схеме вида yandexmaps://maps.yandex.ru/?l=kicksharing
    - assert: |
        Экран выбора маршрута не отображается
        Чекбокс самокатов стал активным
    - do: Построить любой маршрут
    - do: Начать ведение
    - assert: |
        С карты пропали все элементы слоя cамокатов
        На карте отображается экран ведения
    - do: Перейти по схеме вида yandexmaps://maps.yandex.ru/?l=kicksharing
    - assert: |
        Экран ведения не отображается
        Чекбокс включения самокатов активен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - integration_run:
        - kotlin


  Онбординг и экран условий использования при первом бронировании самоката:
    - info: |
        Пользователь авторизован
        Открыт спан с картой Москвы/Краснодара/Санкт-Петербурга
        Бронирование самоката происходит в первый раз
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката или парковочной станции с самокатами
    - assert: Открыта карточка бронирования самокатов
    - do: Тап по кнопке бронирования
    - assert: Открывается сториз-онбординг для новых пользователей
    - do: Дождаться окончания сториз
    - assert: |
        Появляется экран условий аренды
        Под условиями кнопка пользовательского соглашения и других условий
        Ниже - свитчер "Я принимаю условия аренды"
        Кнопка "Перейти к бронированию" неактивна
    - do: Тап по кнопке пользовательского соглашения
    - assert: |
        Открылся страница правовых документов Яндекса "Условия аренды электросамоката Go"
    - do: Тап по "Закрыть"
    - assert: |
        Страница закрылась
        Открыт экран условий аренды
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: Экран остался в вертикальной ориентации
    - do: Вернуть устройство в вертикальную ориентацию
    - assert: Экран в вертикальной ориентации
    - do: Тап по свитчеру "Я принимаю условия аренды"
    - assert: |
        Кнопка "Перейти к бронированию" активна
    - do: Тап по кнопке "Перейти к бронированию"
    - assert: |
        Экран условий бронирования закрылся
        Открылась карточка активного бронирования самоката

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie
    - integration_run:
        - kotlin

  Включение самокатного слоя по url-схеме:
    - info: |
        Не включен слой отображения самокатов(чекбокс неактивен)
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Перейти по url-схеме вида yandexmaps://maps.yandex.ru/?l=kicksharing
    - assert: |
        Чекбокс слоя cамокатов активен
        Справа от саджеста самокатов отображается саджест "Считать QR"
        Cлой самоката  включен
        На карте отображаются иконки самокатов и парковочных станций

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по url-схеме без эксперимента самокатного слоя неавторизованным пользователем:
    - info: |
        Выключен эксперимент 'kicksharing_on'
        Пользователь не авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: Перейти по url-схеме вида yandexmaps://maps.yandex.ru/?l=kicksharing
    - assert: |
        Чекбокс слоя cамокатов неактивен
        Cлой самоката не включен
        На карте не отображаются иконки самокатов и парковочных станций

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Переход по url-схеме самокатного слоя неавторизованным пользователем:
    - info: |
        Пользователь не авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Перейти по url-схеме вида yandexmaps://maps.yandex.ru/?l=kicksharing
    - assert: |
        Чекбокс слоя cамокатов неактивен
        Cлой самоката не включен
        На карте не отображаются иконки самокатов и парковочных станций

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Позиционирование временной метки на пешеходном маршруте до самокатов:
    - info: |
        Устройство в вертикальной ориентации
        Пользователь авторизован
        ММП в Москве/Краснодаре/Санкт-Петербурге
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката
    - assert: |
        Открывается карточка бронирования самоката в вертикальной ориентации
        Отображается пешеходный маршрут до карточки
        Временная метка маршрута позиционируется по центру
    - do: Сменить ориентацию устройства
    - assert: Открыта карточка бронирования самоката в горизонтальной ориентации
    - do: Тап по иконке другого самоката
    - assert: |
        Открывается карточка бронирования самоката в горизонтальной ориентации
        Предыдущая карточка закрылась и ее пин опустился
        Отображается пешеходный маршрут до карточки
        Временная метка маршрута позиционируется по центру

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Таб "Самокаты" на экране вариантов маршрута:
    - info: |
        Устройство в вертикальной ориентации
    - do: Построить маршрут любым способом
    - assert: |
        Отображается экран вариантов маршрута
        Отображается тип маршрута "Самокаты"
    - do: Тап на таб "Самокаты"
    - assert: |
        Открыт экран построения самокатного маршрута
        Отображается блок “Самокатный этикет: катаемся безопасно“
        Отображаются маршрутные саджесты
        Отображается кнопка "Поехали"
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Перестаёт отображаться блок “Самокатный этикет: катаемся безопасно“
    - do: Сменить ориентацию устройства на вертикальную
    - do: Тап на таб "Все"
    - assert: Присутствует вариант на самокате
    - do: Тап на самокат
    - assert: Открыт экран построения самокатного маршрута

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie

  Построение маршрута на самокате:
    - info: Отображается главный экран приложения
    - do: Лонг-тап в любом месте на карте
    - do: Тап на Сюда
    - assert: Отображается экран выбора маршрута
    - do: Выбрать самокатный тип маршрута
    - assert: Открыт экран построения самокатного маршрута
    - do: Тап на Поехали
    - assert: Отображается экран ведения по самокатному маршруту

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - use_map
        - mapkit_ready
    - testing:
        - acceptance_maps


  Сторис про безопасность в самокатных маршрутах:
    - info: |
        Ранее не строились маршруты на самокатах
        Включена Debug Panel -> Environment -> Showcase draft branch
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
        Пользователь авторизован
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Построить произвольный маршрут
    - do: Тап на самокатный маршрут
    - assert: |
        Отображается экран вариантов самокатных маршрутов
        Над вариантами маршрута отображается кнопка "Подробнее"
    - do: Тап на кнопку "Подробнее"
    - assert: |
        Открылось сторис про безопасность
        Сторис можно пролистать свайпами/тапами
        Присутствует кнопка закрытия сторис
    - do: Досмотреть сторис
    - assert: Отображается экран вариантов самокатных маршрутов

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отсутствие саджестов на главном экране при открытии карточки бронирования самокатов:
    - info: |
        Устройство в вертикальной ориентации
        Пользователь авторизован
        Открыт спан г. Москва/Краснодар/Санкт-Петербург
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
        Отображается панель саджестов на главном экране над таббаром
    - do: Тап по пину самоката
    - assert: |
        Открывается карточка бронирования самоката
        Панель саджестов не отображается
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Открыта карточка бронирования самоката в горизонтальной ориентации
        Панель саджестов не отображается
    - do: Тап по иконке другого самоката
    - assert: |
        Предыдущая карточка закрылась
        Открывается карточка бронирования выбранного самоката в горизонтальной ориентации
        Панель саджестов не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отсутствие саджестов на главном экране при отображении плашки со статусом бронирования самоката:
    - info: |
        Устройство в вертикальной ориентации
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - do: Тап на Забронировать в карточке бронирования
    - assert: |
        Открывается карточка активного заказа в режиме бесплатного ожидания
    - do: Свайп вниз карточки активного заказа
    - assert: |
        Карточка свернулась
        Отображается плашка со статусом бронирования
        Отображается таббар
        Панель саджестов не отображается
    - do: Сменить ориентацию устройства на горизонтальную
    - assert: |
        Отображается плашка со статусом бронирования
        Отображается таббар
        Панель саджестов не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение расширенной страховки в карточке бронирования самоката:
    - info: |
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/.ac697c2.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on&kicksharing_insurance=99₽/мин`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на пин любого самоката
    - assert: |
        Открылась карточка бронирования самоката с кнопкой Забронировать самокат
        В карточке отображается надпись "Расширенная страховка" со свитчером переключения
        Указана сумма страховки из настройки kicksharing_insurance - 99₽/мин
        Надпись "Подробнее"
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/страховка_самоката_цена.jpg){title=пример}


    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Переключение тогла расширенной страховки в карточке бронирования самоката:
    - info: |
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/.ac697c2.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on&kicksharing_insurance=99₽/мин`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на пин любого самоката
    - assert: Открылась карточка бронирования самоката с кнопкой Забронировать самокат
    - do: Тап на свитчер расширенной страховки
    - assert: |
        Карточка бронирования обновилась
        Свитчер расширенной страховки стал активным, поменяв свой цвет
    - do: Тап на свитчер страховки
    - assert: |
        Карточка бронирования обновилась
        Свитчер стал неактивным, поменяв свой цвет
    - do: Свернуть и развернуть приложение
    - assert: |
        Отображается карточка бронирования
        Отображается свитчер страховки в неактивном состоянии

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Изменение цены в карточке бронирования самоката:
    - info: |
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/.ac697c2.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on&kicksharing_insurance=99₽/мин`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на пин любого самоката
    - assert: Открылась карточка бронирования самоката с кнопкой Забронировать самокат
    - do: Тап на свитчер расширенной страховки
    - assert: |
        Карточка бронирования обновилась
        Цена в кнопке Забронировать увеличилась (не важно на какую сумму, проверяем только сам факт)
        [collapsed-image](https://jing.yandex-team.ru/files/polikashinaol/изменение_цены_страховки.png){title=пример}

    - do: Тап на свитчер страховки
    - assert: |
        Карточка бронирования обновилась
        Цена в кнопке Забронировать уменьшилась

    - platforms:
        - android
        - ios
    - tags:
        - assessors



  Сохранение состояния расширенной страховки в карточках брони самоката:
    - info: |
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/.ac697c2.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on&kicksharing_insurance=99₽/мин`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на пин любого самоката
    - assert: Открылась карточка бронирования самоката с кнопкой Забронировать самокат
    - do: Включить расширенную страховку
    - do: Тап на другой пин самоката
    - assert: |
        Открылась карточка бронирования другого самоката с кнопкой Забронировать самокат
        В карточке отображается надпись «Расширенная страховка»
        Свитчер переключения расширенной страховки сохранен в активном состоянии
    - do: Тап на свитчер страховки
    - assert: |
        Карточка бронирования обновилась
        Свитчер расширенной страховки стал неактивным, поменяв свой цвет
    - do: Тап на крестик в карточке бронирования
    - assert: |
        Карточка бронирования самоката закрылась
        Отображается карта с самокатным слоем
        Отображаются пины самокатов
    - do: Поменять ориентацию устройства на горизонтальную
    - do: Тап на другой пин самоката
    - assert: |
        Открылась карточка бронирования самоката с кнопкой Забронировать самокат в горизонтальной ориентации
        В карточке отображается надпись "Расширенная страховка"
        Свитчер переключения расширенной страховки сохранен в неактивном состоянии

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Сохранение состояния расширенной страховки при открытии сторис:
    - info: |
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/.ac697c2.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on&kicksharing_insurance=99₽/мин`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на пин любого самоката
    - assert:  |
        Открылась карточка бронирования самоката с кнопкой Забронировать самокат
        Присутствует надпись "Подробнее" у расширенной страховки
    - do: Выключить расширенную страховку
    - do: Тап на "Подробнее"
    - assert: Открылся экран сторис
    - do: Тап на крестик на экране сторис
    - assert: |
        Экран сторис закрылся
        Отображается карточка бронирования самоката
        Отображается "Расширенная страховка"
        Свитчер переключения "Расширенной страховки" сохранен в неактивном состоянии

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Открытие экрана сторис про расширенную страховку:
    - info: |
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/.ac697c2.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on&kicksharing_insurance=99₽/мин`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на любой пин самоката
    - assert: Отображается карточка самоката
    - do: Тап на "Подробнее"
    - assert: |
        Открылся экран сторис про расширенную страховку
        Страницы сторис можно пролистать тапом влево или вправо
        Экран сторис можно закрыть свайпом сверху-вниз или тапом на крестик
        Страницы сторис автоматически переключаются на следующие
    - do: Дождаться окончания проигрывания последней страницы сторис
    - assert: |
        Экран сторис закрылся
        Отображается карточка бронирования самоката
        Отображается "Расширенная страховка" в карточке бронирования
        Присутствует надпись "Подробнее" у "Расширенной страховки"

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Открытие памятки расширенной страховки на страницах сторис:
    - info: |
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/.ac697c2.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on&kicksharing_insurance=99₽/мин`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на любой пин самоката
    - assert: Отображается карточка самоката
    - do: Тап на "Подробнее"
    - assert: |
        Открылся экран сторис про расширенную страховку
        Страницы сторис можно пролистать тапом влево или вправо
    - do: Тап вправо
    - assert: Открывается следующая страница сторис
    - do: Тап до страницы сторис с отображением кнопки Подробнее
    - assert: Отображается страница сторис с кнопкой Подробнее
    - do: Тап на кнопку Подробнее
    - assert: |
        Открывается вебвью с подробностями страховки
        Может предлагаться к скачиванию документ с подробностями страховки

    - platforms:
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Оплата Apple Pay в самокатах:
    - info: |
        Пользователь авторизован
        Включен эксперимент kicksharing_on -> on
        Спан г. Москва/Краснодар
        Включен самокатный слой по тапу на саджест "Самокаты"
        Добавлена карта для оплаты Apple Pay
        Проверка производится только на сборке Testflight или Store
        Открыта карточка бронирования самоката с кнопкой Забронировать самокат
    - do: Тап на Способ оплаты
    - assert:
        Открывается экран Способ оплаты
        Присутствует способ оплаты через Apple Pay
    - do: Выбрать способ оплаты Apple Pay и тап на Забронировать
    - assert: |
        Отображается блок подтверждения оплаты
        Если оплата происходит впервые, то может открыться промежуточный экран с условиями аренды
    - do: Подтвердить оплату
    - assert: |
        Открывается карточка активного заказа в режиме бесплатного ожидания
        Возможно списание и возврат 500 рублей
    - do: Тап на Отменить поездку
    - assert: |
        Поездка отменена
        Открыт сплан карты
        Включен самокатный слой

    - platforms:
        - ios
    - integration_run:
        - payment_sdk


  Появление бейджа плюса в карточке бронирования самокатов:
    - info: |
        Устройство в вертикальной ориентации
        Пользователь авторизован с подпиской плюс
        Девайс подключен ко внутренней сети через Charles
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Включить Debug Panel -> Environment -> Mobmaps proxy host -> PROD
    - do: Перезапустить приложение после применения интента
    - do: Скопировать json из ответа запроса по типу https://tc.mobile.yandex.net/4.0/scooters/api/yandex/offers/create?car_number=2869 (ручка вызывается тапом по пину самоката)
    - do: В скопированном json подменить поля 55-58 на поля из образца https://jing.yandex-team.ru/files/nikita-asuad/0530.json
    - do: Сделать подмену ответа сервера на json через map local
    - do: Открыть спан г. Москва/Краснодар/Санкт-Петербурга
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: |
        Открывается карточка бронирования самоката
        Над кнопкой "Забронировать" отображается бейдж "Плюс"
    - do: Изменить ориентацию девайса на горизонтальную
    - assert: |
        Карточка бронирования самоката отображается в горизонтальной ориентации
        Над кнопкой "Забронировать" отображается бейдж "Плюс"

    - platforms:
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отсутствие бейджа плюса в карточке бронирования самокатов при 0 баллов по подписке плюс:
    - info: |
        Устройство в вертикальной ориентации
        Пользователь авторизован с подпиской плюс
        Девайс подключен ко внутренней сети через Charles
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Включить Debug Panel -> Environment -> Mobmaps proxy host -> PROD
    - do: Перезапустить приложение после применения интента
    - do: Скопировать json из ответа запроса по типу https://tc.mobile.yandex.net/4.0/scooters/api/yandex/offers/create?car_number=2869 (ручка вызывается тапом по пину самоката)
    - do: В скопированном json подменить поля 55-58 на поля из образца https://jing.yandex-team.ru/files/nikita-asuad/0530-1.json
    - do: Сделать подмену ответа сервера на json через map local
    - do: Открыть спан г. Москва/Краснодар/Санкт-Петербурга
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: |
        Открывается карточка бронирования самоката
        Над кнопкой "Забронировать" не отображается бейдж "Плюс"

    - platforms:
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отсутствие бейджа плюса в карточке бронирования самокатов без подписки плюс:
    - info: |
        Устройство в вертикальной ориентации
        Пользователь авторизован аккаунтом без подписки плюс
        Девайс поключен ко внутренней сети через Charles
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Включить Debug Panel -> Environment -> Mobmaps proxy host -> PROD
    - do: Перезапустить приложение после применения интента
    - do: Открыть спан г. Москва/Краснодар/Санкт-Петербурга
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: |
        Открывается карточка бронирования самоката
        Над кнопкой "Забронировать" не отображается бейдж "Плюс"

    - platforms:
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Открытие экрана фотографирования повреждений самоката при запрете доступа к камере:
    - info: |
        Устройство в вертикальной ориентации
        В настройках телефона запрещен доступ к камере приложению Я.Карты
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: Открывается карточка бронирования самоката
    - do: Тап на Забронировать самокат
    - assert: |
        Открывается карточка активного заказа в режиме бесплатного ожидания
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"
    - do: Тап на плашку-нотификацию "Есть повреждения?"
    - assert: |
        Открывается экран фотографирования без доступа к камере
        Отображается попап о возможности разрешить доступ к камере
    - do: Отклонить запрос на доступ к камере в попап
    - assert: |
        Попап и экран фотографирования закрылись
        Отображается активная карточка бронирования самоката
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"
    - do: Изменить ориентацию устройства на горизонтальную
    - assert: |
        Отображается активная карточка бронирования самоката в горизонтальной ориентации
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"
    - do: Тап на плашку-нотификацию "Есть повреждения?"
    - assert: |
        Открывается экран фотографирования в вертикальной ориентации без доступа к камере
        Отображается попап о возможности разрешить доступ к камере
    - do: Отклонить запрос на доступ к камере в попап
    - assert: |
        Попап и экран фотографирования закрылись
        Отображается активная карточка бронирования самоката
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие экрана фотографирования повреждений самоката при разрешении доступа к камере:
    - info: |
        В настройках телефона запрещен доступ к камере приложению Я.Карты
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: Открывается карточка бронирования самоката
    - do: Тап на Забронировать самокат
    - assert: |
        Открывается карточка активного заказа в режиме бесплатного ожидания
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"
    - do: Тап на плашку-нотификацию "Есть повреждения?"
    - assert: |
        Открывается экран фотографирования без доступа к камере
        Отображается попап о возможности разрешить доступ к камере
    - do: Принять запрос на доступ к камере в попап
    - assert: |
        Попап закрылся
        Экран фотографирования отображается с доступом к камере устройства

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Загрузка фотографий повреждений самоката:
    - info: |
        В настройках устройства разрешен доступ к камере приложению Я.Карты
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: Открывается карточка бронирования самоката
    - do: Забронировать самокат
    - assert: |
        Открыта карточка активного заказа в режиме бесплатного ожидания
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"
    - do: Тап на плашку-нотификацию "Есть повреждения?"
    - assert: |
        Открывается экран фотографирования повреждений
    - do: Сделать несколько фотографий
    - assert: |
        Фото отображаются внизу экрана мини-изображениями
    - do: Тап на кнопку Готово
    - assert: |
        Экран фотографирования закрылся
        Отображается активная карточка бронирования самоката
        В карточке отображается плашка-нотификация "Есть повреждения?"
        В плашке указана информация о количестве загруженных фото
        Количество загруженных фото соответствует количеству фото на экране фотографирования

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie


  Загрузка максимального количества фотографий повреждений самоката:
    - info: |
        В настройках устройства разрешен доступ к камере приложению Я.Карты
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: Открывается карточка бронирования самоката
    - do: Забронировать самокат
    - assert: |
        Открыта карточка активного заказа в режиме бесплатного ожидания
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"
    - do: Тап на плашку-нотификацию "Есть повреждения?"
    - assert: |
        Открывается экран фотографирования повреждений
    - do: Сделать максимальное количество фотографий (около 8 шт.)
    - assert: |
        Фото отображаются внизу экрана мини-изображениями
        Кнопка фотографирования неактивна
    - do: Тап на кнопку Готово
    - assert: |
        Экран фотографирования закрылся
        Отображается активная карточка бронирования самоката
        В карточке отображается плашка-нотификация "Есть повреждения?"
        В плашке указана информация о загрузке максимального количества фотографий

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение ошибки и восстановление загрузки фотографий повреждений самоката в оффлайн-режиме:
    - info: |
        В настройках устройства разрешен доступ к камере приложению Я.Карты
        Пользователь авторизован
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по пину самоката
    - assert: Открывается карточка бронирования самоката
    - do: Забронировать самокат
    - assert: |
        Открыта карточка активного заказа в режиме бесплатного ожидания
        В карточке отображается плашка-нотификация "Есть повреждения? Сфотографируйте до поездки"
    - do: Включить авиа-режим на устройстве
    - do: Тап на плашку-нотификацию "Есть повреждения?"
    - assert: |
        Открывается экран фотографирования повреждений
    - do: Сделать несколько фотографий
    - assert: |
        Фото отображаются внизу экрана мини-изображениями
    - do: Тап на кнопку Готово
    - assert: |
        Экран фотографирования закрылся
        Отображается активная карточка бронирования самоката
        В плашке-нотификации отображается ошибка "Фотографии не загрузились"
    - do: Выключить авиа-режим
    - assert: Доступ в сеть восстановлен
    - do: Тап на плашку-нотификацию
    - assert: В плашке указана информация о том, что фотографии загружаются
    - do: Дождаться загрузки фотографий в плашке
    - assert: В плашке отображается информация о количестве загруженных фото

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Нотификации завершения сезона в самокатах:
    - info: |
        ТК актуален только при завершении сезона самокатов
        Пользователь авторизован
        Устройство в вертикальной ориентации
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя cамокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте не появились иконки самокатов и парковочных станций
        Также на карте выделелись участки с "медленными" зонами и областью работы самокатов
        Над табами появилась нотификации завершения сезона
    - do: Тап "Ок" в нотификации
    - assert: |
        Нотификация пропала с экрана
        Чекбокс активен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - integration_run:
        - kotlin


  Добавление карты в самокатах:
    - info: |
        Пользователь авторизован
        Привязан номер телефона к аккаунту
        Банковская карта не добавлена
        Отображается главный экран приложения
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение
    - do: Перейти на спан Москвы/Краснодара/Санкт-Петербурга
    - do: Тап на чекбокс "Самокаты"
    - assert: |
        Отображается самокатный слой
        Присутствуют пины самокатов
    - do: Тап на пин самоката
    - assert: Кнопка "Забронировать" неактивна
    - do: Тап на "Привязать карту"
    - assert:
        Открывается экран Способ оплаты
        Присутствует блок "Привязать карту"
    - do: Тап "Привязать карту"
    - assert: Открывается экран добавления карты "ЯPAY"
    - do: Заполнить валидно все поля
    - do: Тап "Добавить"
    - assert: Открывается вебвью банка с полем ввода кода, отправленного на номер телефона
    - do: Ввести валидно код
    - assert: Карта успешно добавилась и отображается активной
    - do: Тап "Готово"
    - assert: Кнопка "Забронировать" активна

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - payment_sdk


  Оплата Картой в самокатах:
    - *testing_scooter_on
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Открыть карточку бронирования самоката
    - assert: |
        Кнопка "Забронировать" кликабельна
        Отображается карта в способе оплаты
    - do: Тап на "Забронировать"
    - assert: |
        Отображается блок подтверждения оплаты.
        Если оплата происходит впервые, то может открыться промежуточный экран с условиями аренды
        Открывается карточка активного заказа в режиме бесплатного ожидания
        Возможно списание и возврат 500 рублей
    - do: Тап на "Отменить поездку"
    - assert: |
        Поездка отменена
        Открыт сплан карты
        Включен самокатный слой

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - payment_sdk

  Отображение карточки активного заказа:
    - *testing_scooter_on
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Успешно забронировать самокат
    - assert: |
        Отображаеся карточка заказа в режиме бесплатного ожидания
    - do: Подождать окончания бесплатного ожидания
    - assert: |
        Заголовок "Бесплатное ожидание" сменился на "Платное ожидание"
        Стала отображаться сумма за платное ожидание
    - do: Начать поездку
    - assert: |
        Заголовок сменился на "В пути"
        Динамически отображается сумма поездки

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - newbie


  Переход в виджет заказа в режиме активной поездки:
    - *testing_scooter_on
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Успешно забронировать самокат
    - assert:
        Отображается сторис "Правила самокатного этикета"
    - do: Принять условия аренды самоката
    - assert:
        Отображаеся карточка заказа в режиме бесплатного ожидания
    - do: Начать поездку
    - assert: В карточке отображается активная поездка
    - do: Свернуть карточку
    - assert: Отображается виджет активной поездки
    - do: Свернуть виджет
    - assert: Виджет не сворачивается
    - do: Свернуть и развернуть приложение
    - assert: Виджет отображается
    - do: Выгрузить приложение из памяти и перезайти
    - assert: Виджет отображается
    - do: Тап на виджет
    - assert: Перешли в карточку поездки

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - newbie


  Отображение карточки заказа в режиме паузы:
    - *testing_scooter_on
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на самокат
    - do: Тап на кнопку Забронировать
    - assert: |
        Отображаеся карточка заказа в режиме бесплатного ожидания
    - do: Начать поездку
    - assert: |
        Заголовок сменился на "В пути"
        Динамически отображается сумма поездки
    - do: Тап на паузу "Режим ожидания"
    - assert: Поездка поставилась на паузу

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - newbie


  Переход в виджет активного заказа в режиме паузы:
    - *testing_scooter_on
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап на самокат
    - do: Тап на кнопку Забронировать
    - assert: Отображаеся карточка заказа в режиме бесплатного ожидания
    - do: Начать поездку
    - assert: Поездка началась
    - do: Поставить поездку на паузу
    - assert: Отображается карточка в режиме паузы
    - do: Свернуть карточку
    - assert:  Отображается виджет "Самокат ждёт"
    - do: Тап на виджет
    - assert: |
        Открывается карточка поездки
        Поездка стоит на паузе
    - do: Свернуть карточку
    - assert: Отображается виджет поездки
    - do: Свернуть виджет
    - assert: Виджет не сворачивается
    - do: Свернуть и развернуть приложение
    - assert: Виджет отображается
    - do: Выгрузить приложение из памяти и перезайти
    - assert: Виджет отображается
    - do: Тап на виджет
    - assert: |
        Перешли в карточку поездки
        Поездка стоит на паузе

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Отображение карточки в режиме бесплатного/платного ожидания:
    - *testing_scooter_on
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Успешно забронировать самокат
    - assert: Отображаеся карточка заказа в режиме бесплатного ожидания
    - do: Подождать окончания бесплатного ожидания
    - assert: |
        Заголовок "Бесплатное ожидание" сменился на "Платное ожидание"
        Стала отображаться сумма за платное ожидание

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Переход в виджет заказа в режиме бесплатного ожидания:
    - *testing_scooter_on
    - assert: |
        Чекбокс активен
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Успешно забронировать самокат
    - assert: Отображаеся карточка заказа в режиме бесплатного ожидания
    - do: Свернуть карточку
    - assert: Отображается виджет “Бесплатное ожидание”
    - do: Свернуть виджет
    - assert: Виджет не сворачивается
    - do: Тап на виджет
    - assert: Перешли в карточку поездки
    - do: Выгрузить приложение из памяти и перезайти
    - assert: Виджет отображается
    - do: Тап на виджет
    - assert: Перешли в карточку поездки

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Отказ от привязки номера телефона при попытке бронирования самоката:
    - info: |
        Пользователь авторизован аккаунтом с привязанной банковской картой, но без привязанного номера телефона
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Открыть карточку бронирования самоката
    - do: Тап на "Забронировать"
    - assert: |
        Появляется попап с просьбой о привязке номера телефона
        В попапе присутствуют кнопки "Добавить номер" и "Отмена"
    - do: Тап на "Отмена"
    - assert: |
        Попап закрылся
        Отображается карточка бронирования самоката с кнопкой "Забронировать"

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Привязка номера телефона при попытке бронирования самоката:
    - info: |
        Пользователь авторизован аккаунтом без привязанного номера телефона
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Открыть карточку бронирования самоката
    - do: Тап на "Забронировать"
    - assert: |
        Появляется попап с просьбой о привязке номера телефона
        В попапе присутствуют кнопки "Добавить номер" и "Отмена"
    - do: Тап на "Добавить номер"
    - assert: Открылось вебвью привязки номера телефона
    - do: Ввести номер телефона
    - do: Подтвердить привязку
    - assert: |
        Вебвью закрылось
        Отображается карточка активного бронирования самоката

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Появление диалога о долге с прошлой поездки при бронировании самоката:
    - info: Если невозможно начать или завершить поездку, то попробовать вкл тычку `Use flag ignor_telematics (Дебаг-панель -> Feauture -> Use flag ignor_telematics (for fake scooter))` и перезапустить приложение
    - info: |
        Устройство в вертикальной ориентации
        На аккаунте имеется долг с прошлой поездки (долг в тестовом окружении образуется со временем при долгих активных бронированиях)
        Подключение к VPN через Charles
        После включения настроек, авторизоваться аккаунтом, у которого уже есть долг:
            m4pst3st - Логин
            yandex123 - Пароль
    - do: Включить тычку Debug-panel -> Environment -> PaymentSDK Environment -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Taxi environment -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Mobmaps_proxy_host -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Passport_environment -> TESTING
    - do: Включить тычку Debug-panel -> Feature -> Allow invalid card
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента и включения тычек
    - do: Открыть спан г. Москва
    - do: Открыть карточку бронирования самоката
    - do: Тап на "Забронировать"
    - assert: |
        Появляется диалог о долге с прошлой поездки
        Отображается способ оплаты долга
        Отображается кнопка "Оплатить"
    - do: Тап на крестик
    - assert: |
        Диалог о долге закрылся
        Отображается карточка бронирования самоката
    - do: Сменить ориентацию устройства
    - assert: Карточка бронирования отображается в горизонтальной ориентации
    - do: Тап на "Забронировать"
    - assert: |
        Появляется диалог о долге с прошлой поездки
        Отображается способ оплаты долга
        Отображается кнопка "Оплатить"
    - do: Тап на крестик
    - assert: |
        Диалог о долге закрылся
        Отображается карточка бронирования самоката

    - platforms:
        - android
    - testing:
        - acceptance_maps


  Открытие способов оплаты в диалоге о долге при бронировании самоката:
    - info: Если невозможно начать или завершить поездку, то попробовать вкл тычку `Use flag ignor_telematics (Дебаг-панель -> Feauture -> Use flag ignor_telematics (for fake scooter))` и перезапустить приложение
    - info: |
        Устройство в вертикальной ориентации
        На аккаунте имеется долг с прошлой поездки (долг в тестовом окружении образуется со временем при долгих активных бронированиях)
        Подключение к VPN через Charles
        После включения настроек, авторизоваться аккаунтом, у которого уже есть долг:
            m4pst3st - Логин
            yandex123 - Пароль
    - do: Включить тычку Debug-panel -> Environment -> PaymentSDK Environment -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Taxi environment -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Mobmaps_proxy_host -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Passport_environment -> TESTING
    - do: Включить тычку Debug-panel -> Feature -> Allow invalid card
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента и включения тычек
    - do: Открыть спан г. Москва
    - do: Открыть карточку бронирования самоката
    - do: Тап на "Забронировать"
    - assert: |
        Появляется диалог о долге с прошлой поездки
        Отображается способ оплаты долга банковской картой
        Отображается кнопка "Оплатить"
    - do: Тап на банковскую карту
    - assert: Открылась карточка способов оплаты
    - do: Тап на "Готово"
    - assert: |
        Карточка способов оплаты закрылась
        Отображается диалог о долге
    - do: Сменить ориентацию устройства
    - assert: Диалог о долге отображается в горизонтальной ориентации
    - do: Тап на банковскую карту
    - assert: Открылась карточка способов оплаты
    - do: Тап на "Готово"
    - assert: |
        Карточка способов оплаты закрылась
        Отображается диалог о долге

    - platforms:
        - android
    - testing:
        - acceptance_maps


  Поведение камеры при переходе в самокатное ведение:
    - info: |
        Построен произвольный самокатный маршрут
        Отображается экран выбора маршрута
    - do: Тап на Поехали
    - assert: |
        Происходит плавный одноэтапный подзум к метке ММП
        Отображается экран ведения по самокатному маршруту
        Карта отображается в 3D-режиме
        Активирован режим слежения по направлению движения

    - platforms:
        - ios
    - tags:
        - assessors


  Отображение виджета заказа самоката в режиме автомобильного ведения:
    - info: |
        Девайс в вертикальной ориентации
        Пользователем оформлен заказ самоката
        На главном экране приложения отображается виджет заказа самоката со статусом заказа
    - do: Построить маршрут и начать ведение по нему
    - assert: |
        Виджет заказа самоката отображается под ЕТА плашкой
        Название улицы не перекрывает курсор
    - do: Сменить ориентацию девайса на горизонтальную
    - assert: |
        Плашка ЕТА отображается в левой нижней части экрана
        Виджет заказа самоката отображается под плашкой ЕТА
        Название улицы не перекрывает курсор

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Открытие плашки заказа самоката из единой плашки заказов:
    - info: |
        Девайс в вертикальной ориентации
        Пользователем оформлены заказы самоката, Еды, такси
        Отображается единая плашка с иконками Самоката, Такси, Еды
    - do: Тап на плашку
    - assert: |
        Единая плашка раскрылась
        Отображаются плашки заказов самоката, Такси и Еды
        У каждой плашки отображается актуальный статус
    - do: Сменить ориентацию девайса
    - assert: |
        Плашки не свернулись в единую плашку
    - do: Сменить ориентацию девайса
    - assert: |
        Плашки не свернулись в единую плашку
    - do: Тап на плашку самоката
    - assert: |
        Отображается карточка заказа самоката
    - do: Свернуть карточку самоката свайпом вниз
    - assert: |
        Отображаются плашки заказов такси, Еды, самоката
    - do: Тап на пустое пространство на карте
    - assert: |
        Отображается единая плашка заказов

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Открытие и закрытие пустой парковки самокатов:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап на саджест включения слоя самокатов
    - assert: |
        Саджест слоя самокатов активен
        На спане отображается самокатный слой
        Отображаются пины парковок с пинами самокатов
        Отображаются пустые пины парковок без пинов самокатов
        Также могут присутствовать пины самокатов не на парковочной зоне, без пина парковки
    - do: Тап на пин пустой парковки без иконки самоката
    - assert: |
        Пин парковки поднялся
        Отображается карточка парковки
        В карточке отображается информация о том, что все самокаты разобрали, но можно оставить арендованный
        Присутствует кнопка Обновить
    - do: Тап на пин другой пустой парковки
    - assert: |
        Пин прошлой парковки опустился
        Пин новой парковки поднялся
        Открыта новая карточка пустой парковки
    - do: Тап на крестик в карточке парковки
    - assert: |
        Пин парковки опустился
        Карточка парковки закрылась

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Выделение бейджа самоката:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы/Краснодара/Санкт-Петербурга
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап на саджест включения слоя самокатов
    - assert: |
        Саджест слоя самокатов активен
        На спане отображается самокатный слой
        Отображаются пины самокатов и самокатные парковки
    - do: Тап на любой пин самоката
    - assert: |
        Бейдж самоката с количественным обозначением выделился
        Открыта карточка бронивания самоката
    - do: Тап на другой пин самоката
    - assert: |
        Бейдж нового самоката с количественным обозначением выделился
        Открыта новая карточка бронивания самоката
        Бейдж прошлого самоката с количественным обозначением не выделен
    - do: Тап на крестик в карточке бронирования самоката
    - assert: |
        Карточка бронирования закрылась
        Бейдж самоката с количественным обозначением не выделен

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Скип сторис-онбродинга самокатов при первом бронировании через тап по экрану:
    - info: |
        Пользователь авторизован
        Открыт спан Москва/Краснодар/Санкт-Петербург
        Бронирование самоката происходит в первый раз
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката или парковочной станции с самокатами
    - assert: Открыта карточка бронирования самокатов
    - do: Тап по кнопке бронирования
    - assert: Открывается сториз-онбординг для новых пользователей
    - do: Промотать сториз тапом по экрану
    - assert: |
        Появляется экран условий аренды
        Под условиями кнопка пользовательского соглашения и других условий
        Ниже - свитчер "Я принимаю условия аренды"
        Кнопка "Перейти к бронированию" неактивна

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Скип сторис-онбродинга самокатов при первом бронировании через крестик:
    - info: |
        Пользователь авторизован
        Спан г. Москва/Краснодар/Санкт-Петербург
        Бронирование самоката происходит в первый раз
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката или парковочной станции с самокатами
    - assert: Открыта карточка бронирования самокатов
    - do: Тап по кнопке бронирования
    - assert: Открывается сториз-онбординг для новых пользователей
    - do: Закрыть сториз тапом на крестик
    - assert: |
        Появляется экран условий аренды
        Под условиями кнопка пользовательского соглашения и других условий
        Ниже - свитчер "Я принимаю условия аренды"
        Кнопка "Перейти к бронированию" неактивна

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Повторный показ условий использования самокатов:
    - info: |
        Пользователь авторизован
        Спан г. Москва/Краснодар/Санкт-Петербург
        Бронирование самоката происходит в первый раз
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката или парковочной станции с самокатами
    - assert: Открыта карточка бронирования самокатов
    - do: Тап по кнопке бронирования
    - assert: Открывается сториз-онбординг для новых пользователей
    - do: Проматать сториз или дождаться ее окончания
    - assert: |
        Появляется экран условий аренды
        Под условиями кнопка пользовательского соглашения и других условий
        Ниже - свитчер "Я принимаю условия аренды"
        Кнопка "Перейти к бронированию" неактивна
    - do: Закрыть экран условий аренды
    - do: Тап по кнопке бронирования
    - do: Промотать сториз или дождаться ее окончания
    - assert: |
        Появляется экран условий аренды
        Под условиями кнопка пользовательского соглашения и других условий
        Ниже - свитчер "Я принимаю условия аренды"
        Кнопка "Перейти к бронированию" неактивна

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отсутствие показа условий использования самокатов после их принятия:
    - info: |
        Пользователь авторизован
        Спан г. Москва/Краснодар/Санкт-Петербург
        Условия использования самокатов были приняты (бронирование уже совершалось)
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката или парковочной станции с самокатами
    - assert: Открыта карточка бронирования самокатов
    - do: Тап по кнопке бронирования
    - assert: |
        Экран условий аренды не появляется
        Происходит бронирование самоката

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Скип сторис-онбродинга самокатов при первом бронировании через системную кнопку Back:
    - info: |
        Пользователь авторизован
        Спан г. Москва/Краснодар/Санкт-Петербург
        Бронирование самоката происходит в первый раз
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката или парковочной станции с самокатами
    - assert: Открыта карточка бронирования самокатов
    - do: Тап по кнопке бронирования
    - assert: Открывается сториз-онбординг для новых пользователей
    - do: Тап на системную кнопку Back
    - assert: |
        Появляется экран условий аренды
        Под условиями кнопка пользовательского соглашения и других условий
        Ниже - свитчер "Я принимаю условия аренды"
        Кнопка "Перейти к бронированию" неактивна

    - platforms:
        - android
    - tags:
        - assessors


  Бесплатный старт на самокатах по подписке:
    - info: Если невозможно начать или завершить поездку, то попробовать вкл тычку `Use flag ignor_telematics (Дебаг-панель -> Feauture -> Use flag ignor_telematics (for fake scooter))` и перезапустить приложение
    - info: |
        Девайс подключен к внутренней сети через Чарльз
        Открыт спан г.Москва
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Включить тычку Debug-panel -> Environment -> PaymentSDK Environment -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Taxi environment -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Mobmaps_proxy_host -> TESTING
    - do: Включить тычку Debug-panel -> Environment -> Passport_environment -> TESTING
    - do: Включить тычку Debug-panel -> Feature -> Allow invalid card
    - do: Перезапустить приложение с выгрузкой из памяти
    - do: Авторизоваться аккаунтом этого тестового паспорта (логин 'krishtal', пароль 'VytGjabue')
    - do: В саджестах внизу экрана включить слой Самокаты
    - assert: На карте отображаются самокаты
    - do: Тап на самокат
    - assert: |
        Открыта карточка самоката
        На кнопке бронирования написано Забронировать 0р + N р/мин
    - do: Тап на кнопку бронирования
    - assert: |
        Открыта карточка бронирования
        В карточке есть кнопка Начать поездку
    - do: Тап на кнопку Начать поездку
    - assert: |
        Открыта карточка поездки на самокате
        Отображается сумма поездки
        В сумме поездки нет добавленной фиксированной суммы за старт
        Со временем сумма поездки меняется в большую сторону
    - do: Тап на кнопку Завершить поездку
    - assert: Открылась штора Завершить поездку
    - do: Тап на кнопку Сделать фото и завершить
    - assert: Открылась камера
    - do: Сделать фото
    - do: Тап на Завершить поездку
    - assert: |
        Открыт экран завершённой поездки
        К сумме поездки не добавилась фиксированная сумма за старт
    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps

  В карточке поездки самоката без замка нет кнопок "Открыть/Закрыть замок":
    - *testing_scooter_on
    - do: Тап на любой самокат на карте
    - assert: Открыта карточка бронирования самоката с кнопкой "Забронировать"
    - do: Забронировать самокат
    - assert: Открывается карточка активного заказа в режиме бесплатного ожидания
    - do: С помощью инструмента Map Local через Charles ответ ручки `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/sessions/current` заменить файлом https://jing.yandex-team.ru/files/alina-butba/345.json
    - assert: Получен самокат без замка
    - do: Начать поездку на самокате
    - assert: |
        Заголовок сменился на "В пути"
        Динамически отображается сумма поездки
        Кнопка "Открыть замок" отсутствует
    - do: Тап на "Завершить поездку"
    - assert: |
        Открыт экран "Завершить поездку"
        Кнопка "Открыть замок" отсутствует
    - do: Завершить поездку на самокате
    - assert: Поездка завершена

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps

  В карточке поездки самоката с замком есть кнопки "Открыть/Закрыть замок":
    - *testing_scooter_on
    - do: Тап на любой самокат на карте
    - assert: Открыта карточка бронирования самоката с кнопкой "Забронировать"
    - do: Забронировать самокат
    - assert: Открывается карточка активного заказа в режиме бесплатного ожидания
    - do: Начать поездку на самокате
    - assert: |
        Заголовок сменился на "В пути"
        Динамически отображается сумма поездки
        Присутствует кнопка "Открыть замок"
    - do: Тап на "Завершить поездку"
    - assert: |
        Открыт экран "Завершить поездку"
        Присутствует кнопка "Открыть замок"

    - platforms:
        - ios
        - android

  Правильный код ошибки в случае включения рубильника самокатов при открытой карточке бронирования:
    - info: Доступ к рубильнику необходимо запрашивать у разработки. Сам рубильник находится в Бункере.
    - *testing_scooter_on
    - assert: На карте отображаются самокаты
    - do: Тап на самокат
    - assert: Открыта карточка бронирования самоката
    - do: Включить рубильник
    - assert: В ответах ручек `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/layers/v2/`, `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/layers/v1/`, `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/payments/v1/` приходит ошибка 410
    - do: Переоткрыть карточку бронирования самоката
    - assert: На карточке отображается ошибка "Что-то пошло не так" и кнопка "Повторить"
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: В ответах ручек `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/layers/v2/`, `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/layers/v1/`, `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/payments/v1/` приходит ошибка 410
    - do: В саджестах внизу экрана включить слой Самокаты
    - assert: На карте не отображаются самокаты
    - do: Тап на "Считать QR" В саджестах внизу экрана
    - do: Тап "Ввести номер самоката" > 5550 > "Готово"
    - assert: На карточке отображается ошибка "Что-то пошло не так" и кнопка "Повторить"

    - platforms:
        - ios
        - android


  Правильный код ошибки в случае включения рубильника самокатов во время поездки:
    - info: Доступ к рубильнику необходимо запрашивать у разработки. Сам рубильник находится в Бункере.
    - *testing_scooter_on
    - assert: На карте отображаются самокаты
    - do: Тап на самокат
    - assert: Открыта карточка бронирования самоката
    - do: Тап на "Забронировать"
    - assert: |
        Самокат в режиме ожидания или поездки (для данного кейса значение не имеет)
        Приходят события в ручку `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/sessions/current`
    - do: Включить рубильник
    - assert: |
        В карточке бронирования самоката счетчик времени/денег останавливается
        В ответ ручки `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/sessions/current` приходит ошибка 410
    - do: Подождать ок 30 сек
    - assert: События в ручку `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/sessions/current` больше не приходят
    - do: Перезапустить приложение с выгрузкой из памяти
    - assert: |
        Карточка бронирования не отображается
        В ответ ручки `https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/sessions/current` приходит ошибка 410
    - do: Выключить рубильник
    - do: Завершить поездку

    - platforms:
        - ios
        - android


  Отображение элементов в карточке самоката:
    - info: |
        Пользователь авторизован
        Открыт спан Москвы / Краснодара / Санкт-Петербурга
        К аккаунту привязан номер мобильного телефона
        К аккаунту привязана и верифицирована платежная банковская карта
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя cамокатов в панели саджестов
    - assert: |
        Саджест слоя самокатов активен
        На спане отображается самокатный слой
        Отображаются пины парковок с пинами самокатов
    - do: Тап на пин самоката с номером из 4-х цифр
    - assert: |
        Открыта карточка бронирования самоката
        Отображаются следующие элементы:
        - Номер самоката отцентрован в рамке, не выезжает за его границы, рядом иконка самоката
        - Информация о расстоянии, которое может проехать самокат
        - Время работы от батареи
        - Иконка батарейки, по центру указан процент заряда
        - Способ оплаты, указана выбранная платежная карта
        - Активная кнопка бронирования самоката с указанием цены
        - Бейдж плюса с кешбэком
    - do: Тап на пин самоката с номером из 5-ти цифр
    - assert: |
        Все пункты, описанные выше, присутствуют в открытой карточке самоката
        Элементы отображаются корректно
    - do: Тап на пин самоката с номером из 6-ти цифр
    - assert: |
        Все пункты, описанные выше, присутствуют в открытой карточке самоката
        Элементы отображаются корректно

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение метки самоката и парковок при активном бронировании:
    - preconditions: |
        Устройство в вертикальной ориентации
        Пользователь авторизован
        К аккаунту привязана банковская карта
        Открыт спан г. Москва/Краснодара/Санкт-Петербурга
        Зум карты от 21 до ~14
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        yandexmaps://add_exp?kicksharing_on
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковки самокатов
    - do: Тап на пин самоката
    - assert: Открыта карточка бронирования самоката
    - do: Тап "Забронировать"
    - assert: |
        Начинаетя бесплатное ожидаение, самокат забронирован
        На карте отображаются метка забронированного самоката и парковочные места
    - do: Отдалить зум спана до максимума
    - assert: |
        Парковочные места не отображаются на карте
        Метка забронированного самоката отображается на карте
    - do: Приблизить зум спана до отображения самокатного слоя (зум карты 21 до ~14)
    - assert: На карте отображаются метка забронированного самоката и парковочные места

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Открытие карточки самоката:
    - info: |
        Пользователь авторизован
        Открыт спан Москва/Краснодар/Санкт-Петербург
        Устройство в вертикальной ориентации
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/nikmakarov23/kicksharing_on.6198b78.png){title=QR-код}

        `yandexmaps://add_exp?kicksharing_on`
    - do: Перезапустить приложение после применения интента
    - do: Тап по чекбоксу включения слоя самокатов в панели саджестов
    - assert: |
        Чекбокс стал активным
        На карте появились иконки самокатов и парковочных станций с самокатами
    - do: Тап по иконке самоката
    - assert: Открыта карточка бронирования самокатов

    - platforms:
        - ios
        - android
    - testing:
        - smoke


  Сравнение итоговой стоимости поездки в МЯК со стоимостью в админке:
    - info: Устройство подключено ко внутренней сети через Charles или PDAS
    - *testing_scooter_on
    - do: Забронировать тестовый самокат на спане Москвы
    - do: Тап на "Начать поездку"
    - do: Завершить поездку
    - assert: Отображается поп-ап с окончательной стоимостью поездки
    - do: На ПК в браузере открыть админку самокатов https://scooters.yandex-team.ru
    - do: Вбить `m4pst3st2` в поиск
    - do: Открыть страницу аккаунта
    - do: Открыть вкладку `Sessions`
    - assert: |
        В самом верху отображается последняя завершённая сессия
        Стоимость сессии совпадает со стоимостью, отображаемой в поп-апе МЯКа

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Сравнение итоговой стоимости поездки в МЯК со стоимостью в админке при 500 ошибке:
    - info: |
        * Устройство подключено ко внутренней сети через Charles
        * Посмотреть non-fatal на iOS можно с помощью консоли с логами. Нужно вбить в поиск `Unable to get order price from historical session`
    - do: Подменить код ответа ручки https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/scooters/sessions/history?* с `200 OK` на `500 Internal server error`
    - *testing_scooter_on
    - do: Забронировать тестовый самокат на спане Москвы
    - do: Тап на "Начать поездку"
    - do: Завершить поездку
    - assert: Отображается поп-ап с окончательной стоимостью поездки
    - do: На ПК в браузере открыть админку самокатов https://scooters.yandex-team.ru
    - do: Вбить `m4pst3st2` в поиск
    - do: Открыть страницу аккаунта
    - do: Открыть вкладку `Sessions`
    - assert: |
        В самом верху отображается последняя завершённая сессия
        Стоимость сессии в админке больше на несколько копеек, чем в поп-апе МЯКа
        Приходит non-fatal `Unable to get order price from historical session`

    - platforms:
        - ios
        - android
