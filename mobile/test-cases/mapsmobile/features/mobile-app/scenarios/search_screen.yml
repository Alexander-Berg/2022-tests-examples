components: search_screen
testing:
  - regress

specs:
  Поиск по категориям:
    - info: Ранее поиск не выполнялся
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
    - do: Закрыть Debug-Panel
    - do: Перезапустить приложение
    - do: Тап по табу Поиск
    - assert: Открылся экран поиска
    - do: Произвести поиск по любой категории
    - assert: |
        На карте отмечены пины поисковой выдачи
        В окне поиска отображается список организаций поисковой выдачи отображается блок фильтров
        Если в поисковой выдаче будет только одна организация, то отобразится миникарточка этой организации
    - do: Тап по пину поисковой выдачи на карте
    - assert:  |
        Открывается миникарточка организации
        На карте отображается поднятый пин
    - do: Закрыть миникарточку организации
    - assert:  |
        Состояние пина меняется на неактивное
        Отображается экран результатов поиска и поисковая строка
    - do: Изменить зум карты
    - assert:  |
        Зум карты изменился
        Отображается экран результатов поиска и поисковая строка
    - do: Тап по поисковой строке
    - assert: Открылся список саджестов под поисковой строкой
    - do: Очистить поиск тапом по крестику
    - assert: Открыта форма поиска с названиями категорий поле ввода в фокусе, на экране отображается клавиатура
    - do: Тап по любой поисковой категории в карусели
    - assert: |
        На карте отмечены пины поисковой выдачи
        В окне поиска отображается список организаций поисковой выдачи отображается блок фильтров
        Если в поисковой выдаче будет только одна организация, то отобразится миникарточка этой организации
    - do: Сменить ориентацию
    - assert: |
        На карте отмечены пины поисковой выдачи
        В окне поиска отображается список организаций поисковой выдачи отображается блок фильтров
        Если в поисковой выдаче будет только одна организация, то отобразится миникарточка этой организации

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map
        - newbie


  Поиск по категориям через новый компонент CommonMenuManager:
    - info: Ранее поиск не выполнялся
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2012.56.15.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager`
    - do: Перезапустить приложение для активации эксперимента
    - do: Тап по табу Поиск
    - assert: Открылся экран поиска
    - do: Произвести поиск по запросу с большим количеством организаций, например, "Парикмамхерская"
    - assert: |
        На карте отмечены пины поисковой выдачи
        В окне поиска отображается список организаций поисковой выдачи
        Отображается блок фильтров
    - do: Свернуть список результатов свайпом вниз
    - do: Тап по пину поисковой выдачи на карте
    - assert:  |
        Открывается миникарточка организации
        На карте отображается поднятый пин
    - do: Закрыть миникарточку организации
    - assert:  |
        Состояние пина меняется на неактивное
        Отображается экран результатов поиска и поисковая строка
    - do: Изменить зум карты
    - assert:  |
        Зум карты изменился
        Отображается экран результатов поиска и поисковая строка
    - do: Тап по поисковой строке
    - assert: Открылся список саджестов под поисковой строкой
    - do: Очистить поиск тапом по крестику
    - assert: |
        Открыта форма поиска с названиями категорий
        Поле ввода в фокусе
        На экране отображается клавиатура
    - do: Тап по любой поисковой категории в карусели
    - assert: |
        На карте отмечены пины поисковой выдачи
        В окне поиска отображается список организаций поисковой выдачи
        Отображается блок фильтров
        Если в поисковой выдаче будет только одна организация, то отобразится миникарточка этой организации
    - do: Сменить ориентацию
    - assert: |
        На карте отмечены пины поисковой выдачи
        В окне поиска отображается список организаций поисковой выдачи
        Отображается блок фильтров
        Если в поисковой выдаче будет только одна организация, то отобразится миникарточка этой организации

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map


  Поиск по меню:
    - do: Тап на поисковую строку
    - assert: Открылся экран поиска
    - do: Ввести запрос 'Где поесть борщ' и тап по кнопке поиска.
    - assert: |
        На карте отмечены пины поисковой выдачи.
        В окне поиска отображается список организаций поисковой выдачи отображается блок фильтров.
        Если в поисковой выдаче будет только одна организация, то отобразится миникарточка этой организации
        На зумах >14-го у пинов организаций может отображаться подстрочник с ценой искомого блюдаn
    - do: Скроллить список результатов
    - assert: В процессе скролла новые результаты корректно подгружаются в список

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map
        - newbie

  Сохранение введенных вручную запросов в Историю:
    - info: Открыта карта.
    - do: Произвести поиск топонима
    - assert: Отображается красный поднятый пин топонима на этом пине сцентрирована карта, выделена геометрия улицы отображается миникарточка топонима
    - do: Тап по крестику в миникарточке топонима
    - assert: |
        Пин и выделение улицы пропали. Отображается список топонимов поисковой выдачи, в поисковое строке остается искомый запрос
        Если был произведен поиск по топониму с одним результатом поиска, то отображается карта. Следующий шаг пропустить
    - do: Тап по крестику в поисковой строке
    - assert: Открыта карта
    - do: Тап на поисковую строку
    - assert: Отображен блок История. Искомый запрос вверху списка

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map

  Поиск по запросу, сохраненному в Истории.:
    - info: Провести поиск по нескольким запросам и закрыть результаты поиска.
    - do: Тап на поисковую строку
    - assert: Отображена форма поиска
    - do: Тап по сохраненному в истории запросу
    - assert: Отображается карта с пинами. В поисковом поле отображен запрос из Истории, по которому был проведен поиск
    - do: Очистить поле поиска
    - assert: Запрос, по которому был произведен поиск, вверху списка

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - assessors
        - newbie

  Отмена очистки истории поиска и истории построенных маршрутов в настройках:
    - info: |
        Был выполнен минимум один поисковый запрос
        Был построен минимум один маршрут
        Отображается главный экран приложения
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: Перезапустить приложение
    - do: Тап на Меню -> Настройки
    - assert: |
        Отображается экран Настройки
        Внизу отображается активная кнопка "Очистить историю поиска"
    - do: Тап на "Очистить историю поиска"
    - assert: |
        Появился алерт предупреждающий об удалении истории поиска и построенных маршрутов
        Присутствуют кнопки отмены и подтверждения удаления
    - do: Тап на кнопку отмены
    - assert: |
        Алерт закрылся
        Отображается экран Настройки
        Кнопка "Очистить историю поиска" активна
    - do: Вернуться на главный экран
    - do: Тап на поисковую строку
    - assert: Открылся экран поиска со всеми пользовательскими запросами
    - do: Перейти в маршрутизатор
    - assert: Открылся экран построения маршрута. Ранее построенный маршрут отображается под блоками Дом | Работа

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Отмена очистки истории поиска в новых настройках:
    - info: |
        Был выполнен минимум один поисковый запрос
        Отображается главный экран приложения
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Тап на Меню -> Настройки
    - assert: |
        Отображается экран Настройки
        Внизу отображается кнопка "Очистить историю поиска"
    - do: Тап на "Очистить историю поиска"
    - assert: |
        Появился алерт предупреждающий об удалении истории поиска
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап на кнопку отмены(iOS) / Тап по экрану вне алерта(Android)
    - assert: |
        Алерт закрылся
        Отображается экран Настройки
        Отображается кнопка "Очистить историю поиска"
    - do: Вернуться на главный экран
    - do: Тап на поисковую строку
    - assert: Открылся экран поиска со всеми пользовательскими запросами

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - new_settings



  Очистка истории поиска и истории построенных маршрутов в настройках:
    - info: |
        Был выполнен минимум один поисковый запрос
        Был построен минимум один маршрут
        Отображается главный экран приложения
    - do: Выключить эксперимент `no_routes_tab` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Закрыть дебаг панель
    - do: Перезапустить приложение
    - do: Тап на Меню -> Настройки
    - assert: |
        Отображается экран Настройки
        Внизу отображается активная кнопка "Очистить историю поиска"
    - do: Тап на "Очистить историю поиска"
    - assert: |
        Появился алерт предупреждающий об удалении истории поиска и построенных маршрутов
        Присутствуют кнопки отмены и подтверждения удаления
    - do: Тап на кнопку подтверждения
    - assert: |
        Алерт закрылся
        Отображается экран Настройки
        Кнопка "Очистить историю поиска" неактивна
    - do: Вернуться на главный экран приложения
    - do: Тап на строку поиска
    - assert: |
        Отображается экран поиска
        Отображается сообщение, что история поиска пуста
    - do: Вернуться на главный экран приложения
    - do: Тап на таб Маршруты
    - assert: |
        Отображается экран Маршрут
        История маршрутов не отображается

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Очистка истории поиска в новых настройках:
    - info: |
        Был выполнен минимум один поисковый запрос
        Отображается главный экран приложения
    - do: |
        Использовать интент [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/new_maps_settings.png){title=QR-код}

        `yandexmaps://add_exp?new_maps_settings`
    - do: Перезапустить приложение
    - do: Тап на Меню -> Настройки
    - assert: |
        Отображается экран Настройки
        Внизу отображается кнопка "Очистить историю поиска"
    - do: Тап на "Очистить историю поиска"
    - assert: |
        Появился алерт предупреждающий об удалении истории поиска
        Присутствуют кнопки отмены(iOS) и подтверждения удаления
    - do: Тап на кнопку подтверждения
    - assert: |
        Алерт закрылся
        Отображается экран Настройки
        Отображается кнопка "Очистить историю поиска"
    - do: Вернуться на главный экран приложения
    - do: Тап на строку поиска
    - assert: |
        Отображается экран поиска
        Отображается сообщение, что история поиска пуста

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - new_settings


  Поисковые запросы не дублируются при поиске:
    - info: |
        Выполнен поиск по нескольким запросам, один из которых Кафе.
        Открыт экран поиска.
    - do: Произвести поиск по запросу Кафе
    - assert: Открылся экран с картой, пинами и списком результатов поиска
    - do: Тап на поисковую строку
    - assert: Открылась форма поиска Фокус в поисковой строке
    - do: Тап в поисковой строке на крестик
    - assert: Введенный запрос удалился Запрос Кафе не дублируется

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map

  Поисковые запросы не дублируются при авторизации:
    - info: Пользователь залогинен.
    - do: Выполнить поиск Кафе.
    - assert: Отображена карта с пинами различных объектов с категорией Кафе
    - do: Тап на кнопку Х в поисковой строке
    - assert: Пины с карты скрылись
    - do: Выйти из аккаунта в личном кабинете
    - assert: Пользователь неавторизован
    - do: Выполнить поиск 'Кафе'.
    - assert: Отображена карта с пинами различных объектов с категорией Кафе
    - do: Залогиниться аккаунтом из предусловия
    - assert: Пользователь залогинен
    - do: Открыть экран поиска
    - assert: Экран поиска открыто
    - do: Перейти к вкладке История
    - assert: Запрос Кафе не дублируется

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - assessors

  Поисковые запросы не дублируются при синхронизации между устройствами:
    - info: Авторизоваться на двух девайсах под одним аккаунтом.
    - do: Произвести поиск по нескольким одинаковым запросам на разных девайсах
    - assert: На каждом девайсе, во вкладке История, запросы не дублируются

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Поиск топонима в другом городе с помощью тапа по саджесту:
    - info: Проверяем, что при тапе по саджесту топонима в другом городе МЯК запоминает принадлежность топонима к другому городу, а не выдает заново весь список городов, в котором такой топоним существует
    - do: Произвести поиск топонима, который находится в другом городе (напр., Токсово Луговая)
    - assert: |
        Под поисковой строкой появился саджест Луговая улица
        Указано место расположения этой улицы — поселок, район, область, страна
    - do: Тап по саджесту
    - assert: |
        В текстовом поле указано название улицы
        Под поисковой строкой все еще отображается тот же саджест
    - do: Тап на уточняющий саджест (без указания номера дома)
    - assert: Отображается мини-карточка улицы Луговой в поселке Токсово

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Поиск топонима с уточнением запроса по тапу на саджест:
    - info: Отображается главный экран приложения
    - do: Произвести поиск топонима (улицы или поселения, так чтобы в поиске был НЕ единственный результат)
    - assert: |
        Открыта мини-карточка топонима для текущего города
        На карте отображается активный пин топонима
    - do: Закрыть мини-карточку топонима
    - assert: |
        Отображаются результаты поиска для одного города
        В поисковой строке отображается введенный ранее запрос
        Отображаются сниппеты с перечнем топонимов
        Для различных топонимов результаты могут отображаться не для одного города, а для разных
    - do: Тап по строке поиска
    - do: Добавить в поисковую строку номер дома
    - assert: |
        В поисковой строке размещается новый запрос
        Саджесты под поисковой строкой обновились
    - do: Свайп вниз по списку саджестов
    - assert: Экран поиска не закрывается свайпом по контенту
    - do: Тап по строке обновившегося саджеста в текущем городе
    - assert: |
        Открыта мини-карточка топонима в текущем городе
        На карте отображается активный пин топонима

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - use_map
        - mapkit_ready


  Поиск по запросу, подразумевающему 1 результат:
    - info: |
        Проверяем, что в случае поиска по запросу, подразумевающему единственный результат, сразу открывается мини-карточка объекта
        Для iPad открывается полная карточка
        Отображается главный экран приложения
        (iOS) Получен эксперимент search_alike_suggest_1org
    - do: Выполнить поиск по запросу, подразумевающему 1 результат
    - assert: |
        Открыта мини-карточка организации/топонима
        На карте отображается активный пин объекта
        Над карточкой не отображаются фильтры
        Над карточкой отображаются саджесты и Искать рядом
    - do: Закрыть мини-карточку организации/топонима
    - assert: |
        Карточка организации/топонима закрыта
        Список результатов поиска не отображается
        Отображается главный экран приложения

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - use_map
        - mapkit_ready
        - newbie


  Поиск по координатам:
    - info: |
        Скопированы координаты произвольного топонима:
        Лонг-тап по карте в определенной точке -> Что здесь? -> тап на три точки напротив координат
        Отображается главный экран приложения
    - do: Таб на таб Поиск
    - do: Вставить координаты в строку поиска
    - do: Тап на Найти
    - assert: |
        Открыта мини-карточка топонима
        На карте отображается активный пин топонима в том месте, где был проведен лонг-тап
    - do: Тап на строку поиска
    - do: Тап по саджесту с предлагаемыми координатами
    - assert: |
        Открыта мини-карточка топонима
        На карте отображается активный пин в том месте, где был проведен лонг-тап

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - use_map
        - mapkit_ready

  Отображение саджестов в поиске:
    - info: Открыт экран поиска.
    - do: Ввести любую букву в строку поиска.
    - assert: |
        Появился саджест.
        Введенный в строку поиска запрос в саджесте выделяется жирным.
        Если приходит персональный саджест, то он отображается в 1 или 2 первых строка.
        Строка саджеста для организации состоит из иконки (если приходит), названия, расстояния, во второй строке полный адрес.
        Строка саджеста для сетевой организации состоит из иконки(если приходит), названия, во второй строке категория и количество организаций в регионе.
        Строка саджеста для топонима состоит из иконки(если приходит), адреса, расстояния, во второй строке регион.
        Для категорий слева отображаются иконки, например, Гостиница отображается с иконкой кровати.
        Для конкретных вариантов отображаются иконки, если из мапкита приходит соответствующий признак, например, Гамбринус(Минск) отображается с иконкой рюмки.
    - do: Дописать в строке поиска 1 или более символов.
    - assert: |
        С каждым новым символом саджест перезапрашивается и соответствует запросу.
        Если запросу ничего не соответствует, то саджест не отображается
    - do: Удалить в поисковой строке 1 или более символов.
    - assert: |
        Если поисковая строка не пустая, то саджест обновляется и соответствует запросу.
        Если запросу ничего не соответствует, то саджест не отображается.
        Если поисковая строка пуста, то саджест не отображается, а на экране вкладки Категория/История с соответствующим содержимым.

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение саджеста при поиске:
    - do: Тап по строке поиска
    - assert: Открылся экран поиска
    - do: Свайп штору вниз за контент (т.е в том месте, где находятся категории)
    - assert: Штора не закрывается
    - do: Ввести любую букву в строку поиска
    - assert: |
        Под поисковой строкой отображаются саджеста
        В саджесте выделяется жирным все слово, содержащее текст из поиска
        Персональный саджест отображается в 1 или 2 первых строках
        Строка саджеста для организации состоит из иконки (если приходит), названия, расстояния, во второй строке полный адрес
        Строка саджеста для сетевой организации состоит из иконки (если приходит), названия, во второй строке категория и количество организаций в регионе
        Строка саджеста для топонима состоит из иконки (если приходит), адреса, расстояния, во второй строке регион
        Для категорий слева отображаются иконки (напр., Гостиница отображается с иконкой кровати)
        Для конкретных вариантов отображаются иконки, если из мапкита приходит соответствующий признак
    - do: Дописать в строке поиска 1 или более символов
    - assert: |
        С каждым новым символом саджест перезапрашивается и соответствует запросу
        Если запросу ничего не соответствует, то саджест не отображается
    - do: Удалить в поисковой строке несколько символов (так чтоб строка поиска не стала пустой)
    - assert: |
        Саджест обновляется и соответствует запросу
        Если запросу ничего не соответствует, то саджест не отображается
    - do: Очистить строку поиска
    - assert: |
        Cаджест не отображается
        На экране находятся вкладки Категории и История с соответствующим содержимым

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Двойной тап на результат саджеста:
    - info: Открыт экран поиска (Тап на таб Поиск)
    - do: Ввести поисковый запрос (напр., улица Пушкина)
    - assert: Под строкой появились поисковые саджесты
    - do: Тап на один из результатов с номером дома в саджесте
    - assert: |
        Открыта мини-карточка выбранного топонима
        На карте отображается активный пин
    - do: Тап в поисковую строку
    - assert: Под строкой появились саджесты с результатами поиска
    - do: Тап по саджесту, который был выбран ранее
    - assert: |
        Открыта мини-карточка выбранного топонима
        На карте отображается активный пин

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Удаление из истории одного поискового запроса:
    - do: Тап по строке поиска
    - assert:  Открылся экран поиска
    - do: Ввести запрос "Где поесть" и тап Найти
    - assert: |
        На карте отмечены пины поисковой выдачи
        В окне поиска отображается список организаций поисковой выдачи
        Отображается блок фильтров
        Если в поисковой выдаче будет только одна организация, то отобразится мини-карточка этой организации
    - do: Тап на крестик в поисковой выдаче
    - assert: Отображается главный экран
    - do: Тап по строке поиска
    - assert: Открылся экран поиска
    - do: Лонгтап по поисковому запросу для удаления
    - assert: Отображается поп-ап с подтверждением удаления
    - do: Отменить удаление
    - assert: Запрос остался в истории
    - do: Лонгтап по поисковому запросу для удаления
    - assert: Отображается поп-ап с подтверждением удаления
    - do: Удалить поисковый запрос
    - assert: Выбранный поисковый запрос удалён из списка в Истории

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map


  Отображение пословного саджеста при поиске топонима:
    - info: |
        Варианты продолжения приходят с бэкэнда, и могут отличаться от описанных в кейсе
        Может отличаться момент отображения пословного саджеста, не обязательно после первой же буквы
    - do: Тап по строке поиска
    - assert: Открылся экран поиска
    - do: Ввести первую букву запроса
    - assert: Под полем ввода появились варианты продолжения
    - do: Выбрать топоним (название улицы) без номера дома
    - assert: |
        В поле ввода отображается выбранный ранее вариант
        Саджесты обновились в соответствии с выбранным вариантом
    - do: Выбрать саджест с номером дома
    - assert: |
        Происходит поиск по введенному запросу
        Отображается мини-карточка топонима
        На карте отображается активный пин топонима

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - use_map
        - assessors
        - mapkit_ready


  Отображение закладок в поисковых саджестах:
    - info: |
        Пользователь авторизован
        Добавлены адреса дома, работы в закладки
        Добавлены несколько мест в список Избранное
        Отображается экран поиска (Тап на таб Поиск)
    - do: Ввести в поисковой строке первые три буквы адреса дома
    - assert: |
        Отображается список садежстов по запросу
        Среди саджестов отображается саджест дома (может вытесняться другими результатами поиска)
        В левой части саджеста отображается изображение дома
    - do: Тап на крестик в поисковой строке
    - do: Ввести 'Дом'
    - assert: |
        Отображается список садежстов по запросу
        Среди саджестов отображается саджест Дом
        В левой части саджеста отображается изображение дома
    - do: Тап на крестик в поисковой строке
    - do: Ввести первые три буквы адреса работы
    - assert: |
        Отображается новый список саджестов
        Среди списка саджестов отображается саджест работы (может вытесняться другими результатами поиска)
        В заголовке саджеста отображается Работа
        В левой части саджеста отображается изображение чемодана
    - do: Тап на крестик в поисковой строке
    - do: Ввести 'Работа'
    - assert: |
        Отображается список саджестов по запросу
        Среди списка саджестов отображается саджест работы
        В заголовке саджеста отображается Работа
        В левой части саджеста отображается изображение чемодана
    - do: Тап на крестик в поисковой строке
    - do: Ввести первые три буквы адреса одной из закладок
    - assert: |
        Отображается новый список саджестов
        Среди списка саджестов отображается саджет закладки
        В заголовке отображается название закладки
        В правой части саджеста отображается изображение закладки

    - platforms:
         - android
         - ios
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready

  Поиск маршрута ОТ:
    - info: |
        Отображается главный экран приложения на спане Тулы
        Устройство в вертикальной ориентации
        На спане отображается город с общественным транспортом
    - do: Произвести поиск по единственному маршруту (напр., трамвай 12)
    - assert: |
        Отображается мини-карточка маршрута, где указаны:
        - вид и номер ОТ
        - начальная и конечная остановки
        - кнопка изменения начальной и конечной остановок (может не отображаться)
        - иконка транспорта и количество остановок на маршруте
        На карте обозначена геометрия маршрута
        Пинами обозначены остановки
        На линии маршрута отображаются движущиеся метки ОТ
    - do: Сменить ориентацию устройства
    - assert: |
        Девайс в горизонтальной ориентации
        Отображается мини-карточка маршрута
        На карте обозначена геометрия маршрута
        Пинами обозначены остановки
        На линии маршрута отображаются движущиеся метки ОТ
    - do: Сменить ориентацию устройства на вертикальную
    - do: Закрыть карточку маршрута
    - assert: |
        Отображается главный экран приложения
        Устройство в вертикальной ориентации
    - do: Выполнить поиск по маршруту ОТ с несколькими результатами (напр., автобус 7)
    - assert: |
        Отображаются результаты поиска по запросу
        Геометрия маршрутов не отображается
        В списке результатов отображаются виды ОТ и номер, начальная и конечная остановки
    - do: Тап на любой маршрут
    - assert: |
        Отображается мини-карточка маршрута, где указаны:
        - вид и номер ОТ
        - начальная и конечная остановки
        - кнопка изменения начальной и конечной остановок (может не отображаться)
        - иконка транспорта и количество остановок на маршруте
        На карте отображается геометрия маршрута, обозначены остановки
    - do: Закрыть карточку маршрута
    - assert: Отображается экран результатов поиска

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - use_map
        - mapkit_ready


  Поиск маршрута ОТ по саджесту:
    - info: |
        Отображается главный экран приложения на спане, где есть возможность посмотреть движение городского транспорта
    - do: Тап на строку поиска
    - do: Ввести любую цифру
    - assert: |
        Отображаются саджесты с иконками ОТ
        Указаны номер маршрута, вид ОТ, начальная и конечная остановки
    - do: Ввести еще одну цифру
    - assert: Саджесты обновились
    - do: Удалить введенную цифру
    - assert: Саджесты обновились
    - do: Тап на любой саджест
    - assert: |
        Откроется мини-карточка маршрута
        На карте отображается линия маршрута
        На линии маршрута отображаются живые метки ОТ

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Отображение истории поиска маршрутов ОТ:
    - info: Ранее проводился поиск по разным существующим номерам маршрутов.
    - do: Тап по поисковой строке
    - assert:  Открыт экран поиска, отображается история поиска по номаерам маршрутов
    - do: Тап на один из вариантов
    - assert: |
        Если маршрут единственный: Откроется миникарточка маршрута, где указаны вид и номер ОТ, начальная и конечная остановки, кнопка изменения начальной и конечной остановок(может не отображаться), иконка транспорта и количество остановок на маршруте.
        На карте светло-зеленым ( красным - для трамваев, синим - для троллейбусов, фиолетовым - для маршруток), обозначена геометрия маршрута автобуса  от начальной до конечной точки, темно-зеленым (темно-красным-для трамваев, темно-синим-для троллейбусов, темно-фиолетовым - для маршруток), обозначены остановки.
        Если маршрутов с таким номером несколько: Отображается экран с картой и списком результатов поиска.
        Геометрия маршрутов не отображается.
        В списке результатов отображаются виды ОТ и номер, начальная и конечная остановки.
    - do: Свернуть и развернуть приложение
    - assert: Отображается список результатов, ничего не съехало

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map

  Отображение саджестов транспорта на экране фидбека:
    - info: Открыто поле ввода, введены буквы в хаотичном порядке
    - do: Тап на Найти
    - assert: |
        Открыт  экран с сообщением Ничего не найдено.
        Попробуйте изменить запрос.
        Добавьте организацию, если не нашли  ее на карте.
    - do: Тап на Добавьте организацию
    - assert: Появилась карточка фидбэка
    - do: В поле адрес ввести номер маршрута или вид ОТ с номером маршрута(например автобус 123)
    - assert: В саджестах не отображаются номера маршрутов или вид ОТ с номером маршрута

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение саджестов транспорта на экране маршрута:
    - info: Отображается главный экран приложения
    - do: Тап на Маршрут
    - assert: Открыта форма маршрута
    - do: В поле Куда ввести номер маршрута или вид ОТ с номером маршрута(например 'автобус 123')
    - assert: В саджестах не отображаются номера маршрутов или вид ОТ с номером маршрута

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение поисковой выдачи после поиска вдоль маршрута:
    - info: |
        Выключен эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
        В ведении должна происходить симуляция движения: `Debug-panel -> Routes -> Demo movement`
        Отображается экран автоведения по произвольному маршруту
    - do: Тап по лупе
    - assert: Отображаются поисковые категории в режиме ведения
    - do: Тап по произвольной категории
    - assert: |
        Отображается экран ведения по маршруту
        Отображаются результаты поиска в виде пинов вдоль маршрута
        В левом нижнем углу экран отображается поисковой запрос
    - do: Тап по крестику в плашке маршрута
    - assert: |
        Отображается главный экран приложения
        Маршрут не отображается
        Результаты поиска не отображаются
    - do: Тап по поисковой строке
    - assert: Открылся экран поиска
    - do: Тап по любой категории поиска
    - assert: |
        Отображаются результаты поиска для текущего спана карты
        Поисковые пины отображаются в виде облака пинов, а не вдоль последнего построенного маршрута

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Отображение поисковой выдачи вдоль маршрута через компонент CommonMenuManager:
    - info: |
        Отображается экран автоведения по произвольному маршруту
    - do: Включить симуляцию ведения `Debug-panel -> Routes -> Demo movement`
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2012.56.15.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager`
    - do: Перезапустить приложение для активации эксперимента
    - do: Построить любой автомаршрут
    - do: Тап на Поехали
    - assert: Отображается экран автоведения по маршруту
    - do: Тап по лупе
    - assert: Отображаются поисковые категории в режиме ведения
    - do: Тап по произвольной категории
    - assert: |
        Отображается экран ведения по маршруту
        Отображаются результаты поиска в виде пинов вдоль маршрута
        В левом нижнем углу экран отображается поисковой запрос
    - do: Тап по крестику в плашке маршрута
    - do: Подтвердить завершение маршрута
    - assert: |
        Отображается главный экран приложения
        Маршрут не отображается
        Результаты поиска не отображаются
    - do: Тап по поисковой строке
    - assert: Открылся экран поиска
    - do: Тап по любой категории поиска
    - assert: |
        Отображаются результаты поиска для текущего спана карты
        Поисковые пины отображаются в виде облака пинов, а не вдоль последнего построенного маршрута

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Отображение Контента в поиске:
    - info: |
        Приложение запущено, открыт спан карты города напр. Тула
    - do: Тап по табу Поиск
    - assert: |
        На весь экран раскрывается карточка поиска.
        Сверху отображается строка поиска с кнопкой голосового поиска и кнопкой закрытия поиска.
        Кнопки поисковых категорий: Спецкатегория, если она есть, отображается самой первой(нулевая позиция).
        Рекламные категории, если они есть, отображаются в конце, отдельно от основных категорий.
        Последней, не считая рекламные, отображается категория - 'Еще'.
        Блок со сториз.
        Ниже список подборок.
    - do: Закрыть экран поиска
    - assert: Экран поиска закрыт, отображается главный экран
    - do: Перенести спан карты на другой город. Например, Москва
    - assert: На карте отображается Москва
    - do: Тап по табу Поиск
    - assert: |
        На весь экран раскрывается карточка поиска.
        Сверху отображается строка поиска с кнопкой голосового поиска и кнопкой закрытия поиска.
        Кнопки поисковых категорий: Спецкатегория, если она есть, отображается самой первой(нулевая позиция).
        Рекламные категории, если они есть, отображаются в конце, отдельно от основных категорий.
        Последней, не считая рекламные, отображается категория - 'Еще'.
        Блок со сториз.
        Ниже список подборок
        Содержимое сторис и подборок обновлено.

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map
        - newbie


  Переход по постам в новом Поиске:
    - info: Получен эксперимент show-search-with-shutter. Открыта карта города с богатой шторой(Например Москва)
    - do: Тап по поисковой строке
    - assert: |
        На весь экран раскрывается карточка поиска.
        Сверху отображается строка поиска с кнопкой голосового поиска и кнопкой закрытия поиска.
        Кнопки поисковых категорий.
        Блок 'Сейчас в городе' с баннерами и постами сториз, идентичными с постами в табе Город
    - do: Тап по баннеру Сториз
    - assert: Открывается выбранный Сториз
    - do: Тап по крестику
    - assert: Открыт экран поиска в том же состоянии, что и в предыдущих шагах
    - do: Тап по баннеру подборок
    - assert: Открывается новостная карточка
    - do: Тап по крестику
    - assert: Открыт экран поиска в том же состоянии, что и в предыдущих шагах

    - platforms:
        - ios
    - tags:
        - assessors

  Эксперимент с дополнительной строчкой в новый категориях поиска:
    - info: |
        Включен эксперимент show search with shutter.
        Приложение перезапущено.
        Устройство в вертикальной ориентации
    - do: Тап на таб Поиск
    - assert: |
        Открылся экран поиска.
        Клавиатура не отображается.
        Вверху экрана: Кнопка вызова голосового ввода, Поле ввода, Кнопка закрытия.
        Ниже блок с категориями состоящий из 16 элементов.
        В каждой строке по 4 категории(по 3 категории на мелких девайсах, кол-во строк может быть больше, чем 4. Последняя строка может содержать только 1 категорию).
        Рекламные категории отображаются самыми последними.
        Ниже отображается блок со сторис.
    - do: Изменить ориентацию устройства
    - assert: |
        Экран поиска не переоткрылся заного, а бы сразу открыт.
        Клавиатура не отображается.
        Вверху экрана: Кнопка вызова голосового ввода, Поле ввода, Кнопка закрытия.
        Ниже блок с категориями.
        В каждой строке по 3 категории.
        Рекламные категории отображаются самыми последними.
        Ниже отображается блок со сторис.

    - platforms:
        - ios
    - tags:
        - assessors


  Открытие поиска в таббаре:
    - do: Запустить приложение
    - assert: |
        Приложение запущено.
        На главном экране сверху отображается поисковая строка со спичкитом  и кнопкой перехода в меню
    - do: Сменить ориентацию на горизонтальную
    - assert: |
        Поисковая строка не съехала и не пропала.
        Слева от поисковой строки кнопка перехода в меню.
        Справа от поисковой строки присутствует спичкит.
        Спичкит рядом с табами отсутствует.
        Ширина поисковой строки соответствует ширине нижних табов
    - do: Тап на таб Поиск в нижней части экрана
    - assert: Открывается экран поиска. Клавиатура не показывается
    - do: Изменить ориентацию на вертикальную
    - assert: Отображается экран поиска. Ничего не съехало и отображается корректно
    - do: Закрыть поиск
    - assert:  Поисковая строка не съехала и не пропала

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie


  Осуществление поиска через поисковую строку на главном экране:
    - info: |
        Логика:
        Нажатие на поисковую строку открывает текущий экран поиска на вкладке «История»
        При этом в нижнем тулбаре сохраняется кнопка перехода в поиск
        При нажатии на неё открываем новый экран поиска, объединённый с контентом и не показываем клавиатуру
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
    - do: Закрыть Debug-Panel
    - do: Перезапустить приложение
    - assert: |
        Приложение запущено
        На главном экране сверху отображается Поисковая строка, Спичкит
        Иконка меню (для авторизованных пользователей представлена в виде аватарки)
    - do: Тап на поисковую строку
    - assert: |
        Сверху отображается поисковая строка
        Отображается клавиатура
        Под поисковой строкой отображается карусель с поисковыми категориями
        Ниже История поисковых запросов
    - do: Тап по любой категории в карусели и закрыть поиск
    - assert: |
        На главном экране сверху отображается поисковая строка со спичкитом
        Снизу над табами в саджестах спичкит не отображается
    - do: Тап на поисковую строку
    - assert: |
        Сверху отображается поисковая строка
        Отображается клавиатура
        Под поисковой строкой отображается карусель с поисковыми категориями
        Ниже История поисковых запросов

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - newbie


  Осуществление поиска из поисковой строки на главном экране через компонент CommonMenuManager:
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2012.56.15.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager`
    - do: Перезапустить приложение для активации эксперимента
    - assert: |
        Приложение запущено
        На главном экране сверху отображается Поисковая строка, Спичкит
        Иконка меню (для авторизованных пользователей представлена в виде аватарки)
    - do: Тап на поисковую строку
    - assert: |
        Сверху отображается поисковая строка
        Отображается клавиатура
        Под поисковой строкой отображается карусель с поисковыми категориями
        Ниже История поисковых запросов
    - do: Тап по любой категории в карусели и закрыть поиск
    - assert: |
        На главном экране сверху отображается поисковая строка со спичкитом
        Снизу над табами в саджестах спичкит не отображается
    - do: Тап на поисковую строку
    - assert: |
        Сверху отображается поисковая строка
        Отображается клавиатура
        Под поисковой строкой отображается карусель с поисковыми категориями
        Ниже История поисковых запросов

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  В истории поиска к введенному адресу не добавляются страна и город:
    - info: На экране истории поиска должны отображаться только введенные улица и дом. Открыт поиск
    - do: Ввести запрос 'Пушкинская улица' и тап на кнопку Найти или на лупу
    - assert:  Открывается мини-карточка топонима
    - do: Закрыть мини-карточку и поиск
    - assert:  Отображается карта
    - do: Тап по поисковой строке
    - assert: |
        Отображается экран поиска.
        Сверху поиск,
        Кнопка спичкита.
        Кнопка закрытия.
        Под поиском отображается история поисковых запросов.
        Последний поисковый запрос 'Пушкинская улица' отображается без страны и города
    - do: Закрыть поиск тапом на крестик или свайпом вниз
    - assert: Отображается карта
    - do: Тап по поисковой строке
    - do: Начать вводить в поисковую строку запрос топонима, тап на предложенный саджест
    - assert:  Открывается мини-карточка топонима
    - do: Закрыть мини-карточку и поиск
    - assert:  Отображается карта
    - do: Тап по поисковой строке
    - assert: |
        Отображается экран поиска.
        Сверху поиск, Справа от поиска кнопка спичкита.
        Слева от поиска кнопка закрытия.
        Под поиском отображается история поисковых запросов.
        Последний поисковый запрос  отображается без страны и города
    - do: Повторить предыдущие шаги с поисковым запросом, состоящим полностью из пословного саджеста
    - assert:  Ожидаемый результат, как в предыдущих шагах

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Категории в истории поиска:
    - info: Устройство в вертикальной ориентации
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
    - do: Закрыть Debug-Panel
    - do: Перезапустить приложение
    - do: Тап по строке поиска
    - assert: |
        Открывается экран поиска
        Открыта клавиатура, в строке поиска мигает курсор
        Под поисковой строкой отображается карусель с поисковыми категориями
        В карусели категорий присутствует кнопка Категории [Android] / кнопка Еще [iOS]
        Под каруселью отображается история поисковых запросов
    - do: Тап на Категории / Еще
    - assert: |
        Открывается экран поиска по категориям
        Сверху отображается строка поиска с кнопкой голосового поиска и кнопкой закрытия поиска
        Кнопки поисковых категорий: Спецкатегория, если она есть, отображается первой
        Рекламные категории, если они есть, отображаются последними
        Отображается всего 12 категорий, не считая рекламные, последняя категория - 'Еще'
        Блок со сториз и подборки
    - do: Закрыть экран поиска
    - do: Тап по строке поиска
    - assert: |
        Открывается экран поиска
        Открыта клавиатура, в строке поиска мигает курсор
        Под поисковой строкой отображается карусель с поисковыми категориями
        В карусели категорий присутствует кнопка Категории [Android] / кнопка Еще [iOS]
        Под каруселью отображается история поисковых запросов
    - do: Тап по любой категории в карусели
    - assert: Открывается экран результатов поиска по выбранной категории
    - do: Сменить ориентацию устройства
    - assert: |
        Отображаются результаты поиска в горизонтальной ориентации

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Категории в истории поиска через компонент CommonMenuManager:
    - info: Устройство в вертикальной ориентации
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2012.56.15.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager`
    - do: Перезапустить приложение для активации эксперимента
    - do: Тап по строке поиска
    - assert: |
        Открывается экран поиска
        Открыта клавиатура, в строке поиска мигает курсор
        Под поисковой строкой отображается карусель с поисковыми категориями
        В карусели категорий присутствует кнопка Категории [Android] / кнопка Еще [iOS]
        Под каруселью отображается история поисковых запросов
    - do: Тап на Категории / Еще
    - assert: |
        Открывается экран поиска по категориям
        Сверху отображается строка поиска с кнопкой голосового поиска и кнопкой закрытия поиска
        Кнопки поисковых категорий: Спецкатегория, если она есть, отображается первой
        Рекламные категории, если они есть, отображаются последними
        Отображается всего 12 категорий, не считая рекламные, последняя категория - 'Еще'
        Блок со сториз и подборки
    - do: Закрыть экран поиска
    - do: Тап по строке поиска
    - assert: |
        Открывается экран поиска
        Открыта клавиатура, в строке поиска мигает курсор
        Под поисковой строкой отображается карусель с поисковыми категориями
        В карусели категорий присутствует кнопка Категории [Android] / кнопка Еще [iOS]
        Под каруселью отображается история поисковых запросов
    - do: Тап по любой категории в карусели
    - assert: Открывается экран результатов поиска по выбранной категории
    - do: Сменить ориентацию устройства
    - assert: |
        Отображаются результаты поиска в горизонтальной ориентации

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение персонального саджеста при поиске из поисковой строки (пользователь не залогинен, длинный запрос):
    - info: Пользователь НЕ залогинен
    - do: Тап на поисковую строку
    - do: Ввести длинный запрос, например Где поесть и тап кнопку Найти
    - assert: Отображается экран результатов поиска
    - do: Закрыть экран результатов поиска
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для таба Поиск
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение персонального саджеста при поиске из поисковой строки (пользователь неавторизован, запрос организации):
    - info: |
        Пользователь неавторизован
        Отображается главный экран приложения
    - do: Тап на поисковую строку
    - do: Ввести название организации, которое до этого не вводили
    - do: Тап по предложенному саджесту с названием организации
    - assert: |
        Отображается экран результатов поиска
        Если результат один, то отображается карточка искомой организации
    - do: Закрыть экран результатов поиска/карточку организации
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос, введенный ранее
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready

  Отображение персонального саджеста при поиске из поисковой строки (пользователь авторизован, длинный запрос):
    - info: |
        Пользователь авторизован
        В браузерной версии карт пользователь авторизован тем же аккаунтом
        Отображается главный экран приложения
    - do: Тап на поисковую строку
    - do: Ввести длинный запрос
    - do: Тап Найти
    - assert: Отображается экран результатов поиска
    - do: Закрыть экран результатов поиска
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Открыть браузерную версию карт
    - do: Ввести первые буквы запроса, введенного ранее
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready

  Отображение персонального саджеста при поиске из поисковой строки (пользователь залогинен, запрос организации):
    - info: |
        Пользователь залогинен
    - do: Тап на поисковую строку
    - do: Ввести название организации, которое до этого не вводили. Тап по предложенному саджесту с названием организации.
    - assert: |
        Отображается экран результатов поиска
        Если результат один, то отображается карточка искомой организации
    - do: Закрыть экран результатов поиска/карточку организации
    - assert: |
        Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для таба Поиск
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Открыть поиск в БЯКе и ввести первые буквы запроса из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение персонального саджеста при поиске из таба Поиск (пользователь не залогинен, длинный запрос):
    - info: Пользователь НЕ залогинен
    - do: Тап на таб Поиск
    - do: Ввести длинный запрос, например Где поесть и тап кнопку Найти
    - assert: Отображается экран результатов поиска
    - do: Закрыть экран результатов поиска
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для поиска в ведении по маршруту
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение персонального саджеста при поиске из таба Поиск (пользователь не залогинен, запрос организации):
    - info: |
        Пользователь НЕ залогинен
    - do: Тап на таб Поиск
    - do: Ввести название организации, которое до этого не вводили. Тап по предложенному саджесту с названием организации.
    - assert: |
        Отображается экран результатов поиска
        Если результат один, то отображается карточка искомой организации
    - do: Закрыть экран результатов поиска/карточку организации
    - assert: |
        Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для поиска в ведении по маршруту
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение персонального саджеста при поиске из таба Поиск (пользователь залогинен, длинный запрос):
    - info: Пользователь залогинен
    - do: Тап на таб Поиск
    - do: Ввести длинный запрос, например Где поесть и тап кнопку Найти
    - assert: Отображается экран результатов поиска
    - do: Закрыть экран результатов поиска
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для таба Поиск
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Построить произвольный маршрут и перейти в ведение
    - do: Открыть поиск и ввести первые буквы запроса из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Открыть поиск в БЯКе и ввести первые буквы запроса из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение персонального саджеста при поиске из таба Поиск (пользователь залогинен, запрос организации):
    - info:  Пользователь залогинен
    - do: Тап на таб Поиск
    - do: Ввести название организации, которое до этого не вводили. Тап по предложенному саджесту с названием организации.
    - assert: |
        Отображается экран результатов поиска
        Если результат один, то отображается карточка искомой организации
    - do: Закрыть экран результатов поиска/карточку организации
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из 2 шага
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для таба Поиск
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Построить произвольный маршрут и перейти в ведение
    - do: Открыть поиск и ввести первые буквы запроса из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Открыть поиск в БЯКе и ввести первые буквы запроса из предыдущих шагов
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение персонального саджеста при поиске в ведении по маршруту (пользователь неавторизован, длинный запрос):
    - info: |
        Пользователь неавторизован
        Отображается экран ведения по произвольному автомаршруту
    - do: Открыть поиск (Тап на лупу -> Ещё)
    - do: Ввести длинный запрос
    - do: Тап на Найти
    - assert: |
        Отображается экран результатов поиска
        Если результат один, то отображается карточка искомой организации
    - do: Закрыть экран результатов поиска / карточку организации
    - do: Завершить ведение
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос веденный ранее
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Отображение персонального саджеста при поиске в ведении по маршруту (пользователь не залогинен, запрос организации):
    - info: |
        Пользователь НЕ залогинен
        Построить произвольный маршрут и перейти в ведение
    - do: Открыть поиск
    - do: Ввести название организации, которое до этого не вводили. Тап по предложенному саджесту с названием организации.
    - assert: |
        Отображается экран результатов поиска
        Если результат один, то отображается карточка искомой организации
    - do: Закрыть экран результатов поиска/карточку организации, выйти из ведения по маршруту
    - assert: |
        Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: |
        По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для поиска в табе Поиск
    - assert: |
        По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение персонального саджеста при поиске в ведении по маршруту (пользователь залогинен, длинный запрос):
    - info: |
        Пользователь залогинен
        Построить произвольный маршрут и перейти в ведение
    - do: Открыть поиск
    - do: Ввести длинный запрос, например Где поесть и тап кнопку Найти
    - assert: |
        Отображается экран результатов поиска
    - do: Закрыть экран результатов поиска, выйти из ведения по маршруту
    - assert: |
        Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на поисковую строку
    - do: По одной букве ввести запрос из предыдущих шагов
    - assert: |
        По мере ввода запроса в выдаче появился персональный саджест
    - do: Повторить предыдущие два шага для таба Поиск
    - assert: |
        По мере ввода запроса в выдаче появился персональный саджест
    - do: Открыть поиск в БЯКе и ввести первые буквы запроса из предыдущих шагов
    - assert: |
        По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Отображение персонального саджеста при поиске в ведении по маршруту (пользователь авторизован, запрос организации):
    - info: |
        Пользователь авторизован
        В браузерной версии карт пользователь авторизован тем же аккаунтом
        Отображается экран ведения по произвольному автомаршруту
    - do: Открыть поиск (Тап на лупу -> Ещё)
    - do: Ввести название организации, которое до этого не вводили
    - do: Тап по предложенному саджесту с названием организации
    - assert: |
        Отображается экран результатов поиска
        Если результат один, то отображается карточка искомой организации
    - do: Закрыть экран результатов поиска/карточку организации
    - do: Завершить ведение
    - assert: Отображается главный экран приложения
    - do: Подождать 30 секунд
    - do: Тап на таб Поиск
    - do: По одной букве ввести запрос введенный ранее
    - assert: По мере ввода запроса в выдаче появился персональный саджест
    - do: Открыть поиск в БЯКе
    - do: Ввести первые буквы запроса введенного ранее
    - assert: По мере ввода запроса в выдаче появился персональный саджест

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - newbie


  Ограничение на количество поисков по координатам:
    - info: Получен эксперимент navi_feature_limit_search_by_coordinates со значением 3
    - do: Лонг-тап на топоним
    - do: Тап на Что здесь?
    - assert: |
        Открыта мини-карточка топонима
        В карточке отображается поле Координаты
    - do: Скопировать координаты
    - assert: Появилась плашка «Координаты скопированы»
    - do: Тап на поисковую строку
    - assert: Открыт экран поиска
    - do: Произвести поиск по скопированным координатам
    - assert: Открывается мини-карточка топонима
    - do: Повторить поиск еще три раза
    - assert: |
        На третий раз открывается WebView о превышении лимита открытий поиска по координатам
        Далее следует рекомендация авторизоваться для получения дальнейшего доступа
    - do: Закрыть WebView
    - assert: Открыт экран результатов поиска
    - do: Стереть запрос из поисковой строки
    - do: Ввести координаты вручную
    - do: Тап на Найти
    - assert: |
        Открывается WebView о коммерческом использовании приложения
        Заголовок WebView «Превышен лимит запросов к приложению»
        Далее следует рекомендация авторизоваться для получения дальнейшего доступа
    - do: Закрыть WebView
    - assert: Открыт экран результатов поиска
    - do: Стереть запрос из поисковой строки
    - do: Ввести координаты вручную
    - do: В списке предложенных саджестов тап на саджест с нужными координатами
    - assert: |
        На третий раз открывается WebView о превышении лимита открытий поиска по координатам
        Далее следует рекомендация авторизоваться для получения дальнейшего доступа

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Ограничение в сутки на количество поисков по координатам:
    - info: Получен эксперимент navi_feature_limit_search_by_coordinates со значением 1
    - do: Лонг-тап на топоним
    - do: Тап на Что здесь?
    - assert: |
        Открыта мини-карточка топонима
        В карточке отображается поле Координаты
        Рядом с координатами отображается три точки
    - do: Тап на три точки
    - assert: Появилась плашка «Координаты скопированы»
    - do: Тап на поисковую строку
    - assert: Открыт экран поиска
    - do: Произвести поиск по скопированным координатам
    - assert: Открывается мини-карточка топонима
    - do: Повторить поиск
    - assert: |
        Открывается WebView о превышении лимита открытий поиска по координатам
    - do: В настройках девайса изменить дату на сутки вперед
    - do: Тап на поисковую строку
    - do: Произвести поиск по скопированным координатам
    - assert: Открывается мини-карточка топонима
    - do: Повторить поиск
    - assert: |
        Открывается WebView о превышении лимита открытий поиска по координатам
        Далее следует рекомендация авторизоваться для получения дальнейшего доступа

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors

  Локализация лендинга об ограничении поиска по координатам:
    - info: |
        Получен эксперимент navi_feature_limit_search_by_coordinates со значением 1
        Выставлена ru_RU локаль
    - do: Произвести поиск по координатам
    - assert: Открывается мини-карточка топонима
    - do: Повторить поиск
    - assert: |
        Открывается WebView о коммерческом использовании приложения
        Лендинг отображается на русском языке
    - do: Выставить en, uk, uz локаль и повторить поиск
    - assert: |
        Открывается WebView о коммерческом использовании приложения
        Лендинг отображается на en/uk/uz соответственно

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Поисковые категории из mapkit:
    - info: |
        Скачан кэш текущего региона (Меню -> Загрузка карт)
        Отображается главный экран приложения
        Интернет включен
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
    - do: Закрыть Debug-Panel
    - do: Перезапустить приложение
    - do: Тап на таб Поиск
    - assert: Отображаются поисковые категории
    - do: Произвести поиск по нескольким категориям
    - assert: Отображаются результаты поиска
    - do: Вернуться на главный экран приложения
    - do: Выключить интернет
    - do: Тап на таб Поиск
    - assert: Поисковые категории отображаются
    - do: Произвести поиск по нескольким категориям
    - assert: Отображаются результаты офлайн-поиска

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Поисковые категории через компонент CommonMenuManager:
    - info: |
        Скачан кэш текущего региона (Меню -> Загрузка карт)
        Отображается главный экран приложения
        Интернет включен
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2012.56.15.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager`
    - do: Перезапустить приложение для активации эксперимента
    - do: Тап на таб Поиск
    - assert: Отображаются поисковые категории
    - do: Произвести поиск по нескольким категориям
    - assert: Отображаются результаты поиска
    - do: Вернуться на главный экран приложения
    - do: Выключить интернет
    - do: Тап на таб Поиск
    - assert: Поисковые категории отображаются
    - do: Произвести поиск по нескольким категориям
    - assert: Отображаются результаты офлайн-поиска

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Показ саджестов разных категорий в поиске:
    - info: |
        Саджесты состоят из иконки/логотипа/обложки, названия, подстрочника с описанием
        Может отображаться расстрояние или время доезда (у станций метро также отображается цвет линии)
        Среди саджестов могут отображаться разные категории, подходящие под запрос: Транспорт, Места, Подборки, Товары и услуги
        Отображается главный экран приложения
    - do: Тап по поисковой строке / тап на таб Поиск
    - do: Начать вводить запрос для организации с брендированным пином (напр., Макдональс)
    - assert: |
        Под введенным запросом появляются саджесты, соответствуюзие запросу
        Показаны саджесты разных типов
        - саджест категории, саджест бренда (иконка с логотипом)
        - поисковой саджест (иконка лупы)
        - могут отображаться саджесты из истории поиска
        - При поиске сетевых организаций отображается саджест с лейблом и количеством филиалов
    - do: Стереть текущий запрос
    - do: Начать вводить запрос для поиска транспорта (напр., метро М..)
    - assert: Отображаются саджесты с иконкой автобуса/буквой "М" (метро)
    - do: Стереть текущий запрос
    - do: Начать вводить запрос для поиска подборки мест (напр., Места для выгула собак или Места для детей)
    - assert: Отображаются саджесты с обложками подборок мест
    - do: Стереть текущий запрос
    - do: Начать вводить запрос для поиска товара/услуги (напр., Автомойка..)
    - assert: Отображаются саджесты с иконками (товара, услуги, категории, лупы или бренда...)
    - do: Стереть текущий запрос
    - do: Начать вводить запрос для поиска топонима
    - assert: Отображаются саджесты с иконкой указателя

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready

  Отображение баннера АЗС в СЕРПе:
    - do: Тап по строке поиска
    - assert: |
         Открылся экран поиска
    - do: Произвести поиск по категории “АЗС”
    - assert: |
        Отображается баннер заправок с кнопкой “Подробнее”
        Отображаются результаты поиска с карточками заправок
        На карте отображаются поисковые пины
    - do: Сменить ориентацию устройства
    - assert: |
        Элементы экрана не съехали и не пропали
    - do: Тап на “Подробнее” в баннере заправок
    - assert: |
        Отображается сторис заправок
    - do: Тап на кнопку закрытия
    - assert: Отображается главный экран приложения

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map
        - newbie

  Отображение рубричного саджеста в поиске:
    - info: |
        Открыт главный экран
        Устройство в вертикальной ориентации
    - do: Тап на поисковую строку
    - assert: |
        Открылся экран поиска
        Под строкой поиска отображается рубричный саджест
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается экран поиска
        Под строкой поиска отображается рубричный саджест
    - do: Закрыть экран поиска
    - assert: Отображается главный экран
    - do: Тап на поисковую строку
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается экран поиска
        Под строкой поиска отображается рубричный саджест
    - do: Тап на произвольную рубрику в саджесте
    - assert: Отображается экран с результатами поиска по выбранной рубрике

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready
        - use_map
        - newbie

  Синхронизация истории (с неавторизованного на авторизованный аккаунт):
    - info: |
        Пользователь неавторизован
        Открыт главный экран
    - do: Тап на поисковую строку
    - assert: |
        Открылся экран поиска
        Под строкой поиска отображается карусель из категорий
    - do: Ввести поисковый запрос
    - assert: |
        На экране поиска отображаются саджесты в соответствии с запросом
    - do: Тап Найти
    - assert: Открылся экран результатов поиска
    - do: Закрыть экран результатов поиска
    - assert: Отображается главный экран
    - do: Тап на Поисковую строку
    - assert: Раннее веденный поисковый запрос сохранился в  истории
    - do: Авторизоваться и открыть поисковую строку
    - assert: В истории поиска сохранился раннее веденный поисковый запрос

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie

  Синхронизация поиска между МЯК и Нави:
    - info: |
        Установлен Яндекс.Навигатор
        Авторизоваться под одним аккаунтом в МЯК и в Навигаторе
        Открыты Яндекс.Карты
    - do: Ввести произвольный запрос в строку поиска
    - assert: Отображаются сниппеты по запросу на экране поиска
    - do: Тап на Найти
    - assert: |
        Открылся экран результатов поиска по введенному запросу
    - do: Закрыть поисковую выдачу
    - assert: Открыта карта
    - do: Тап на поисковую строку
    - assert: Отображен блок История. Искомый запрос вверху списка
    - do: Открыть Яндекс.Навигатор и тап на строку поиска
    - assert: Поисковый запрос из МЯК прорастает в историю Навигатора
    - do: В строку ввести новый поисковый запрос
    - do: Тап на Найти
    - do: Закрыть поисковую выдачу в навигаторе и открыть Яндекс.Карты
    - assert: Открыт главный экран карт
    - do: Тап на поисковую строку
    - assert: Поисковый запрос из Нави прорастает в Карты не заменяя при этом историю поиска произведенного в МЯК

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Война пинов. Поиск на главном экране:
    - info: |
        Открыт главный экран
        iOS: Включен эксперимент mpp_search_layer
    - do: Тап по табу Поиск
    - assert: Открылся экран поиска
    - do: Тап на категорию
    - assert: |
        На карте отмечены пины поисковой выдачи
        Отображаются результаты поиска
    - do: Тап по пину поисковой выдачи на карте
    - assert:  |
        Открывается мини-карточка организации
        На карте отображается поднятый пин
    - do: Закрыть мини-карточку организации
    - assert:  |
        Пин в состоянии просмотренного
        Отображается экран результатов поиска и поисковая строка
    - do: Изменить зум карты
    - assert:  |
        Зум карты изменился
        Отображается экран результатов поиска и поисковая строка
    - do: Тап по поисковой строке
    - assert: Открылся экран поиска с введеным запросом
    - do: Очистить поиск тапом по крестику
    - assert: Открыт экран поиска
    - do: Тап по любой поисковой категории в карусели
    - assert: |
        На карте отмечены пины поисковой выдачи
        Отображаются результаты поиска
        Если в поисковой выдаче будет только одна организация, то отобразится мини-карточка этой организации
    - do: Сменить ориентацию устройства
    - assert: |
         На карте отмечены пины поисковой выдачи
         В окне поиска отображается список организаций поисковой выдачи отображается блок фильтров

    - platforms:
        - ios
        - android
    - integration_run:
        - kotlin
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Отображение истории поиска в табе Поиск:
    - info: Открыт главный экран приложения
    - do: Тап по табу Поиск
    - assert: Открылся экран поиска
    - do: Тап на поле для ввода
    - assert: |
        Отобразилась история поиска
        В истории отображаются либо введеные запросы пользователя, либо сообщения о пустой истории поиска
    - do: Ввести запрос поиска
    - assert: Отображаются саджесты по запросу
    - do: Тап на Найти
    - assert: Отображаются результаты поиска
    - do: Закрыть экран результатов поиска
    - do: Тап на строку поиска
    - assert: В истории поиска отобразился запрос из предыдущего шага

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Эксперимент на окрашивание поисковых категорий:
    - info: |
        Получен эксперимент colored_rubrics
    - do: Тап на таб Поиск
    - assert: Категории окрашены в различные цвета
    - do: Тап на одну из цветных категорий
    - assert: Открыт экран результата поиска по категории

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Рандомизация рубричного саджеста (текущие рубрики):
    - info:
        Включен эксперимент rubric_suggest_random_order со значением CURRENT
        Открыт главный экран
        Запомнить порядок рубричных саджестов над навбаром
        (Без эксперимента рубричные саджесты всегда в следующем порядке (над навбаром - после саджестов Дом/Работа и Я.Заправки) - "Где поесть", "Продукты", "Аптеки", "Красота", "АЗС", "Больницы", "Банкоматы")
    - do: Тап по поисковой строке
    - assert: |
        Открылся экран поиска
        Под поисковой строкой отображаются рубричные саджесты в случайном порядке
        Порядок рубричных саджестов под строкой поиска отличается от рубричных саджестов над навбаром
    - do: Перезапустить приложение
    - assert: |
        Открыт главный экран приложения
        Порядок рубричных саджестов над навбаром изменился
    - do: Тап по поисковой строке
    - assert: |
        Порядок рубричных саджестов под поисковой строкой изменился
        Порядок рубричных саджестов под строкой поиска отличается от рубричных саджестов над навбаром

    - platforms:
        - ios
    - tags:
        - assessors


  Рандомизация рубричного саджеста (с расширенной едой):
    - info:
        Включен эксперимент rubric_suggest_random_order со значением REPLACE_FOOD
        Открыт главный экран
        Запомнить порядок рубричных саджестов над навбаром
        (Без эксперимента рубричные саджесты всегда в следующем порядке (над навбаром - после саджестов Дом/Работа и Я.Заправки) - "Где поесть", "Продукты", "Аптеки", "Красота", "АЗС", "Больницы", "Банкоматы")
    - do: Тап по поисковой строке
    - assert: |
        Открылся экран поиска
        Под поисковой строкой отображаются рубричные саджесты в случайном порядке
        Категория "Где поесть" не отображается
        Вместе со стандартными категориями отображаются расширенные категории еды (полностью или частично): "Кофейни", "Фастфуд", "Рестораны", "Бары и пабы", "Бургерные", "Кальянные", "Пиццерии", "Суши"
        Порядок рубричных саджестов под строкой поиска отличается от рубричных саджестов над навбаром
    - do: Перезапустить приложение
    - assert: |
        Открыт главный экран приложения
        Порядок рубричных саджестов над навбаром изменился
        Категория "Где поесть" не отображается
        Вместе со стандартными категориями отображаются расширенные категории еды (полностью или частично): "Кофейни", "Фастфуд", "Рестораны", "Бары и пабы", "Бургерные", "Кальянные", "Пиццерии", "Суши"
    - do: Тап по поисковой строке
    - assert: |
        Порядок рубричных саджестов под поисковой строкой изменился
        Категория "Где поесть" не отображается
        Вместе со стандартными категориями отображаются расширенные категории еды (полностью или частично): "Кофейни", "Фастфуд", "Рестораны", "Бары и пабы", "Бургерные", "Кальянные", "Пиццерии", "Суши"
        Порядок рубричных саджестов под строкой поиска отличается от рубричных саджестов над навбаром

    - platforms:
        - ios
    - tags:
        - assessors


  Рандомизация рубричного саджеста (с "Где поесть" и расширенной едой):
    - info:
        Включен эксперимент rubric_suggest_random_order со значением EXTENDED_FOOD
        Открыт главный экран
        Запомнить порядок рубричных саджестов над навбаром
        (Без эксперимента рубричные саджесты всегда в следующем порядке (над навбаром - после саджестов Дом/Работа и Я.Заправки) - "Где поесть", "Продукты", "Аптеки", "Красота", "АЗС", "Больницы", "Банкоматы")
    - do: Тап по поисковой строке
    - assert: |
        Открылся экран поиска
        Под поисковой строкой отображаются рубричные саджесты в случайном порядке
        Вместе со стандартными категориями отображаются расширенные категории еды (полностью или частично): "Кофейни", "Фастфуд", "Рестораны", "Бары и пабы", "Бургерные", "Кальянные", "Пиццерии", "Суши"
        Порядок рубричных саджестов под строкой поиска отличается от рубричных саджестов над навбаром
    - do: Перезапустить приложение
    - assert: |
        Открыт главный экран приложения
        Порядок рубричных саджестов над навбаром изменился
        Вместе со стандартными категориями отображаются расширенные категории еды (полностью или частично): "Кофейни", "Фастфуд", "Рестораны", "Бары и пабы", "Бургерные", "Кальянные", "Пиццерии", "Суши"
    - do: Тап по поисковой строке
    - assert: |
        Порядок рубричных саджестов под поисковой строкой изменился
        Вместе со стандартными категориями отображаются расширенные категории еды (полностью или частично): "Кофейни", "Фастфуд", "Рестораны", "Бары и пабы", "Бургерные", "Кальянные", "Пиццерии", "Суши"
        Порядок рубричных саджестов под строкой поиска отличается от рубричных саджестов над навбаром

    - platforms:
        - ios
    - tags:
        - assessors

  Поиск через строку поиска в режиме навигатора:
    - info: |
        Открыт главный экран приложения
    - do: Тап на таб Режим навигатора
    - assert: |
        Приложение в режиме навигатора
        Сверху отображается строка поиска как на главном экране приложения
    - do: Тап по поисковой строке
    - assert: |
        Открыт экран поиска
        Курсор в поисковой строке
        Отображаются рубричные саджесты и история поиска
    - do: Произвести поиск по любому запросу
    - assert: |
        Открыт экран результатов поиска

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Поиск по категории Яндекс.Заправки:
    - do: Включить симуляцию ведения `Debug-panel -> Routes -> Demo movement`
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
    - do: Закрыть Debug-Panel
    - do: Перезапустить приложение
    - do: Перейти в режим ведения по автомаршруту
    - do: Тап на поиск
    - assert: Открывается экран поиска
    - do: Тап "Еще" в категориях
    - assert: Открывается список категорий
    - do: Тап по категории Яндекс.Заправки
    - assert: На экране появляются пины заправок с оплатой картой
    - do: Тап по пину заправки
    - assert: Открывается миникарточка заправки (на iPad карточка открывается полностью)

    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Поиск по категории Яндекс.Заправки через компонент CommonMenuManager:
    - do: Включить симуляцию ведения `Debug-panel -> Routes -> Demo movement`
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2012.56.15.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager`
    - do: Перезапустить приложение для активации эксперимента
    - do: Перейти в режим ведения по автомаршруту
    - do: Тап на поиск
    - assert: Открывается экран поиска со списком категорий
    - do: Тап по категории Яндекс Заправки
    - assert: На экране появляются пины заправок
    - do: Тап по пину заправки
    - assert: Открывается миникарточка заправки (на iPad карточка открывается полностью)

    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Отсутствие категории Яндекс.Заправки в меню для пользователей за пределами РФ:
    - info: |
        Нет доступа к местоположению/Местоположение за пределами РФ
        Язык устройства любой, кроме русского
        Регион в настройках устройства - не Россия
    - do: Перезапустить приложение
    - do: Перейти в Меню
    - assert: |
        Отображается список категорий, доступных для настройки
        Категория Яндекс.Заправки в списке не отображается

    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Экран поиска с двумя рядами рубрик:
    - info: |
        У пользователя есть история поиска
        Включен эксперимент `new_search_screen с параметром TWO_ROWS`
        Выключен эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes->Demo movement)
        Открыт главный экран МЯК
    - do: Тап на таб "Поиск"
    - assert: |
        Открылся экран поиска
        Категории расположены в 2 ряда
        Под категориями отображется история поиска
    - do: Закрыть экран поиска
    - do: Построить произвольный маршрут
    - do: Тап на Лупу
    - do: Тап на кнопку вызова меню категорий
    - assert: |
        Открылся экран поиска
        Категории расположены в 2 ряда
        Под категориями отображается история поиска

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Экран поиска с двумя рядами рубрик через компонент CommonMenuManager:
    - info: У пользователя есть история поиска
    - do: Включить симуляцию движения `Debug-Panel -> Routes -> Demo movement`
    - do: |
        Включить эксперименты через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2014.31.20.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager&new_search_screen=TWO_ROWS`
    - do: Перезапустить приложение для активации эксперимента
    - do: Тап на таб "Поиск"
    - assert: |
        Открылся экран поиска
        Категории расположены в 2 ряда
        Под категориями отображается история поиска (если таковая есть)
    - do: Закрыть экран поиска
    - do: Построить произвольный маршрут
    - do: Тап на Лупу
    - do: Тап на кнопку вызова меню категорий
    - assert: |
        Открылся экран поиска
        Категории расположены в 2 ряда
        Под категориями отображется история поиска (если таковая есть)

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Экран поиска с 3 рядами рубрик:
    - info: |
        У пользователя есть история поиска
        Выключен эксперимент `Debug-Panel -> Experiments -> common_menu_manager`
        Включен эксперимент `new_search_screen с параметром THREE_ROWS`
        Включена симуляция движения (Меню -> Настройки -> Дебаг-панель -> Routes->Demo movement)
        Открыт главный экран МЯК
    - do: Тап на таб "Поиск"
    - assert: |
        Открылся экран поиска
        Категории расположены в 3 строки
        Под категориями отображется история поиска
    - do: Закрыть экран поиска
    - do: Построить произвольный маршрут
    - do: Тап на Лупу
    - do: Тап на кнопку вызова меню категорий
    - assert: |
        Открылся экран поиска
        Категории расположены в 3 ряда
        Под категориями отображется история поиска

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Экран поиска с 3 рядами рубрик через компонент CommonMenuManager:
    - info: У пользователя есть история поиска
    - do: Включить симуляцию движения `Debug-Panel -> Routes -> Demo movement`
    - do: |
        Включить эксперименты через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-17%20в%2014.38.57.png){title=QR-код}

        `yandexmaps://add_exp?common_menu_manager&new_search_screen=THREE_ROWS`
    - do: Перезапустить приложение для активации эксперимента
    - do: Тап на таб "Поиск"
    - assert: |
        Открылся экран поиска
        Категории расположены в 3 строки
        Под категориями отображется история поиска
    - do: Закрыть экран поиска
    - do: Построить произвольный маршрут
    - do: Тап на Лупу
    - do: Тап на кнопку вызова меню категорий
    - assert: |
        Открылся экран поиска
        Категории расположены в 3 ряда
        Под категориями отображется история поиска

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Закрытие экрана поиска, когда не показана клавиатура:
    - info: |
        Получен эксперимент swipe-to-close-search
        Отображается главный экран приложения
    - do: Тап на поисковую строку вверху экрана
    - assert: |
        Открылся экран поиска
        Вверху экрана отображается поле для ввода поискового запроса
        Отображается виртуальная клавиатура
    - do: Свайп вниз посередине экрана
    - assert: |
        Клавиатура закрылась
        Экран поиска продолжает отображаться
    - do: Свайп вниз посередине экрана
    - assert: |
        Экран поиска закрылся

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение экрана поиска при закрытии клавиатуры:
    - info: |
        Получен эксперимент swipe-to-close-search
        Отображается главный экран приложения
    - do: Тап на поисковую строку вверху экрана
    - assert: |
        Открылся экран поиска
        Вверху экрана отображается поле для ввода поискового запроса
        Отображается виртуальная клавиатура
    - do: Свайп вниз посередине экрана
    - assert: |
        Клавиатура закрылась
        Экран поиска продолжает отображаться
    - do: Свайп вниз по экрану поиска
    - assert: Отображается главный экран приложения

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Закрытие экрана поиска по категориям во время ведения, когда не показана клавиатура:
    - info: |
        Устройство в вертикальной ориентации
        Получен эксперимент swipe-to-close-search
        Включена симуляция ведения через Debug-panel -> Routes -> Demo movement
        Происходит ведение по произвольному авто-маршруту
    - do: Тап на саджест поиска
    - assert: |
        Открылся экран поиска по категориям
    - do: Свайп вниз посередине экрана
    - assert: |
        Экран поиска по категориям закрылся
        Продожлается ведение по авто-маршруту
    - do: Сменить ориентацию устройства
    - assert: Приложение отображается в горизонтальной ориентации
    - do: Тап на саджест поиска
    - assert: |
        Открылся экран поиска по категориям в горизонтальной ориентации
    - do: Свайп вниз посередине экрана поиска по категориям
    - assert: |
        Экран поиска закрылся
        Продожлается ведение по авто-маршруту

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение экрана поиска по категориям во время ведения при закрытии клавиатуры:
    - info: |
        Устройство в вертикальной ориентации
        Получен эксперимент swipe-to-close-search
        Выключен эксперимент no_toolbar_in_guidance (iOS)
        Включена симуляция ведения через Debug-panel -> Routes -> Demo movement
        Происходит ведение по произвольному авто-маршруту
    - do: Тап на таб поиск
    - assert: |
        Открылся экран поиска по категориям
        Вверху экрана отображается поле для ввода поискового запроса
    - do: Тап на поле поискового запроса
    - assert: Открылась виртуальная клавиатура
    - do: Свайп вниз посередине экрана
    - assert: |
        Клавиатура закрылась
        Экран поиска по категориям продолжает отображаться
        Ведение по маршруту продолжается
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Экран поиска по категориям отображается в горизонтальной ориентации
        [Android] Открылась виртуальная клавиатура
        [iOS] Витуальная клавиатура не отображается
    - do: Свайп вниз по экрану поиска по категориям
    - assert: |
        [Android]:
         - Клавиатура закрылась
         - Экран поиска по категориям продолжает отображаться
         - Ведение по маршруту продолжается
        [iOS]:
         - Экран поиска по категориям закрылся
         - Ведение по маршруту продолжается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение поисковых запросов при удалении истории поиска в браузере:
    - info: |
        Пользователь авторизован
        В браузерной версии карт пользователь авторизован тем же аккаунтом
        Отображается главный экран приложения
    - do: Тап на строку поиска
    - assert: Отображается пустая поисковая строка
    - do: Открыть браузерную версию карт
    - do: Выполнить поиск по произвольному запросу в браузере
    - assert: Отображаются результаты поиска по запросу
    - do: Перейти в моб.приложение карт
    - do: Выполнить поиск по произвольному запросу
    - assert: Отображаются результаты поиска по запросу
    - do: Подождать 1 минуту
    - do: Очистить строку поиска
    - do: Ввести первые три буквы запроса из браузера
    - assert: |
        Отображаются персональные подсказки ранее добавленного запроса
        Персональные подсказки отображаются на первых строках и выделены цветом
    - do: Очистить строку поиска
    - do: Ввести первые три буквы запроса из моб.приложения
    - assert: |
        Отображаются персональные подсказки ранее добавленного запроса
        Персональные подсказки отображаются на первых строках и выделены цветом
    - do: Очистить историю запросов на странице https://yandex.ru/tune/search
    - do: Подождать 1 минуту
    - do: Ввести первые три буквы запроса из браузера
    - assert: Персональные подсказки не отображаются
    - do: Очистить строку поиска
    - do: Ввести первые три буквы запроса из моб.приложения
    - assert: Персональные подсказки не отображаются

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Отображение экрана поиска при отсутствии подходящего под запрос результата:
    - info: |
        Открыт главный экран приложения
    - do: Тап на поисковую строку вверху экрана
    - assert: |
        Открылся экран поиска
        Вверху экрана отображается поле для ввода поискового запроса
        Отображается виртуальная клавиатура
    - do: Ввести в строку поиска несуществующий адрес
    - do: Тап на кнопку "Найти"
    - assert: |
        Отображается экран "Результаты поиска"
        На экране есть текст об отсутствии найденных данных
        На экране отображаются кнопки "Добавить организацию" и "Добавить объект"
    - do: Тап на кнопку "Добавить организацию"
    - assert: |
        Экран поиска закрылся
        Отображается экран добавления организации
    - do: Закрыть экран добавления организации тапом на крестик
    - assert: Отображается экран результатов поиска
    - do: Тап на кнопку  "Добавить объект"
    - assert: |
        Экран поиска закрылся
        Отображается экран добавления объекта

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors

  Отрывание таба поиск (вертикальная ориентация):
    - info: Устройство в вертикальной ориентации
    - do: |
        Android: Включить эксперименты `no_search_tab` и `new_search_screen_Two_rows`, перейдя по интенту:
        [collapsed-image](https://jing.yandex-team.ru/files/xnautilusx/Screenshot%202022-04-21%20at%2013.18.19.png){title=Скриншот}

        `yandexmaps://add_exp?no_search_tab&new_search_screen=two_rows`
        iOS: Включить эксперимент `no_search_tab`, перейдя по интенту:
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/no_search_tab.png){title=Скриншот}        

        `yandexmaps://add_exp?no_search_tab`
    - do: Перезагрузить приложение
    - assert: |
        Открывается приложение на главном экране
        Приложение в вертикальной ориентации
        В табах отсутствует поиск
    - do: Тап на поисковую строку
    - assert: Отображается экран поиска

    - platforms:
        - android
        - ios
    - tags:
        - assessors

  
  Отрывание таба поиск (горизонтальная ориентация):
    - info: Устройство в горизонтальной ориентации
    - do: |
        Android: Включить эксперименты `no_search_tab` и `new_search_screen_Two_rows`, перейдя по интенту:
        [collapsed-image](https://jing.yandex-team.ru/files/xnautilusx/Screenshot%202022-04-21%20at%2013.18.19.png){title=Скриншот}

        `yandexmaps://add_exp?no_search_tab&new_search_screen=two_rows`
        iOS: Включить эксперимент `no_search_tab`, перейдя по интенту:
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/no_search_tab.png){title=Скриншот}        

        `yandexmaps://add_exp?no_search_tab`
    - do: Перезагрузить приложение
    - assert: |
        Открывается приложение на главном экране
        Приложение в горизонтальной ориентации
        В табах отсутствует поиск
    - do: Тап на поисковую строку
    - assert: Отображается экран поиска

    - platforms:
        - android
        - ios
    - tags:
        - assessors

  
  Отрывание таба поиск (поворот экрана):
    - info: Устройство в вертикальной ориентации
    - do: |
        Android: Включить эксперименты `no_search_tab` и `new_search_screen_Two_rows`, перейдя по интенту:
        [collapsed-image](https://jing.yandex-team.ru/files/xnautilusx/Screenshot%202022-04-21%20at%2013.18.19.png){title=Скриншот}

        `yandexmaps://add_exp?no_search_tab&new_search_screen=two_rows`
        iOS: Включить эксперимент `no_search_tab`, перейдя по интенту:
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/no_search_tab.png){title=Скриншот}        

        `yandexmaps://add_exp?no_search_tab`
    - assert: |
        Открывается приложение на главном экране
        Приложение в вертикальной ориентации
        В табах отсутствует поиск
    - do: Поменять ориентацию устройства на горизонтальную
    - assert: |
        Главный экран приложения отображается в горизонтальной ориентации
        Таб поиск отсутствует
    - do: Поменять ориентацию устройства на вертикальную
    - assert: |
        Главный экран приложения отображается в вертикальной ориентации
        таб поиск отсутствует

    - platforms:
        - android
        - ios
    - tags:
        - assessors


  Открытие нового экрана поиска через таб Поиск:
    - info: Есть история поиска
    - do: |
        Прокинуть интент: [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/download.86019f5.png){title=QR-код}

        `yandexmaps://add_exp?new_search_screen_v2`
    - do: Перезапустить приложение
    - do: Тап на таб Поиск
    - assert: Открывается экран поиска
    - do: Тап на Историю
    - assert: Отображается история поиска

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Открытие нового экрана поиска в табе Навигатор:
    - info: Есть история поиска
    - do: |
        Прокинуть интент: [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/download.86019f5.png){title=QR-код}

        `yandexmaps://add_exp?new_search_screen_v2`
    - do: Перезапустить приложение
    - do: Тап на таб Навигатор
    - do: Тап на иконку поиска в виде лупы в таббаре
    - assert: Открывается экран поиска
    - do: Тап на Историю
    - assert: Отображается история поиска

    - platforms:
        - ios
    - tags:
        - assessors


  Открытие нового экрана поиска в табе Транспорт:
    - info: Есть история поиска
    - do: |
        Прокинуть интент: [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/download.86019f5.png){title=QR-код}

        `yandexmaps://add_exp?new_search_screen_v2`
    - do: Перезапустить приложение
    - do: Тап на таб Транспорт
    - do: Тап на иконку поиска в виде лупы в таббаре
    - assert: Открывается экран поиска
    - do: Тап на Историю
    - assert: Отображается история поиска

    - platforms:
        - ios
    - tags:
        - assessors


  Открытие нового экрана поиска в режиме ведения:
    - info: |
        Есть история поиска
        Включить симуляцию движения Debug Panel - Routes - Demo movement
    - do: |
        Прокинуть интент: [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/download.86019f5.png){title=QR-код}

        `yandexmaps://add_exp?new_search_screen_v2`
    - do: Перезапустить приложение
    - do: Построить автомаршрут и начать движение по нему
    - assert: Происходит движение по маршруту
    - do: Тап на иконку поиска в виде лупы в таббаре
    - assert: Открывается экран поиска
    - do: Тап на Историю
    - assert: Отображается история поиска

    - platforms:
        - ios
    - tags:
        - assessors

