components: search_around_widget
testing:
  - regress

specs:
  Отображение элементов виджета "Поиск поблизости" при жирном шрифте:
    - info: |
        Отображается рабочий стол устройства
    - do: Установить на устройстве жирный шрифт
    - do: |
        Добавить виджет Поиск поблизости:
        Виджет может называться MAPS/TRUNK и иметь иконки Поиск, Еда, АЗС, Банкоматы...
        Меню виджетов -> Изменить -> Настроить -> Выбрать виджет Поиск поблизости -> Готово
    - do: Открыть приложение
    - do: Совершить поиск по запросу "Центральная детская библиотека им. Данилова"
    - do: Вернуться на экран с виджетом
    - assert: |
        Данный запрос отображается в истории запросов виджета (запрос может отображаться не полностью с многоточием)
        Виджет отображается с учетом установленного шрифта

    - platforms:
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение элементов виджета "Поиск поблизости" при минимальном шрифте:
    - info: |
        Отображается рабочий стол устройства
    - do: Установить минимальный системный шрифт
    - do: |
        Добавить виджет Поиск поблизости:
        Меню виджетов -> Изменить -> Настроить -> Выбрать виджет Поиск поблизости -> Готово
    - do: Открыть приложение
    - do: Совершить поиск по запросу "Центральная детская библиотека им. Данилова"
    - do: Вернуться на экран с виджетом
    - assert: |
        Данный запрос отображается в истории запросов виджета
        Виджет отображается с учетом установленного размера системного шрифта

    - platforms:
        - ios
    - tags:
        - assessors


  Отображение элементов виджета "Поиск поблизости" при увеличенном на одно деление шрифте:
    - info: |
        Отображается рабочий стол устройства
    - do: Увеличить системный шрифт на одно деление
    - do: |
        Добавить виджет Поиск поблизости:
        Меню виджетов -> Изменить -> Настроить -> Выбрать виджет Поиск поблизости -> Готово
    - do: Открыть приложение
    - do: Совершить поиск по запросу "Центральная детская библиотека им. Данилова"
    - do: Вернуться на экран с виджетом
    - assert: |
        Виджет отображается с учетом установленного размера системного шрифта
        Отображается выполненный ранее поисковой запрос

    - platforms:
        - ios
    - tags:
        - assessors


  Отображение элементов виджета "Поиск поблизости" при увеличенном на максимум шрифте:
    - info: |
        Отображается рабочий стол устройства
    - do: Увеличить системный шрифт до максимума
    - do: |
        Добавить виджет Поиск поблизости:
        Меню виджетов -> Изменить -> Настроить -> Выбрать виджет Поиск поблизости -> Готово
    - do: Открыть приложение
    - do: Совершить поиск по запросу "Центральная детская библиотека им. Данилова"
    - do: Вернуться на экран с виджетом
    - assert: |
        Виджет отображается с учетом установленного размера системного шрифта
        Отображается выполненный ранее поисковой запрос

    - platforms:
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение элементов виджета "Поиск поблизости" при изменении шрифта с максимального до минимального:
    - info: |
        На устройстве установлен увеличенный максимально шрифт
        Отображается рабочий стол устройства
    - do: |
        Добавить виджет Поиск поблизости:
        Меню виджетов -> Изменить -> Настроить -> Выбрать виджет Поиск поблизости -> Готово
    - do: Открыть приложение
    - do: Совершить поиск по запросу "Центральная детская библиотека им. Данилова"
    - do: Вернуться на экран с виджетом
    - assert: Данный запрос отображается в истории запросов виджета
    - do: Изменить шрифт с максимального до минимального
    - do: Проверить виджет
    - assert: |
        Виджет отображается с учетом установленного размера системного шрифта
        Отображается выполненный ранее поисковой запрос

    - platforms:
        - ios
    - tags:
        - assessors


  Переход в основное приложение при тапе по элементам виджета Поиск поблизости:
    - info: |
        Приложение установлено
        Включено отображение виджета Поиск поблизости:
        Открыть экран виджетов на устройстве - Изменить - Настроить - Найти виджет Поиск поблизости - Добавить - Готово
        iPhone 55sSE Установить минимальный размер шрифта для отображения пяти элементов в виджете
    - do: Открыть экран с виджетом
    - assert: |
        Отображается виджет
        Виджет имеет несколько элементов в зависимость от девайса и размера шрифта
    - do: Тап по кнопке виджета Еда
    - assert: |
        Происходит переход в приложение
        Происходит поисковый запрос по запросу Еда
    - do: Свернуть приложение и открыть экран с виджетом
    - assert: |
        Отображается виджет
        Виджет имеет несколько элементов в зависимость от девайса и размера шрифта
    - do: Тап по кнопке виджета АЗС
    - assert: |
        Происходит переход в приложение
        Происходит поисковый запрос по категории АЗС
    - do: Свернуть приложение и открыть экран с виджетом
    - assert: |
        Отображается виджет
        Виджет имеет несколько элементов в зависимость от девайса и размера шрифта
    - do: Тап по кнопке виджета Банко...
    - assert: |
        Происходит переход в приложение
        Происходит поисковый запрос по категории Банкоматы
    - do: Свернуть приложение и открыть экран с виджетом
    - assert: |
        Отображается виджет
        Виджет имеет несколько элементов в зависимость от девайса и размера шрифта
    - do: Тап по кнопке виджета Бары
    - assert: |
        Происходит переход в приложение
        Происходит поисковый запрос по категории Бары
    - do: Свернуть приложение и открыть экран с виджетом
    - assert: |
        Отображается виджет
        Виджет имеет несколько элементов в зависимость от девайса и размера шрифта
    - do: Тап по кнопке виджета Поиск
    - assert: |
        Происходит переход в приложение Отображается экран поиска

    - platforms:
      - ios
    - testing:
      - acceptance_maps
      - lite_acceptance_maps
    - tags:
      - assessors
      - newbie

  Синхронизировать историю поиска с виджетом сразу после логина:
    - info: |
        Пользователь незалогинен
        Включен виджет Поиск поблизости
        В кейсе используется аккаунт для проверки синхронизации поиска. Убедительная просьба не производить поиск под данным аккаунтом и выйти из аккаунта после завершения проверки.
    - do: Открыть экран с виджетом
    - assert: |
        Отображаются элементы виджета Поиск поблизости
        История поиска в виджете пустая
    - do: Перейти в приложение
    - assert: Отображается главный экран приложения
    - do: Войти в личный кабинет под аккаунтом sinhrotest / Qwerty12
    - assert: Произошёл вход в аккаунт Открыт личный кабинет
    - do: Открыть экран с виджетом (тап по Больше в правом верхнем углу виджета, если история скрыта)
    - assert: |
        Отображаются элементы виджета Поиск поблизости
        В истории отображается два поисковых запроса
        Каждый запрос занимает одну строку Длинный поисковый запрос прописан не полностью.
        В конце запрос отображается многоточие
        В виджете отображается пустая строка для третьего поискового запроса
    - do: Выйти из аккауната в приложении
    - assert: Пользователь не залогинен
    - platforms:
      - ios
    - tags:
      - assessors

  Проверка локализации виджета Поиск поблизости:
    - info: |
        Приложение установлено
        Включено отображение виджета Поиск поблизости
        Установлен русский системный язык
    - do: Открыть экран с виджетом Поиск поблизости
    - assert: |
        Отображается значок поиска
        Отображаются значки категорий поиска
        Отображается кнопка меньше/больше
        Отображается история поиска (если активирована кнопка больше)
        Язык соответствует системному (русский)
    - do: Изменить системный язык на английский
    - assert: Системный язык изменен
    - do: Открыть экран с виджетами
    - assert: |
        Отображается значок поиска
        Отображаются значки категорий поиска
        Отображается кнопка меньше/больше
        Отображается история поиска (если активирована кнопка больше)
        Язык соответствует системному (английский)
    - do: Изменить системный язык на украинский
    - assert: Системный язык изменен
    - do: Открыть экран с виджетами
    - assert: |
        Отображается значок поиска
        Отображаются значки категорий поиска
        Отображается кнопка меньше/больше
        Отображается история поиска (если активирована кнопка больше)
        Язык соответствует системному (украинский)
    - do: Изменить системный язык на турецкий
    - assert:  Системный язык изменен
    - do: Открыть экран с виджетами
    - assert: |
        Отображается значок поиска
        Отображаются значки категорий поиска
        Отображается кнопка меньше/больше
        Отображается история поиска (если активирована кнопка больше)
        Язык соответствует системному (турецкий)
    - platforms:
      - ios
    - tags:
      - assessors

  Первый запуск через виджет Поиск поблизости:
    - info: |
        Приложение установлено
        Приложение не запускалось
        Добавлен виджет Поиск поблизости
    - do: Запустить приложение МЯК
    - assert: |
        Появился системный запрос на доступ приложения Яндекс.Карты к данным о местоположении устройства
        В запросе присутствуют кнопки- Отклонить и Разрешить
    - do: Тап на Разрешить
    - assert: |
        Системный запрос пропал
        Отображается экран онбординга
    - do: Закрыть экран онбординга
    - assert: Открыт главный экран приложения
    - do: Закрыть приложение и тап в виджете Поиск поблизости на поисковую категорию, например Еда
    - assert: |
        Запускаются Яндекс.Карты
        Отображается экран поиска с результатами по соответствующему запросу, например Где поесть
    - platforms:
      - ios
    - tags:
      - assessors

  Первый запуск через пробочный виджет:
    - info: |
        Приложение установлено
        Приложение не запускалось
        Добавлен виджет Яндекс.Карты (с пробками)
    - do: Запустить приложение МЯК
    - assert: |
        Появился системный запрос на доступ приложения Яндекс.Карты к данным о местоположении устройства
        В запросе присутствуют кнопки - Отклонить и Разрешить
    - do: Тап на Разрешить
    - assert: |
        Системный запрос пропал
        Отображается экран онбординга
    - do: Закрыть экран онбординга
    - assert:  Открыт главный экран приложения
    - do: Закрыть приложение и открыть экран с виджетами
    - assert: |
        Отображается виджет с информацией о пробках (если нет - добавить через системное меню)
        Временные отметки прогноза пробок соответствуют текущему времени
    - do: Тап в виджете на иконку светофора
    - assert: |
        Запускаются Яндекс.Карты
        Отображается карта нас спане с ММП, пробки включены, отображаются цветные линии пробок
        Балл пробок совпадает с баллом, отображенным в виджете

    - platforms:
      - ios
    - tags:
      - assessors
    - testing:
      - acceptance_maps

  Удаление виджета:
    - info: |
        Приложение установлено
        Открыт экран виджетов
        На экран виджетов добавлен виджет поиска
    - do: Удалить виджет поиска поблизости
    - assert: На экране виджетов не отображается виджет поиска поблизости
    - do: Вернуться в приложение и совершить поиск
    - assert: Открывается экран результатов поиска
    - do: Вернуться на панель виджетов и добавить виджет поиска поблизости
    - assert: Отображается виджет поиска поблизости
    - do: Тап на категорию из виджета поиска
    - assert: |
        Открылись карты с результатами поиска по категории

    - platforms:
        - ios
    - testing:
        - lite_acceptance_maps
    - tags:
        - assessors
        - newbie

