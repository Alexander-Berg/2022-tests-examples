components: indoor
testing:
  - regress
tags:
  - assessors

aliases:
  - &indoor
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Установить 17 зум

specs:
  Отображение indoor-контролла на главном экране:
    - info: Девайс в вертикальной ориентации
    - *indoor
    - assert: |
        Отображается indoor-контролл
        Этажи отображаются от большего к меньшему
        По умолчанию выбран первый этаж здания
    - do: Сменить ориентацию девайса
    - assert: |
        Девайс в горизонтальной ориентации
        Контрол indoor продолжает отображаться слева под строкой поиска

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - newbie
        - refactor_ready


  Отображение indoor-контролла на главном экране при смене спана карты:
    - *indoor
    - assert: |
        Отображается indoor-контролл
        Этажи отображаются от большего к меньшему
        По умолчанию выбран первый этаж здания
    - do: Свайпом сменить спан карты так, чтобы организация с indoor-навигацией не отображалась на карте
    - assert: indoor-контролл не отображается
    - do: Свайпом сменить спан карты так, чтобы организация с indoor-навигацией отображалась на карте
    - assert: Отображается indoor-контролл

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - newbie
        - refactor_ready


  Отображение indoor-схемы на главном экране:
    - *indoor
    - assert: |
        Отображается indoor-схема
        Отображаются коридоры и внутренняя расстановка объектов
        Присутствуют пины организаций
    - do: Свайпом сменить спан карты так, чтобы организация с indoor-навигацией не отображалась на карте
    - assert: indoor-схема не отображается
    - do: Свайпом сменить спан карты так, чтобы организация с indoor-навигацией отображалась на карте
    - assert: Отображается indoor-схема


    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - newbie
        - refactor_ready


  Отображение indoor-контрола:
    - do: Установить спан на ТЦ с indoor-схемой (Москва ГУМ, Москва Вегас, Москва тц Охотный ряд и т.п.)
    - do: Установить 16 зум
    - assert: Контрол indoor не отображаются
    - do: Установить 17+ зум
    - assert: Контрол indoor отображаются
    - do: Сместить спан карты, чтобы ТЦ был за границами спана
    - assert: Контрол indoor не отображается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение indoor-схемы:
    - do: Установить спан на ТЦ с indoor-схемой (Москва ГУМ, Москва Вегас, Москва тц Охотный ряд и т.п.)
    - do: Установить 16 зум
    - assert: |
        Схема indoor не отображаются
    - do: Установить 17 зум
    - assert: |
        Схема indoor отображаются
        Отображаются пины организаций внутри здания
    - do: Установить 18+ зум
    - assert: |
        Схема indoor отображаются
        Отображаются пины организаций внутри здания
        Отображаются значки лестниц, эскалаторов, лифтов, туалетов и т.д.

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Переключение этажа в indoor-контролле:
    - *indoor
    - assert: |
        Отображается indoor-контролл
        Отображаются этажи организации от большего к меньшему
    - do: Тап на любой этаж
    - assert: |
        Indoor-схема соответствует выбранному этажу
        Выбранный этаж выделен в indoor-контролле

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - newbie
        - refactor_ready


  Переключение этажа в indoor-контролле при открытой карточке организации:
    - *indoor
    - assert: |
        Отображается indoor-контролл
        Отображаются этажи организации от большего к меньшему
    - do: Тап на пин любой организации вне организации с indoor-навигацией
    - assert: |
        Отображается мини-карточка организации
        Пин организации активен
        Слой indoor-навигации отображается
    - do: Тап на любой другой этаж
    - assert: |
        Отображается мини-карточка организации
        Пин организации активен
        Indoor-схема соответствует выбранному этажу
        Выбранный этаж выделен в indoor-контролле

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - newbie
        - refactor_ready


  Отображение indoor-слоя в ведении по автомаршруту:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: Включить симуляцию движения Demo movement (Меню -> Настройки -> Кнопка открытия дебаг-панели -> Routes)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Построить любой автомаршрут рядом с организацией с indoor-навигацией
    - assert: Отображается экран выбора автомаршрута
    - do: Установить 17 зум
    - assert: |
        Отображается indoor-схема этажей
        Контролл indoor не отображается
    - do: Тап на Поехали
    - assert: Отображается экран ведения по автомаршруту
    - do: Вернуться к организации с indoor-навигацией
    - do: Установить 17+ зум
    - assert: |
        Отображается indoor-схема этажей
        Контролл indoor не отображается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - refactor_ready


  Отображение indoor-слоя в ведении по пешеходному маршруту:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: Включить симуляцию движения Demo movement (Меню -> Настройки -> Кнопка открытия дебаг-панели -> Routes)
    - do: Закрыть дебаг-панель
    - do: Перезапустить приложение
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Построить любой пешеходный маршрут рядом с организацией с indoor-навигацией
    - assert: Отображается экран выбора пешеходного маршрута
    - do: Установить 17+ зум
    - assert: |
        Отображается indoor-схема этажей
        Контролл indoor не отображается
    - do: Тап на Начать
    - assert: |
        Отображается экран ведения по пешеходному маршруту
        Отображается indoor-слой
        Присутствует indoor-схема этажей
        Контролл indoor не отображается

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - refactor_ready


  Отображение indoor-слоя в ведении по веломаршруту:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Построить любой веломаршрут рядом с организацией с indoor-навигацией
    - assert: Отображается экран выбора веломаршрута
    - do: Установить 17 зум
    - assert: |
        Отображается indoor-схема этажей
        Контролл indoor не отображается
    - do: Тап на Поехали
    - assert: |
        Отображается экран ведения по веломаршруту
        Отображается indoor-слой
        Присутствует indoor-схема этажей
        Контролл indoor не отображается

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - refactor_ready


  Отображение indoor-слоя в ведении по самокатному маршруту:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Построить любой самокатный маршрут рядом с организацией с indoor-навигацией
    - assert: Отображается экран выбора самокатного маршрута
    - do: Установить 17 зум
    - assert: |
        Отображается indoor-схема этажей
        Контролл indoor не отображается
    - do: Тап на Поехали
    - assert: |
        Отображается экран ведения по самокатному маршруту
        Отображается indoor-слой
        Присутствует indoor-схема этажей
        Контролл indoor не отображается

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - refactor_ready


  Отображение indoor-слоя в ведении по ОТ-маршруту:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Построить любой ОТ-маршрут рядом с организацией с indoor-навигацией
    - assert: Отображается экран выбора ОТ-маршрута
    - do: Тап на Посмотреть на карте в любом сниппете
    - assert: Отображается экран деталей ОТ-маршрута
    - do: Свернуть детали маршрута
    - do: Установить 17 зум
    - assert: |
        Отображается indoor-схема этажей
        Контролл indoor не отображается
    - do: Тап на Поехали
    - assert: |
        Отображается экран ведения по ОТ-маршруту
        Отображается indoor-слой
        Присутствует indoor-схема этажей
        Контролл indoor не отображается

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - refactor_ready


  Отображение indoor-слоя при движении без ведения по маршруту:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: |
        Запустить симуляцию движения без маршрута с помощью:
        (Android) Mock Location / (iOS) Меню -> Настройки -> дебаг-панель -> Routes -> Enter your route
        Движение симулировать через организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - dо: Установить 17 зум
    - assert: |
        Происходит симуляция движения рядом с организацией с indoor-навигацией
        Слой indoor отображается
        Присутствует indoor-схема этажей
        Контролл indoor отображается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - refactor_ready


  Разворачивание карточки организации из indoor-схемы в вертикальной ориентации:
    - info: Устройство в вертикальной ориентации
    - *indoor
    - assert: Отображается indoor-слой
    - do: Тап на любой пин организации в indoor-навигации
    - assert: |
        Отображается мини-карточка организации
        Пин организации активен
        Отображается контролл indoor-навигации
    - do: Постепенно разворачивать карточку организации до полной
    - assert: |
        Контролл indoor-навигации постепенно скрывается
        Отображается полная карточка организации

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - refactor_ready


  Сворачивание карточки организации из indoor-схемы в горизонтальной ориентации:
    - info: Устройство в горизонтальной ориентации
    - *indoor
    - assert: Отображается indoor-слой
    - do: Тап на любой пин организации в indoor-навигации
    - assert: |
        Отображается полная карточка организации в горизонтальной ориентации
        Пин организации активен
        Контролл indoor-навигации отображается справа от карточки
    - do: Постепенно сворачивать карточку организации до микро состояния
    - assert: |
        Отображается карточка организации в микро состоянии
        Слой indoor переместился в левую часть экрана

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - refactor_ready


  Автоматический выбор этажа на котором находится организация:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения на спане Москвы
    - do: Тап на строку поиска
    - do: Ввести запрос "Стокманн, Ходынский бульвар, 4"
    - do: Тап на Найти
    - do: Установить 17 зум
    - assert: |
        Отображается активный пин организации
        Открыта мини-карточка организации
        Отображается контролл indoor-навигации
        Выбран этаж здания соответствующий этажу искомой организации, в данном случае 3

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - refactor_ready


  Отсутствие indoor-схемы на карте - тип карты спутник:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: Тап на контролл слоев
    - do: Выбрать тип карты спутник
    - assert: Установлен тип карты спутник
    - do: Закрыть меню слоев
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Установить 17 зум
    - assert:  |
        Отображается карта в виде снимков со спутника
        indoor-схема не отображается
    - do: Изменить ориентацию устройства
    - assert: |
        Отображается карта в виде снимков со спутника
        indoor-схема не отображается
    - do: Призумить карту
    - do: Отзумить карту
    - assert: indoor-схема не отображается

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - refactor_ready


  Отсутствие indoor-схемы на карте - тип карты гибрид:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: Тап на контролл слоев
    - do: Выбрать тип карты гибрид
    - assert: Установлен тип карты гибрид
    - do: Закрыть меню слоев
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Установить 17 зум
    - assert:  |
        Отображается карта в виде снимков со спутника вместе со слоем дорог и пинами организаций
        indoor-схема не отображается
    - do: Изменить ориентацию устройства
    - assert: |
        Отображается карта в виде снимков со спутника вместе со слоем дорог и пинами организаций
        indoor-схема не отображается
    - do: Призумить карту
    - do: Отзумить карту
    - assert: indoor-схема не отображается

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - refactor_ready


  Отсутствие контролла indoor-навигации в режиме фридрайва:
    - info: |
        Самый ближний зум 21
        Отображается главный экран приложения
    - do: Тап на таб Навигатор
    - assert: Включен режим навигатора
    - do: |
        Запустить симуляцию движения без маршрута с помощью:
        (Android) Mock Location / (iOS) Меню -> Настройки -> дебаг-панель -> Routes -> Enter your route
        Движение симулировать через организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Установить 16 зум
    - assert: |
        indoor-схема не отображается
        Контрол indoor не отображается
    - do: Установить 17+ зум
    - assert: |
        Отображается схема этажей
        Контролл indoor-навигации не отображается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - refactor_ready


  Открытие indoor-слоя через кнопку отображения входов в карточке организации:
    - info: |
        Отображается главный экран приложения
    - do: |
        Открыть полную карточку c indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - assert: |
        Отображается полная карточка организации
        Присутствует кнопка (iOS) Входы и схема помещения / (Android) Показать входы
    - do: Тап на (iOS) Входы и схема помещения / (Android) Показать входы
    - assert: |
        Происходит плавный переход к 17+ зуму
        Отображаются входы организации
        Отображается контролл indoor и indoor-схема
    - do: Закрыть карточку организации
    - assert: |
        Входы организации исчезли
        Отображается контролл indoor и indoor-схема

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - use_map
        - refactor_ready


  Отображение indoor-схемы на экране результатов поиска:
    - info: |
        Самый ближний 21 зум
        Отображается главный экран приложения
        Включить/выключить отображение зума можно через `Настройки -> Debug Panel -> Environment -> Mapkit debug info`
    - do: Выполнить поиск по любой категории
    - do: Свернуть экран результатов поиска
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Установить 16 зум
    - assert: |
        Открыт экран результатов поиска в свернутом состоянии
        Схема indoor не отображается
    - do: Установить 17 зум
    - assert: |
        Открыт экран результатов поиска в свернутом состоянии
        Схема indoor отображается
        Отображаются пины организаций внутри здания
    - do: Установить 18+ зум
    - assert: |
        Открыт экран результатов поиска в свернутом состоянии
        Схема indoor отображается
        Отображаются пины организаций внутри здания
        Отображаются значки лестниц, эскалаторов, лифтов, туалетов и т.д.

    - platforms:
        - ios
        - android
    - tags:
        - refactor_ready
    - testing:
        - acceptance_maps


  Отображение indoor-контролла на экране результатов поиска:
    - info: |
        Самый ближний 21 зум
        Отображается главный экран приложения
        Девайс в вертикальной ориентации
    - do: Выполнить поиск по любой категории
    - do: Сменить ориентацию девайса
    - assert: |
        Девайс в горизонтальной ориентации
        Открыт экран результатов поиска по любой категории
    - do: |
        Переместить спан карты на организацию с indoor-навигацией
        Например на ЦУМ:
        [collapsed-image](https://jing.yandex-team.ru/files/linakolpakova/цум.png){title=QR-код}

        `https://yandex.ru/maps/org/1334551857`
    - do: Установить 16 зум
    - assert: |
        Контролл indoor не отображается
    - do: Установить 17+ зум
    - assert: |
        Контролл indoor отображается
    - do: Развернуть экран поиска
    - assert: |
        Контролл indoor отображается справа от шторы поиска

    - platforms:
        - ios
        - android
    - tags:
        - refactor_ready
    - testing:
        - acceptance_maps


  Переключение на этаж из геопозиции - пользователь находится в здании с indoor-навигацией:
    - info: |
        Проверка в реальных условиях
        Самый ближний зум 21
        Пользователь находится на одном из этажей в здании с indoor-навигацией
        Отображается главный экран приложения
    - do: Установить 17 зум
    - do: Тап по не выбранному этажу в indoor-контролле
    - assert: |
        В indoor-контролле стал выделенным выбранный этаж
        На спане карты, отображаются организации для выбранного этажа
    - do: Изменить ориентацию устройства
    - assert: |
        Выбранный этаж в indoor-контролле не изменился
        Отображаются организации соответствующие выбранному этажу
    - do: Просвайпать карту так, чтоб здание indoor-навигацией не отображалось
    - do: Свайпая карту, вернуться к зданию indoor-навигацией
    - assert: Отображается выбранный ранее этаж indoor-контролле
    - do: Тап по кнопке ММП
    - assert: |
        Этаж в indoor-контролле изменился и соответствует текущему этажу пользователя
        Отображаются организации соответствующие выбранному этажу
    - do: Изменить ориентацию устройства
    - assert: |
        Выбранный этаж в indoor-контролле не изменился
        Отображаются организации соответствующие выбранному этажу
    - do: Просвайпать карту так, чтоб здание indoor-навигацией не отображалось
    - do: Свайпая карту, вернуться к зданию indoor-навигацией
    - assert: Выбранный этаж в indoor-контролле не изменился

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - real_actions
        - refactor_ready


  Переключение на этаж из геопозиции - пользователь изначально находится вне здания с indoor-навигацией:
    - info: |
        Проверка в реальных условиях
        Пользователь находится рядом со зданией с indoor-навигацией
        Отображается главный экран приложения
    - do: Зайти в здание с indoor-навигацией
    - assert: В indoor-контролле выбран этаж, на котором находится пользователь
    - do: Подняться/опустить на этаж
    - assert: Выбранный этаж в indoor-контролле изменился в соответствии с текущим местоположением пользователя
    - do: Тап на любой этаж в indoor-контролле
    - assert: Выбранный этаж в indoor-контролле изменился в соответствии с выбором пользователя
    - do: Тап по кнопке ММП
    - assert: Выбранный этаж в indoor-контролле изменился в соответствии с текущим местоположением пользователя

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - real_actions
        - refactor_ready


  Переключение на этаж из геопозиции при открытой карточки организации находящейся на другом этаже:
    - info: |
        Проверка в реальных условиях
        Пользователь находится на одном из этажей в здании с indoor-навигацией
        Отображается главный экран приложения
        Установлен 17 зум (самый ближний 21)
    - do: Тап на любой этаж в indoor-контролле
    - do: Тап по пину организации находящейся на этом этаже
    - assert: |
        В indoor-контролле стал выделенным этаж, соответствующий этажу выбранной организации
        Отображаются организации для выбранного этажа
    - do: Изменить ориентацию устройства
    - assert: |
        Выбранный этаж в indoor-контролле не изменился
        Отображаются организации соответствующие выбранному этажу
    - do: Просвайпать карту так, чтоб здание indoor-навигацией не отображалось
    - do: Свайпая карту, вернуться к зданию indoor-навигацией
    - assert: Отображается выбранный ранее этаж в indoor-контролле
    - do: Тап по кнопке ММП
    - assert: |
        Выбранный этаж в indoor-контролле изменился на текущий этаж пользователя
        Отображаются организации соответствующие выбранному этажу
    - do: Изменить ориентацию устройства
    - assert: |
        Этаж в indoor-контролле не изменился
        Отображаются организации соответствующие выбранному этажу
    - do: Просвайпать карту так, чтоб здание indoor-навигацией не отображалось
    - do: Свайпая карту, вернуться к зданию indoor-навигацией
    - assert: Выбранный этаж в indoor-контролле не изменился

    - platforms:
        - ios
        - android
    - tags:
        - use_map
        - real_actions
        - refactor_ready


  Открытие карточки организации из indoor-схемы:
    - do: Установить спан на ТЦ с indoor-схемой (Москва ГУМ, Москва Вегас, Москва тц Охотный ряд и т.п.)
    - do: Установить 16 зум
    - assert: |
        Схема indoor не отображаются
    - do: Установить 18+ зум
    - assert: |
        Схема indoor отображаются
        Отображаются пины организаций внутри здания
        Отображаются значки лестниц, эскалаторов, лифтов, туалетов и т.д.
    - do: Тап на пин любой организации на схеме
    - assert: |
        Открывается миникарточка организации

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  Отображение indoor-схемы в оффлайне:
    - info: |
        Приложение запускалось с выгрузкой из памяти более 3ех раз
        Девайс подключен к интернету
        Открыт главный экран приложения
    - do: Включить Mapkit debug info (Настройки -> Debug Panel -> Environment -> Mapkit debug info)
    - do: Убедиться что включен vmap3 (Настройки -> Debug Panel -> Experiments -> vmap3
    - do: Тап "Меню"
    - do: Тап "Загрузка карт"
    - do: Скачать кэш "Санкт-Петербурга"
    - do: Включить авиарежим
    - do: Открыть главный экран приложения с картой Санкт-Петербурга
    - do: Тап по строке поиска
    - assert: Открылся экран поиска
    - do: Произвести поиск "ТЦ Галерея"
    - do: Тап найти
    - assert: |
        На спане - активный пин торгового центра
        Открылась карточка Торгового центра
    - do: Установить 17 зум
    - assert: |
        Схема indoor отображаются
        Отображаются пины организаций внутри здания
    - do: Установить 18+ зум
    - assert: |
        Схема indoor отображаются
        Отображаются пины организаций внутри здания
        Отображаются значки лестниц, эскалаторов, лифтов, туалетов
    - do: Тап на любой этаж в indoor-контролле, отличный от активного "1" этажа
    - assert: |
        Происходит переключение на другой этаж
        Выбранный этаж в indoor-контролле изменился в соответствии с выбором пользователя

    - integration_run:
        - mapkit
    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
        - mapkit_ready
        - newbie


  Открытие карточки организации из indoor-схемы в оффлайне:
    - info: |
          Приложение запускалось с выгрузкой из памяти более 3ех раз
          Девайс подключен к интернету
          Открыт главный экран приложения
    - do: Включить Mapkit debug info (Настройки -> Debug Panel -> Environment -> Mapkit debug info)
    - do: Убедиться что включен vmap3 (Настройки ->  Debug Panel -> Experiments -> vmap3
    - do: Вернуться в "Меню"
    - do: Тап "Загрузка карт"
    - do: Скачать кэш "Санкт-Петербурга"
    - do: Вернуться в "Меню"
    - do: Включить авиарежим
    - do: Открыть главный экран приложения с картой Санкт-Петербурга
    - do: Тап по строке поиска
    - assert: Открылся экран поиска
    - do: Произвести поиск "ТЦ Галерея"
    - do: Тап найти
    - assert: |
        На спане - активный пин торгового центра
        Открылась карточка Торгового центра
    - do: Закрыть карточку ТЦ
    - do: Установить 18+ зум
    - do: Тап на любой этаж в indoor-контролле, отличный от активного "1" этажа
    - assert: |
        Происходит переключение на другой этаж
        Выбранный этаж в indoor-контролле изменился в соответствии с выбором пользователя
    - do: Тап на пин любой организации на схеме
    - assert: |
        Открывается карточка организации

    - integration_run:
        - mapkit
    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map
        - mapkit_ready
        - newbie

