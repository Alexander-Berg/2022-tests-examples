testing:
  - regress
components: gas_payment
integration_run:
  - tanker_sdk
  - payment_sdk
import-steps:
  - ../../features/mobile-app/steps/common.yml

aliases:
  - &preconditions_gas_starts
    - do: Включить тестовое окружение заправок (Debug Panel -> Environment -> Refuel environment -> TESTING)
    - do: (iOS) Тап Debug Panel -> Various -> Load refuel stations for current location
    - do: (iOS) Тап чекбокс "Установить геопозицию на заправку", выбрать АЗС на Красной площади на Лобном месте
    - do: (Android) Подменить местоположение с помощью MockLocations на Лобное место, Москва (55.753211, 37.622504)
    - do: (Android) Произвести поиск по категории заправок (Тап таб "Поиск" -> Яндекс Заправки)
    - do: (Android) Тап на любой пин "Яндекс Заправок"
    - do: (Android) Тап "Заправиться"
    - assert: |
        Отображается экран выбора колонки

  - &заправки_сбп
    - do: Включить тестовое окружение заправок (Debug Panel -> Environment -> Refuel environment -> SBP)
    - do: (iOS) Тап Debug Panel -> Various -> Load refuel stations for current location
    - do: (iOS) Тап чекбокс "Установить геопозицию на заправку", выбрать АЗС на Красной площади на Лобном месте
    - do: (Android) Подменить местоположение с помощью MockLocations на Лобное место, Москва (55.753211, 37.622504)
    - do: (Android) Произвести поиск по категории заправок (Тап таб "Поиск" -> Яндекс Заправки)
    - do: (Android) Тап на любой пин "Яндекс Заправок"
    - do: (Android) Тап "Заправиться"
    - assert: |
        Отображается экран выбора колонки

specs:
  Заправка автомобиля в приложении:
    - preconditions: |
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку
    - do: |
        Перейти к процесссу заправки в карточке
        На Android любая заправка
        На iOS заправка на Красной площади в Москве
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке (кроме 6-ой)
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Открывается экран Способ оплаты
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап на Подтвердить
    - assert: |
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением
        Открывается экран с состоянием процесса заправки
        По окончании процесса заправки открывается экран Оцените обслуживание
    - do: Тап на Закрыть
    - assert: Процесс заправки закрылся

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - tags:
        - use_map


  Добавление карты оплаты в карточке заправки:
    - preconditions: |
        Пользователь не авторизован
        У пользователя не добавлена карта оплаты
    - do: Тап на Заправиться в карточке АЗС с оплатой картой
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Тап на Оплатить
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert: Отображается экран оплаты с чекаутом
    - do: Тап на Добавить банковскую карту
    - assert: Отображается экран добавления карты
    - do: Ввести невалидные данные и тап на Добавить
    - assert: Отображается экран ошибки
    - do: Ввести корректные данные и тап на Добавить
    - assert: |
        Карта добавлена
        Может произойти тестовое списание средств c добавленной карты

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Добавление карты оплаты через настройки приложения:
    - preconditions: |
        Пользователь авторизован
        Открыт экран Меню > Яндекс.Заправки
    - do: Тап на Способы оплаты
    - assert: Отображается экран Способ оплаты
    - do: Тап на Добавить банковскую карту
    - assert: Отображается экран добавления карты
    - do: Ввести невалидные данные
    - assert: Кнопка "Добавить" не активна
    - do: Ввести корректные данные
    - do: Тап на Добавить
    - assert: |
        Карта добавлена
        Может произойти тестовое списание средств c добавленной карты

    - tags:
        - assessors
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - platforms:
        - ios
        - android


  Отмена оплаты в карточке заправки:
    - preconditions: |
        Пользователь авторизован
        Отображается главный экран приложения
    - do: |
        Debug Panel -> Environment -> Refuel environment -> testing
    - do: (IOS) Debug Panel -> Various -> Load refuel stations for current location и установить геопозицию на заправку
    - do: |
        Перейти к процесссу заправки в карточке
        На Android любая заправка
        На iOS заправка на Красной площади в Москве
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по 4 колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Отображается экран оплаты с чекаутом
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап на Подтвердить
    - assert: |
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением
        Открывается экран с состоянием процесса заправки
        Присутствует кнопка Отменить
    - do: Тап на Отменить
    - assert: |
        Отображается экран Заказ отменен
        Также может отображаться сообщение с кодом ошибки и причиной отмены заказа

    - tags:
        - assessors
        - use_map
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Повторная оплата заправки:
    - preconditions: |
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку
    - do: |
        Перейти к процесссу заправки в карточке
        На Android любая заправка
        На iOS заправка на Красной площади в Москве
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по 6 колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Отображается экран оплаты с чекаутом
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап на Подтвердить
    - assert: |
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением
        Открывается экран с состоянием процесса заправки
        Присутствует кнопка Отменить
    - do: Дождаться оплаты
    - assert: |
        Отображается экран "Ваша оплата за топливо вернется..."
        Отображаются кнопки Повторить и Поддержка
    - do: Тап на Повторить
    - assert: Открывается карточка АЗС на экране выбора колонки

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Оплата Apple Pay в Заправках:
    - preconditions: |
        Пользователь авторизован
        Добавлена карта для оплаты Apple Pay
        Проверка производится только на сборке Testflight или Store
        ММП около АЗС с оплатой картой
    - do: Перейти к процесссу заправки в карточке
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Отображается экран оплаты с чекаутом
    - do: Выбрать Apple Pay
    - do: Тап на Подтвердить
    - assert: |
        Отображается блок подтверждения оплаты
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением
    - do: Подтвердить оплату
    - assert: |
        Происходит оплата заказа и списание средств
        Может отображаться ошибка оплаты

    - platforms:
        - ios
    - tags:
        - use_map


  Выбор карты оплаты в карточке заправки:
    - preconditions: |
        Пользователь авторизован
        Добавлено несколько карт оплаты
    - do: Тап на Заправиться в карточке АЗС с оплатой картой
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива
    - do: Тап по любому топливу
    - assert: Открывается экран выбора количества топлива
    - do: Тап на Оплатить
    - assert: Отображается экран оплаты с чекаутом
    - do: Тап на любую другую карту из списка
    - assert: Выбранная карта стала активной
    - do: Открыть экран Меню > Яндекс.Заправки > Способ оплаты
    - assert: |
        Открыт экран Способ оплаты
        Активна ранее выбранная карта

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Выбор карты оплаты в меню Яндекс.Заправки:
    - preconditions: |
        Пользователь авторизован
        Добавлено несколько карт оплаты
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        Открыт экран Меню > Яндекс.Заправки > Способ оплаты
    - do: Тап на любую другую карту из списка
    - assert: Выбранная карта стала активной
    - do: |
        Открыть карточку АЗС с оплатой в картах:
        Android - любая карточка
        Для iOS найти тестовую заправку с помощью:
        Debug panel > Various > Load refuel stations for current location
    - assert: Отображается карточка АЗС
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид топлива
    - assert: Открывается экран с выбранным видом топлива и кнопкой Оплатить
    - do: Тап на Оплатить
    - assert: |
        Открывается штора выбора заправщика и способа оплаты
        Активна ранее выбранная карта

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Удаление карт оплаты в настройках Яндекс.Заправки:
    - preconditions: |
        Пользователь авторизован
        Добавлено несколько реальных карт оплаты(оплата не требуется)
        Включена тычка Debug Panel -> Environment -> Refuel environment -> PROD
        Открыт экран Меню > Яндекс.Заправки > Способ оплаты
    - do: Тап Править
    - assert: Открыт экран Способ оплаты в режиме редактирования
    - do: Удалить выбранную в данный момент карту
    - assert: Выбранной карты больше нет в списке
    - do: Удалить все карты, чтобы осталась только одна
    - assert: В списке осталась одна активная карта
    - do: |
        Открыть карточку АЗС с оплатой в картах:
        Android - любая карточка
        Для iOS найти тестовую заправку с помощью:
        Debug panel > Various > Load refuel stations for current location
    - assert: Отображается карточка АЗС
    - do: Тап на Заправиться
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива и способа оплаты
    - do: Тап на Способ оплаты
    - assert: |
        Открыт экран Способ оплаты
        Список карт оплаты и активная карта соответствует списку в настройках

    - tags:
        - assessors
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - platforms:
        - ios
        - android


  Удаление всех карт оплаты в настройках Яндекс.Заправки:
    - preconditions: |
        Пользователь авторизован.
        Добавлено несколько реальных карт оплаты
        Включена тычка Debug Panel -> Environment -> Refuel environment -> PROD
        Открыт экран Меню > Яндекс.Заправки > Способ оплаты
    - do: Тап Править
    - assert: Открыт экран Способ оплаты в режиме редактирования
    - do: Удалить все карты
    - assert: |
        В списке нет карт оплаты
        Отображается кнопка Добавить банковскую карту
    - do: Открыть любую карточку Яндекс Заправок
    - assert: Отображается карточка АЗС
    - do: Тап на Заправиться
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива и способа оплаты
    - do: Тап на Способ оплаты
    - assert: |
        В списке нет карт оплаты
        Отображается кнопка Добавить банковскую карту

    - tags:
        - assessors
    - platforms:
        - ios
        - android


  Восстановление сессии оплаты в карточке АЗС:
    - preconditions: |
        Пользователь авторизован
        ММП около АЗС с оплатой картой
        В способах оплаты присутствует карта
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (iOS) Тап Various -> Load refuel stations for current location, выбрать АЗС на Красной площади
        (Android) Выбрать любую АЗС с оплатой в картах и установить на нее местоположение при помощи Mock Locations
    - do: Перейти к процесссу заправки в карточке
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по четвёртой колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Открывается экран Способ оплаты
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап на Подтвердить
    - assert: |
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением
        Открывается экран с состоянием процесса заправки
        Присутствует кнопка Отменить
    - do: Перезапустить приложение
    - assert: |
        Приложение перезапущено
        Отображается главный экран приложения
    - do: Тап на Заправиться в карточке АЗС с оплатой картой
    - assert: |
        На Android возобновляется процесс оплаты
        На iOS процесс оплаты возобновиться при выобре ранее выбранной колонки

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Отправка чаевых после заправки без указания суммы чаевых и рейтинга:
    - preconditions: |
        Подключиться ко внутренней сети через Charles
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку
    - do: |
        Перейти к процесссу заправки в карточке
        На Android любая заправка
        На iOS заправка на Красной площади в Москве
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Открывается экран Способ оплаты
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап на Подтвердить
    - assert: |
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением
        Открывается экран с состоянием процесса заправки
        По окончании процесса заправки открывается экран Оцените обслуживание
        На экране Оцените обслуживание отображаются блоки рейтинга, чаевых, данных чека, со всеми заполненными полями
    - do: Закрыть экран Оценить обсуживание (Ничего не проставлять в форме)
    - assert: |
        Закрылся экран чека
        Отображается спан карты с заправкой
        В ручку 'https://app.tst.tanker.yandex.net/order/' не ушла ручка '/complete'

    - testing:
        - acceptance_maps
    - platforms:
        - ios


  Отправка чаевых после заправки:
    - preconditions: |
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку
    - do: |
        Перейти к процесссу заправки в карточке
        На Android любая заправка
        На iOS заправка на Красной площади в Москве
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке (кроме 6-ой)
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Открывается экран Способ оплаты
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап на Подтвердить
    - assert: |
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением
        Открывается экран с состоянием процесса заправки
        По окончании процесса заправки открывается экран Оцените обслуживание
        На экране Оцените обслуживание отображаются блоки рейтинга, чаевых, данных чека, со всеми заполненными полями
    - do: Тап на сумму чаевых, отличную от 0р, в блоке Чаевые заправщику
    - assert: Открывается экран "Выберите заправщика" с полем ввода номера телефона и предложенными заправщиками
      do: Тап по любому заправщику или ввести номер, например +70009999999
    - assert: |
        Внизу экрана отображается кнопка Оплатить
        Указанный размер чаевых активен
    - do: Поставить рейтинг обслуживания
    - assert: |
        Выделяется количество установленных звезд рейтинга
        Появляются дополнительные пункты об оценке со свитчерами
    - do: Тап на один из свитчер
    - assert: Свитчер переключается в зеленый цвет

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Оплата заправки в Google Pay:
    - preconditions: |
        Проверять на сборкаx с подписью store
        На устройстве есть возможность оплаты через Google Pay
        Пользователь авторизован
        ММП рядом с АЗС
    - do: Перейти к процесссу заправки в карточке
    - assert: Открывается карточка АЗС на экране выбора колонки
    - do: Тап по любой колонке
    - assert: Открывается экран выбора топлива и способа оплаты
    - do: Тап на любой вид бензина
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Отображается экран выбора способа оплаты
    - do: Выбрать Google Pay
    - do: Тап на Подтвердить
    - assert: |
        Отображается блок подтверждения оплаты
    - do: Подтвердить оплату
    - assert: |
        Происходит оплата заказа и списание средств
        Может отображаться ошибка оплаты

    - platforms:
        - android
    - tags:
        - use_map


  Переход в форму обратной связи при оплате:
    - Preconditions: ТК проходить на 6 колонке в карточке АЗС
    - *preconditions_gas_starts
    - do: Тап по 6 колонке
    - assert: Открывается экран выбора топлива
    - do: Тап на любой вид бензина
    - assert: Открывается экран с возможностью выбрать количество заправляемых литров или сумму для заправки
    - do: Выбрать количество бензина На сумму или Литры
    - do: Тап на Оплатить
    - assert: Открывается экран Способ оплаты
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап на Подтвердить
    - assert: |
        Если оплата происходит впервые, то может открыться промежуточный экран с соглашением.
        Присутствует кнопка Отменить
    - do: Дождаться окончания процесса заправки
    - assert: |
        Появляется сообщение об успешной оплате
        Отображаются кнопки "Поддержка" и "Повторить"
    - do: Тап на "Поддержка"
    - assert: Отображается поп-ап содержащий в себе "Написать нам", "Позвонить" и кнопка "Закрыть"
    - do: Тап на "Повторить"
    - assert: Открывается экран с выбором заправочных колонок

    - tags:
        - assessors
    - platforms:
        - ios
        - android


  Постоплатная АЗС с выбором заправщика на экране "Чек":
    - preconditions: |
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        Пользователь авторизован
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Тап на пин Тестировочная (POST)
    - do: Выбрать любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается форма оплаты с чекаутом
    - do: Не выбирать заправщика
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Открывается экран чека.
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Открывается экран "Выберите заправщика"
        Отображаются саджесты доступных заправщиков
        Присутсвует поле ввода номера телефона заправщика
      do: Тап по любому заправщику или ввести номер, например +70009999999
    - assert: |
        Экран "Выбор заправщика" закрывается
        Открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых
        Указаны данные заправщика
        Есть блок со способами оплаты
        Отображается информация по начислению баллов плюса и кнопка "Оплатить" (Пользователь авторизован с подпиской "Плюс")

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Постоплатная АЗС с вводом номера заправщика на экране "Чек":
    - preconditions: |
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Тап на пин Тестировочная (POST)
    - do: Выбрать любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается форма оплаты с чекаутом
    - do: Не выбирать заправщика
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Открывается экран чека
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Открывается экран "Выберите заправщика"
        Отображаются саджесты доступных заправщиков
        Присутсвует поле ввода номера телефона заправщика
    - do: Ввести номер заправщика
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Экран "Выбор заправщика" закрывается
        Открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых
        Указаны данные заправщика
        Есть блок со способами оплаты
        Отображается информация по начислению баллов плюса и кнопка "Оплатить" (Пользователь авторизован с подпиской "Плюс")

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Постоплатная АЗС c выбором заправщика:
    - preconditions: |
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Тап на пин Тестировочная (POST)
    - do: Выбрать любую колонку (кроме 6-ой)
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается форма оплаты с чекаутом
    - do: Выбрать заправщика из предложенных
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Происходит оплата топлива
        После окончания открывается экран чека
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран ранее)
        - способы оплаты
        Кнопка "Оплатить"

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Постоплатная АЗС c вводом номера заправщика:
    - preconditions: |
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Тап на пин Тестировочная (POST)
    - do: Тап "Заправиться"
    - do: Выбрать любую колонку (кроме 6-ой)
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается форма оплаты с чекаутом
    - do: Ввести номер телефона заправщика через тап на кнопку "Выбрать"
    - do: Тап "Подтвердить"
    - assert: |
        Происходит оплата топлива
        После окончания открывается экран чека
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран ранее)
        - способы оплаты
        Кнопка "Оплатить"

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Постоплатная АЗС. Закрытие экрана формы оплаты:
    - preconditions: |
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Тап на пин Тестировочная (POST)
    - do: Тап на любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается экран форма оплаты
    - do: Свернуть экран свайпом вниз или тап на "крестик"
    - assert: |
        Отображается экран залива топлива
        Внизу экрана отображается зеленая пульсирующая кнопка "Оплатить"
    - do: Тап на "Оплатить"
    - assert: Открывается экран формы оплаты

    - platforms:
        - ios
    - testing:
        - acceptance_maps



  Постоплатная АЗС. Авторизация при тапе оплатить:
    - info: |
        Пользователь не авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Тап на пин Тестировочная (POST)
    - do: Тап на любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается карусель АМ
    - do: Свернуть экран авторизации свайпом вниз
    - assert: |
        Отображается экран залива топлива
        Внизу экрана отображается зеленая пульсирующая кнопка "Оплатить"
    - do: Тап на "Оплатить"
    - assert: Открывается карусель АМ
    - do: Авторизоваться
    - assert: Открывается экран формы оплаты

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Постоплатная АЗС. Выбор чаевых на экране формы оплаты:
    - info: |
        Экран формы оплаты может закрыться при невзаимодействии с ним > 1 мин
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Тап на пин Тестировочная (POST)
    - do: Тап на любую колонку (кроме 6-ой)
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается экран формы оплаты
    - do: Тап на выбрать в блоке "Меня заправляет"
    - assert: |
        Открывается экран выбора заправщика
        Присутсвует поле ввода номера телефона заправщика
    - do: Написать номер телефона заправщика
    - do: Подтвердить
    - assert: |
        Открывается экран формы оплаты
        В блоке "Меня заправляет" отображается введенный ранее номер заправщика
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - do: Тап "Подтвердить"
    - do: Дождаться завершения оплаты
    - assert: Открывается экран чека без блока "Чаевые заправщику"

    - platforms:
        - ios
    - testing:
        - acceptance_maps


  Предоплатная АЗС с вводом номера заправщика на экране "Чек":
    - info: |
        Пользователь авторизован
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой) и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: Открывается форма оплаты с чекаутом
    - do: Не выбирать заправщика
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму
    - assert: |
        Открывается экран "Выберите заправщика"
        Отображаются саджесты доступных заправщиков
        Присутсвует поле ввода номера телефона заправщика
    - do: Ввести номер заправщика
    - assert: |
        Экрана "Выбор заправщика" закрывается, открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых
        Указаны данные заправщика
        Есть блок со способами оплаты
        Отображается информация по начислению баллов плюса и кнопка "Оплатить" (С аккаунтом Я. Плюс)

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Предоплатная АЗС. Выбор способа оплаты:
    - Preconditions: |
        Пользователь авторизован
        У пользователя есть подписка на Я.Плюс
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой) и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Открывается форма оплаты с чекаутом
        В Блоке "Меня заправляет" размещена иконка заправщика с подписью "Меня заправляет"
        Далее есть кнопка "Выбрать" для выбора заправщика из списка или ввода его номера телефона
        Также выводится не более 3 заправщиков с позывными
    - do: Тап на "Способ оплаты"
    - assert: |
        Открывается экран "Способ оплаты"
        На экране отображаются все привязанные карты к аккаунту (в нашем случае к тестингу)
        Другие возможные способы оплаты (СБП, Бизнес-аккаунт)
        Есть возможность добавить банковскую карту и добавить бизнес-счет
    - do: Выбрать любой из возможных способов оплаты
    - assert: |
        Экран "Способ оплаты" закрывается
        Отображается форма оплаты с чекаутом
        В блоке "Способ оплаты" отображается выбранный способ
        Вверху экрана может отображаться мини-баннер (зависит от выбранного способа оплаты)

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
        - lite_acceptance_maps


  Предоплатная АЗС с выбором заправщика:
    - preconditions: |
        Пользователь авторизован
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой) и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: Открывается форма оплаты с чекаутом
    - do: Выбрать заправщика из предложенных
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран в предыдущем шаге)
        - способами оплаты
        - информация по начислению баллов плюса (С аккаунтом Я. Плюс)
        Кнопка "Оплатить"

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Предоплатная АЗС с вводом номера заправщика:
    - preconditions: |
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
        Android: любая заправка
        Открыта карточка АЗС с оплатой
        Тап "Оплатить"
        Выбрать колонку (кроме 6-ой) и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: Открывается форма оплаты с чекаутом
    - do: Ввести  номер телефона заправщика через тап на кнопку "Выбрать"
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран в предыдущем шаге)
        - способами оплаты
        - информация по начислению баллов плюса
        Кнопка "Оплатить"

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Предоплатная АЗС с выбором заправщика на экране "Чек":
    - preconditions: |
        Пользователь авторизован
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
        Android: любая заправка
        Открыта карточка АЗС с оплатой
        Тап "Оплатить"
        Выбрать колонку (кроме 6-ой) и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: Открывается форма оплаты с чекаутом
    - do: Не выбирать заправщика
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму
    - assert: |
        Открывается экран "Выберите заправщика"
        Отображаются саджесты доступных заправщиков
        Присутсвует поле ввода номера телефона заправщика
      do: Тап по любому заправщику или ввести номер, например +70009999999
    - assert: |
        Экрана "Выбор заправщика" закрывается, открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых
        Указаны данные заправщика
        Есть блок со способами оплаты
        Отображается информация по начислению баллов плюса и кнопка "Оплатить" (С аккаунтом Я. Плюс)

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  На чеке отображается блок Чаевые запращику:
    - preconditions: |
        Пользователь авторизован
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой) и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - do: В блоке "Меня заправляет" тап на любого заправщика
    - assert: В блоке "Меня заправляет" отображается выбранный заправщик
    - do: Тап "Оставить чаевые""
    - assert: Открылось мини-вебвью "Чаевые заправщику" с выбором суммы
    - do: Выбрать "Без чаевых"
    - assert: |
        Закрылось мини-вебвью "Чаевые заправщику" с выбором суммы
        Свитчер в неактивном состоянии
    - do: Тап "Подтвердить"
    - do: Дождаться завершения заправки
    - assert: Открывается экран чека с блоком "Чаевые заправщику"

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  На чеке не отобраежется блок Чаевые запращику:
    - preconditions: |
        Пользователь авторизован
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой) и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - do: В блоке "Меня заправляет" тап на любого заправщика
    - assert: В блоке "Меня заправляет" отображается выбранный заправщик
    - do: Тап "Оставить чаевые"
    - assert: Открылось мини-вебвью "Чаевые заправщику" с выбором суммы
    - do: Выбрать любую сумму
    - assert: |
        Закрылось мини-вебвью "Чаевые заправщику" с выбором суммы
        Свитчер переключился в активное состояние
        Отображается надпись "Переведем X руб по завершении заказа"
    - do: Тап "Подтвердить"
    - do: Дождаться завершения заправки
    - assert: Открывается экран чека без блока "Чаевые заправщику"

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Отображение СБП в способах оплаты по умолчанию у нового пользователя:
    - info: |
        На девайсе установлено хотя бы одно банковское приложение
        Пользователь авторизовывается впервые
        Требуется завести чистый продовый аккаунт, например, с помощью бота в Telegram:
        [collapsed-image](https://jing.yandex-team.ru/files/normalman/Снимок%20экрана%202022-03-22%20в%2012.20.24.c09b8ec.png){title=QR-код}
    - do: Открыть экран Яндекс Заправки (Меню -> Яндекс Заправки)
    - do: Тап "Способ оплаты"
    - assert: |
        Открыт экран "Способ оплаты"
        СБП выбран по умолчанию

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Отсутствие отображения СБП в способах оплаты при отсутствии банковских приложений на девайсе:
    - info: |
        Пользователь авторизован
        На девайсе не установлено ни одного банковского приложения
    - do: Открыть экран Яндекс Заправки (Меню -> Яндекс Заправки)
    - do: Тап Способ оплаты
    - assert: |
        СБП не выбран

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Выбор банка при оплате заправки по СБП:
    - info: |
        Пользователь авторизован
        На девайсе установлено несколько банковских приложений (авторизация необязательна)
    - *заправки_сбп
    - do: Выбрать колонку 1
    - do: Выбрать любой тип топлива
    - do: Указать количество литров или стоимость топлива
    - do: Тап "Оплатить"
    - assert: |
        Отображается форма выбора способа оплаты
        Первым отображается СБП
    - do: Тап "Подтвердить"
    - assert: |
        Отображается поп-ап со всеми установленными банковскими приложениями на девайсе
    - do: Выбрать любой банк
    - do: Тап "Выбрать"
    - assert: |
        Происходит переход в выбранное банковское приложение

    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Выбор банка при оплате заправки по СБП (один банк):
    - info: |
        Пользователь авторизован
        Установлено любое банковское приложение (авторизация необязательна)
    - *заправки_сбп
    - do: Выбрать колонку 1
    - do: Выбрать любой тип топлива
    - do: Указать количество литров или стоимость топлива
    - do: Тап "Оплатить"
    - assert: |
        Открыта форма для выбора способа оплаты заправки
    - do: Выбрать СБП
    - do: Тап "Подтвердить"
    - assert: |
        Происходит переход в ранее установленное банковское приложение

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Ошибка при оплате заправки по СБП при отсутствии банковского приложения:
    - info: |
        Пользователь авторизован
        На дейвасе отстуствуют банковские приложения
        Android: Подменить МПП с помощью Mock Location на Красную площадь
    - *preconditions_gas_starts
    - do: Выбрать колонку 1
    - do: Выбрать любой тип топлива
    - do: Указать количество литров или стоимость топлива
    - do: Тап "Оплатить"
    - assert: |
        Появилась форма для выбора способа оплаты заправки
    - do: Выбрать СБП как способ оплаты
    - do: Тап "Подтвердить"
    - assert: |
        Отображается ошибка оплаты

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Форма оплаты (чекаут). Возможность списать баллы плюса (баллы есть, заказ более 1000р):
    - info: |
        Пользователь авторизован аккаунтом, на котором есть бонусные баллы от плюса
        К аккаунта привязана хотя бы 1 банковская карта
        У пользователя есть подписка на Я.Плюс
    - do: Включено продовое окружение (Debug Panel -> Environment -> Refuel environment -> Prod)
    - do: Тап на пин "Яндекс Заправок"
    - do: Тап "Заправиться"
    - assert: |
        Отображается экран выбора колонки
    - do: Выбрать колонку 1
    - do: Выбрать любой тип топлива
    - do: Указать кол-во топлива на сумму более 1000руб
    - do: Тап "Оплатить"
    - assert: |
        Открывается форма оплаты
        В блоке "Баллы плюса" отображаются две кнопки:
            "Накопить" с информацией о том, сколько баллов плюса накопится
            "Списать" с информацией о том, сколько баллов плюса можно списать
    - do: Тап "Списать"
    - assert: |
        Кнопка "Списать" становится выделенной
        Кнопка "Подтвердить" становится градиентной, итоговая сумма к оплате уменьшается на кол-во баллов написанных на кнопке "Списать"

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Форма оплаты (чекаут). Возможность списать баллы плюса (баллы есть, заказ менее 1000р):
    - info: |
        Пользователь авторизован аккаунтом, на котором есть бонусные баллы от плюса
        К аккаунта привязана хотя бы 1 банковская карта
        У пользователя есть подписка на Я.Плюс
    - do: Включено продовое окружение (Debug Panel -> Environment -> Refuel environment -> Prod)
    - do: Тап на пин "Яндекс Заправок"
    - do: Тап "Заправиться"
    - assert: |
        Отображается экран выбора колонки
    - do: Выбрать колонку 1
    - do: Выбрать любой тип топлива
    - do: Указать кол-во топлива на сумму менее 1000руб
    - do: Тап "Оплатить"
    - assert: |
        Открывается форма оплаты
        В блоке "Баллы плюса" указывается информации по акции + появляется возможность списать накопленные баллы
    - do: Тап на "Списать"
    - assert: |
        В свитчере выделяется кнопка "Списать"
        Кнопка "Подтвердить" становится градиентной, итоговая сумма к оплате уменьшается на кол-во баллов

    - platforms:
        - ios
        - android


  Форма оплаты (чекаут). Баллы плюса (баллов нет, заказ более 1000р):
    - info: |
        Пользователь авторизован аккаунтом, на котором нет бонусных баллов от плюса
        У пользователя есть подписка на Я.Плюс
        Android: Подменить МПП с помощью Mock Location на Москву
    - *preconditions_gas_starts
    - do: Выбрать колонку 1
    - do: Выбрать любой тип топлива
    - do: Указать кол-во топлива более 1000руб
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Отображается форма оплаты
        В блоке "Баллы плюса" указывается информация по кол-ву баллов, которые накопятся после заправки

    - platforms:
        - ios
        - android


  Форма оплаты (чекаут). Баллы плюса (баллов нет, заказ менее 1000р):
    - info: |
        Пользователь авторизован аккаунтом, на котором нет бонусных баллов от плюса
        У пользователя есть подписка на Я.Плюс
        Android: Подменить МПП с помощью Mock Location на Москву
    - *preconditions_gas_starts
    - do: Выбрать колонку 1
    - do: Выбрать любой тип топлива
    - do: Указать кол-во топлива менее 1000руб
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Отображается форма оплаты
        В блоке "Баллы плюса" указывается информации, что Баллы Плюса копятся при заказе от 1000 рублей

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Новый интерфейс чаевых (стакан). Отображение элементов формы оплаты и выбор чаевых:
    - estimatedTime: 12m 50s
    - preconditions: |
        Пользователь авторизован
    - do: Назначить заправщика на смену, следуя wiki https://wiki.yandex-team.ru/users/avilovittest/Osobennosti-testirovanija-Zapravok-v-Navigatore/#testirovanienovogointerfejjsachaevyxstakan
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой)
    - do: Выбрать любой вид топлива
    - do: Выбрать любой объем/количество литров
    - do: Тап "Оплатить"
    - assert: |
        Открывается форма оплаты с чекаутом
        В Блоке "Меня заправляет" размещена иконка заправщика, имя заправщика, ниже подпись "Ваш заправщик"
        Ниже отображается блок с выбором чаевых, также информация о списании чаевых
        Далее способ оплаты
        В блоке "Баллы плюса" указывается информации по акции + появляется возможность списать накопленные баллы (С аккаунтом Я. Плюс)
        Кнопка "Подтвердить"
    - do: Свайп влево "карусель" чаевых
    - assert: |
        Первые саджесты чаевых сдвинулись за экран влево
        За крайним саджестом "Другая сумма" ничего не отображается
        Верстка отображается корректно, ничего не уехало
    - do: Свайп право "карусель" чаевых
    - assert: Блок чаевых отображается в исходном состоянии

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Новый интерфейс чаевых (стакан). Чаевые в первый раз:
    - estimatedTime: 12m 10s
    - preconditions: |
        Пользователь авторизован
        Пользователь оставляет чаевые в первый раз
    - do: Назначить заправщика на смену, следуя wiki https://wiki.yandex-team.ru/users/avilovittest/Osobennosti-testirovanija-Zapravok-v-Navigatore/#testirovanienovogointerfejjsachaevyxstakan
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой)
    - do: Выбрать любой вид топлива
    - do: Выбрать любой объем/количество литров
    - do: Тап "Оплатить"
    - assert: |
        Открывается форма оплаты
        Отображается выбранный заправщик в смене и новый блок чаевых
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
        Ниже информация о списании суммы чаевых

    - platforms:
        - ios
        - android


  Новый интерфейс чаевых (стакан). Чаевые не в первый раз:
    - estimatedTime: 12m 10s
    - preconditions: |
        Пользователь авторизован
        Пользователь оставляет чаевые не в первый раз
    - do: Назначить заправщика на смену, следуя wiki https://wiki.yandex-team.ru/users/avilovittest/Osobennosti-testirovanija-Zapravok-v-Navigatore/#testirovanienovogointerfejjsachaevyxstakan
    - *preconditions_gas_starts
    - do: Выбрать колонку (кроме 6-ой)
    - do: Выбрать любой вид топлива
    - do: Выбрать любой объем/количество литров
    - do: Тап "Оплатить"
    - assert: |
        Открывается форма оплаты
        Отображается выбранный заправщик в смене и новый блок чаевых
        В Блоке "Чаевые заправщику" выбрана сумма чаевых
        Ниже информация о списании суммы чаевых

    - platforms:
        - ios
        - android


  Новый интерфейс чаевых (стакан). Выбор чаевых на экране чека:
    - estimatedTime: 13m 10s
    - preconditions: |
        Пользователь авторизован
        Пользователь оставляет чаевые не в первый раз
    - do: Назначить заправщика на смену, следуя wiki https://wiki.yandex-team.ru/users/avilovittest/Osobennosti-testirovanija-Zapravok-v-Navigatore/#testirovanienovogointerfejjsachaevyxstakan
    - *preconditions_gas_starts
    - do: Выбрать любую колонку(кроме 6-ой)
    - do: Выбрать любой вид топлива
    - do: Выбрать любой объем/количество литров
    - do: Тап "Оплатить"
    - assert: |
        Открывается форма оплаты
        Отображается выбранный заправщик в смене и новый блок чаевых
    - do: Тап на саджест "Без чаевых"
    - assert: Выделен выбранный саджест
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап "Подтвердить"
    - assert: |
        Отображается процесс заправки
        Открывается экран чека с блоками Сумма заправки, Чаевые заправщику, Оцените обслуживание и Детали заказа
        Выбран саджест "Без чаевых"
    - do: Выбрать любую сумму в блоке Чаевые заправщику
    - assert: |
        В блоке "Чаевые заправщику" выбрана сумма чаевых
        Указаны данные заправщика который выставлен "в смене"
        Есть блок со способами оплаты
    - do: Тап на выбранного заправщика
    - assert: Открывается экран выбора заправщика
    - do: Тап на доступного заправщика в саджестах
    - assert: |
        Закрылся экран выбора заправщика
        Указаны данные выбранного заправщика

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Новый интерфейс чаевых (стакан). Выбор чаевых на экране оплаты:
    - estimatedTime: 13m 10s
    - preconditions: |
        Пользователь авторизован
        Пользователь оставляет чаевые не в первый раз
    - do: Назначить заправщика на смену, следуя wiki https://wiki.yandex-team.ru/users/avilovittest/Osobennosti-testirovanija-Zapravok-v-Navigatore/#testirovanienovogointerfejjsachaevyxstakan
    - *preconditions_gas_starts
    - do: Выбрать любую колонку(кроме 6-ой)
    - do: Выбрать любой вид топлива
    - do: Выбрать любой объем/количество литров
    - do: Тап "Оплатить"
    - assert: |
        Открывается форма оплаты
        Отображается выбранный заправщик в смене и новый блок чаевых
    - do: Выбрать любую сумму чаевых
    - assert: |
        Выделена выбранная сумма чаевых
        Не отображается экран выбора заправщика
    - do: Выбрать любую доступную карту, на экране "Способ оплаты"
    - do: Тап "Подтвердить"
    - assert: |
        Отображается процесс заправки
        Открывается экран чека с блоками Сумма заправки, Оцените обслуживание и Детали заказа

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Новый интерфейс чаевых (стакан). Постоплатная АЗС. Отображение элементов интро и формы оплаты:
    - estimatedTime: 12m 10s
    - preconditions: |
        Включена тычка Debug Panel -> Environment -> Refuel environment -> TESTING
        Пользователь авторизован
        (IOS) Тап Various -> Load refuel stations for current location и установить геопозицию на заправку на Красной площади в Москве
    - do: Назначить заправщика на смену, следуя wiki https://wiki.yandex-team.ru/users/avilovittest/Osobennosti-testirovanija-Zapravok-v-Navigatore/#testirovanienovogointerfejjsachaevyxstakan
    - do: Тап на пин Тестировочная (POST) в МЯКе
    - do: Выбрать любую колонку
    - assert: |
        Отображается новое интро в пост-оплате
        Сверху отображается название колонки
        Слева блок с информацией о заправке
        Ниже в блоке, информация о ценах
        Внизу экрана отображается синяя кнопка, информирующая об оплате после завершения залива топлива
    - do: Дождаться залива топлива
    - assert: |
        После окончания налива открывается форма оплаты с чекаутом
        В Блоке "Меня заправляет" размещена иконка заправщика, имя заправщика, ниже подпись "Ваш заправщик"
        Ниже отображается блок с выбором чаевых, также информация о списании чаевых
        Далее способ оплаты
        В блоке "Баллы плюса" указывается информации по акции + появляется возможность списать накопленные баллы (С аккаунтом Я. Плюс)
        Кнопка "Подтвердить"

    - platforms:
        - ios
    - testing:
        - acceptance_maps




