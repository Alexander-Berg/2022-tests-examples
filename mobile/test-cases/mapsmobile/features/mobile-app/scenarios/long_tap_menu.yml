testing:
  - regress
components: long_tap_menu
tags:
  - use_map

specs:
  Функциональность лонгтап меню на разных экранах приложения:
    - info: |
        Открыт главный экран приложения
        Пользователь авторизован
    - do: Лонг-тап в области карты.
    - assert: Если мы находимся на экране Карта, то в лонгтап меню отображаются- Сохранить, Отсюда/Сюда, Что здесь?, Панорама, Добавить объект, Добавить дорожное событие, измерить расстояние
    - do: Перейти на экран результата поиска и лонг-тап в области карты
    - assert:  В лонг-тап меню отображаются- Сохранить, Отсюда, Сюда, Что здесь?, Добавить объект, Добавить дорожное событие, Панорамы)
    - do: Перейти на экран Выбора вариантов маршрута или Ведение по маршруту для автомобильных маршрутов и лонг-тап в области карты
    - assert:  В лонг-тап меню отображаются- Отсюда, Заехать, Сюда, Что здесь?, Добавить объект, Добавить дорожное событие, Панорама)
    - do: Перейти на экран Выбора вариантов маршрута или Ведение по маршруту для не  автомобильных маршрутов и лонг-тап в области карты
    - assert:  В лонг-тап меню отображаются-  Отсюда, Зайти, Сюда, Что здесь?,  Добавить дорожное событие, Панорама
    - do: Перейти на экран Добавления ДС и лонг-тап в области карты
    - assert:  Лонг-тап меню не вызывается
    - do: Перейти на экран Добавление/редактирование точек Дом/Работа и лонг-тап в области карты
    - assert:  Лонг-тап меню не вызывается
    - do: Перейти на экран Указать место на карте (добавление маршрута)
    - assert:  Лонг-тап меню не вызывается
    - do: Открыть экран Расположение при отправке фидбека Исправить неточности или Добавить организацию и лонг-тап в области карты
    - assert:  Лонг-тап меню не вызывается
    - do: Открыть экран Расположение при отправке фидбека для топонима и лонг-тап в области карты
    - assert:  Лонг-тап меню не вызывается
    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Построение маршрута через лонг-тап меню без определенного местоположения:
    - info: |
        Открыт главный экран приложения с картой.
        Местоположение не определено
    - do: Лонг-тап на карте
    - assert: |
        Открылось лонг-тап меню
        В меню кнопки: Сохранить, Отсюда, Сюда/Что здесь? Добавить объект, Добавить дорожное событие, Измерить расстояние, Панорама
    - do: Тап на Сюда
    - assert: |
        Открылся экран построения маршрута
        В начальной точке плейсхолдер Откуда
        В конечной указан адрес, который мы указали лонг-тапом
    - do: Тап на Назад
    - assert: |
        Экран построения маршрута закрылся
        Открыт главный экран приложения с картой
    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - lite_acceptance_maps

  Проверка функционирования линейки:
    - info: |
        Отображается главный экран приложения
    - do: Включить таб Транспорт
    - assert: Слой ОТ активен
    - do: Лонг-тап по карте
    - assert: В открывшемся лонг-тап меню отображается кнопка Измерить расстояние
    - do: Тап по Измерить расстояние
    - assert: |
        Отображается экран Линейки
        Отображается хинт про Линейку
        Кнопки зума отсутствуют, вместо нее кнопка добавления точки
        Прицел линейки находится в месте лонг-тапа
        Спиральная кнопка неактивна(Кнопка отмены)
        Начальное значение в счетчике расстояния — 0 м.
        Слой ОТ неактивен
    - do: Тап по различным объектам на карте (например- топонимы, пины организаций/закладок, остановки, маршруты...)
    - assert: Объекты не тапабельны
    - do: Тап по кнопке добавления точки
    - assert: |
        Хинт все так-же отображается
        Спиральная кнопка активна(Кнопка отмены)
    - do: Сменить спан карты и добавить еще одну точку
    - assert: |
        Хинт больше не отображается
        Счетчик расстояния изменился и округлен (метры округляются полностью, километры < 10 округляются до десятых, километры > 10 округляются до целых)
    - do: Тап по кнопке отмены
    - assert: |
        Последняя добавленная точка удалилась
        Хинт не отображается
    - do: Сменить ориентацию устройства
    - assert: |
        Ранее отмененная точка не отображается
        Хинт не отображается
    - do: Тап по кнопке отмены
    - assert: |
        Больше точки не отображаются
        Счетчик расстояния равен 0
    - do: Тапо по кнопке Закрыть
    - assert: |
        Отображается главный экран приложения
        Слой ОТ активен

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
        - lite_acceptance_maps
    - tags:
        - assessors
        - newbie
    - integration_run:
        - kotlin

  Лонг-тап меню, что здесь?:
    - info: |
        Отображается главный экран приложения
    - do: Лонг-тап по спану карты
    - assert: Отображается лонг-тап меню
    - do: Тап Что здесь?
    - assert: |
        Отображается мини карточка места где произведенным лонг тап
        Отображается активный пин на месте лонг-тапа

    - platforms:
      - ios
      - android
    - testing:
      - lite_acceptance_maps
    - tags:
        - newbie


  Лонг-тап меню, добавление в закладки:
    - info: |
        Отображается главный экран приложения
        Пользователь авторизован
        Включено отображение закладок на карте:
        (iOS) Меню->Закладки и мой транспорт->Тап на три точки напротив избранного списка-> кнопка Показать метки на карте
        (Android) Меню->Закладки и мой транспорт->Тап на три точки напротив избранного списка-> свитчер Показывать на карте
    - do: Лонг-тап по спану карты
    - assert: Отображается лонг-тап меню
    - do: Тап Сохранить
    - assert: Отображается поп-ап со списками закладок
    - do: Активировать чек-бокс "Избранное"
    - do: Тап "Готово"
    - assert: Отображается поп-ап изменения названия места
    - do: Тап сохранить
    - assert: |
        Место добавилось в Избранное
        На спане карты появился пин закладки

    - platforms:
        - ios
        - android
    - testing:
        - lite_acceptance_maps
    - tags:
        - assessors
        - newbie

  Лонг-тап меню, добавление ДС в ведении:
    - info: |
        Отображается экран ведения по маршруту
        Включена симуляция движения
        Пользователь авторизован
    - do: Лонг-тап по спану карты
    - assert: Отображается лонг-тап меню
    - do: Тап Добавить дорожное событие
    - assert: |
        Отображаются экран добавления ДС
    - do: Изменить спан карты
    - assert: Пин дс в центре спана
    - do: Тап Отправить
    - assert: |
        ДС добавилось на выбранном месте
        Отобразилась надпись Спасибо
        Введение продолжается

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - newbie


  Построение маршрута на такси через лонг-тап:
    - info: |
        Открыт главный экран приложения
        Установлено приложение Я.GO
    - do: Лонг-тап по карте
    - do: Тап на Сюда
    - assert: |
        Открыт экран выбора вариантов маршрута
        Отображаются альтернативные варианты маршрута (при наличии)
    - do: Выбрать тип маршрута - На такси
    - do: Перейти в ведение
    - assert: |
        Открыто приложение Я.GO с построенным маршрутом

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps
