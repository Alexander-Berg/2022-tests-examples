components: alice_road_events
testing:
  - regress
tags:
  - assessors
  - not_suitable_for_farm
integration_run:
  - alicekit

aliases:
  - &info_voice_activation_on_and_mic_on
    - info: Установлена локаль на устройстве ru_RU
    - do: Выключить эксперименты `use_datasync_settings` и `new_maps_settings` (Меню -> Настройки -> Debug-Panel - Experiments)
    - do: Перезапустить приложение
    - do: Включить Алису (Меню -> Настройки -> Основные -> Алиса)
    - do: Включить голосовую активацию Алисы (Меню -> Настройки -> Основные -> Алиса)
    - do: В настройках приложения на устройстве выдать доступ к микрофону девайса
    - do: Открыть главный экран приложения

specs:

  Алиса. Постановка дорожного события - Прочее:
    - *info_voice_activation_on_and_mic_on
    - do: Тап на кнопку Алисы
    - assert: Отображается штора Алисы
    - do: Сказать "Отметь / добавь / установи -> точку / событие / метку"
    - assert: Алиса спрашивает, что именно
    - do: Ответить "Другое"
    - assert: Алиса спрашивает, что написать
    - do: Сказать "Сломалась газель"
    - assert: Алиса спрашивает про ряд
    - do: Указать любой ряд
    - assert: |
        Алиса сообщает, что зафиксировала событие на карте
        На экране появляется сообщение "Спасибо"
        Рядом с ММП на карте появляется ДС - Прочее
    - do: Тап на пин установленного ДС
    - assert: В карточке события отображается указанная ранее информация

    - platforms:
        - ios
        - android
    - tags:
        - not_suitable_for_farm
        - refactor_ready


  Алиса. Постановка дорожного события - Авария:
    - *info_voice_activation_on_and_mic_on
    - do: Вызвать Алису
    - do: Cказать "авария / дтп / столкновение и т.п"
    - assert: Алиса спрашивает про ряд
    - do: Указать любой ряд
    - assert: |
        Алиса сообщает о том, что зафиксировала дтп
        На карте появляется отметка ДС
        Пиктограмма иконки соответствует тематике события
    - do: Тап на пин установленного ДС
    - assert: В карточке события отображается указанная ранее информация

    - platforms:
        - ios
        - android
    - tags:
        - not_suitable_for_farm
        - refactor_ready
    - testing:
        - acceptance_maps


  Алиса. Постановка дорожного события - Дорожные работы:
    - *info_voice_activation_on_and_mic_on
    - do: Вызывать Алису
    - do: Cказать "дорожные работы / ремонт дороги / ремонтные работы и т.п"
    - assert: Алиса спрашивает про ряд
    - do: Указать любой ряд
    - assert: |
        Алиса сообщает, что зафиксировала ДС
        На карте появляется отметка
        Пиктограмма иконки соответствует тематике события
    - do: Тап на пин установленного ДС
    - assert: В карточке события отображается указанная ранее информация

    - platforms:
        - ios
        - android
    - tags:
        - not_suitable_for_farm
        - refactor_ready
    - testing:
        - acceptance_maps


  Алиса. Постановка дорожного события - Камера:
    - *info_voice_activation_on_and_mic_on
    - do: Вызывать Алису
    - do: Cказать "камера / камера в левом ряду / дпс и т.п."
    - assert: |
        Алиса подтверждает действие
        Рядом с ММП на карте появляется ДС-камера

    - platforms:
        - ios
        - android
    - tags:
        - not_suitable_for_farm
        - refactor_ready
    - testing:
        - acceptance_maps


  Алиса. Постановка дорожного события - Разговорчики:
    - *info_voice_activation_on_and_mic_on
    - do: Вызвать Алису
    - do: Cказать "разговорчик / комментарий / текст"
    - assert: |
        Алиса просит продиктовать текст
        Движение по маршруту продолжается
    - do: Продиктовать любую фразу
    - assert: |
        Алиса подтверждает действие
        На экране отображается продиктованный текст
        Рядом с ММП на карте появляется ДС-разговорчик
        Движение по маршруту продолжается
    - do: Тап по пину созданного ДС
    - assert: |
        Содержимое соответствует надиктованному ранее
        Движение по маршруту продолжается

    - platforms:
        - ios
        - android
    - tags:
        - not_suitable_for_farm
        - refactor_ready


  Алиса. Постановка дорожного события - Выход из сценария:
    - *info_voice_activation_on_and_mic_on
    - do: Вызвать Алису
    - do: Сказать "Отметь / добавь / установи -> точку / событие / метку"
    - assert: Алиса задает уточняющий вопрос
    - do: Сказать "Хватит"
    - assert: |
        Алиса подтверждает действие
        ДС не добавляются
        Алиса завершает диалог

    - platforms:
        - ios
        - android
    - tags:
        - not_suitable_for_farm
        - refactor_ready
