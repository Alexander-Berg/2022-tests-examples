components: menu
testing:
  - regress

specs:
  Отображение элементов блока Новые истории и подборки:
    - info: |
        В зависимости от региона меняется наполненность шторки
        На спане город Москва, отображается главный экран приложения
    - do: Тап на таб Поиск
    - assert: |
        Отображается полная шторка
        Вверху шторки отображается поисковая строка со спичкитом и кнопкой закрытия
        Ниже отображаются поисковые категории
        Рекламные категории отображаются самыми последними
        (IOS) Ниже, под заголовком Актуальное, отображаются сторис и подборки
        (Android) Ниже, под заголовком Актуальное отображаются сторис, а под заголовком Новые истории и подборки - подборки
        Подборки и сторис обновляются в соответствии с городом
    - do: Тап по одной из подборок в блоке
    - assert: Отображается список мест discovery
    - do: Тап по крестику в списке мест
    - assert: |
        Список мест закрылся,
        Отображается полная шторка,
        Состояние скролла шторки сохранилось

    - platforms:
        - ios
        - android
    - tags:
        - assessors

  Переход на экраны маршрутов из кнопок в шторке:
    - info: |
        Саджест дома/работы не будет отображатся, если расстояние между ММП и домом/работой слишком большое
        Отображается главный экран приложения
        ММП определено
        ММП не по адресу дома
        Пользователь авторизован
        Добавлен адрес дома в закладки
        Выключен эксперимент no_routes_tab (Настройки - Debug Panel - Experiments)
        Не добавлен адрес работы в закладки
    - do: Тап на таб Маршруты
    - assert: |
        Отображается экран Маршрут
        В поле Откуда Моё местоположение
        В поле Куда отображается текст Куда
        Курсор в полях не отображается
    - do: Тап Назад
    - assert: Отображается главный экран с таббаром с кнопками Поиск, Маршруты, Навигатор, Транспорт
    - do: Тап по кнопке Домой в маршрутных саджестах над таббаром
    - assert: |
        Отображается экран выбора варианта маршрута
        В точке Откуда указано ММП
        В точке Куда указан (iOS) Дом / (Android) Домой
    - do: Тап Назад
    - assert: |
        Отображается главный экран с таббаром с кнопками Поиск, Маршруты, Навигатор, Транспорт
        Над таббаром НЕ отображается маршрутный саджест На работу

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Отображение шторки после закрытия сообщения о загрузки кеша Android:
    - info: Первый запуск приложения
    - do: Закрыть онбординг
    - assert: |
        Отображается главный экран приложения,
        появился запрос на доступ к геопозиции
    - do: Тап на разрешить
    - assert: Отображается главный экран приложения
    - do: Перезапускать приложение пока не появится шторка (перед появлением есть задержка около 5 сек)
    - assert: |
        Отображается затеменная главная страница приложения,
        открыт поп-ап с предложением загрузить карту города,
        в шапке поп-апа написан жирным шрифтом город и в скобочках размер файла в МБ,
        ниже описание поп-апа Карта с возможностью искать места и строить маршруты на машине без интернета,
        ниже слева кнопка Не сейчас без подложки, шрифт синего цвета,
        справа кнопка Загрузить с подложкой желтого цвета, шрифт черного цвета, обе кнопки активны
    - do: Тап на Загрузить
    - assert: |
        Открывается экран Офлайн-карты,
        в верхнем левом углу кнопка настроек,
        в верхнем правом углу кнопка закрытия,
        ниже блок Загруженные с серой подложкой,
        ниже отображается загрузка карты города из п.3,
        отображается название города и объем файла в МБ
    - do: Тап на кнопку закрытия
    - assert: |
        Экран загрузки офлайн-карт закрылось,
        открыт главный экран приложения,
        отображается шторка в свернутом состоянии,
        отображается строка поиска

    - platforms:
        - android
    - tags:
        - assessors


  Открытие главного меню:
    - info: Открыт главный экран
    - do: |
        Включить эксперимент:

        (для iOS) Использовать интент
        [collapsed-image](https://jing.yandex-team.ru/files/trefilovajs/qr-code-ya_business_on.png){title=QR-код}

        `yandexmaps://add_exp?ya_business_on`
        (для Android) Использовать интент
        [collapsed-image](https://jing.yandex-team.ru/files/trefilovajs/qr-code-mirrors_in_profile.png){title=QR-код}

        `yandexmaps://add_exp?mirrors_in_profile`
    - do: Перезапустить приложение
    - do: Тап по кнопке "Профиль/Меню" слева от строки поиска
    - assert: |
        Открывается экран "Главное меню"
        Наверху расположен прямой грип
        Если пользователь не авторизован: под грипом расположен блок авторизации с кнопкой "Войти"
        Если пользователь авторизован: под грипом расположен блок информации об аккаунте с:
          1. Аватаром, логином и адресом электронной почты (аккаунт зарегистрирован на электронную почту)
          2. Аватаром, фамилией и именем пользователя (аккаунт зарегистрирован на номер телефона)
        Под блоком отображается карусель экшн-кнопок в следующем порядке:
          - "Загрузка карт"
          - "Обратная связь"
          - "Изменить карту"
          - Android: "Съемка дорог"
          - "Разместить рекламу"
        Ниже отображаются широкие кнопки:
          - "Плюс" с количеством баллов у авторизованных пользователей с Плюсом/"Подключить Плюс" у неавторизованных пользователей, либо пользователей без Плюса
          - "Мои организации" у бизнес-аккаунтов
          - "Отзывы и исправления"
          - "Закладки и Мой транспорт"
          - "Яндекс.Заправки"
          - iOS: "Поддержка такси"
          - "Настройки"

    - platforms:
        - android
        - ios
    - tags:
        - assessors

  Измененеи содержимого шторки таба "Поиск" в зависимости от города на спане:
    - info: Спан направлен на Москву
    - do: Тап на таб "Поиск"
    - assert: |
        Отображается полная шторка
        Вверху шторки отображается поисковая строка с кнопкой вызова Алисы и кнопкой закрытия
        Ниже отображаются поисковые категории
        Рекламные категории отображаются самыми последними
        (IOS) Ниже, под заголовком "Истории и подборки мест", отображаются сторис и подборки
        (Android) Ниже, под заголовком "Истории" отображаются сторис, а под заголовком "Подборки мест" - подборки мест
    - do: Перенести спан карты на другой город
    - do: Тап на таб "Поиск"
    - assert: Сториз и подборки обновились

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors



  Отображение нотификации:
    - info: |
        Нотификация до этого не показывалась, если была просмотрена необходимо переустановить приложение.
        Для отображения нотификация-баннер, может потребоваться несколько перезапусков приложения
        Если картинка не пришла в нотификацию, то показывается серый фолбечный баннер
        Нотификация действует до 22.08.2035, если ее нет сразу необходимо заводить баг.
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Местоположение - г. Москва
        Устройство в вертикальной ориентации
    - do: Запустить приложение
    - assert: |
        После сплешскрина отображается главный экран приложения
        Нотификация-баннер отображается внизу над табами
        Если картинка не пришла, то показывается серый фолбечный баннер (Сейчас баннер ждёт картинку минуту, если она не приходит - показывается серый)
    - do: Тап на карту или по любому табу/кнопке
    - assert: Нотификация исчезла
    - do: Перезапустить приложение
    - assert: Нотификация не отображается
    - do: Изменить ориентацию девайса
    - assert: Нотификация не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отображение showcase-баннера до даты начала нотификации:
    - info: |
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Девайс подключен к Charles.
        Сделана подмена ответа сервера на [готовый JSON](https://jing.yandex-team.ru/files/kuznetsova22/TC1.json) через Map Local на ручку https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/showcase/v3/search/by_point/notifications/*
        Местоположение - г. Москва
        Приложение не запущено
    - do: Запустить приложение
    - assert: |
        Отображается главный экран приложения
        Внизу над табами нотификация-баннер не отображается
    - do: Свернуть приложение и подождать 1-2 минуты
    - do: Развернуть приложение
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
    - do: Изменить ориентацию устройства
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
    - do: Изменить ориентацию устройства
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается

    - plastforms:
        - ios
        - android
    - tags:
        - assessors



  Учёт показа showcase-баннера без ссылки при тапе:
    - info: |
        Нотификация до этого не показывалась, если была просмотрена необходимо переустановить приложение.
        Для отображения нотификация-баннер, может потребоваться несколько перезапусков приложения
        Если картинка не пришла в нотификацию, то показывается серый фолбечный баннер
        Нотификация действует до 22.08.2035, если ее нет сразу необходимо заводить баг.
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Местоположение - г. Москва
        Устройство в вертикальной ориентации
    - do: Запустить приложение и подождать 1-2 минуты
    - assert: |
        Отображается главный экран приложения
        Внизу над табами отображается нотификация-баннер
    - do: Тап по нотификации-баннеру
    - assert: Нотификация баннер исчезла
    - do: Если в предыдущем шаге была нотификация со ссылкой, то необходимо закрыть карточку организации/Custom Tabs/сторис
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер исчезла
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
        Может отображаться другая нотификация

    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Учёт показа showcase-баннера с ссылкой на несуществующую организацию при тапе:
    - info: |
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Девайс подключен к Charles.
        Сделана подмена ответа сервера на [готовый JSON](https://jing.yandex-team.ru/files/kuznetsova22/TC2.json) через Map Local на ручку https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/showcase/v3/search/by_point/notifications/*
        Для отображения нотификация-баннер, может потребоваться несколько перезапусков приложения
        Если картинка не пришла в нотификацию, то показывается серый фолбечный баннер
        Местоположение - г. Москва
        Приложение не запущено
    - do: Запустить приложение и подождать 1-2 минуты
    - assert: |
        Отображается главный экран приложения
        Внизу над табами отображается нотификация-баннер
    - do: Тап по нотификации-баннеру
    - assert: |
        Открывается карточка с заголовком Нет информации
        В карточке подзаголовок Ошибка загрузки и кнопка Обновить
    - do: Тап Обновить
    - assert: Ничего не происходит
    - do: Закрыть карточку организации/Custom Tabs
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
        Может отображаться другая нотификация

    - platforms:
        - ios
        - android
    - tags:
        - assessors




  Учёт показа showcase-баннера с ссылкой на работающую организацию при тапе:
    - info: |
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Девайс подключен к Charles.
        Сделана подмена ответа сервера на [готовый JSON](https://jing.yandex-team.ru/files/kuznetsova22/TC3.json) через Map Local на ручку https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/showcase/v3/search/by_point/notifications/*
        Для отображения нотификация-баннер, может потребоваться несколько перезапусков приложения
        Если картинка не пришла в нотификацию, то показывается серый фолбечный баннер
        Местоположение - г. Москва
        Приложение не запущено
    - do: Запустить приложение и подождать 1-2 минуты
    - assert: |
        Отображается главный экран приложения
        Внизу над табами отображается нотификация-баннер
        Нотификация перекрывает маршрутный саджест
    - do: Тап по нотификации-баннеру
    - assert: Открывается полная карточка организации
    - do: Закрыть карточку организации
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
        Может отображаться другая нотификация

    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Учёт показа showcase-баннера с внешней ссылкой при тапе:
    - info: |
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Девайс подключен к Charles.
        Сделана подмена ответа сервера на [готовый JSON](https://jing.yandex-team.ru/files/kuznetsova22/TC4.json) через Map Local на ручку https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/showcase/v3/search/by_point/notifications/*
        Для отображения нотификация-баннер, может потребоваться несколько перезапусков приложения
        Если картинка не пришла в нотификацию, то показывается серый фолбечный баннер
        Местоположение - г. Москва
        Приложение не запущено
    - do: Запустить приложение и подождать 1-2 минуты
    - assert: |
        Отображается главный экран приложения
        Внизу над табами отображается нотификация-баннер
        Нотификация перекрывает маршрутный саджест
    - do: Тап по нотификации-баннеру
    - assert: Ссылка открывается в Custom Tab
    - do: Закрыть Custom Tab
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
        Может отображаться другая нотификация

    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Закрытие нотификации-баннера при взаимодействии с другими элементами на карте:
    - info: |
        Нотификация до этого не показывалась, если была просмотрена необходимо переустановить приложение.
        Для отображения нотификация-баннер, может потребоваться несколько перезапусков приложения
        Если картинка не пришла в нотификацию, то показывается серый фолбечный баннер
        Нотификация действует до 22.08.2035, если ее нет сразу необходимо заводить баг.
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Местоположение - г. Москва
        Устройство в вертикальной ориентации
    - do: Запустить приложение
    - assert: |
        Отображается главный экран приложения
        Внизу над табами отображается нотификация-баннер
    - do: Тап на любой таб
    - assert: Нотификация-баннер пропала
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
        Может отображаться другая нотификация
    - do: (Шаг предпринимается, если новая нотификация после предыдущего шага не показалась) Переустановить и запустить приложение
    - assert: |
        Отображается главный экран приложения
        Внизу над табами отображается нотификация-баннер
    - do: Проскроллить карту
    - assert: Нотификация-баннер пропала
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
        Может отображаться другая нотификация
    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Showcase-баннер не показывается после периода показа нотификации:
    - info: |
        В дебаг-панели включена тычка: Environment - Mobmaps proxy host - Testing
        Девайс подключен к Charles.
        Сделана подмена ответа сервера на [готовый JSON](https://jing.yandex-team.ru/files/kuznetsova22/TC5.json) через Map Local на ручку https://mobmaps-proxy-api-ext.c.maps.yandex.net/v1/showcase/v3/search/by_point/notifications/*
        Для отображения нотификация-баннер, может потребоваться несколько перезапусков приложения
        Если картинка не пришла в нотификацию, то показывается серый фолбечный баннер
        Местоположение - г. Москва
        Приложение не запущено
    - do: Запустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
    - do: |
        Свернуть приложение и подождать 1-2 минуты, развернуть,
        При необходимости перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        Нотификация-баннер над табами не отображается
    - do: Изменить ориентацию устройства
    - assert: |
        Нотификация-баннер над табами не отображается
    - do: Изменить ориентацию устройства
    - assert: |
        Нотификация-баннер над табами не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors



  Отображение шторы на главном экране:
    - info: |
        Устройство в вертикальной ориентации
    - do: Выключить эксперимент `Debug-Panel -> Experiments -> swipe-to-close-search`
    - do: Перезапустить приложение
    - do: Открыть спан города Москва
    - do: Тап по табу Поиск
    - assert: |
        Отображается полная шторка
        Вверху шторки отображается поисковая строка со спичкитом и кнопкой закрытия
        Ниже отображаются поисковые категории
        Рекламные категории отображаются самыми последними
        Присутствует блок сторис и подборок
    - do: Свайп вниз по контенту в шторке
    - assert: Шторка не закрывается
    - do: Тап по крестику в шторке
    - assert: |
        Штора закрылась
        Отображается главный экран приложения
    - do: Сменить ориентацию устройства
    - do: Тап на таб Поиск
    - assert: |
        Отображается полная шторка
        Вверху шторки отображается поисковая строка со спичкитом и кнопкой закрытия
        Ниже отображаются поисковые категории
        Рекламные категории отображаются самыми последними
        Присутствует блок сторис и подборок
    - do: Сменить ориентацию устройства
    - do: Cвайп вниз по шапке в шторке
    - assert: |
        Шторка сворачивается
        Отображается главный экран приложения

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors

  Отображение новых табов и саджестов вне России:
    - info: |
        Пользователь авторизован,
        у пользователя добавлены закладки Дом/Работа,
        у пользователя есть история построенных маршрутов,
        установить локаль Ru-RU
    - do: Открыть приложение МЯК
    - assert: |
        На главном экране отображаются:
        поисковая строка с аватаркой и спичкитом
        свернутый контролл слоев, пробки,
        кнопки изменения масштаба,
        кнопка местоположение - отображается над строкой с маршрутными саджестами,
        в нижней части экрана отображается таббар,
        над таббаром отображаются предложения маршрутные саджесты
    - do: Сменить в настройках устройства язык, например Украинский и запустить МЯК
    - assert: |
        Локализация приложения выполнена на Украинском языке,
        на главном экране отображаются
        поисковая строка с аватаркой и спичкитом
        свернутый контролл слоев, пробки,
        кнопки изменения масштаба,
        кнопка местоположение - отображается над строкой с маршрутными саджестами,
        в нижней части экрана отображается таббар,
        над таббаром отображаются предложения маршрутные саджесты
    - do: |
        Сменить на устройстве регион, например Украина,
        установить в настройках устройства язык - Русский,
        в настройках запретить приложению МЯК использовать геоданные и запустить приложение
    - assert: |
        Локализация приложения выполнена на Русском языке,
        на главном экране отображаются
        поисковая строка с аватаркой и спичкитом
        свернутый контролл слоев, пробки,
        кнопки изменения масштаба,
        кнопка местоположение - отображается над строкой с маршрутными саджестами,
        в нижней части экрана отображается таббар,
        над таббаром отображаются предложения маршрутные саджесты
    - do: Сменить в настройках устройства язык на Украинский и запустить МЯК
    - assert: |
        Локализация приложения выполнена на Украинском языке,
        на главном экране отображаются
        поисковая строка с аватаркой и спичкитом
        свернутый контролл слоев, пробки,
        кнопки изменения масштаба,
        кнопка местоположение - отображается над строкой с маршрутными саджестами,
        в нижней части экрана отображается таббар,
        над таббаром отображаются предложения маршрутные саджесты
    - do: Установить локаль устройства Ru-Ru
    - assert: |
        Локализация приложения выполнена на Русском языке,
        на главном экране отображаются
        поисковая строка с аватаркой и спичкитом
        свернутый контролл слоев, пробки,
        кнопки изменения масштаба,
        кнопка местоположение - отображается над строкой с маршрутными саджестами,
        в нижней части экрана отображается таббар,
        над таббаром отображаются предложения маршрутные саджесты

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors

  Отображение кнопки Мой транспорт для неавторизованного пользователя при добавлении остановки в избранное:
    - info: |
        Открыт главный экран приложения
        Пользователь не авторизован
        У пользователя нет избранных остановок/маршрутов
        Ранее в закладки остановки/маршруты не добавлялись
    - do: Тап на таб Транспорт
    - assert: |
        Кнопка слоя транспорта стала активной
        Изменилось цветовое оформление подложки
        Отображается кнопка Мой транспорт
        На карте отображаются метки ОТ
    - do: Тап на любую остановку
    - do: Тап на кнопку сохранения в закладки
    - assert: |
        Остановка добавлена в закладки
        Отображается поп-ап об успешном добавлении остановки в закладки:
        - (iOS) В поп-апе отображается заголовок Остановка сохранена в "Мой транспорт"
        - (Android) В поп-апе отображается заголовок Остановка сохранена в "Закладки"
        - Ниже текст Теперь ее легко увидеть на карте и и отличить от других остановок
        - Ниже отображается кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается карточка остановки
        Отображается кнопка удаления, вместо кнопки сохранения
    - do: Закрыть карточку остановки
    - assert: |
        Отображается главный экран приложения
        Пин добавленной в избранное остановки отличается от обычного пина
        На карте отображаются метки ОТ
        Отображается кнопка Мой транспорт
    - do: Тап на кнопку Мой транспорт
    - assert: |
        Отображается поп-ап Эта кнопка оставляет на карте только избранный транспорт
        Присутствует кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается главный экран приложения
        Таб Транспорт активен,
        Чек-бокс напротив кнопки Мой транспорт не активен

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - use_map
        - mapkit_ready


  Отображение кнопки Мой транспорт для неавторизованного пользователя при добавлении маршрута в избранное:
    - info: |
        Открыт главный экран приложения
        Пользователь не авторизован
        У пользователя нет избранных остановок/маршрутов
        Ранее в закладки остановки/маршруты не добавлялись
    - do: Тап на таб Транспорт
    - assert: |
        Кнопка слоя транспорта стала активной
        Изменилось цветовое оформление подложки
        Отображается кнопка Мой транспорт
        На карте отображаются метки ОТ
    - do: Тап на любую метку маршрута ОТ
    - do: Тап на кнопку сохранения в закладки
    - assert: |
        Маршрут добавлен в закладки
        Отображается поп-ап об успешном добавлении маршрута в закладки:
        - В поп-апе отображается заголовок Маршрут сохранен в Мой транспорт
        - Ниже текст Теперь он отображается выше других маршрутов в карточках остановок
        - Ниже отображается кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается карточка маршрута
        Отображается кнопка удаления, вместо кнопки сохранения
    - do: Закрыть карточку маршрута
    - assert: |
        Отображается главный экран приложения
        На карте отображаются метки ОТ
        Чек-бокс напротив кнопки Мой транспорт не активен
    - do: Тап на кнопку Мой транспорт
    - assert: |
        Чек-бокс напротив кнопки Мой транспорт активен
        На карте отображается только маршрут, добавленный в закладки
    - do: Удалить избранные остановки/маршруты
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        На карте отображаются метки общественного транспорта
        Чек-бокс напротив кнопки Мой транспорт не активен

    - platforms:
        - ios
    - tags:
        - assessors
        - use_map


  Отображение кнопки Мой транспорт для авторизованного пользователя при добавлении остановки в избранное:
    - info: |
        Открыт главный экран приложения
        Пользователь авторизован
        У пользователя нет избранных остановок/маршрутов
        Ранее в закладки остановки/маршруты не добавлялись
    - do: Тап на таб Транспорт
    - assert: |
        Кнопка слоя транспорта стала активной
        Изменилось цветовое оформление подложки
        Отображается кнопка Мой транспорт
        На карте отображаются метки ОТ
    - do: Тап на любую остановку
    - do: Тап на кнопку сохранения в закладки
    - assert: |
        Остановка добавлена в закладки
        Отображается поп-ап об успешном добавлении остановки в закладки:
        - В поп-апе отображается заголовок Остановка сохранена в Мой транспорт
        - Ниже текст Теперь ее легко увидеть на карте и и отличить от других остановок
        - Ниже отображается кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается карточка остановки
        Отображается кнопка удаления, вместо кнопки сохранения
    - do: Закрыть карточку остановки
    - assert: |
        Отображается главный экран приложения
        Пин добавленной в избранное остановки отличается от обычного пина
        На карте отображаются метки ОТ
        Отображается кнопка Мой транспорт
    - do: Тап на кнопку Мой транспорт
    - assert: |
        Отображается поп-ап Эта кнопка оставляет на карте только избранный транспорт
        Присутствует кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается главный экран приложения
        Таб Транспорт активен
        Чек-бокс напротив кнопки Мой транспорт не активен

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - use_map


  Отображение кнопки Мой транспорт для авторизованного пользователя при добавлении маршрута в избранное:
    - info: |
        Открыт главный экран приложения
        Пользователь авторизован
        У пользователя нет избранных остановок/маршрутов
        Ранее в закладки остановки/маршруты не добавлялись
    - do: Тап на таб Транспорт
    - assert: |
        Кнопка слоя транспорта стала активной
        Изменилось цветовое оформление подложки
        Отображается кнопка Мой транспорт
        На карте отображаются метки ОТ
    - do: Тап на любую метку маршрута ОТ
    - do: Тап на кнопку сохранения в закладки
    - assert: |
        Маршрут добавлен в закладки
        Отображается поп-ап об успешном добавлении маршрута в закладки:
        - (iOS) В поп-апе отображается заголовок Маршрут сохранен в "Мой транспорт"
        - (Android) В поп-апе отображается заголовок Маршрут сохранен в "Закладки"
        - Ниже текст Теперь он отображается выше других маршрутов в карточках остановок
        - Ниже отображается кнопка Понятно
    - do: Тап на Понятно
    - assert: |
        Отображается карточка маршрута
        Отображается кнопка удаления, вместо кнопки сохранения
    - do: Закрыть карточку маршрута
    - assert: |
        Отображается главный экран приложения
        На карте отображаются метки ОТ
        Чек-бокс напротив кнопки Мой транспорт не активен
    - do: Тап на кнопку Мой транспорт
    - assert: |
        Чек-бокс напротив кнопки Мой транспорт активен
        На карте отображается только маршрут, добавленный в закладки
    - do: Удалить избранные остановки/маршруты
    - do: Вернуться на главный экран приложения
    - assert: |
        Отображается главный экран приложения
        На карте отображаются метки общественного транспорта
        Чек-бокс напротив кнопки Мой транспорт не активен

    - platforms:
        - ios
        - android
    - integration_run:
        - mapkit
    - tags:
        - assessors
        - use_map
        - mapkit_ready


  Отображение фильтра для слоя Транспорт:
    - info: |
        У пользователя добавлены маршруты в избранное
        Открыт главный экран приложения
    - do: Тап на таб Транспорт
    - assert: |
        На карте отображаются живые метки ОТ
        Присутствует кнопка Мой транспорт
    - do: Тап на Мой транспорт
    - assert: |
        Чек-бокс на кнопке активен
        На карте отображаются живые метки избранных маршрутов
    - do: Построить произвольный маршрут
    - do: Менять тип маршрута
    - assert: Живые метки маршрутов отображаются только для маршрута ОТ и пешеходного
    - do: Открыть главный экран приложения
    - assert: |
        Включен слой Транспорт
        На карте отображаются живые метки избранных маршрутов
    - do: Произвести поиск по любой категории
    - assert: Отображен экран с результатами поиска
    - do: Свернуть список результатов поиска
    - assert: |
        На карте отображаются пины организаций поискового запроса
        На карте живые метки не отображаются
    - do: Открыть главный экран приложения
    - do: Тап на пин остановки ОТ
    - assert: |
        Пин остановки активен
        Открылась мини-карточка остановки
        На карте отображается транспорт, проходящий через выбранную остановку
    - do: Открыть главный экран приложения
    - assert: |
        Включен слой Транспорт
        На карте отображаются живые метки избранных маршрутов

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map


  Сохранение последнего состояния кнопки Мой транспорт:
    - info: |
        У пользователя добавлены маршруты в избранное
        Открыт главный экран приложения
    - do: Тап на таб Транспорт
    - assert: |
        Включился сервис транспорта
        Чек-бокс "Мой транспорт" не активен
        На карте отображаются метки ОТ
    - do: Тап на Мой транспорт
    - assert: |
        На карте стали отображаться только живые метки избранных маршрутов
        Чек-бокс напротив кнопки Мой транспорт активен
    - do: Перезапустить приложение
    - assert: |
        Отображается главный экран приложения
        На карте отображаются живые метки избранных маршрутов
        Чек-бокс на кнопке Мой транспорт активен
    - do: Выключить таб Транспорт
    - do: Включить таб Транспорт
    - assert: |
        На карте отображаются живые метки избранных маршрутов
        Чек-бокс на кнопке Мой транспорт активен
    - do: Тап на Мой транспорт
    - assert: |
        На карте будут отображаться живые метки всех маршрутов
        Чек-бокс на кнопке Мой транспорт не активен
    - do: Перезапустить приложение
    - assert: |
        На карте отображаются живые метки всех маршрутов
        Чек-бокс напротив кнопки Мой транспорт не активен
    - do: Выключить таб Транспорт
    - do: Включить таб Транспорт
    - assert: |
        На карте отображаются живые метки всех маршрутов
        Чек-бокс напротив кнопки Мой транспорт не активен

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps
    - tags:
        - assessors
        - use_map


  Включение режима навигации:
    - info: |
        Приложение закрыто
    - do: Открыть приложение
    - assert: |
        Открыт главный экран приложения,
        Внизу отображаются табы: Поиск,  Маршруты, Навигатор, Транспорт
    - do: Тап на таб Навигатор
    - assert: |
        Таб становится выделенным,
        Маршрутный саджест не перекрывает иконку местоположения
        Над табами отображаются маршрутные саджесты:
        Кнопка закладки, АЗС, Куда
        Если пользователь залогинен и у него добавлены Дом/Работа
        Если пользователь строил маршруты, то также отображается история маршрутов
        Пин Я меняется на стрелку и привязывается к дороге,
        Включается режим карты по направлению устройства,
        Вид карты становится в 3D,
        Устанавливается 16 зум и меняется в зависимости от скорости (как при ведении),
        Отображается скорость пользователя и ограничение скорости на данном отрезке маршрута,
        Если был включён слой транспорта, то он отключается,
        На экране выбора вариантов маршрута автоматически открывается тип "Авто"
        При движении будут предупреждения о превышении скорости и ДС
    - do: Тап на таб Навигатор
    - assert: |
        Выделение с таба снимается,
        Стрелка меняется на пин Я (если пользователь не двигается),
        Режим по направлению устройства отключается,
        Отключается показ скорости и превышений (при условии, что пользователь не движется), предупреждения о ДС
        Карта возвращается в 2D и "Север сверху"
    - platforms:
        - ios
    - tags:
        - assessors
        - use_map

  Закрытие приложения при включённом режиме навигации:
    - info: |
        Открыт главный экран приложения
    - do: Тап на таб Навигатор
    - assert: |
        Таб становится выделенным,
        Маршрутный саджест не перекрывает иконку местоположения
        Над табами отображаются маршрутные саджесты:
        Кнопка закладки, АЗС, Куда
        Если пользователь залогинен и у него добавлены Дом/Работа
        Если пользователь строил маршруты, то также отображается история маршрутов
        Пин Я меняется на стрелку и привязывается к дороге,
        Включается режим карты по направлению устройства,
        Вид карты становится в 3D,
        Устанавливается 16 зум и меняется в зависимости от скорости (как при ведении),
        Отображается скорость пользователя и ограничение скорости на данном отрезке маршрута,
        Если был включён слой транспорта, то он отключается,
        На экране выбора вариантов маршрута автоматически открывается тип "Авто"
        При движении будут предупреждения о превышении скорости и ДС
    - do: Свернуть и снова развернуть приложение
    - assert: Режим навигации включён
    - do: Выгрузить приложение из памяти и снова его открыть
    - assert: |
        Режим навигации выключен,
        Таб Навигатор не выделен,
        Вместо стрелки на пин Я (если пользователь не двигается),
        Режим по направлению устройства отключён,
        Отключены показ скорости и превышений (при условии, что пользователь не движется), предупреждения о ДС

    - platforms:
        - ios
    - tags:
        - assessors
        - use_map


  Карусель действий в профиле неавторизованного пользователя:
    - info: |
        Приложение запущено
        Пользователь неавторизован
    - do: |
        (для iOS) Использовать интент для включения эксперимента `ya_business_on`
        [collapsed-image](https://jing.yandex-team.ru/files/trefilovajs/qr-code-ya_business_on.png){title=QR-код}

        `yandexmaps://add_exp?ya_business_on`
    - do: (для iOS) Перезапустить приложение
    - do: Перейти в меню
    - assert: |
        Отображается меню приложения
        Вверху отображается блок авторизации
        Под блоком авторизации отображается карусель действий, состоящая из кнопок:
          1) Загрузка карт
          2) Обратная связь
          3) Исправить карту
          4) Разместить рекламу
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается меню приложения с каруселью действий
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: Отображается меню приложения с каруселью действий

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Карусель действий в профиле авторизованного пользователя (пользователь не владелец организации):
    - info: |
        Приложение запущено
        Пользователь авторизован и не является владельцем организации
    - do: |
        (для iOS) Использовать интент для включения эксперимента `ya_business_on`
        [collapsed-image](https://jing.yandex-team.ru/files/trefilovajs/qr-code-ya_business_on.png){title=QR-код}

        `yandexmaps://add_exp?ya_business_on`
    - do: (для iOS) Перезапустить приложение
    - do: Перейти в меню
    - assert: |
        Отображается меню приложения
        Вверху отображается информация об аккаунте
        Под информацией об аккаунте отображается карусель действий, состоящая из кнопок:
          1) Загрузка карт
          2) Обратная связь
          3) Исправить карту
          4) Разместить рекламу
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается меню приложения с каруселью действий
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: Отображается меню приложения с каруселью действий

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Карусель действий в профиле авторизованного пользователя (пользователь владелец организации):
    - info: |
        Приложение запущено
        Пользователь авторизован
    - do: Включить Organization owner debug mode (Debug Panel > Various > Organization owner debug mode)
    - do: |
        (для iOS) Использовать интент для включения эксперимента `ya_business_on`
        [collapsed-image](https://jing.yandex-team.ru/files/trefilovajs/qr-code-ya_business_on.png){title=QR-код}

        `yandexmaps://add_exp?ya_business_on`
    - do: (для iOS) Перезапустить приложение
    - do: Перейти в меню
    - assert: |
        Отображается меню приложения
        Вверху отображается информация об аккаунте
        Ниже отображается карусель действий, состоящая из кнопок:
          1) Разместить рекламу
          2) Загрузка карт
          3) Обратная связь
          4) Исправить карту
        Для бизнес-профиля кнопка Разместить рекламу отображается на первом месте
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается меню приложения с каруселью действий
    - do: Свернуть приложение
    - assert: Отображается главный экран устройства
    - do: Развернуть приложение
    - assert: |
        Отображается меню приложения с каруселью действий

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_maps


  Кнопка в меню Разместить рекламу:
    - info: Пользователь авторизован
    - do: Включить Organization owner debug mode (Debug Panel > Various > Organization owner debug mode)
    - do: |
        (для iOS) Использовать интент для включения эксперимента `ya_business_on`
        [collapsed-image](https://jing.yandex-team.ru/files/trefilovajs/qr-code-ya_business_on.png){title=QR-код}

        `yandexmaps://add_exp?ya_business_on`
    - do: (для iOS) Перезапустить приложение
    - do: Перейти в меню
    - do: Тап на Разместить рекламу
    - assert: Открыта WebView с возможностью оставить заявку на рекламу
    - do: Вернуться в меню
    - do: Разлогиниться
    - assert: |
        Отображается меню приложения
        Пользователь неавторизован
    - do: Тап на Разместить рекламу
    - assert: Открыта WebView с возможностью оставить заявку на рекламу

    - tags:
      - assessors
    - testing:
      - acceptance_maps
    - platforms:
      - ios
      - android


  Пункт поддержки такси в главном меню:
    - info: |
        Отображается главный экран приложения
        Устройство в вертикальной ориентации
        Получен эксперимент taxi_open_webview
        Выключен эксперимент orders_history_in_menu
    - do: Тап меню
    - assert: |
        Отображается меню приложения
        Присутствует пункт Поддержка Такси
    - do: Тап Поддержка Такси
    - assert: Отображается вебвью поддержки такси
    - do: Тап Назад
    - assert: |
        Отображается меню приложения
        Присутствует пункт Поддержка Такси
    - do: Сменить ориентацию устройства
    - assert: |
        Устройство в горизонтальной ориентации
        Отображается меню приложения
        Присутствует пункт Поддержка Такси
    - do: Тап Поддержка Такси
    - assert: Отображается вебвью поддержки такси в горизонтальной ориентации

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Проверка работы action-кнопки "Съемка дорог":
    - info: |
        Получен эксперимент mirrors_in_profile
        Пользователь авторизован
        Открыт экран меню
        Доступ к камере не выдавался
        Нажатие на кнопку "Съемка дорог" происходит в первый раз
        Устройство в вертикальной ориентации
    - do: Тап по action-кнопке "Съемка дорог"
    - assert: Открывается онбординг-экран с кнопкой "Начать съёмку"
    - do: Тап по кнопке "Начать съёмку"
    - assert: Появляется поп-ап запроса доступа к камере
    - do: Разрешить доступ к камере
    - assert: |
        Открывается экран-подсказка "Поверните телефон горизонтально"
        Надписи на экране отображаются поверх изображения с камеры
        Присуствует кнопка "Понятно"
    - do: Поменять ориентацию устройства на горизонтальную
    - assert: Экран-подсказка "Поверните телефон горизонтально" сменился на экран-подсказку о том, как пользоваться режимом "Зеркала"
    - do: Тап по "Понятно"
    - assert: |
        Отображется интерфейс съемки
        На экране есть кнопки закрытия экрана и начала/остановки записи
        Отображается количество сделанных снимков (0)
    - do: Тап по крестику
    - assert: |
        Экран "Зеркал" закрылся
        Открылось меню

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - android


  Скрытие интерфейса по тапу в основном режиме и "Транспорте":
    - info: |
        Включен эксперимент tap_and_hide_interface
        Выключен эксперимент service_architecture
        К свободному участку карты относится пространство между топонимами и пинами, реки, лесные массивы и всё, что должно быть нетапабельно
    - do: Тап на свободный участок карты
    - assert: |
        Элементы интерфейса не отображаются
        Остался контрол ММП
    - do: Сменить ориентацию
    - assert: Ничего не изменилось
    - do: Поменять направление карты двумя пальцами
    - assert: Контрол ММП превратился в компас
    - do: Тап на контрол ММП
    - assert: |
        Положение карты изменилось на "Север сверху"
        Элементы интерфейса не отображаются
    - do: Лонг-тап по любому месту на карте
    - assert: Ничего не произошло
    - do: Тап на любое место на карте
    - assert: Интерфейс снова отображается
    - do: Тап на таб "Транспорт"
    - assert: |
        Пины остановок увеличились в размере
        На карте появились живые метки маршрутов общественного транспорта
    - do: Тап на свободный участок карты
    - assert: |
        Элементы интерфейса не отображаются
        Остался контрол ММП
    - do: Тап на любое место на карте
    - assert: Интерфейс снова отображается

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Скрытие интерфейса по тапу в режиме "Навигатор":
    - info: |
        Включен эксперимент tap_and_hide_interface
        К свободному участку карты относится пространство между топонимами и пинами, реки, лесные массивы и всё, что должно быть нетапабельно
        Включен режим "Навигатор"
        Включена симуляция движения (iOS: Enter your route, Android: Mock Locations)
    - do: Тап на свободный участок карты
    - assert: |
        Элементы интерфейса не отображаются
        Остаются иконки скорости (текущая и максимальная)
    - do: В симуляции движения поставить максимальную скорость и проложить маршрут через камеры ограничения скорости
    - do: Вернуться на главный экран МЯК
    - assert: |
        Под иконками скорости появляется плашка расстояния до камеры
        После приближения к камере плашка исчезает
    - do: Тап на произвольный участок карты
    - assert: Интерфейс снова отображается

    - platforms:
        - android
    - tags:
        - assessors


  Открытие истории заказов Go:
    - info:
        Получен эксперимент orders_history_in_menu
        Пользователь авторизован
        На аккаунте пользователя совершались заказы, связанные с Go (еда, такси, самокаты)
        Открыт экран "Меню"
    - do: Тап на кнопку "История поездок и заказов"
    - assert: |
        Открывается экран истории с поездками на такси, самокатах и с заказами еды
        Последняя совершённая поездка/заказ отображается с кнопкой "Помощь с заказом"
    - do: Тап на произвольную поездку/заказ
    - assert: Открывается карточка поездки/заказа
    - do: Вернуться на экран "Меню"
    - do: Включить авиарежим
    - do: Тап на кнопку "История поездок и заказов"
    - assert: Открылся экран "Нет соединения с интернетом" и кнопкой "Попробовать снова"
    - do: Отключить авиарежим
    - do: Тап на кнопку "Попробовать снова"
    - assert: Открывается экран истории с поездками на такси, самокатах и с заказами еды

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Взаимодействие с фильтрами истории заказов Go:
    - info:
        Получен эксперимент orders_history_in_menu
        Пользователь авторизован
        На аккаунте совершалась одна из комбинаций заказов, связанных с Go - такси и еда, такси и самокаты, такси и еда и самокаты
        Самокаты доступны в Москве, Санкт-Петербурге, Краснодаре
        Открыт экран истории заказов (Меню -> История поездок и заказов)
    - do: Тап на блок "Фильтры"
    - assert: |
        Появляется поп-ап "Что показывать" со свитчерами (могут отображаться частично, в зависимости от типов заказов на аккаунте):
        - Такси
        - Еда
        - Самокаты
    - do: Отключить один из свитчеров
    - do: Тап на "Готово"
    - assert: |
        Список заказов обновился
        Отображаются только выбранные типы заказов
    - do: Тап на блок "Фильтры"
    - assert: Положение свитчеров сохранилось
    - do: Отключить ещё один свитчер
    - assert: Последний активный свитчер нельзя отключить
    - do: Тап на "Готово"
    - assert:
        Список заказов обновился
        Отображаются только выбранные типы заказов
    - do: Перезапустить МЯК
    - do: Открыть историю заказов
    - assert: Фильтры не сбросились

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Детали поездки такси в истории заказов Go:
    - info:
        Получен эксперимент orders_history_in_menu
        Пользователь авторизован
        На аккаунте пользователя совершался заказ такси
        Открыт экран истории заказов (Меню -> История поездок и заказов)
    - do: Тап по произвольной поездке на такси
    - assert: Открывается экран с подробностями поездки на такси
    - do: Тап на кнопку "Чек"
    - assert: Открывается подробный чек
    - do: Вернуться на предыдущий экран
    - do: Тап на "Перевозчик и партнёр"
    - assert: Открывается экран подробной информации о партнёре и перевозчике
    - do: Тап на "Удалить запись"
    - assert: Появляется поп-ап с кнопками "Закрыть" и "Удалить"
    - do: Тап на "Удалить"
    - assert: |
        Экран подробностей поездки закрывается
        Удалённая поездка больше не отображается в истории

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Детали заказа еды в истории заказов Go:
    - info:
        Получен эксперимент orders_history_in_menu
        Пользователь авторизован
        На аккаунте пользователя совершался заказ еды
        Открыт экран истории заказов (Меню -> История поездок и заказов)
    - do: Тап на произовльный заказ еды
    - assert: Открывается экран с подробностями заказа еды
    - do: Тап на кнопку "О партнёре"
    - assert: Открывается экран с подробной информацией о ресторане и доставщике

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Открытие вебвью истории заказов в Go пользователем без заказов:
    - info:
        Получен эксперимент orders_history_in_menu
        Пользователь авторизован
        На аккаунте пользователя ни разу не совершались заказы, связанные с Go (такси, еда, самокаты)
        Открыт экран истории заказов (Меню -> История поездок и заказов)
    - do: Тап на кнопку "История поездок и заказов"
    - assert: Отображается экран с надписью "Пока нет заказов" и кнопкой "Закрыть"
    - do: Тап по кнопке "Закрыть"
    - assert: Открыт экран "Меню"

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android


  Эксперимент с отображением кнопки Зеркал в меню:
    - info:
        Получен эксперимент mirrors_in_profile
        Открыт главный экран приложения
        Пользователь не авторизован
    - do: Тап на кнопку Меню
    - assert: |
        Открыт экран Меню
        Отображается кнопка "Съемка дорог"
    - do: Тап на кнопку "Съемка дорог"
    - assert: |
        Отображается шторка авторизации
    - do: Авторизоваться
    - assert: |
        Отображается системный пермишн на съемку фото и видео
    - do: Тап "Разрешить"
    - assert: |
        Открывается экран съемки
    - do: Выключить эксперимент mirrors_in_profile и открыть главный экран приложения
    - assert: |
        Открыт главный экран приложения
    - do: Тап на кнопку Меню
    - assert: |
        Открыт экран Меню
        Кнопка "Съемка дорог" не отображается

    - tags:
        - assessors
    - platforms:
        - android


  Экран Заправки при включенном ночном режиме:
    - info: |
        Установлена темная тема в приложении
        Устройство в вертикальной ориентации
        Экраны, открывающиеся в вебвью или сторис, цвет оформления не изменяют
    - do: Открыть экран Меню > Яндекс.Заправки
    - assert: Отображается экран Заправки в темной теме
    - do: Свернуть и развернуть приложение
    - assert: Экран Заправки отображается в темной теме
    - do: Сменить ориентацию устройства
    - assert: Отображается экран Заправки в темной теме и горизонтальной ориентации
    - do: Протапать все пункты
    - assert: |
        Отображается экран выбранного пункта в темной теме
        Для просмотра некторых пунктов потребуется авторизация в приложении

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Проверка отображения экрана Заправки после выключения ночного режима:
    - info: |
        Установлена темная тема в приложении
        Экраны, открывающиеся в вебвью или сторис, цвет оформления не изменяют
    - do: Включить светлую тему приложения
    - do: Открыть экран Меню > Яндекс.Заправки
    - assert: Отображается экран Заправки в светлой теме оформления
    - do: Свернуть и развернуть приложение
    - assert: Экран Заправки отображается в светлой теме оформления
    - do: Сменить ориентацию устройства
    - assert: Отображается экран Заправки в светлой теме оформления
    - do: Протапать все пункты
    - assert: |
        Отображается экран выбранного пункта в светлой теме оформления
        Для просмотра некторых пунктов потребуется авторизация в приложении

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Экран "Служба поддержки" в Яндекс.Заправках:
    - info: |
        Открыт экран Меню > Яндекс.Заправки
    - do: Тап на Служба поддержки
    - assert: Открывается экран Служба поддержки
    - do: Тап на Написать нам
    - do: Тап на Оплата заказа
    - assert: Открывается форма для отправки фидбека
    - do: Тап на Назад
    - assert: Открывается экран Службы подержки
    - do: Проверить открытие других разделов фидбека
    - assert: Открывается выбранный раздел
    - do: Тап по кнопке Позвонить
    - assert: |
        Открывается экран с номером телефона/приложением для звонка
        (Android) Может сразу открыться системная звонилка
    - do: Выбрать номер/приложение
    - assert: Открывается системная звонилка

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Авторизация через настройки заправок "Способ оплаты":
    - info: |
        Пользователь не авторизован
        Открыт экран Меню > Яндекс.Заправки
    - do: Тап на Способ оплаты
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert: Отображается экран Способ оплаты
    - do: Перейти в Меню
    - assert: Пользователь авторизован

    - tags:
        - assessors
    - testing:
        - acceptance_maps
    - platforms:
        - ios
        - android
    - integration_run:
        - am
        - tanker_sdk


  Авторизация через настройки заправок "Скидки и бонусы":
    - info: |
        Пользователь не авторизован
        Открыт экран Меню > Яндекс.Заправки
        ММП пользователя в России
    - do: Тап на Скидки и бонусы
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert: Отображается экран Скидки и бонусы
    - do: Перейти в Меню
    - assert: Пользователь авторизован

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - integration_run:
        - am
        - tanker_sdk


  Авторизация через настройки заправок "История заправок":
    - info: |
        Пользователь не авторизован
        Открыт экран Меню > Яндекс.Заправки
    - do: Тап на История заправок
    - assert: Отображается экран авторизации
    - do: Авторизоваться
    - assert: Отображается экран История заправок
    - do: Перейти в Меню
    - assert: Пользователь авторизован

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - integration_run:
        - am
        - tanker_sdk


  Отображение экрана истории заправок:
    - info: |
        Пользователь авторизован под аккаунтом без истори заправок
        Открыт экран Меню > Яндекс.Заправки
    - do: Тап на История заправок
    - assert: |
        Открыт экран История заправок
        История заправок пуста
    - do: Авторизоваться под аккаунтом с историей заправок
    - do: Вернуться на экран История заправок
    - assert: |
        Открыт экран История заправок
        Присутствует список с историей заправки

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Отображение кнопки Как это работает в меню заправок:
    - info: Открыт экран меню
    - do: Тап на Яндекс.Заправки
    - assert: Открыт экран Заправки
    - do: Тап на Как это работает
    - assert: Отображается сториз с информацией о заправках

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Просмотр кнопок меню в Яндекс.Заправках:
    - info: |
        ММП пользователя в России
        Отображается меню приложения
    - do: Тап на Яндекс.Заправки
    - assert: |
        Отображается экран Заправки c кнопками:
        - Как это работает
        - Способы оплаты
        - Скидки и бонусы
        - История заправок
        - Популярные вопросы
        - Служба поддержки
        - Пользовательское соглашение

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - integration_run:
        - tanker_sdk


  Отсутствие кнопки Размещения рекламы в профиле для неавторизованного пользователя (iOS):
    - info: |
        Приложение запущено
        Пользователь не авторизован
    - do: Отключить эксперимент `ya_business_on`
    - do: Перезапустить приложение
    - do: Перейти в меню
    - assert: |
        Отображается меню приложения
        Вверху отображается блок авторизации
        Под блоком авторизации отображается карусель действий, состоящая из кнопок:
          1) Загрузка карт
          2) Обратная связь
          3) Исправить карту
        Кнопка Разместить рекламу отсутствует

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие кнопки Размещения рекламы в профиле авторизованного пользователя (не владелец организации) (iOS):
    - info: |
        Приложение запущено
        Пользователь авторизован и не является владельцем организации
    - do: Отключить эксперимент `ya_business_on`
    - do: Перезапустить приложение
    - do: Перейти в меню
    - assert: |
        Отображается меню приложения
        Вверху отображается информация об аккаунте
        Под информацией об аккаунте отображается карусель действий, состоящая из кнопок:
          1) Загрузка карт
          2) Обратная связь
          3) Исправить карту
        Кнопка Разместить рекламу отсутствует

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Отсутствие кнопки Размещения рекламы в профиле авторизованного пользователя-владельца организации (iOS):
    - info: |
        Приложение запущено
        Пользователь авторизован
    - do: Включить Organization owner debug mode (Debug Panel > Various > Organization owner debug mode)
    - do: Отключить эксперимент `ya_business_on`
    - do: Перезапустить приложение
    - do: Перейти в меню
    - assert: |
        Отображается меню приложения
        Вверху отображается информация об аккаунте
        Ниже отображается карусель действий, состоящая из кнопок:
          1) Загрузка карт
          2) Обратная связь
          3) Исправить карту
        Кнопка Разместить рекламу отсутствует

    - platforms:
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_maps


  Открытие диалога авторизации для неавторизованного пользователя в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь неавторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - assert: Отображается пункт Штрафы ГИБДД
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается диалог авторизации
    - do: Тап на “Отмена»
    - assert: |
        Диалог авторизации скрывается
        Отображается меню

    - platforms:
      - android
      - ios
    - tags:
      - assessors


  Открытие вебвью оплаты штрафов для неавторизованного пользователя в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь неавторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается диалог авторизации с текстом "Войдите в аккаунт, чтобы посмотреть или оплатить штрафы" и кнопками «Отмена» и «Войти»
    - do: Тап на Войти
    - assert: Отображается экран авторизации
    - do: Добавить или выбрать аккаунт из списка и авторизоваться
    - assert: |
        Пользователь авторизован
        Открывается вебвью оплаты штрафов с двумя незаполненными полями “Номер СТС”, “Номер ВУ"

    - platforms:
      - android
      - ios
    - tags:
      - assessors


  Открытие вебвью оплаты штрафов для авторизованного пользователя в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"

    - platforms:
      - android
      - ios
    - tags:
      - assessors


  Отсутствие пункта Штрафы ГИБДД в Меню для пользователя не в России:
    - info: |
        ММП пользователя не в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - assert: В Меню не отображается пункта Штрафы ГИБДД

    - platforms:
      - android
      - ios
    - tags:
      - assessors


  Добавление первого СТС для авторизованного пользователя в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        У пользователя нет добавленных документов
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"
    - do: В поле "Номер СТС" ввести существующий СТС со штрафами
    - assert: Номер отображается в поле ввода
    - do: Тап Искать штрафы
    - assert: Отображается список штрафов
    - do: Открыть настройки
    - assert: Введеный ранее СТС добавлен в список документов пользователя

    - platforms:
      - android
      - ios


  Изменение СТС в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"
    - do: В поле "Номер СТС" ввести существующий СТС со штрафами
    - do: Тап Искать штрафы
    - assert: Отображается список штрафов
    - do: Открыть настройки
    - assert: Открыт экран с документами пользователя
    - do: Тап на значок редактирования номера СТС
    - assert: Открыт экран редактирования СТС
    - do: Изменить номер СТС
    - do: Тап Сохранить и искать штрафы
    - assert: |
        Открыт экран с документами пользователя
        Номер СТС соответствует измененному

    - platforms:
      - android
      - ios


  Удаление СТС в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"
    - do: В поле "Номер СТС" ввести существующий СТС со штрафами
    - do: Тап Искать штрафы
    - assert: Отображается список штрафов
    - do: Открыть настройки
    - assert: Открыт экран с документами пользователя
    - do: Тап на значок редактирования номера СТС
    - assert: Открыт экран редактирования СТС
    - do: Тап Удалить
    - assert: Отображается экран с незаполненными данными СТС и ВУ

    - platforms:
      - android
      - ios


  Добавление ВУ в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        У пользователя нет добавленных документов
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"
    - do: В поле Номер ВУ ввести существующее ВУ со штрафами
    - assert: Номер отображается в поле ввода
    - do: Тап Искать штрафы
    - assert: Отображается список штрафов
    - do: Тап на "Настройки" (шестерёнка в правом верхнем углу)
    - assert: Введенное ранее ВУ добавлено в список документов пользователя

    - platforms:
      - android
      - ios


  Изменение ВУ в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"
    - do: В поле ВУ ввести существующее ВУ со штрафами
    - do: Тап Искать штрафы
    - assert: Отображается список штрафов
    - do: Открыть настройки
    - assert: Открыт экран с документами пользователя
    - do: Тап на значок редактирования номера ВУ
    - assert: Открыт экран редактирования ВУ
    - do: Изменить номер ВУ
    - do: Тап Сохранить и искать штрафы
    - assert: |
        Открыт экран с документами пользователя
        Номер ВУ соответствует измененному

    - platforms:
      - android
      - ios


  Удаление ВУ в Штрафах ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"
    - do: В поле ВУ ввести существующее ВУ со штрафами
    - do: Тап Искать штрафы
    - assert: Отображается список штрафов
    - do: Открыть настройки
    - assert: Открыт экран с документами пользователя
    - do: Тап на значок редактирования номера ВУ
    - assert: Открыт экран редактирования ВУ
    - do: Тап Удалить
    - assert: Отображается экран с незаполненными данными СТС и ВУ

    - platforms:
      - android
      - ios


  Открытие диалога авторизации в Штрафах ГИБДД после разлогина:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - assert: Отображается пункт Штрафы ГИБДД
    - do: Выйти из аккаунта
    - assert: Пользователь неавторизован
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается диалог авторизации
    - do: Тап на “Отмена»
    - assert: |
        Диалог авторизации скрывается
        Отображается Меню

    - platforms:
      - android
      - ios
    - tags:
      - assessors


  Возврат в Меню при закрытии страницы Штрафов ГИБДД:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - assert: Отображается пункт Штрафы ГИБДД
    - do: Тап на Штрафы ГИБДД
    - assert: Открывается вебвью оплаты штрафов с двумя незаполненными полями “Номер СТС”, “Номер ВУ"
    - do: Закрыть вебвью тапом на крестик
    - assert: Отображается Меню

    - platforms:
      - android
      - ios
    - tags:
      - assessors


  Отсутствие Штрафов ГИБДД после отключения сети:
    - info: |
        ММП пользователя в России
        Включен wi-fi или мобильный интернет
        Пользователь авторизован
        Открыт главный экран приложения
    - do: |
        Включить эксперимент `gibdd_payments`
        [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/YQR%20%282%29.jpeg){title=QR-код}

        `yandexmaps://add_exp?gibdd_payments`
    - do: Перезапустить приложение
    - do: Открыть Меню
    - assert: Отображается пункт Штрафы ГИБДД
    - do: Включить авиарежим на девайсе
    - do: Перезапустить приложение
    - do: Открыть Меню
    - assert: Пункт Штрафы ГИБДД не отображается

    - platforms:
      - android
      - ios
    - tags:
      - assessors
