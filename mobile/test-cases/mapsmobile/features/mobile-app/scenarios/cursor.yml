components: cursor
testing:
  - regress

specs:
  Наличие курсора в регионе, где данный курсор недоступен:
    - info: |
        Включить эксперимент Debug panel- Experiments- navi_cursors и перезагрузиться
        Язык устройства - турецкий
        Регион на устройстве - Турция
        Открыть Ayarlar - Rotalar - Ok gostergesi
    - do: Тап на курсор Mercedes
    - assert: Курсор скачался и установился в качестве выбранного
    - do: Подменить локали на Казахстан, ru_KZ
    - assert: Локали изменено
    - do: Построить маршрут любым способом и тап на "Поехали"
    - assert: 
        Открылся спан карты с выбранным маршрутом
        Курсор Mercedes сменился на стандартный 

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Курсор UI:
    - info: |
        Включить эксперимент navi_cursors и перезагрузиться
        Открыть Настройки - Маршруты - Курсор
        Курсоры не скачены
    - do: |
        Открыт экран выбора курсора
        В скаченных курсорах отображется один стандартный курсор
        В доступных курсорах отображается минимум 4 курсора
    - do: Поменять ориентацию на горизонтальную
    - assert: Верстка не едет

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Скачать курсор:
    - info: |
        Включить эксперимент navi_cursors и перезагрузиться
        Открыть Настройки - Маршруты - Курсор
        Курсоры не скачены
    - do: Открыт экран выбора курсора
    - do: Тап по другому курсору
    - assert:
        Курсор скачался и установился
        У курсора иконка "Скачать" поменялась на иконку "Установлен"
        Курсор стал отображаться в блоке Скаченных курсоров
    - do: Открыть экран карты и выбрать режим Навигатор
    - assert: Отображается выбранный курсор

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Выбрать курсор:
  - info: |
      Включить эксперимент navi_cursors и перезагрузиться
      Открыть Настройки - Маршруты - Курсор
      Скачено минимум 2 курсора
  - do: Тап на любой курсор из скаченных
  - assert: Курсор установился в качестве выбранного
  - do: Открыть экран карты и перейти в режим "Навигатор"
  - assert: Отображается выбранный курсор
  - do: Выбрать режим "Транспорт"
  - assert: Отображается стандартный красный курсор

  - platforms:
      - ios
      - android
  - tags:
      - assessors


  Удаление курсора:
    - info: |
        Включить эксперимент navi_cursors и перезагрузиться
        Открыть Настройки - Маршруты - Курсор
        Скачено минимум 2 курсора
    - do: Тап "Удалить"
    - assert: |
        Курсор удалился
        У курсора иконка "Корзина" поменялась на иконку "Скачать"

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Скачивание курсора в офлайн:
    - info: |
        Включить эксперимент navi_cursors и перезагрузиться
        Открыть Настройки - Маршруты - Курсор
        Включен авиарежим
    - do: Тап по иконке "Скачать"
    - assert: Курсор не скачался и не установился
    - do: |
        Выключить авиарежим
        Тап по иконке "Скачать"
    - assert: Курсор скачался и установился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Изменение курсора в регионе, где данный курсор недоступен:
    - info: |
        Включить эксперимент Debug panel- Experiments- navi_cursors и перезагрузиться
        Локали ru_RU или en_RU
        Открыть Настройки - Маршруты - Курсор
    - do: Тап на курсор Mercedes
    - assert: Курсор скачался и установился в качестве выбранного
    - do: Подменить локали на Казахстан, ru_KZ
    - assert: Локали изменено
    - do: Построить маршрут любым способом и тап на "Поехали"
    - assert: 
        Открылся спан карты с выбранным маршрутом
        Курсор Mercedes сменился на стандартный 

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Курсоры UI:
    - info: Курсоры не загружены
    - do: Использовать интент для включения экспериента
        [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-05-18%20в%2015.23.34.png){title=QR-код}

        `yandexmaps://add_exp?navi_cursors`
    - do: Перезапустить приложение
    - do: Открыть Настройки - Маршруты - Курсор
    - assert: |
        Открыт экран выбора курсора
        В скаченных курсорах отображется один стандартный курсор
    - do: Поменять ориентацию на горизонтальную
    - assert: Верстка не едет

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_maps


  Курсор UI для региона с ограничением,где он может быть показан:
    - info: |
        Включить эксперимент Debug panel- Experiments- navi_cursors и перезагрузиться
        Локали ru_RU или en_RU
        Открыть Настройки - Маршруты - Курсор
    - do: Открыть экран выбора курсора
    - assert:
        Открыт экран выбора курсора
        В скачанных курсорах отображется один стандартный курсор
        В доступных курсорах отображается список доступных к скачиванию
        В доступных курсорах отображается курсор Mercedes
    - do: Поменять ориентацию на горизонтальную
    - assert: 
        Верстка не едет
        Список доступных курсоров не изменился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Курсор UI для региона без ограничения,где он может быть показан:
    - info: |
        Включить эксперимент Debug panel- Experiments- navi_cursors и перезагрузиться
        Локали ru_KZ или ru_BY, или ru_UA
        Открыть Настройки - Маршруты - Курсор
    - do: Открыть экран выбора курсора
    - assert:
        Открыт экран выбора курсора
        В скачанных курсорах отображется один стандартный курсор
        В доступных курсорах отображается список доступных к скачиванию
        В доступных курсорах не отображается курсор Mercedes
    - do: Поменять ориентацию на горизонтальную
    - assert: 
        Верстка не едет
        Список доступных курсоров не изменился

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Загрузка курсора:
    - info: |
        Меню - Настройки - Debug panel - Experiments - Включить эксперимент navi_cursors и перезагрузиться
        Открыть Настройки - Маршруты - Курсор
        Курсоры не скачены
    - do: Открыт экран выбора курсора
    - do: Тап по другому курсору
    - assert: |
        Курсор скачался и установился
        У курсора иконка "Скачать" поменялась на иконку "Установлен"
        Курсор отображается только в доступных
    - do: Открыть экран карты и выбрать режим Навигатор
    - assert: Отображается выбранный курсор

    - testing:
        - acceptance_maps