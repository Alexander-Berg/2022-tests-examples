components: cpaa_real_road_test
testing:
  - regress

specs:
  CP. Отображение скорости движения на дашборде:
    - preconditions: |
        ТК для iOS > 13.4
        Пользователь прошел все интроскрины приложения
        Пользователь авторизован в приложении аккаунтом с подпиской Яндекс Плюс
        Включена симуляция движения: Debug Panel -> Routes -> Demo movement
    - do: |
        Построить автомаршрут с маневрами на телефоне
        Тап Поехали
    - assert: Отображается ведение по автомаршруту
    - do: Подключить телефон к ГУ (Bluetooth + USB) (включить Bluetooth -> соединить телефон по bluetooth с ГУ)
    - do: Запустить СР на ГУ с дашбордом
    - assert: |
        Отображается дашборд, разделенный на блоки
        Присутствует блок с картой
        В блоке с картой:
          - в верхней части блока отображается спидлимит и текущая скорость
          - скорость меняется, соответствует скорости движения автомобиля
          - при превышении скорости спидлитимит пульсирует красным

    - platforms:
        - carplay
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  CP. Отображение маневров движения на дашборде:
    - preconditions: |
        ТК для iOS > 13.4
        Пользователь прошел все интроскрины приложения
        Пользователь авторизован в приложении аккаунтом с подпиской Яндекс Плюс
        Включена симуляция движения: Debug Panel -> Routes -> Demo movement
    - do: |
        Построить автомаршрут с маневрами на телефоне
        Тап Поехали
    - assert: Отображается ведение по автомаршруту
    - do: Подключить телефон к ГУ (Bluetooth + USB) (включить Bluetooth -> соединить телефон по bluetooth с ГУ)
    - do: Запустить СР на ГУ с дашбордом
    - assert: |
        Отображается дашборд, разделенный на блоки
        Присутствует блок с маневрами о подсказках по маршруту
        В блоке с маневрами:
          - отображается следующий маневр
          - отображается расстояние до маневра
          - расстояние до маневра обновляется

    - platforms:
        - carplay
    - testing:
        - acceptance_maps
    - tags:
        - assessors


  CP. Отображение ММП в блоке Карта на дашборде:
    - preconditions: |
        ТК для iOS > 13.4
        Пользователь прошел все интроскрины приложения
        Пользователь авторизован в приложении аккаунтом с подпиской Яндекс Плюс
        Включена симуляция движения: Debug Panel -> Routes -> Demo movement
        Подключить телефон к ГУ (Bluetooth + USB) (включить Bluetooth -> соединить телефон по bluetooth с ГУ)
    - do: Запустить СР на ГУ с дашбордом
    - assert: |
        Отображается дашборд, разделенный на блоки
        Присутствует блок с картой
        На карте отображается курсор, обозначающий местоположение пользователя
        Местоположение курсора соответствует реальному

    - platforms:
        - carplay
    - testing:
        - acceptance_maps
    - tags:
        - assessors