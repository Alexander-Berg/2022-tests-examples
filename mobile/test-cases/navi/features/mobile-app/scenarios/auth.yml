components: auth
testing:
  - regress
integration_run:
  - am_sdk

specs:
  Авторизация - Переход на экран регистрации:
    - info: |
        Приложение установлено на девайс
        Приложение запущено
        Пользователь не авторизован
    - do: Тап по пункту "Меню"
    - assert: Открывается экран "Меню"
    - do: Тап по "Войти"
    - assert: Отображается экран "Аккаунты" (если в Я.Паспорт отсутствуют аккаунты то приступаем к шагу 3)
    - do: Тап по "Выбрать другой аккаунт"
    - assert: Открывается экран Авторизация
    - do: Тап по "Зарегистрироваться"
    - assert: Открывается экран "Регистрация" с полем ввода номера телефона
    - do: |
        Выйти на предыдущий экран.
        Тап на "Регистрация" после чего сразу нажать на "назад"
    - assert: Осуществляется переход на предыдущий экран.

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация - Авторизация из Меню:
    - info: |
        Приложение установлено на девайс
        Приложение запущено
        Пользователь не авторизован
    - do: Тап по Меню
    - assert: |
        Открывается экран Меню
        Отображается кнопка Войти
    - do: Тап по "Войти"
    - assert: Отображается экран "Аккаунты" (если в Я.Паспорт отсутствуют аккаунты то приступаем к шагу 4, а открыт экран Авторизация)
    - do: Тап по "Выбрать другой аккаунт"
    - assert: Открывается экран Авторизация
    - do: Ввести логин несуществующего пользователя или телефон неверного формата
    - assert: Появляется красная надпись "Пользователя с таким логином нет", в случае ввода номера "Неверный номер телефона"
    - do: Ввести логин и пароль от уже зарегистрированного пользователя
    - assert: |
        Логин и пароль введены (логин отображается, пароль скрыт)
        "Войти" изменило цвет на желтый
    - do: Тап по "Войти"
    - assert: |
        Пользователь авторизуется
        Отображается экран "Меню"
        Сверху экрана отображается информация о Ф.И. и логине пользователя а так же его аватарка
        Внизу меню, кнопка\пункт "Выход"

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация - Регистрация через "Мобильный телефон":
    - info: |
        Приложение установлено на девайс
        Приложение запущено
        Пользователь не авторизован
        Открыт экран Регистрация(дефолтная версия экрана) (меню - войти -выбрать другой аккаунт - регистрация)
    - do: Ввести пустой номер телефона, либо телефон неверного формата (например 12345)
    - assert: Появляется соответсвующее введенным данным сообщение об ошибке
    - do: Заполнить все поля корректно
    - assert: Поля заполнены, ошибки не отображаются
    - do: Свернуть приложение
    - assert: Приложение свернуто
    - do: Развернуть приложение, из меню многозадачности
    - assert: Приложение развернуто, информация отображается в полном объеме и корректно
    - do: Тап по "пользовательское соглашение"
    - assert: Открывается экран пользовательского соглашения
    - do: Тапом по кнопке назад или  Back вернуться к регистрации
    - assert: Возврат к экрану "Регистрация", информация отображается в полном объеме и корректно
    - do: Тап "Далее"
    - assert: Осуществляется переход на экран "Подтверждение"
    - do: Ввести полученный код
    - assert: Код введен, кнопка "Далее" стала желтой
    - do: Повторить шаги 2 - 5
    - do: Тап по "Далее"
    - assert: |
        Регистрация пользователя завершена успешно.
        На несколько секунд отображается экран выбора пользователя
        Осуществляется переход на экран "Меню"
        Вновь созданный пользователь авторизован.
    - do: Выйти из аккаунта. Тап на войти. В поле логина ввести номер телефона из предыдущих шагов.
    - assert: Пользователь авторизован.

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация - Пополнение списка аккаунтов:
    - info: |
        Приложение установлено на девайс
        Заранее создан Яндекс аккаунт отсутствующий на девайсе (Аккаунт2)
    - do: Перейти к экрану аккаунты (любым способом)
    - assert: Открыт экран Аккаунты
    - do: Создать новый аккаунт (любым из способов регистрации)
    - assert: Аккаунт создан, пользователь авторизован под вновь созданным аккаунтом (Аккаунт 1)
    - do: Тап по Выйти (внизу экрана Меню)
    - assert: Пользователь разлогинен
    - do: Тап по Войти
    - assert: |
        Открыт экран Аккаунты
        Зарегистрированный пользователь отображается в списке сохраненных аккаунтов
    - do: Тап по "Добавить аккаунт"
    - assert: Переход на экран Авторизация
    - do: Авторизоваться под Аккаунтом2
    - assert: Пользователь авторизован как Аккаунт2
    - do: Тап по Выйти (внизу экрана Меню)
    - assert: Пользователь разлогинен
    - do: Тап по Войти
    - assert: |
        Открыт экран Аккаунты
        Аккаунт1 и аккаунт2 отображаются в списке сохраненных аккаунтов

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация - Удаление аккаунтов:
    - info: |
        Приложение установлено на девайс
        В приложение имеются данные нескольких пользователей
        Пользователь не авторизован в приложении
        Приложение запущено на экране Аккаунты
    - do: Лонг тап по аватарке аккаунта который желаем удалить
    - assert: Отображается поп-ап с кнопками "Вы уверены, что хотите удалить аккаунт Аккаунт1 с этого устройства?" с кнопками "Удалить" и "Не удалять аккаунт"
    - do: Тап по "Не удалять аккаунт"
    - assert: |
        Происходит возврат к классическому виду экрана Аккаунты.
        Аккаунт не удален
    - do: Лонг тап по аватарке аккаунта который желаем удалить
    - assert: Отображается поп-ап с кнопками “Вы уверены, что хотите удалить аккаунт Аккаунт1 с этого устройства?” с кнопками "Удалить" и "Не удалять аккаунт"
    - do: Тап по "Удалить"
    - assert: Аккаунт удаляется.

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация - Очистка данных:
    - info: |
        Приложение установлено на девайс
        Пользователь авторизован в приложение под Аккаунт1 (любой свой для теста)
        Приложение запущено
    - do: Перейти в системные настройки - приложения\диспетчер приложений - Я.Навигатор (Я.навигатор бета)
    - assert: Экран со сведениями о приложении открыт
    - do: Тап по "Очистить данные"
    - assert: Данные очищены
    - do: Открыть приложение. Перейти в меню
    - assert: Пользователь не авторизован
    - do: Тап по Войти
    - assert: |
        Открыт экран Аккаунты.
        Аккаунт1 отображается среди известных аккаунтов
    - do: Тап по Аккаунт1
    - assert: Пользователь авторизован как Аккаунт1

    - platforms:
        - android
    - tags:
        - assessors


  Авторизация - Смена ориентации экрана во время Авторизации:
    - info: |
        - Авторизуемся в бета сборках приложений Яндекса, например, Я.Карты ([iOS](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=iphoneos&branch=trunk) / [Android](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=android&branch=trunk) )
        - Приложение навигатор установлено на девайс
        - Пользователь не авторизован
        - Использовать НЕ DEBUG сборку
    - do: Войти в экран "аккаунты" (Меню-Войти)
    - assert: Отображается экран "Аккаунты"
    - do: Перевернуть экран в лендскейп
    - assert: Ориентация изменена
    - do: Тап "добавить аккаунт"
    - assert: Открывается WebView авторизации
    - do: Перевернуть экран в лендскейп
    - assert: |
        Приложение стабильно работает, все элементы отображаются корректно

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация - "Do not keep activities":
    - info: |
        - Включить режим разработчика, для этого: Настройки системы (устройства) -> Система -> О телефоне -> Несколько раз быстро тап по "номер сборки"
        Появится уведомление о том, что вы стали разработчиком / или уже являетесь им
        - Открыть "Настройки системы (устройства)" -> "Система" -> Для разработчиков -> включить "Don't keep activities" / "Не запоминать действия" (в зависимости от устройства название может отличаться
        - Приложение запущено
        - Пользователь не авторизован
        - Яндекс аккаунты на девайсе отсутствуют
    - do: Перейти в Меню  - Авторизация  - Регистрация нового пользователя
    - assert: Открыт экран Регистрации нового пользователя
    - do: Тап по системной кнопке "Назад"
    - assert: |
        Креш отсутсвует
        Происходит возврат назад (*возможен возврат на экран "карты")

    - platforms:
        - android
    - tags:
        - assessors


  Авторизация - Перенос данных в пустой аккаунт:
    - description: Проверить что данные добавленные при неавторизованном пользователе перетекли в авторизованный аккаунт
    - info: |
        Приложение установлено на девайс
        Пользователь не авторизован
        Приложение запущено
        В приложение уже закачаны\добавлены\изменены:
        - добавлены точки в мои места:
                                           - дом
                                           - работа
                                           - избранное
                                           - точка в списке
        - созданы списки в моих местах (как пустые так и с точками)
        - запросы на поиск (как голосовые так и текстовые)
        - история поездок (по избранным местам и нет)
        - изменены дефолтные настройки звука\уведомления и прочие
        - закачано несколько карт
    - do: |
        Тап "Войти" в меню
        Авторизоваться существующим аккаунтом
    - assert: Пользователь авторизован
    - do: Проверить скачанный кэш
    - assert: Скачанные до этого карты, отображаются корректно
    - do: Проверить всевозможные настройки
    - assert: |
        Все настройки остались в том состояние, в каком были до авторизации
        (*в случае расхождения смотреть пояснение в Description)
    - do: Проверить Мои места
    - assert: |
        Все точки и списки в моих местах перенесены корректно
        нету утерянных записей
    - do: Проверить "Недавние"
    - assert: |
        Все недавние перенесены корректно с сохранением последовательности
        Нету утерянных записей
    - do: Проверить  Историю поиска
    - assert: |
        История поиска перенесена корректно с сохранением последовательности
        Нету утерянных записей

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация - Перенос данных в не пустой аккаунт:
    - description: Проверить перенос данных неавторизованного пользователя в не пустой аккаунт
    - info: |
        Приложение установлено на девайс
        Пользователь не авторизован. В приложении добавлены:
        точки в мои места:
                                           - дом
                                           - работа
                                           - избранное (точки с разными адресами но одинаковыми названиями)
                                           - точка в списке
        - созданы списки в моих местах (как пустые так и с точками, с одинаковыми названиями)
        - добавлены запросы на поиск
        - установлен нестандартный курсор, голос
        - изменены дефолтные настройки оповещение и отображение ДС, платные дороги
        Имеется аккаунт в котором:
        - добавлены точки в мои места:
                                           - дом
                                           - работа
                                           - избранное (точки с разными адресами но одинаковыми названиями)
                                           - точка в списке
        - созданы списки в моих местах (как пустые так и с точками, с одинаковыми названиями)
        - добавлены запросы на поиск
        - установлен нестандартный курсор, голос
        - изменены дефолтные настройки оповещение и отображение ДС, платные дороги
    - do: |
        Тап “Войти” в меню
        Авторизоваться существующим аккаунтом
    - assert: Пользователь авторизован
    - do: Проверить скачанный кэш
    - assert: Скачанные до  логина карты, отображаются корректно.
    - do: Проверить настройки оповещение и отображение ДС, платные дороги
    - assert: Отображаются настройки авторизованного пользователя
    - do: Проверить Мои места
    - assert: |
        Все точки и списки в моих местах перенесены корректно
        Нет утерянных записей
        Списки с одинаковыми именами объединены
    - do: Проверить "Недавние"
    - assert: |
        Все недавние перенесены корректно с сохранением последовательности (с Аккаунта и неавторизованного пользователя)
        Нет утерянных записей
    - do: Проверить  Историю поиска
    - assert: |
        История поиска перенесена корректно с сохранением последовательности (с Аккаунта и неавторизованного пользователя)
        Нет утерянных записей

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация - Выход:
    - info: |
        Приложение установлено на девайс
        В приложение и Аккаунт1 уже закачаны\добавлены\изменены:
        - добавлены точки в мои места:
                                           - дом
                                           - работа
                                           - избранное (точки с разными адресами но одинаковыми названиями)
                                           - точка в списке
        - созданы списки в моих местах (как пустые так и с точками, с одинаковыми названиями)
        - есть история поиска
        - изменены дефолтные настройки звука\уведомления и прочие
        - закачано несколько карт
        Пользователь авторизован, настройки перенесены корректно
    - do: Тап по Выйти
    - assert: Пользователь разлогинен
    - do: Проверить скачанный кэш
    - assert: Скачанные до логина карты, отображаются корректно.
    - do: Проверить все возможные настройки
    - assert: Все настройки скинуты к дефолтному состоянию
    - do: Проверить Мои места
    - assert: Мои места - пусты
    - do: Проверить “Недавние”
    - assert: Недавние - пусты
    - do: Проверить Историю поиска
    - assert: История поиска - пуста

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация:
    - info: |
        Пользователь не авторизован
    - do: |
        Перейти на экран «Меню»
    - assert: |
        В верхней части контейнера присутствует кнопка "Войти"
    - do: |
        Тап на "Войти"
        **Если после этого показывается список сохраненных аккаунтов:**
        Тап на "Добавить аккаунт**
    - assert: Происходит переход на экран ввода логина
    - do: |
        Ввести логин тестового аккаунта
        Тап на "Далее"
        Ввести пароль от тестового аккаунта
        Тап на "Далее"
    - assert: |
        - Происходит возврат в Меню
        - Кнопка "Войти" не отображается
        - На ее месте отображается Имя пользователя и его аватар
    - do: |
        Отскроллиться вниз контейнера
        Тап на кнопку "Выйти"
    - assert: |
        - Вверху экрана «Меню» снова отображается кнопка «Войти».
        - Кнопка «Выйти» не отображается

    - platforms:
        - motrex
        - geely
        - vaz
        - carsharing_t3
        - ios
        - nissan
        - android
        - t3am
        - autochip
        - first_run_hu
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Автологин при первом запуске:
    - description: |
        **Для Android:**
        Сделали автологин для Андройда, он не прозрачный как и iOS и имеет таймаут 2-3 секунды. Срабатывает автологин заметно медленнее чем на iOS, из за этого автологин может отображаться и на других окнах навигатора (Поиск / Мои места / Меню). Автологин подтягивает данные сохраненных аккаунтов.
        **Для iOS:**
        Проверка подтягивания аккаунтов для автологина из Аккаунт Менеджера.
        Девайс очищен (Настройки/ Основные/ Сброс/ Сбросить контент и настройки)
    - info: |
        - На девайсе в Настройки-Google-Smartlock для паролей -  проверить, что стоит активный чекбокс "Предлагать сохранять пароли" и что Навигатор не находится в запрещенных приложениях
        - Авторизуемся в бета сборках приложений Яндекса, например, Я.Карты ([iOS](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=iphoneos&branch=trunk) / [Android](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=android&branch=trunk) )
        - Приложение Я.Навигатор установлено на девайс
        - Навигатор не запускался ранее
        - Использовать НЕ DEBUG сборку
    - do: Запустить приложение, портретная ориентация
    - assert: |
        Отображается экран Карта
        Отображается плашка автоматической авторизации http://jing.yandex-team.ru/files/nikdemin/2017-09-13_1443.png
        Таймаут 2-3 с
    - do: Тап по плашке
    - assert: Плашка не реагирует на тап
    - do: Проверить автологин при наличии нескольких аккаунтов в Аккаунт Менеджере
    - assert: Автологин должен осуществится под первым аккаунтомом из карусели АМ (т.е. самым левым/верхним)
    - do: Проверить переводы в плашке автологина на поддерживаемых языках (en, tr, uk, fr, ru).
    - assert: |
        Надписи :
        - автоматический вход в аккаунт
        - продолжить
        - выйти
        правильно переведены на все поддерживаемые языки

    - platforms:
        - geely
        - ios
        - t3am
        - android
    - tags:
        - assessors


  Автологин при первом запуске в альбомной ориентации:
    - description: |
        **Для Android:**
        Сделали автологин для Андройда, он не прозрачный как и iOS и имеет таймаут 2-3 секунды. Срабатывает автологин заметно медленнее чем на iOS, из за этого автологин может отображаться и на других окнах навигатора (Поиск / Мои места / Меню). Автологин подтягивает данные сохраненных аккаунтов.
        **Для iOS:**
        Проверка подтягивания аккаунтов для автологина из Аккаунт Менеджера.
        Девайс очищен (Настройки/ Основные/ Сброс/ Сбросить контент и настройки)
    - info: |
        - На девайсе в Настройки-Google-Smartlock для паролей -  проверить, что стоит галочка "Предлагать сохранять пароли" и что Навигатор не находится в запрещенных приложениях
        - Авторизуемся в бета сборках приложений Яндекса, например, Я.Карты ([iOS](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=iphoneos&branch=trunk) / [Android](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=android&branch=trunk) )
        - Приложение Я.Навигатор установлено на девайс
        - Навигатор не запускался ранее
        - Использовать НЕ DEBUG сборку
    - do: Запустить приложение, альбомная ориентация
    - assert: |
        Отображается экран Карта
        Отображается плашка автоматической авторизации
        ![image](https://jing.yandex-team.ru/files/warmtwinkle/photo_2019-12-06_17-03-00%20%281%29.jpg)
        Пропадает через 2-3 с
    - do: Тап по плашке
    - assert: Плашка не реагирует на тап
    - do: Проверить, что данные подтянулись из аккаунта
    - assert: Все данные (настройки, мои места и пр.) перенесены

    - platforms:
        - geely
        - ios
        - t3am
        - android
    - tags:
        - assessors


  Автологин из SmartLock. Дорегистрированный ПДД:
    - description: |
        Smart Lock сохраняет аккаунты в учётной записи google, которыми можно авторизоваться в мобильном приложении, выбирая их из списка.
        Включение или отключение Smart Lock для паролей:
        Функция “Smart Lock для паролей” включена по умолчанию. Чтобы отключить или снова включить ее, выполните следующие действия:
        - В зависимости от устройства Android выполните одно из следующих действий:
        - Перейдите в настройки устройства. Прокрутите экран вниз и выберите Google.
        - Откройте приложение “Настройки Google” Настройки Google.
        - Нажмите Smart Lock для паролей.
        - И включите параметры:
        Smart Lock для паролей. Позволяет сохранять пароли в приложениях Android и на сайтах в Chrome, а также выполнять вход с помощью учетных данных, хранящихся в аккаунте Google.
        Автоматический вход. Позволяет на всех устройствах автоматически выполнять вход на сайты и в приложения, связанные с аккаунтом Google.
        Изменить список сохранённых паролей можно тапнув по полю “Сохраненные пароли” и перейдя в веб-версию настройки SmartLock
        В тестируемом приложениии и на девайсе в целом нет авторизованных аккаунтов Яндекс.
    - info: |
        Нет авторизованных аккаунтов.
        В настройках устройства включены смартлок и автозаполнение паролей.
        В смартлок сохранен один яндекс аккаунт.
        ---
        (ПДД - Ozarbi Afashokov, [14 сент. 2018 г., 14:37:02]:
        почта для доменов или проще говоря корпоративная почта, но не яндексовая
        парочку для нас дали:
        yndx-rc.pddtest1@xaker.ru / simple123
        yndx-rc.pddtest2@xaker.ru / simple123
        yndx-rc.pddtest3@xaker.ru / simple123)
    - do: Перейти в пункт “AUTO LOGIN”
    - do: Тап Exactly one with SmartLock
    - assert: |
        Всплывает синяя плашка Goggle об успешном автологине аккаунтом из смартлока с ттекстом:
        “ ‘login’
        Google Smart Lock”
        и с заглушкой вместо авы.

    - platforms:
        - android
    - tags:
        - assessors


  Автологин из SmartLock. Дорегистрированный лайт:
    - description: |
        Smart Lock сохраняет аккаунты в учётной записи google, которыми можно авторизоваться в мобильном приложении, выбирая их из списка.
        Включение или отключение Smart Lock для паролей:
        Функция “Smart Lock для паролей” включена по умолчанию. Чтобы отключить или снова включить ее, выполните следующие действия:
        - В зависимости от устройства Android выполните одно из следующих действий:
        - Перейдите в настройки устройства. Прокрутите экран вниз и выберите Google.
        - Откройте приложение “Настройки Google” Настройки Google.
        - Нажмите Smart Lock для паролей.
        - И включите параметры:
        Smart Lock для паролей. Позволяет сохранять пароли в приложениях Android и на сайтах в Chrome, а также выполнять вход с помощью учетных данных, хранящихся в аккаунте Google.
        Автоматический вход. Позволяет на всех устройствах автоматически выполнять вход на сайты и в приложения, связанные с аккаунтом Google.
        Изменить список сохранённых паролей можно тапнув по полю “Сохраненные пароли” и перейдя в веб-версию настройки SmartLock
        В тестируемом приложениии и на девайсе в целом нет авторизованных аккаунтов Яндекс.
    - info: |
        Нет авторизованных аккаунтов.
        В настройках устройства включены смартлок и автозаполнение паролей.
        В смартлок сохранен один лайт аккаунт.
        ---
        Ozarbi Afashokov, [14 сент. 2018 г., 14:44:48]:
        yagami@lite.kira
        simple123
    - do: Перейти в пункт “AUTO LOGIN”
    - do: Тап Exactly one with SmartLock
    - assert: |
        Всплывает синяя плашка Goggle об успешном автологине аккаунтом из смартлока с ттекстом:
        “ ‘login’
        Google Smart Lock”
        и с заглушкой вместо авы.

    - platforms:
        - android
    - tags:
        - assessors


  Логин из SmartLock:
    - description: |
        Начиная с 6.6.1 АМ поддерживает smartlock для автологина.
        Для управления паролями, сохраненными в SmartLock необходимо войти в настройки сервисов Google (раздел может находиться в настройках девайса или настройках google chrome). Перейти в раздел SmartLock для паролей (пароли) - Аккаунт Google.
        ---
        Smart Lock сохраняет аккаунты в учётной записи google, которыми можно авторизоваться в мобильном приложении, выбирая их из списка.
        Включение или отключение Smart Lock для паролей:
        Функция “Smart Lock для паролей” включена по умолчанию. Чтобы отключить или снова включить ее, выполните следующие действия:
        - В зависимости от устройства Android выполните одно из следующих действий:
        - Перейдите в настройки устройства. Прокрутите экран вниз и выберите Google.
        - Откройте приложение “Настройки Google” Настройки Google.
        - Нажмите Smart Lock для паролей.
        - И включите параметры:
        Smart Lock для паролей. Позволяет сохранять пароли в приложениях Android и на сайтах в Chrome, а также выполнять вход с помощью учетных данных, хранящихся в аккаунте Google.
        Автоматический вход. Позволяет на всех устройствах автоматически выполнять вход на сайты и в приложения, связанные с аккаунтом Google.
        Изменить список сохранённых паролей можно тапнув по полю “Сохраненные пароли” и перейдя в веб-версию настройки SmartLock
        В тестируемом приложениии и на девайсе в целом нет авторизованных аккаунтов Яндекс.
    - info: |
        В списке сохраненных паролей для Навигатора отсутствуют пароли. Навигатор не добавлен в список приложений, для которых пароли не сохраняются. Включены настройки "предлагать сохранение паролей" и "автоматический вход".
        В Навигаторе пользователь не залогинен.
    - do: Перейти в соседнее приложение. Совершить авторизацию. Сохранить пароль в SmatrLock.
    - do: |
        Перейти в Навигатор.
        Перейти на экран авторизации.
    - assert: Предлагается выбрать аккаунт, сохраненный в SmartLock
    - do: Выбрать аккаунт, сохраненный в SmartLock
    - assert: Производится авторизация в Навигаторе
    - do: Разлогиниться. Авторизоваться в Навигаторе другим аккаунтом. Согласиться на сохранение аккаунта в системе SmartLock.
    - assert: Происходит авторизация. Аккаунт сохранен в SmartLock
    - do: Перейти в соседнее приложение. Авторизоваться в нем вторым аккаунтом из SmartLock
    - assert: Авторизация производится корректно.

    - platforms:
        - android
    - tags:
        - assessors


  Авторизация через социальные сети, авторизациия через Google:
    - info: Пользователь не авторизован
    - do: |
        Перейти в Меню.
        Тап на Войти.
        Если в карусели аккаунтов присутствует аккаунт, тап на "добавить аккаунт"
        Тап на значок Google
    - assert: |
        На iOS открывается вебвью логина.
        На android может открыться виджет с уже введенными аккаунтами гугла или автоматически производится логин.
    - do: |
        (Шаг для android) Если логин на шаге 1 произвелся автоматически, разлогиниться и повторить шаг 1 -> Должен открыться виджет.
        Тап на присутствующий в виджете аккаунт.
    - assert: Производится авторизация аккаунтом гугл в Навигаторе
    - do: (Шаг для android) Разлогиниться. Повторить шаг - В виджете тап на "Другой аккаунт"
    - assert: Произошел переход на страницу авторизации
    - do: Ввести данные существующего гугл аккаунта и подтвердить вход.
    - assert: Производится авторизация в Навигаторе

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Восстановление данных аккаунта:
    - info: |
        Имеется аккаунт. Известны номер телефона и имя пользователя для аккаунта.
        Пользователь не залогинен.
    - do: |
        Перейти в Меню.
        Тап на Войти.
        Если в карусели аккаунтов присутствует аккаунт, тап на “добавить аккаунт”
        Тап на "Я не помню свой логин"
    - assert: Переход на экран восстановления Аккаунта
    - do: Ввести номер телефона, а также имя из Аккаунта 1.
    - assert: Произошел переход на страницу с зарегистрированным Аккаунтом.
    - do: Тап на предложенный аккаунт
    - assert: Открывается страница ввода пароля
    - do: Тап на "я не помню пароль"
    - assert: |
        Открывается вебвью, в котором можно восстановить пароль.
        На ГУ Мотрекс все WebView закрыты для пользователя. При тапе на ссылку "Я не помню свой пароль" появляется тост "Что-то пошло не так"
    - do: |
        Пройти шаги восстановления пароля
        Ввести восстановленный пароль в Навигаторе
    - assert: Пользователь залогинен

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация в приложении после логина в другом приложении Яндекса:
    - info: |
        - На устройстве должно быть установлено отличное от Навигатора приложение Яндекса (например, мобильный яндекс.браузер), в котором должна быть выполнена авторизация одним аккаунтом. Необязательно inhouse, достаточно продовой версии отличного от Навигатора приложения.
        - Других аккаунтов Яндекса на устройстве нет
        - На устройстве НЕ должно быть установлено Навигатора (В дальнейшем для проверки кейса **использовать НЕ DEBUG сборку**)
    - do: Установить Навигатор
    - do: Запустить Навигатор
    - assert: В течение 10 секунд после запуска сверху всплывает плашка автологина “Добро пожаловать, <Имя>”
    - do: Перейти в меню
    - assert: В меню отображается аккаунт Яндекса, которым выполнена авторизация. Это тот же аккаунт, которым выполнена авторизация в отличном от Навигатора приложении Яндекса
    - do: Выгрузить из памяти все установленные приложения Яндекса
    - do: Выполнить авторизацию этим же аккаунтом на https://passport.yandex.ru
    - do: Тап на “Выйти на всех устройствах”. В появившемся диалоге тап “Подтвердить”
    - do: На девайсе запустить отличное от Навигатора приложение Яндекса
    - do: Выполнить релогин в том приложении
    - do: Запустить Навигатор приложение и перейти в меню
    - assert: В меню отображается аккаунт Яндекса, которым выполнена авторизация. Это тот же аккаунт, которым был выполнен релогин в отличном от Навигатора приложении Яндекса

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация в приложении после логина в другом приложении Яндекса без перезапуска:
    - info: |
        - На устройстве должно быть установлено отличное от Навигатора приложение Яндекса (например, Я.Карты [iOS](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=iphoneos&branch=trunk) / [Android](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=android&branch=trunk) ), в котором должна быть выполнена авторизация одним аккаунтом. Обязательно inhouse оба приложения!
        - Других аккаунтов Яндекса на устройстве нет
        - Использовать НЕ DEBUG сборку
    - do: Запустить Навигатор
    - do: Перейти в меню
    - assert: В меню отображается аккаунт Яндекса, которым выполнена авторизация. Это тот же аккаунт, которым выполнена авторизация в отличном от тестируемого приложении Яндекса
    - do: Свернуть тестируемые приложения (не выгружать из памяти)
    - do: Выполнить авторизацию этим же аккаунтом на https://passport.yandex.ru
    - do: Тап на “Выйти на всех устройствах”. В появившемся диалоге тап “Подтвердить”
    - do: На девайсе запустить отличное от Навигатора приложение Яндекса
    - do: Выполнить релогин в отличном от Навигатора приложении Яндекса
    - do: Запустить Навигатор и перейти в меню
    - assert: В меню отображается аккаунт Яндекса, которым выполнена авторизация. Это тот же аккаунт, которым был выполнен релогин в отличном от Навигатора приложении Яндекса

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Проверка взаимодействия приложения с AuthSDK:
    - info: |
        На устройстве установлено приложение Auto.ru из Play Market. В Навигаторе нет авторизованного аккаунта.
        Кейс проходим только на прод версии Навигатора
    - do: |
        Запустить приложение Auto.ru и тап по вкладке “Избранное”, затем по кнопке “Войти”
    - assert: Попадаем на экран авторизации
    - do: Тап кнопку "Войти через Яндекс".
    - assert: Попадаем на экран авторизации Яндекса
    - do: Авторизоваться портальным аккаунтом.
    - assert: Попадаем на экран “Доступ к приложению”, на котором указан логин аккаунта, с которым проходила авторизация.
    - do: Тап на кнопку “Разрешить”
    - assert: Произошла успешная авторизация, во вкладке "Ещё" отображается верный аккаунт.
    - do: Запустить Навигатор.
    - assert: Аккаунт, которым мы авторизовались в Auto.ru также авторизован в Навигаторе.

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация из SWC:
    - info: |
        Чтобы включить SWC необходимо перейти в Настройки -> Пароли и учетные записи и включить пункт автозаполнять пароли (на старших ios) Настройки -> Safari -> Автозаполнение и включить пункт Имена и пароли
        В SWC нет авторизованных аккаунтов.
        Установить на девайс яндексовое приложение, отличное от тестируемого, например, Я.Карты ([iOS](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=iphoneos&branch=trunk))
    - do: Авторизоваться в Навигаторе
    - assert: Авторизация прошла успешно. Появляется плашка с предложением сохранить аккаунт в SWC
    - do: Тап “Сохранить”
    - assert: Сохранение прошло успешно.
    - do: Запустить соседнее приложение и перейти в меню добавления аккаунта
    - do: Перейти на экран ввода логина в соседнем приложении
    - assert: Открывается экран авторизации. Появляется диалог SWCс сохраненным в тестируемом приложении аккаунтом
    - do: Выбрать аккаунт из SWC
    - assert: Авторизация проходит успешно. Приложение работаеткорректно с авторизованным из SWC аккаунтом.
    - do: Повторить предыдущие шаги, авторизовавшись сперва в соседнем приложении, а затем - в Навигаторе.

    - platforms:
        - ios
    - tags:
        - assessors


  Разные типы аккаунтов:
    - description: |
        Лайт-Аккаунт
        Аккаунт, зарегистрированный с помощью уже существующего стороннего емейла. Зарегистрировать лайта можно через форму регистрации https://passport-rc.yandex.ru/registration/lite
        На регистрации в поле "Адрес электронной почты" - адрес электронной почты стороннего сервиса (гугл, мейлру, яху и другие), остальные поля заполнять как обычно. На стороннюю почту придёт код подтверждения для завершения регистрации.
        ПДД-аккаунт или почта для домена.
        Это аккаунты яндекс, которые были зарегистрированы на поддомен Яндекс (например, пользователь коннекта). ПДД могут авторизоваться и на других сервисах Яндекса — например, в Диске или Музыке. Для этого достаточно ввести используемый электронный адрес в качестве логина. Но у ПДД есть и некоторые ограничения, которые могут быть наложены администратором домена.
        Можно использовать следующие ПДД-аккаунты:
        yndx-rc.pddtest1@xaker.ru / simple123
        yndx-rc.pddtest2@xaker.ru / simple123
        yndx-rc.pddtest3@xaker.ru / simple123
    - info: Имеются ПДД и лайт аккаунты.
    - do: Авторизоваться в приложении с помощью лайт-аккаунта
    - assert: Авторизация проходит успешно
    - do: Авторизоваться в приложении с помощью ПДД аккаунта
    - assert: Авторизация проходит успешно

    - platforms:
        - motrex
        - autochip
        - geely
        - carsharing_t3
        - ios
        - t3am
        - android
    - tags:
        - assessors


  Тестирование логина и синхронизации данных:
    - info: |
        - Пользователь не авторизован.
        - В тестовом аккаунте изменены следующие стандартные значения настроек:
        - Меню - Настройки - Курсор
        - Меню - Настройки - Голос
        - Меню - Настройки - Карта и интерфейс - Дорожные события
        - а также присутствует история в разделах:
        - Поиск - История
        - Мои места - Недавние
        - а также добавлены точки Дом/Работа и точки в Избранном
    - do: |
        Перейти в Меню
        Тап на кнопку "Войти"
        Ввести данные тестового аккаунта
        Тап на "Войти"
    - assert: Происходит авторизация
    - do: |
        Перейти на экран "Поиск"
        Тап на "История"
    - assert: В истории отображается поисковая история.
    - do: Перейти на экран "Мои места".
    - assert: |
        Среди закладок присутствуют:
        - Точки дом/работа
        На **Android**: Отображается адрес добавленной точки.
        На **iOS**: Отображается расстояние до добавленной точки.
        - Точки Избранного
        Справа от заголовков точек отображается расстояние до этих точек от текущего местоположения пользователя.
    - do: Тап на "Недавние"
    - assert: |
        - В списке "Недавние" присутствуют последние поездки - точки, к которым был построен маршрут.
        - Указано расстояние до каждой из точек в списке.
    - do: Перейти в Меню - Настройки
    - assert: В настройках Голос и Курсор отображается нестандартное значение, установленное ранее.
    - do: |
        Перейти в раздел "Карта и интерфейс"
        Тап на "Дорожные события"
    - assert: Все или несколько настроек в нестандартном положении
    - do: |
        Вернуться в Меню
        Проскроллить экран вниз.
        Тап на кнопку "Выйти"
    - assert: Происходит выход из аккаунта.

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Авторизация головы по QR коду (только для ГУ):
    - description: |
        https://st.yandex-team.ru/MOBNAVI-13969
        https://st.yandex-team.ru/MOBNAVI-14518 - появилась возможность использовать сторонний сканер QR кода для авторизации. При его использование открывается интент, который вводит код, пользователю остается тап кнопку войти
    - info: |
        **Подготовка Телефона:**
        - Android девайс с play-сервисами и камерой
        - Установить навигатор (например из apple / google store)
        - Залогиниться на девайсе
        - Сторонний QR сканер
        **Подготовка Я.Авто:**
        - поставить нужную сборку
    - do: |
        На телефоне перейти в **Меню- > Мой автомобиль -> Авторизовать Яндекс.Авто -> Сканировать QR код**
        - При запросе дать доступ к камере
    - assert: Включена камера для сканирования QR
    - do:  Навести на QR-код
    - assert: Происходит авторизация. На ГУ отображается сообщение об успешной авторизации.
    - do: Перейти на ГУ в навигатор и убедиться в произведенной авторизации.
    - assert: Все данные аккаунта подтянулись.
    - do: Повторить шаг 3-4 с использованием стороннего QR сканера
    - assert: Авторизация происходит и данные аккаунта подтянулись
    - do: |
        Выйти из аккаунта на телефоне.
        Перейти в Меню и проверить, что раздел мой автомобиль с пунктом меню Авторизация в Яндекс.Авто **отсутствует**
    - assert: Раздел мой автомобиль с пунктом меню Авторизация в Яндекс.Авто **отсутствует** у неавторизованного пользователя

    - platforms:
        - carsharing_t3
        - t3am
    - testing:
        - acceptance_navi


  Авторизация головы по цифровому коду (только для ГУ):
    - description: |
        https://st.yandex-team.ru/MOBNAVI-13969 Android
        https://st.yandex-team.ru/MOBNAVI-13971 iOS
    - info: |
        **Подготовка Телефона:**
        - Android девайс с play-сервисами и камерой
        - Залогиниться на девайсе
        **Подготовка Я.Авто:**
        - поставить последнюю сборку из мастера
    - do: |
        На телефоне перейти в **Меню- > Мой автомобиль -> Авторизовать Яндекс.Авто**
    - assert: Отображается экран с полем ввода кода.
    - do: |
        Тап на "Войти" на ГУ.
        Ввести код с ГУ в поле ввода кода в телефоне.
    - assert: Происходит авторизация. На ГУ отображается сообщение об успешной авторизации.
    - do: Перейти на ГУ в навигатор и убедиться в произведенной авторизации.
    - assert: Все данные аккаунта подтянулись.
    - do: |
        Выйти из аккаунта на телефоне.
        Перейти в Меню и проверить, что раздел мой автомобиль с пунктом меню Авторизация в Яндекс.Авто отсутствует
    - assert: Раздел мой автомобиль с пунктом меню Авторизация в Яндекс.Авто отсутствует у неавторизованного пользователя

    - platforms:
        - carsharing_t3
        - t3am
    - testing:
        - acceptance_navi


  Авторизация через magic link:
    - description: При вводе email-адреса в процессе авторизации, на введенный почтовый ящик приходит письмо со ссылкой, перейдя по которой, пользователь авторизует себя в приложении
    - info: Подготовлен тестовый почтовый ящик. Для тестов можно использовать сервис https://10minutemail.com
    - do: |
        - Перейти в Меню
        - Тап по Войти
        - Тап на Зарегистрироваться
        - Выбрать "Продолжить с вашей почтой"
    - assert: Открывается WebView ввода адреса почтового ящика для регистрации
    - do: |
        - Ввести почтовый адрес, подготовленный ранее
        - Тап на "Зарегистрироваться"
    - assert: |
        - Происходит переход на экран подтверждения регистрации
        - В течение нескольких минут на тестовую почту приходит письмо о регистрации
    - do: Тап на "Открыть почту"
    - assert: Происходит открытие почтового клиента, установленного по умолчанию, либо появляется поп-ап выбора приложений со списком почтовых клиентов
    - do: |
        - Если был  выполнен переход в почтовый клиент, вернуться в Навигатор
        - Открыть письмо, пришедшее на тестовый почтовый ящик
        - Тап по кнопке "Подтвердить адрес" в письме
        - Выбрать "Отмена"
    - assert: |
        - Происходит отмена сессии входа
        - На экране девайса отображается сообщение "Произошла ошибка. Вы отменили вход"
    - do: |
        - Тап на "Назад"
        - Повторить шаги 1-2
        - Повторить шаг 4, выбрав в письме "Все верно"
    - assert: На девайсе происходит авторизация пользователя
    - do: Выйти и повторно авторизоваться новым аккаунтом, выбрав его в списке доступных
    - assert: Авторизация произошла успешно
    - do: На втором девайсе выполнить авторизацию этим аккаунтом
    - assert: На тестовую почту пришло письмо с ссылкой для авторизации
    - do: Тап по "Войти" в письме
    - assert: Пользователь авторизовывается на девайсе
    - do: Повторно перейти по ссылке из письма
    - assert: Ссылка недействительна

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Автологин из SmartLock:
    - description: |
        Smart Lock сохраняет аккаунты в учётной записи google, которыми можно авторизоваться в мобильном приложении, выбирая их из списка.
        Включение или отключение Smart Lock для паролей:
        Функция “Smart Lock для паролей” включена по умолчанию. Чтобы отключить или снова включить ее, выполните следующие действия:
        - В зависимости от устройства Android выполните одно из следующих действий:
        - Перейдите в настройки устройства. Прокрутите экран вниз и выберите Google.
        - Откройте приложение “Настройки Google” Настройки Google.
        - Нажмите Smart Lock для паролей.
        - И включите параметры:
        Smart Lock для паролей. Позволяет сохранять пароли в приложениях Android и на сайтах в Chrome, а также выполнять вход с помощью учетных данных, хранящихся в аккаунте Google.
        Автоматический вход. Позволяет на всех устройствах автоматически выполнять вход на сайты и в приложения, связанные с аккаунтом Google.
        Изменить список сохранённых паролей можно тапнув по полю “Сохраненные пароли” и перейдя в веб-версию настройки SmartLock
        В тестируемом приложениии и на девайсе в целом нет авторизованных аккаунтов Яндекс.
    - do: На девайсе через настройки устройства авторизоваться гугл-аккаунтом c одним и только одним сохраненным паролям в SmartLock
    - do: |
        В настройках Google убедиться, что SmartLock включен
    - do: Запустить тестируемое приложение
    - assert: |
        Всплывает синяя плашка Goggle об успешном автологине аккаунтом из Smartlock с текстом:
        “Выполнен вход в аккаунт login Google Smart Lock” и с заглушкой вместо авы.

    - platforms:
        - android
    - tags:
        - assessors


  Проверка автологина в приложении после запуска приложения и релогина в другом приложении Яндекса:
    - info: |
        - Авторизуемся в бета сборках приложений Яндекса, например, Я.Карты ([iOS](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=iphoneos&branch=trunk) / [Android](https://beta.m.soft.yandex.ru/description?app=maps&platform_shortcut=android&branch=trunk) )
        - Других аккаунтов Яндекса на устройстве нет.
        - На устройстве должно быть установлено тестируемое приложение
        - **Если тестируется inhouse сборка Навигатора, то и другое Яндекс-приложение должно быть inhouse**
    - do: Запустить Навигатор
    - do: Перейти в меню
    - assert: В меню отображается аккаунт Яндекса, которым выполнена авторизация. Это тот же аккаунт, которым выполнена авторизация в отличном от Навигатора приложении Яндекса
    - do: Выгрузить из памяти все установленные приложения Яндекса
    - do: Выполнить авторизацию этим же аккаунтом на https://passport.yandex.ru
    - do: Тап на “Выйти на всех устройствах”. В появившемся диалоге тап “Подтвердить”
    - do: На девайсе запустить Навигатор
    - assert: Открывается экран релогина
    - do: Закрыть тестируемое приложение
    - do: На девайсе запустить отличное от Навигатора приложение Яндекса и выполнить действие, требующее авторизации
    - assert: Открывается экран релогина
    - do: Выполнить релогин в том приложении
    - do: Запустить тестируемое приложение
    - assert: В течение 10 секунд после запуска сверху всплывает плашка автологина “Добро пожаловать, <Имя>”
    - do: Перейти в меню.
    - assert: В меню отображается аккаунт Яндекса, которым выполнена авторизация. Это тот же аккаунт, которым выполнена авторизация в отличном от Навигатора приложении Яндекса

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Проверка логирования:
    - description: |
        Необходимо проверить, что в релизной сборке тестируемого приложения нет логов АМ (в том числе сетевых).
        Проверять лучше в  pidcat, фильтруя лога по процессу ru.yandex.yandexnavi.inhouse:passport,
    - info: |
        Для прохождения этого кейса используется Pidcat. Для его установки необходимо в терминале сделать команду: brew install pidcat
    - do: |
        Подключить девайс к системе и выполнить в терминале pidcat ru.yandex.yandexnavi.inhouse:passport
        (если используется не inhouse версия Навигатора, то прописываем соответствующее название процесса)
    - do: |
        Войти в аккаунт в Навигаторе, используя ввод пароля.
        В терминале проверить, что пользовательские данные отсутствуют (имя пользователя, пароль, мастер-токен)
    - assert: Пользовательские данные отсутствуют
    - do: Выйти из аккаунта
    - assert: Пользовательские данные в терминале отсутствуют
    - do: |
        Зарегистрировать новый аккаунт в Навигаторе
        В терминале проверить, что пользовательские данные отсутствуют (имя пользователя, пароль, мастер-токен)
    - assert: Пользовательские данные отсутствуют
    - do: Повторить предыдущий шаг, выполнив автологин
    - assert: Пользовательские данные в терминале отсутствуют
    - do: Повторить предыдущий шаг, выбрав аккаунт в списке сохраненных аккаунтов
    - assert: Пользовательские данные в терминале отсутствуют
    - do: Удалить сохраненный аккаунт
    - assert: Пользовательские данные в терминале отсутствуют

    - platforms:
        - android


  Авторизация - Отображение списка аккаунтов:
    - info: |
        Приложение установлено на девайс
        Заранее создано два Яндекс аккаунта отсутствующих на девайсе
    - do: Авторизоваться любым аккаунтом (Аккаунт 1)
    - assert: Пользователь авторизован
    - do: Авторизоваться аккаунтом 2
    - assert: Пользователь авторизован аккаунтом 2
    - do: Авторизоваться несколько раз под аккаунтом1 и аккаунтом 2
    - assert: Аккаунт 1 и аккаунт2 отображаются  на экране "Аккаунты" в единичном экземпляре

    - platforms:
        - motrex
        - autochip
        - ios
        - android
    - tags:
        - assessors


  Авторизация через социальные сети. Facebook:
    - description: |
        Проверить возможность авторизации через социальные сети
        Если на девайсе установлено приложение Facebook, то авторизация все равно происходит через браузер
    - info: Пользователь не авторизован
    - do: |
        Перейти в Меню.
        Тап на Войти.
        Тап на “добавить аккаунт”
        Тап на логотип Facebook
        Ввести данные существующего аккаунта
    - assert: Пользователь авторизован

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация через социальные сети. Вконтакте:
    - info: |
        Пользователь не авторизован
        Есть аккаунт в соц. сети Вконтакте
    - do: |
        Тап на Войти в меню
        Тап на “добавить аккаунт”
        Тап на логотип ВКонтакте
        Ввести данные существующего аккаунта
    - assert: Пользователь авторизован

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация через социальные сети. Приложение Вконтакте:
    - info: |
        Пользователь не авторизован в Навигаторе
        На девайсе установлено приложение ВКонтакте, с авторизованным пользователем
    - do: |
        Тап на Войти в меню Навигатора
        Тап на “добавить аккаунт”
    - assert: |
        Осуществляется переход во ВКонтакте
        После выдачи разрешений, осуществляется переход в Навигатор.
        Пользователь залогинен аккаунтом из ВКонтакте.

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация через социальные сети, mail.ru, twitter, Одноклассниики:
    - info: Пользователь не авторизован
    - do: |
        Тап на Войти в меню Навигатора
        Тап на “добавить аккаунт”
        Тап на логотип Mail.ru, Одноклассников или Twitter
        Ввести данные существующего аккаунта
    - assert: Пользователь авторизован

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Авторизация черех Apple ID (успех):
    - description: |
        1) Реализовано с версии IOS 13+
        2) Для тестирования используется сборка из TestFlight
        3) Для тестирования необходим свежий/новый аккаунт Apple ID. Желательно, создать личный, так как на тестовые аккаунты нельзя включать двухфакторную аутентификацию.
    - info: |
        1) Пользователь неавторизован
        2) Двухфакторная аутентификация настроена
    - do: |
        - Зайти в навигатор
        - Перейти в меню
        - Тап по кнопке Войти для авторизации в приложении
    - assert: |
        Если существуют сохраненные аккаунты, то открывается список аккаунтов, внизу которого присутствует кнопка "Добавить аккаунт".
        Если сохраненных аккаунтов нет, то открывается WebView авторизации Яндекс.
    - do: Тап по флажку от сервиса (с логотипом яблочка)
    - assert: Открывается экран "Вход с Apple"
    - do: Тап на кнопку синего цвета "Продолжить"
    - assert: Открывается экран создания учетной записи для Навигатора с подтверждением Touch ID
    - do: |
        - Выбрать один из пунктов E-mail
        - Ввести Touch ID (на девайсах с кнопкой - приложить палец к кнопке)
    - assert: Осуществляется переход на страницу Яндекс Паспорт, в котором указан имя аккаунта, ссылки на пользовательское соглашение, политику конфиденциальности.
    - do: Тап по кнопке Я новый пользователь.
    - assert: Происходит авторизация Навигаторе по аккаунтом AppleID@apl.com
    - do: |
        - Выйти из аккаунта и удалить его из сохраненного списка в Навигаторе
        - Тап по кнопке Войти
        - Тап по флажку с яблоком
    - assert: Открывается экран входа в приложение
    - do: Ввести Touch ID (на девайсах с кнопкой - приложить палец к кнопке)
    - assert: Происходит авторизация в аккаунте.

    - platforms:
        - ios


  Авторизация черех Apple ID (взаимодействие с кнопками отмена при регистрации):
    - description: |
        1) Реализовано с версии IOS 13+
        2) Для тестирования используется сборка из TestFlight
        3) Для тестирования необходим свежий/новый аккаунт Apple ID. Желательно, создать личный, так как на тестовые аккаунты нельзя включать двухфакторную аутентификацию.
    - info: |
        1) Пользователь неавторизован
        2) Двухфакторная аутентификация настроена
    - do: |
        - Зайти в навигатор
        - Перейти в меню
        - Тап по кнопке Войти для авторизации в приложении
    - assert: |
        Если существуют сохраненные аккаунты, то открывается список аккаунтов, внизу которого присутствует кнопка "Добавить аккаунт".
        Если сохраненных аккаунтов нет, то открывается WebView авторизации Яндекс.
    - do: Тап по флажку от сервиса (с логотипом яблочка)
    - assert: Открывается экран "Вход с Apple"
    - do: Тап по кнопке Отмена
    - assert: Происходит возврат на страницу авторизации Яндекс
    - do: Повторить шаг 2.
    - assert: Открывается экран Вход с Apple
    - do: Тап по кнопке Продолжить.
    - assert: Открывается экран создания учетной записи для Навигатора
    - do: Тап по кнопке Отменить.
    - assert: Происходит возврат на страницу авторизации Яндекс
    - do: |
        - Повторить шаги 4 и 5
        - Не выбирая Email, ввести пароль TouchID ( на девайсах с кнопкой - приложить палец к кнопке)
    - assert: Появляется сообщение об ошибке с просьбой выбрать адрес email
    - do: |
        - Выбрать адрес Email
        - Ввести пароль TouchID ( на девайсах с кнопкой - приложить палец к кнопке)
    - assert: Осуществляется переход на страницу создания аккаунта Яндекс Паспорт.
    - do: Тап по кнопке Закрыть.
    - assert: Происходит возврат на страницу авторизации Яндекс
    - do: Повторить шаг 2
    - assert: Открывается экран входа в приложение
    - do: Ввести Touch ID (на девайсах с кнопкой - приложить палец к кнопке)
    - assert: Открывается экран продолжения регистрации в Яндексе
    - do: |
        Далее, существует баг https://st.yandex-team.ru/MOBNAVI-18950, который объясняется так:
        **Это логика Apple:**
        Когда ты в первый раз регистрируешься через Sign in with Apple, Apple передаёт нам имя-фамилию пользователя. И делает это только единожды, в первый раз.
        Далее, ты прерываешь регистрацию в Яндексе. Аккаунт в Яндексе не зарегистрирован.
        Когда ты пробуешь зарегаться во второй раз – Apple считает, что ФИО он нам однажды уже отдавал и больше не даёт. Яндекс при этом такого аккаунта не знает (потому что регистрация была прервана) и не может зарегистрировать новый аккаунт (потому что не приходят имя-фамилия).
        Лечится это на данный момент только отвязкой Яндекса от Apple-аккаунта в настройках (Настройки – Тап на своё имя – Пароли и безопасность – Приложения, использующие ваш AppleID). После этого, Apple снова отдаст имя-фамилию при регистрации).

    - platforms:
        - ios


  Авторизация черех Apple ID (сохранение данных):
    - description: |
        1) Реализовано с версии IOS 13+
        2) Для тестирования используется сборка из TestFlight
        3) Для тестирования необходим свежий/новый аккаунт Apple ID. Желательно, создать личный, так как на тестовые аккаунты нельзя включать двухфакторную аутентификацию.
    - info: |
        1) Двухфакторная аутентификация настроена
        2) Пользователь уже проходил успешную авторизацию через AppleID
    - do: |
        - Выйти из аккаунта и удалить его из сохраненного списка в Навигаторе
        - Тап по кнопке Войти
        - Тап по флажку с яблоком
    - assert: Открывается WebView входа в приложение
    - do: Ввести Touch ID (на девайсах с кнопкой - приложить палец к кнопке)
    - assert: Происходит авторизация в аккаунте.

    - platforms:
        - ios


  Регистрация второго неофониш-аккаунта с включенными неофонишами через звонок-код:
    - description: Необходима в коде дебаг - панель для тестирования паспорта, в ней значение неофониша - true.
    - info: |
        Необходима в коде дебаг - панель для тестирования паспорта, в ней значение неофониша - true.
        Панель находтся DS -> Misc -> AM debug
    - do: Зайти в пункт меню Навигатора и выйти из аккаунта (если авторизован), а так же удалить все аккаунты в списке.
    - assert: Открывается WebView ввода логина, почты или телефона.
    - do: Тап по Зарегестрироваться.
    - assert: Открывается страница ввода номера телефона.
    - do: Ввести номер телефона и тап по кнопке Продолжить с телефоном.
    - assert: Поступает входной звонок.
    - do: |
        Принять звонок и ввести код
        Тап на кнопку Далее.
    - assert: Открывается WebViewWebView ввода имени и фамилии.
    - do: |
        - Ввести имя и фамилию.
        - Тап по кнопке далее
    - assert: Осуществляется вход в Навигатор под авторизованным новым пользователем.

    - platforms:
        - ios
        - android


  Вход в аккаунт-неофониш, указав вместо логина номер привязанного телефона:
    - description: |
        Необходима в коде дебаг - панель для тестирования паспорта, в ней значение неофониша - true.
        Панель находтся DS -> Misc -> AM debug
    - info: |
        Необходима в коде дебаг - панель для тестирования паспорта, в ней значение неофониша - true.
        Панель находтся DS -> Misc -> AM debug
        На одном номере уже существует несколько неофонишей.
    - do: В окне авторизации Яндекс (логин) вводим номер телефона на котором уже существуют неофониши.
    - assert: Приходит код для авторизации.
    - do: Ввести код.
    - assert: Происходит вход в один из аккаунтов - неофонишей, кому принадлежит телефонный алиас. Этот неофониш забирает алиас себе, так что, как правило, **это последний зарегистрированный на этот номер неофониш.**

    - platforms:
        - ios
        - android

  Polo. Отображения интро скрина при Авторизации:
    - info: Пользователь не авторизован
    - do: |
        Тап Меню
        Тап Войти
    - assert: |
        Открылся интроскрин с QR-кодом
        Отображается текст: Для авторизации понадобится пароль. Создайте его в телефоне и вернитесь сюда продолжить авторизацию. Вам поможет инструкция. Чтобы открыть её, отсканируйте QR-код.
        Присутсвуют кнопки: "Всё потом" и "Продолжить авторизацию"
    - do: Тап Все потом
    - assert: |
        Интроскрин закрылся
        Открыто меню

    - platforms:
        - first_run_hu


  Polo. Открытие лендинга с инструкцией по авторизации:
    - info: Пользователь не авторизован
    - do: |
        Тап Меню
        Тап Войти
    - assert: Открылся интроскрин с QR-кодом
    - do: Отсканировать QR-код с девайса
    - assert: |
        Открывается лендинг https://yandex.ru/promo/navi/oem/volkswagen/manual
        Присутсвует гипперссылка "Управление аккаунтом"

    - platforms:
        - first_run_hu


  Polo. Авторизация по паролю от аккаунта(пароль от приложений выкл):
    - info: |
        На тестовом аккаунте не включен пароль для приложений
        Пользователь не авторизован
    - do: |
        Тап Меню
        Тап Войти
    - assert: Открылся интроскрин с QR-кодом
    - do: |
        Тап Продолжить авторизацию
        Через АМ авторизоваться тестовым аккаунтом
    - assert: При попытке авторизации выдает "Неверный пароль"

    - platforms:
        - first_run_hu


  Polo. Авторизация по паролю от аккаунта(пароль от приложений вкл):
    - info: |
        На тестовом аккаунте включен пароль для приложений(Паспорт -> Пароли приложений -> Создать новый пароль -> Автомагнитолы)
        Пользователь не авторизован
    - do: |
        Тап Меню
        Тап Войти
    - assert: Открылся интроскрин с QR-кодом
    - do: |
        Тап Продолжить авторизацию
        Через АМ авторизоваться тестовым аккаунтом(использовать пароль от аккаунта)
    - assert: При попытке авторизации выдает "Неверный пароль"

    - platforms:
        - second_run_hu


  Polo. Авторизация по паролю от приложений:
    - info: |
        На тестовом аккаунте включен пароль для приложений(Паспорт -> Пароли приложений -> Создать новый пароль -> Автомагнитолы)
        Пользователь не авторизован
    - do: |
        Тап Меню
        Тап Войти
    - assert: Открылся интроскрин с QR-кодом
    - do: |
        Тап Продолжить авторизацию
        Через АМ авторизоваться тестовым аккаунтом(использовать пароль от приложений)
    - assert: Пользователь авторизован

    - platforms:
        - first_run_hu


  Polo. Авторизация по паролю от приложений после отключения:
    - info: |
        На тестовом аккаунте был включен пароль для приложений(Паспорт -> Пароли приложений -> Создать новый пароль -> Автомагнитолы)
        Пользователь не авторизован
    - do: |
        Тап Меню
        Тап Войти
    - assert: Открылся интроскрин с QR-кодом
    - do: |
        Тап Продолжить авторизацию
        Через АМ авторизоваться тестовым аккаунтом(использовать старый пароль от приложений)
    - assert: При попытке авторизации выдает "Неверный пароль"

    - platforms:
        - second_run_hu


  Поддержка обводки аватарки пользователя Яндекс.Плюс:
    - info: |
        Запущен Навигатор
        Пользователь неавторизован
        Включен эксперимент Developer settings - Misc - Fast day & night switching - On
        Перезагрузить приложение
    - do: Авторизоваться аккаунтом с подпиской Яндекс.Плюс (Если аккаунта нет - читай в [ПРИВЕТСТВЕННОЙ СТРАНИЦЕ](https://wiki.yandex-team.ru/eva/testing/projects/navigator/#kakproxodittest-kejjsytrebujushhienalichiepodpiskijandeks.pljus) выше)
    - assert: |
        Пользователь успешно авторизован
        Аватарка пользователя обведена цветной обводкой
    - do: Сменить ориентацию экрана на горизонтальную
    - assert: |
        Расположение аватарки и логина пользователя находятся по центру
        Аватарка пользователя обведена цветной обводкой
    - do: Дождаться смены ночного и дневного режимов
    - assert: При смене режимов аватарка пользователя обведена цветной обводкой

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Отсутствие обводки аватарки пользователя без Яндекс.Плюс:
    - info: |
        Запущен Навигатор
        Пользователь авторизован аккаунтом без подписки Яндекс.Плюс
    - do: Тап на таббар Меню
    - assert: |
        Открывается меню приложения
        Аватарка пользователя не обведена цветной обводкой

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Открытие AM при тапе на аккаунт в Профиле:
    - info: |
        Пользователь авторизован
        В приложении сохранено несколько аккаунтов в Аккаунт Менеджере
        Открыто Меню
    - do: Тап на аватарку пользователя
    - assert: Открывается Аккаунт Менеджер
    - do: Тап "Закрыть"
    - assert: Аккаунт Менеджер закрывается
    - do: Тап на имя пользователя
    - assert: Открывается Аккаунт Менеджер

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Открытие AM при тапе на аккаунт в Профиле. Смена аккаунта:
    - info: |
        Пользователь авторизован
        В приложении сохранено несколько аккаунтов в Аккаунт Менеджере
        Открыто Меню
    - do: Тап на имя пользователя
    - assert: Открывается Аккаунт Менеджер
    - do: Выбрать другой акааунт
    - assert: |
        Аккаунт Менеджер закрывается
        Аккаунт в приложении меняется на выбранный

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Открытие AM при тапе на аккаунт в Профиле. Удалить аккаунт:
    - info: |
        Пользователь авторизован
        В приложении сохранено несколько аккаунтов в Аккаунт Менеджере
        Открыт Аккаунт Менеджер
    - do: Лонгтап по аккаунту, в котором пользователь авторизован
    - assert: Открывается вебвью
    - do: |
        ios: Тап на "Забыть на этом устройстве"
        android: Тап на "Удалить"
    - do: Тап на "Закрыть" Аккаунт Менеджер
    - assert: |
        Аккаунт Менеджер закрывается
        Пользователь разлогинивается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Открытие AM при тапе на аккаунт в Профиле. Удалить другой аккаунт:
    - info: |
        Пользователь авторизован
        В приложении сохранено несколько аккаунтов в Аккаунт Менеджере
        Открыт Аккаунт Менеджер
    - do: Лонгтап по аккаунту, в котором пользователь не авторизован
    - assert: Открывается вебвью
    - do: |
        ios: Тап на "Забыть на этом устройстве"
        android: Тап на "Удалить"
    - do: Тап на "закрыть" Аккаунт Менеджер
    - assert: |
        Аккаунт Менеджер закрывается
        Пользователь остается авторизованным

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors
