components: cars_autocode
testing:
  - regress

specs:
  Вид вьюшки машины из денег:
    - description: Машина из денег - это машина пришедшая из сторонних SDK (Парковки, заправки, штрафы)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - У пользователя добавлена машина в Отзывные кампании. Для этого в меню навигатора тап "Добавить машину" и выполнить поиск по ВИН/ГРЗ, например Т 777 ТТ 77, добавить машину тапнув по "Верно, это моя машина" и закрыть экран карточки авто
        - Пользователь находится в меню навигатора
    - do: Добавить машину из денег. Для этого необходимо перейти в Настройки -> Developer settings -> Ya.Auto -> Insert Ya.money car и перезапустить приложение
    - do: Тап в "Меню навигатора"
    - assert: |
        - Под именем пользователя появилась вьюшка машины из денег
        - Вьюшка содержит:
            1) Название машины "Fake car"
            2) Госномер машины формата "А 000 АА 000"
            3) Справа от Госномера расположен крестик, для удаления вьюшки машины из денег
            3) Плашка с текстом "Проверить на отзывные кампании"
            4) Текст под вьюшкой денег "Вы ранее добавили эти данные для оплаты штрафов или парковки", который показывается только под вьюшками, пришедшими из денег
        - Под вьюшками показаны точки, информирующие о кол-ве добавленных авто
    - do: Проскролить влево
    - assert: |
        - Вьюшки скролятся
        - Плашка "Проверить на отзывные кампании" скрывается у обычных машин (НЕ из денег) и кнопкаи "+ Добавить машину"
        - Текст под вьюшкой денег “Вы ранее добавили эти данные для оплаты штрафов или парковки” не показывается у обычных машин (НЕ из денег) и кнопкаи "+ Добавить машину"
        - Точка под вьюшками сменилась на следующую

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Вид нескольких вьюшек машин из денег:
    - description: Машина из денег - это машина пришедшая из сторонних SDK (Парковки, заправки, штрафы)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлено несколько (больше одной) машин из денег. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Developer settings -> Ya.Auto -> Insert Ya.Money car)
        - Пользователь находится на главном экране навигатора (Карта)
    - do: Тап в "Меню навигатора"
    - assert: |
        - Под именем пользователя появились несколько (в зависимости от количества добавленных машин) вьюшек машин из денег
        - Под вьюшками показаны точки, информирующие о кол-ве добавленных авто
    - do: Проскролить влево
    - assert: |
        - Вьюшки скролятся
        - Плашка "Проверить на отзывные кампании" не скрывается
        - Текст под вьюшкой денег “Вы ранее добавили эти данные для оплаты штрафов или парковки” показывается на всех вьюшках, добавленных из денег
        - Точка под вьюшками меняется на следующую
        - Номера машин не совпадают с предыдущими

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Удаление вьюшки машины из денег:
    - description: Машина из денег - это машина пришедшая из сторонних SDK (Парковки, заправки, штрафы)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина из денег. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Developer settings -> Ya.Auto -> Insert Ya.Money car)
        - Пользователь находится на главном экране навигатора (Карта)
        - У пользователя добавлена машина в Отзывные кампании
    - do: Тап на вьюшке машины из денег по крестику 
    - assert: |
        - Открылся поп-ап удаления:
             1) Текст окна: "Удалить информацию о машине?"
             2) кнопки "Удалить" и "Нет"
    - do: Тап "Нет"
    - assert: |
        - Поп-ап закрылся
        - Вьюшка машины из денег не удалилась
    - do: Повторить шаг 1
    - do: Тап "Удалить"
    - assert: |
        - Поп-ап закрылся
        - Вьюшка машины удалилась
        - Показана вьюшка добавленного авто в Отзывные кампании
        - Количество точек уменьшилось на 1

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Проверка машины из денег на отзывные кампании:
    - description: |
        Машина из денег - это машина пришедшая из сторонних SDK (Парковки, заправки, штрафы)
        
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина из денег. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Developer settings -> Ya.Auto -> Insert Ya.Money car)
        - Пользователь находится в меню Нави
        - У пользователя нет добавленных машин
    - do: Тап на вьюшке машины из денег по тексту "Проверить на отзывные кампании"
    - assert: |
        - Открылся экран ввода ВИН/ГРЗ 
        - Поле ввода заполнилось номером, указанном в вьюшке машины из денег
        - Сразу начался автоматический поиск на отзывные кампании
        - После поиска показана карточка с результатом поиска отзывных кампаний автомобиля  
    - do: Закрыть экран с результатом поиска
    - assert: |
        - Показан главный экран навигатора
    - do: Открыть меню навигатора
    - assert: Вьюшка машины из денег не пропала
    - do: Тап на вьюшке машины из денег по тексту “Проверить на отзывные кампании”
    - assert: |
        - Открылся экран ввода ВИН/ГРЗ
        - Поле ввода заполнилось номером, указанном в вьюшке машины из денег
        - Сразу начался автоматический поиск на отзывные кампании
        - После поиска показана карточка с результатом поиска отзывных кампаний автомобиля
    - do: Тап "Верно, это моя машина"
    - assert: Открылся экран Отзывных кампаний автомобиля, добавленного из денег
    - do: |
        В карточке Отзывных кампаний добавленной машины тап "Назад"
    - assert: |
        - Показано меню навигатора
        - Вьюшка машины из денег отсутствует в меню
        - Пользователю добавилась машина с госномером, который был указан на машине из денег
        - Отсутствует задвоение баннера и ленты с авто 

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Добавление строки СТС, при добавлении машины из денег в отзывные кампании:
    - description: Машина из денег - это машина пришедшая из сторонних SDK (Парковки, заправки, штрафы)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина из денег. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Developer settings -> Ya.Auto -> Insert Ya.Money car)
        - У пользователя добавлена одна машина в отзывные кампании **(Не из Денег)**, номер её **отличается** от номера машины, добавленной из Денег. Например, К 645 УК 150
        - Пользователь находится в меню Навигатора
        - В меню выбрана добавленная вьюшка машины 
    - do: Тап по вьюшке машины из Отзывных кампаний
    - assert: |
        - Открылась карточка Отзывных кампаний выбранного авто (не из денег)
        - В карточке Отзывных кампаний отсутствует строка с номером СТС
    - do: Закрыть экран с карточкой авто
    - assert: |
        - Показан главный экран навигатора
    - do: Открыть меню навигатора
    - do: Добавить машину из денег по тапу на "Проверить на отзывные кампании"
    - assert: |
        - Открыта карточка отзывных кампаний добавленно машины из денег
        - Выше строки с цветом автомобиля показана строка с СТС

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Точка во вьюшке машины из Я.Денег пропадает при проверке на ОК:
    - description: |
        Машина из денег - это машина пришедшая из сторонних SDK (Парковки, заправки, штрафы).
        В данном кейсе проверяем условия показа точки в каждой вьюшке машины из Я.Денег. Кроме машины из Я.Денег точка не должна показываться ни в какой другой вьюшке. Как только автомобиль подтверждается как авто пользователя (после проверки на Отзывные кампании), машина перестаёт быть машиной из Я.Денег и теряет точку.
        Машину можно добавить через (Developer settings -> Ya.Auto -> Insert Ya.Money car)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в Навигаторе
        - Добавлены 2 машины из Я.Денег. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Developer settings -> Ya.Auto -> Insert Ya.Money car)
        - Пользователь находится на главном экране навигатора (Карта)
        - У пользователя добавлена машина в Отзывные кампании
    - do: Тап в "Меню навигатора"
    - assert: |
        - Под именем пользователя появились 2 вьюшки машины из Я.Денег
        - Каждая вьюшка содержит:
            1) Название машины "Fake car"
            2) Госномер машины формата "А 000 АА 000"
            3) Справа от Госномера расположен крестик, для удаления вьюшки машины из денег
            3) Плашка с текстом "Проверить на отзывные кампании"
            4) Текст под вьюшкой денег "Вы ранее добавили эти данные для оплаты штрафов или парковки", который показывается только под вьюшками, пришедшими из денег
            5) Слева от "Fake car" показана [синяя точка](https://www.figma.com/file/gTPDm5CDsau0XlB7MCcIgX/Data-transfer?node-id=377%3A4) (и в дневном, и в ночном режимах)
            6) Точка возле машины из Я.Денег не обрезается даже при крупном шрифте на устройстве
        - Под вьюшками показаны точки, информирующие о кол-ве добавленных авто (пагинация)
    - do: Тап по "Проверить на Отзывные кампании" в кнопке с одной из Fake car
    - assert: |
        * Показывается экран поиска по ОК
        * В поле поиска вбит номер Fake car
        * Производится поиск по ОК
        * Показывается результат из базы Авто.ру
    - do: Дважды тап стрелку назад
    - assert: |
        * Показано Меню Нави
        * По-прежнему показаны 2 вьюшки Fake car с точкой
    - do: Повторить шаг 4 с тапом "Верно, это моя машина"
    - assert: Показана карточка авто
    - do: Тап стрелку назад
    - assert: В Меню Нави показаны две добавленные машины пользователя и одна Fake car с точкой во вьюшке

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Вид вьюшки машины из автокода(СТС):
    - description: Машина из автокода (СТС) - это машина, пришедшая из сторонних SDK
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина из СТС. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Developer settings -> Ya.Auto -> Insert STS data car)
        - Пользователь находится на главном экране навигатора (Карта)
        - У пользователя добавлена машина в Отзывные кампании
    - do: Тап Меню Навигатора
    - assert: |
        - Под именем пользователя появилась вьюшка машины из СТС
        - Вьюшка содержит:
            1)  Название машины "Моя машина"
            2) СТС формата "СТС **1234"
            3) Справа от СТС расположен крестик, для удаления вьюшки машины из СТС
            3) Плашка с текстом "Проверить на отзывные кампании"
            4) Текст под вьюшкой СТС "Вы ранее добавили эти данные для оплаты штрафов или парковки", который показывается только под вьюшками, пришедшими из денег
        - Под вьюшками показаны точки, информирующие о кол-ве добавленных авто
    - do: Проскроллить влево
    - assert: |
        - Вьюшки скроллятся
        - Плашка "Проверить на отзывные кампании" скрывается
        - Текст под вьюшкой СТС “Вы ранее добавили эти данные для оплаты штрафов или парковки” не показывается
        - Точка под вьюшками сменилась на следующую

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Вид нескольких вьюшек машин из автокода(СТС):
    - description: Машина из автокода (СТС) - это машина, СТС которой пришло из сторонних SDK
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в Навигаторе
        - Добавлено несколько (больше одной) машин из автокода. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке через Настройки -> Developer settings -> Ya.Auto -> Insert STS data car
        - Пользователь находится на главном экране Навигатора (карта)
    - do: Тапн Меню
    - assert: |
        - Под именем пользователя появились несколько (в зависимости от количества добавленных машин) вьюшек машин из СТС
        - Под вьюшками показаны точки, информирующие о кол-ве добавленных авто
    - do: Проскролить влево
    - assert: |
        - Вьюшки скролятся
        - Плашка "Проверить на отзывные кампании" не скрывается
        - Текст под вьюшкой СТС “Вы ранее добавили эти данные для оплаты штрафов или парковки” показывается на всех вьюшках, добавленных из СТС
        - Точка под вьюшками меняется на следующую
        - Номера СТС не совпадают (Могут совпадать, т.к. машины генерируются автоматически. )

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Удаление вьюшки машины из СТС:
    - description: Машина из автокода (СТС) - это машина, СТС которой пришло из сторонних SDK
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в Навигаторе
        - Добавлена машина из СТС. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке: Настройки -> Developer settings -> Ya.Auto -> Insert STS data car
        - Пользователь находится на главном экране Навигатора (карта)
        - У пользователя добавлена машина в Отзывные кампании
    - do: Тап на вьюшке машины из СТС по крестику 
    - assert: |
        - Открылся поп-ап удаления:
             1) Текст окна: "Удалить информацию о машине?"
             2) кнопки "Удалить" и "Нет"
    - do: Тап "Нет"
    - assert: |
        - Поп-ап закрылся
        - Вьюшка машины из денег не удалилась
    - do: Тап на вьюшке машины из СТС по крестику
    - assert: |
        - Открылся поп-ап удаления:
        1) Текст окна: “Удалить информацию о машине?”
        2) кнопки “Удалить” и “Нет”
    - do: Тап "Удалить"
    - assert: |
        - Поп-ап закрылся
        - Вьюшка машины удалилась
        - Показана вьюшка добавленного авто в Отзывные кампании
        - Количество точек уменьшилось на 1

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Проверка машины из СТС на отзывные кампании:
    - description: Машина из автокода (СТС) - это машина, СТС которой пришло из сторонних SDK
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован
        - Добавлена машина из Денег. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке перейдя в Настройки -> Developer settings -> Ya.Auto -> Insert STS data car
        - Пользователь находится в Меню Нави
        - У пользователя нет добавленных машин
    - do: Тап на вьюшке машины из СТС по тексту "Проверить на отзывные кампании"
    - assert: |
        - Открылся экран ввода ВИН/ГРЗ 
        - Поле ввода заполнилось номером СТС
        - Сразу начался автоматический поиск на отзывные кампании
        - После поиска показана карточка с результатом поиска отзывных кампаний автомобиля  с кнопкаим "Верно, это моя машина" и "Удалить машину"
    - do: Закрыть экран с результатом поиска
    - assert: |
        - Показан главный экран навигатора
    - do: Открыть Меню Нави
    - assert: Вьюшка машины из СТС не пропала
    - do: Тап на вьюшке машины из СТС по тексту “Проверить на отзывные кампании”
    - assert: |
        - Открылся экран ввода ВИН/ГРЗ
        - Поле ввода заполнилось номером СТС
        - Сразу начался автоматический поиск на отзывные кампании
        - После поиска показана карточка с результатом поиска отзывных кампаний автомобиля
    - do: Тап "Верно, это моя машина"
    - assert: |
        - Открылся экран Отзывных кампаний автомобиля, добавленного из СТС
        - В карточке, в поле СТС, записан номер СТС добавленного авто из автокода (последние 4 цифры совпадают)
    - do: |
        Закрыть карточку Отзывных кампаний
    - assert: Показан главный экран навигатора
    - do: Открыть Меню
    - assert: |
        - Вьюшка машины из СТС отсутствует в меню навигатора
        - Пользователю добавилась машина, в карточке которой вписан номер СТС, по которому производился поиск

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Точка во вьюшке машины из СТС:
    - description: |
        Машина из автокода (СТС) - это машина, СТС которой пришло из сторонних SDK.
        В данном кейсе проверяем наличие, вид точки в каждой вьюшке машины из СТС. Кроме машины из СТС и Денег точка не должна показываться ни в какой другой вьюшке. Как только автомобиль подтверждается как авто пользователя (после проверки на Отзывные кампании), машина перестаёт быть машиной из СТС или Денег и теряет точку.
        Машину можно добавить через Настройки -> Developer settings -> Ya.Auto -> Insert STS data car
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина из СТС. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Developer settings -> Ya.Auto -> Insert STS data car)
        - Пользователь находится на главном экране навигатора (Карта)
        - У пользователя добавлена машина в Отзывные кампании
    - do: Тап Меню Нави
    - assert: |
        - Под именем пользователя появилась вьюшка машины из автокода (СТС)
        - Вьюшка содержит:
            1) Название машины "Моя машина"
            2) СТС машины формата "СТС **1234"
            3) Справа от Госномера расположен крестик, для удаления вьюшки машины из денег
            3) Плашка с текстом "Проверить на отзывные кампании"
            4) Текст под вьюшкой машины из СТС "Вы ранее добавили эти данные для оплаты штрафов или парковки", который показывается только под вьюшками, пришедшими из СТС или денег
            5) Слева от "Моя машина" показана [синяя точка](https://www.figma.com/file/gTPDm5CDsau0XlB7MCcIgX/Data-transfer?node-id=460%3A2716) (и в дневном, и в ночном режимах)
            6) Точка возле машины из СТС не обрезается даже при крупном шрифте на устройстве
        - Под вьюшками показаны точки, информирующие о кол-ве добавленных авто (пагинация)
    - do: Проскроллить влево
    - assert: |
        - Вьюшки скролятся
        - Плашка "Проверить на отзывные кампании" скрывается
        - Текст под вьюшкой денег “Вы ранее добавили эти данные для оплаты штрафов или парковки” не показывается
        - Точка под вьюшками сменилась на следующую
        - В плашке автомобиля пользователя точка слева от названия НЕ показана
    - do: Сменить ориентацию устройства
    - assert: |
        * Точка во вьюшке машины из Я.Денег НЕ пропала
        * Точка не обрезалась

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Точка во вьюшке машины из СТС пропадает при проверке на ОК:
    - description: |
        Машина из автокода (СТС) - это машина, СТС которой пришло из сторонних SDK.
        В данном кейсе проверяем условия показа точки в каждой вьюшке машины из СТС. Кроме машины из Я.Денег и СТС точка не должна показываться ни в какой другой вьюшке. Как только автомобиль подтверждается как авто пользователя (после проверки на Отзывные кампании), машина перестаёт быть машиной из Я.Денег или СТС и теряет точку.
        Машину можно добавить через Настройки -> Developer settings -> Ya.Auto -> Insert STS data car
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в Навигаторе
        - Добавлены 2 машины из СТС. Сделать это можно, воспользовавшись портальным аккаунтом или в дебажной сборке (Настройки -> Developer settings -> Ya.Auto -> Insert STS data car)
        - Пользователь находится на главном экране Навигатора (карта)
        - У пользователя добавлена машина в Отзывные кампании
    - do: Тап Меню Навигатора
    - assert: |
        - Под именем пользователя появились 2 вьюшки машины из СТС
        - Каждая вьюшка содержит:
            1) Название машины "Моя машина"
            2) СТС машины формата "СТС **1234"
            3) Справа от СТС расположен крестик, для удаления вьюшки машины из СТС
            3) Плашка с текстом "Проверить на отзывные кампании"
            4) Текст под вьюшкой машины СТС "Вы ранее добавили эти данные для оплаты штрафов или парковки", который показывается только под вьюшками, пришедшими из СТС и денег
            5) Слева от "Моя машина" показана [синяя точка](https://www.figma.com/file/gTPDm5CDsau0XlB7MCcIgX/Data-transfer?node-id=460%3A2716) (и в дневном, и в ночном режимах)
            6) Точка возле машины из СТС не обрезается даже при крупном шрифте на устройстве
        - Под вьюшками показаны точки, информирующие о кол-ве добавленных авто (пагинация)
    - do: Тап по "Проверить на Отзывные кампании" в кнопке машины из СТС
    - assert: |
        * Показывается экран поиска по ОК
        * В поле поиска вбит номер СТС
        * Производится поиск по ОК
        * Показывается результат из базы Авто.ру
    - do: Дважды тап стрелку назад
    - assert: |
        * Показано Меню Нави
        * По-прежнему показаны 2 вьюшки машины изи СТС с точкой
    - do: Добавить авто тапом по “Проверить на Отзывные кампании” в кнопке машины из СТС
    - assert: Показана карточка авто
    - do: Тап стрелку назад
    - assert: В Меню Нави показаны две добавленные машины пользователя и одна машина из СТС с точкой во вьюшке

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Удаление машины из автокода (СТС) в экране поиска:
    - description: В данном кейсе проверяем логику удаления авто, добавленного через автокод - STS data car
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован 
        - У пользователя добавлены несколько машин из СТС. Для этого, авторизовавшись портальным аккаунтом или на дебажной сборке, перейти в Настройки -> Developer settings -> Ya.Auto -> Insert Ya.money car.
         При генерации машин номера СТС могут совпадать, в таких случаях нужно удалить одну из машин и добавить машину по новой**
        - Пользователь находится в Меню Навигатора
    - do: Тап на машине из СТС по "Проверить на отзывные кампании"
    - assert: |
        - Начался процесс поиска авто в базе
        - После того как нашлась машина, показано экран с найденным результатом (Машина может не найтись в базе, если это произошло, то надо сгенерировать новую машину из СТС, см. в info путь)
        - В окне с результатами поиска присутствует кнопка "Удалить машину"
    - do: Тап "Удалить машину"
    - assert: Показан поп-ап удаления с кнопками "Нет", "Удалить"
    - do: Тап "Нет"
    - assert: |
        - Поп-ап закрылся
        - Осталось открытым экран результата поиска машины
    - do: Тап "Удалить машину"
    - assert: Показано поп-ап удаления с кнопками “Нет”, “Удалить”
    - do: Тап "Да"
    - assert: |
        - Поп-ап с удалением и экран результатов поиска авто закрылся
        - Открылось меню навигатора
        - У пользователя, в карусели авто (лента с машинами под логином), присутствует только 1 машина из СТС
        - В карусели машин пользователя (лента с машинами под логином) отсутствует машина из СТС, удаленная через поиск по отзывным кампаниям 

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi