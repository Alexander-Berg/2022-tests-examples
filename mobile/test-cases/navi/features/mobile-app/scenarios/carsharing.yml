components: carsharing
testing:
  - regress

specs:
  Проверка очистки данных после выключения авто:
    - description: |
        В каршеринге можно авторизоваться, но нельзя чтобы данные оставались в Навигаторе и их видел следующий пользователь каршеринга.
        Чтобы этого не происходило сделали отчистку данных Навигатора после выключения авто.
    - do: |
        - Произвести поиск адреса
        - Построить маршрут
        - Добавить в мои места "Дом/ Работа", список
        - Изменить настройки: диктора, язык звука, язык в приложении
        - Выключить/ Включить авто
    - assert: |
        - Пользовательская история отчистилась
        - Настройки Навигатора вернулись с значениям по умолчанию
    - do: |
        - Залогиниться в Навигаторе пользователем с историей поиска, маршрутов, моими местами, настройками отличающимися от значений по умолчанию (например настройками языка, диктора)
        - Выключить/ Включить авто
    - assert: |
        - В Навигаторе никто не залогинен
        - Пользовательская история отчистилась
        - Настройки Навигатора вернулись с значениям по умолчанию

    - platforms:
      - carsharing_t3
    - testing:
      - acceptance_navi


  Отсутствие возможности устанавливать значение превышения скорости на ГУ КШ:
    - description: |
        В 1.9 КШ убрали настройку "об ограничении скорости". Теперь "Чик-чик" и подсветка спидометра происходят при превышении на более, чем 10 км/ч, независимо от разрешённого превышения в аккаунте пользователя на смартфоне.
        Подсветка спидометра может мигать слабо и только 5 раз - считаем ок
    - info: |
        У пользователя на смартфоне (в аккаунте навигатора), выставлено разрешенное превышение +30 км/ч (Меню-> Настройки -> Об ограничениях скорости
        Оповещение о превышении скорости будет звучать не всегда,  чтобы не раздражать пользователей звуком, когда они едут на границе допустимой скорости (например, превысил скорость, сбросил и превысил снова)
    - do: Перейти на ГУ КШ в Меню -> Настройки.
    - assert: Пункт “об ограничении скорости” отсутствует.

    - platforms:
      - carsharing_t3
    - testing:
      - acceptance_navi


  Проверка срабатывания навигатора на превышение максимально допустимого значения скорости:
    - description: |
        В 1.9 КШ убрали настройку "об ограничении скорости". Теперь "Чик-чик" и подсветка спидометра происходят при превышении на более, чем 10 км/ч, независимо от разрешённого превышения в аккаунте пользователя на смартфоне.
        Подсветка спидометра может мигать слабо и только 5 раз - считаем ок
        Оповещение о превышении скорости будет звучать не всегда,  чтобы не раздражать пользователей звуком, когда они едут на границе допустимой скорости (например, превысил скорость, сбросил и превысил снова)
    - info: |
        - У пользователя на смартфоне (в аккаунте навигатора), выставлено разрешенное превышение +30 км/ч (Меню-> Настройки -> Об ограничениях скорости
        - Авторизоваться на ГУ КШ этим же аккаунтом навигатора
    - do: |
        - Построить маршрут по городу, где допустимая скорость движения 60 км/ч
        - Тап на Поехали
        - Запустить симуляцию движения через дебаг-панель на 72 км/ч
    - assert: При движении на участках с допустимой скорость 60 км/ч приходят уведомления в виде звукового "Тык-тык" и подсветки спидометра.
    - do: |
        - Построить маршрут по городу, где допустимая скорость движения 60 км/ч
        - Тап на Поехали
        - Запустить симуляцию движения через дебаг-панель на 67 км/ч
    - assert: При движении на участках с допустимой скорость 60 км/ч НЕ приходят уведомления о превышении.

    - platforms:
      - carsharing_t3
    - testing:
      - acceptance_navi


  Проверка показа курсора драйва в каршеринге:
    - description: |
        Проверка установки, отображения и поведения курсора. Проверка применения настройки смены курсора.
        Курсор по умолчанию - курсор драйва
        Курсор драйва может быть изменен в настройках на любой другой курсор
        Если авторизоваться пользователем с курсором по умолчанию - он будет изменен на курсор драйва
        Если авторизоваться пользователем с недефолтным курсором - он НЕ будет изменен на курсор драйва
    - info: |
        Иметь 2 аккаунта:
        * аккаунт с стандартным (дефолтным) курсором (желтая стрелка)
        * аккаунт с не стандартным курсором (любой)
    - do: Авторизоваться пользователем со стандартным курсором
    - assert: Курсор изменен на курсор драйва (белая машинка)
    - do: |
        1) Выйти из аккаунта
        2) Авторизоваться аккаунтом с недефолтным курсором, присутствующим на каршеринге
    - assert: |
        1) Курсор изменен на машинку драйва
        2) Остается недефолтный курсор пользователя, не меняется на машинку драйва

    - platforms:
        - carsharing_t3
    - testing:
        - acceptance_navi