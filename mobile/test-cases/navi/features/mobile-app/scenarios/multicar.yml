components: multicar
testing:
  - regress

specs:
  Добавление нескольких автомобилей:
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить машину")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется, добавление нескольких машины. После добавления 1-ого авто в меню нави появляется список из кнопок: кнопка добавленного авто + кнопка "+ Добавить машину"
        В списке кнопок всегда N+1 кнопка, где N - количество добавленных машин, а "+1" - кнопка "+ Добавить машину"
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлено 2 или более машин
        - Открыто меню навигатора
        - Показана последняя кнопка в списке машин ("+ Добавить машину")
    - do: Тап на "+ Добавить машину"
    - assert: |
        - Закрывается меню навигатора
        - Открывается экран ввода VIN/госномера
    - do: |
        Добавить авто:
        - Тап в поле ввода
        - Ввести VIN или госномер
        - Тап на "Добавить"
        - Тап на "Верно, это моя машина"
    - assert: Показана карточка авто
    - do: Тап на стрелочку "Назад"
    - assert: |
        - Закрывается карточка авто
        - Показано меню навиагтора
        - Список машин увеличился на 1
        - Показана предпоследняя страница с кнопкой машины из шага 2
        - Индикатор страниц показывает, что открыта предпоследняя страница (выбрана предпоследняя точка)
    - do: Скрол влево в списке машин
    - assert: |
        - Кнопка авто поменялась на кнопку "+ Добавить машину"
        - Индикатор страниц показывает, что открыта последняя страница (выбрана последняя точка)
    - do: Тап на “+ Добавить машину”
    - assert: Открывается экран ввода VIN/госномера

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Появление свитчера "Основная машина":
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить машину")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется, появление свитчера "Основная машина" в карточке авто. Данный свитчер появляется после добавления 2 автомобиля во всех карточках авто.  По умолчанию свитчер выключен у всех машин.
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлен 1 автомобиль
        - Открыта карточка авто
    - do: Просмотреть блок "Информация о машине"
    - assert: Свитчер "Основная машина" отсутствует
    - do: Тап на стрелочку "Назад"
    - assert: |
        - Закрывается карточка авто
        - Показано меню навиагтора
    - do: Скрол влево в списке машин
    - assert: Показана кнопка кнопка "+ Добавить машину"
    - do: |
        Добавить авто:
        - Тап на "+ Добавить машину"
        - Тап в поле ввода
        - Ввести VIN или госномер
        - Тап на "Добавить"
        - Тап на "Верно, это моя машина"
    - assert: |
        - Показана карточка авто
        - В блоке "Информация о машине" присутствует свитчер "Основная машина"
        - Свитчер выключен
    - do: |
        Открыть карточку авто из предусловия:
        - Тап на стрелочку “Назад”
        - Скрол вправо в списке машин
        - Тап на кнопку авто
    - assert: |
        - Показана карточка авто
        - В блоке “Информация о машине” появился свитчер “Основная машина”
        - Свитчер выключен

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Включение свитчера "Основная машина" (свитчеры у всех машин выключены):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить машину")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется, включение свитчера "Основная машина" в карточке авто. Данный свитчер появляется после добавления 2 автомобиля во всех карточках авто.  По умолчанию свитчер выключен у всех машин.
        Включая свитчер, кнопка авто становится первой в списке машин. При включении свитчера у одной машины, свитчер у другой машины выключается.
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлено 2 автомобиля
        - Автомобиль А 2-ой в списке машин
        - Открыта карточка автомобиля А
        - Свитчер "Основная машина" выключен
    - do: Тап на свитчер "Основная машина"
    - assert: Свитчер переключился в положение ВКЛ
    - do: Тап на стрелочку "Назад"
    - assert: |
        - Закрывается карточка авто
        - Показано меню навиагтора
        - Список машин находится на 1 странице: показана кнопка автомобиля, у которого включили свитчер "Основная машина"
    - do: Скрол вправо в списке машин
    - assert: Показана кнопка автомобиля А
    - do: Тап на кнопку авто
    - assert: |
        - Показана карточка авто
        - Свитчер "Основная машина" в положение ВКЛ

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Включение свитчера "Основная машина" у другого авто:
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить машину")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется, переключение свитчера "Основная машина" в карточке авто, у другой машины.
        Включая свитчер, кнопка авто становится первой в списке машин. При включении свитчера у одной машины, свитчер у другой машины выключается.
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлено 3 автомобиля
        - У автомобиля А включен свитчер "Основная машина"
        - У автомобиля В выключен свитчер "Основная машина" (3-я в списке машин)
        - Открыта карточка автомобиля В
    - do: Тап на свитчер "Основная машина"
    - assert: Свитчер переключился в положение ВКЛ
    - do: Тап на стрелочку "Назад"
    - assert: |
        - Закрывается карточка авто
        - Показано меню навиагтора
        - Список машин находится на 1 странице
    - do: |
        Открыть карточку автомобиля А:
        - Проскролить список машин и найти кнопку автомобиля А
        - Тап на кнопку автомобиля А
    - assert: |
        - Открывается карточка автомобиля А
        - Свитчер “Основная машина” выключен
    - do: Тап на стрелочку “Назад”
    - assert: |
        - Закрывается карточка авто
        - Показано меню навиагтора
    - do: Проскролить список машин до начала
    - assert: Первая кнопка в списке - кнопка автомобиля В

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Выключение свитчера "Основная машина":
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить машину")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется, выключение свитчера "Основная машина" в карточке авто. Данный свитчер появляется после добавления 2 автомобиля во всех карточках авто.  По умолчанию свитчер выключен у всех машин.
        Включая свитчер, кнопка авто становится первой в списке машин. При включении свитчера машина возвращается на ту позицию в списке машин, где она была до включения.
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлено 3 автомобиля
        - Автомобиль А 3-ий в списке машин
        - Открыта карточка автомобиля А
        - Свитчер "Основная машина выключен"
    - do: Тап на свитчер "Основная машина"
    - assert: Свитчер переключился в положение ВКЛ
    - do: Тап на стрелочку "Назад"
    - assert: |
        - Закрывается карточка авто
        - Показано меню навиагтора
        - Автомобиль А стал 1-ым в списке
    - do: Скрол вправо в списке машин до машины А
    - assert: Показана кнопка автомобиля А
    - do: Тап на кнопку авто
    - assert: |
        - Показана карточка авто
        - Свитчер "Основная машина" в положение ВКЛ
    - do: Тап на свитчер “Основная машина”
    - assert: Свитчер переключился в положение ВЫКЛ
    - do: |
        - Тап на стрелочку “Назад”
        - Проскролить список на 3-ю страницу
    - assert: |
        - Закрывается карточка авто
        - Показано меню навиагтора
        - Автомобиль А стал 3-им в списке

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Более 5 авто в списке машин:
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить машину")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется индикатор страниц, когда добавлено более 5 автомобилей. При добавлении 5-ого авто появляется градиент в индикаторе страниц:
        - Открыты первые 3 кнопки - градиент справа
        - Открыты последние 3 кнопки - градиент слева
        - Открыты 3 < кнопки < N-2 - градиент с обоих сторон
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлено 6 или более автомобилей
        - Открыт главный экран навигатора (карта)
    - do: Открыт меню навигатора (3 горизонтальные линии в таббаре)
    - assert: |
        - Показано меню навиагтора
        - Список машин находится на 1 странице
        - В индикаторе страниц:
            - выбрана 1 страница
            - градиент справа на 5-ой точке
            - градиент слева отсутствует
    - do: Скрол влево в списке машин на 4-ую кнопку
    - assert: |
        - Показана кнопка 4-ого авто
        - В индикаторе страниц:
            - выбрана 3-я страница
            - градиент справа на 5-ой точке
            - градиент слева на 1-ой точке
    - do: Скрол влево в списке машин до предпоследнего авто (3-я кнопка с конца)
    - assert: |
        - Показана кнопка предпоследнего авто
        - В индикаторе страниц:
            - выбрана 3-я страница
            - градиент справа отсутствует
            - градиент слева на 1-ой точке

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Добавление уже добавленного авто:
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в Навигаторе
        - Есть добавленная машина
        - Открыт экран с найденным авто, которое было добавленно ранее (Меню Нави - "Добавить автомобиль" - Введён VIN или гос номер уже добавленного авто - Тап "Добавить")
    - do: Тап на "Верно, это моя машина"
    - assert: |
        - Показывается поп-ап с ошибкой:
            - Текст "Вы уже добавили эту машину"
            - Кнопка "Хорошо"
    - do: Тап на "Хорошо"
    - assert: |
        - Поп-ап закрывается
        - Показан экран результата поиска
    - do: Вернуться в меню навигатора
    - do: Проверить список машин под аватаркой пользователя
    - assert: |
        - В списке 2 кнопки: авто из предусловия и "+ Добавить машину"
        - Машина не задвоилась

    - platforms:
      - ios
      - android
    - tags:
      - assessors