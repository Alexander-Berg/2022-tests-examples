components: burn_in_protection
testing:
  - regress

specs:
  Настройка "Защита от выгорания экрана":
    - info: |
        - Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver. - включает фичу
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
    - do: |
        - Перейти в Меню - Настройки
    - assert: |
        В блоке "Быстрые настройки" отображается пункт меню "Защита от выгорания экрана"
    - do: |
        - Тап на пункт "Защита от выгорания экрана"
    - assert: |
        - Открывается экран с вариантами состояния настройки:
        Включить
        Включать после 40 минут езды (выбрана по умолчанию)
        Выключить
        Ниже поясняющая фраза для чего нужна данная настройка: "Включите, чтобы уменьшить яркость спидометра и ограничителя скорости" (может немного отличаться)

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Настройка "Защита от выгорания экрана". Локализация:
    - info: |
        - Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver. - включает фичу
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
        - Включить локаль устройстве en_RU либо en_EN
    - do: |
        - Перейти в Меню - Настройки
    - assert: |
        В блоке "Быстрые настройки" отображается пункт меню "Защита от выгорания экрана" на английском языке: Burn-in protection
    - do: |
        - Тап на пункт Burn-in protection ("Защита от выгорания экрана")
    - assert: |
        - Открывается экран с вариантами состояния настройки:
        ON (Включить)
        Turn on after 40 minutes of driving (Включать после 40 минут езды)
        OFF (Выключить)
        Ниже поясняющая фраза для чего нужна данная настройка: Turn it to reduce the brightness of the speedometer and speed limiter& ( "Включите, чтобы уменьшить яркость спидометра и ограничителя скорости") (может немного отличаться)

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Настройка "Защита от выгорания экрана". Авторизация:
    - info: |
        - Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver. - включает фичу
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
        - Пользователь неавторизован
    - do: |
        - Перейти в Меню - Настройки
        - Тап на пункт в меню "Защита от выгорания экрана"
    - assert: |
        - Открывается экран с вариантами состояния настройки:
        Включить
        Включать после 40 минут езды - выбран по умолчанию
        Выключить
    - do: |
        - Выбрать любую настройку из предложенных
        - Перейти в меню и авторизоваться в приложении
        - Перейти в Настройки -> "Защита от выгорания экрана"
    - assert: |
        - Если пользователь ранее не устанавливал настройку "Защита от выгорания экрана", то будет активна та настройка, которая была выбрана на предыдущем шаге.
        - Если пользователь ранее установил настройку "Защита от выгорания экрана", то будет отображаться выбранная им ранее настройка .

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Настройка "Защита от выгорания экрана". Разлогин:
    - info: |
        - Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver. - включает фичу
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
        - Пользователь авторизован
    - do: |
        - Перейти в Меню - Настройки
        - Тап на пункт в меню "Защита от выгорания экрана"
        - Выбрать одну из настроек "Включить" либо "Выключить"
    - assert: |
        - У выбранной настройки отображается активный чекбокс
    - do: |
        - Перейти в меню и разлогинится в приложении
        - Перейти в Настройки -> "Защита от выгорания экрана"
    - assert: |
        - Выбранная ранее настройка не активна, активный чекбокс отображается у настройки Включать после 40 минут езды (устанавливается по умолчанию)

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Настройка "Защита от выгорания экрана".Включить:
    - info: |
        Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver -> On - включает фичу
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
    - do: |
        - Перейти в Меню - Настройки
        - Тап на пункт "Защита от выгорания экрана"
        - Тап по пункту "Включить"
    - assert: Чекбокс становится активным у пункта "Включить"
    - do: |
        - Перейти на экран карты
        - Построить любой маршрут
        - Подтвердить его и запустить симуляцию ведения через debug-панель
    - assert: |
        - Начинается ведение по маршруту
        - Спидометр и ограничитель скорости **полупрозрачные**

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Настройка "Защита от выгорания экрана".Выключить:
    - info: |
        Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver - On - включает фичу
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
    - do: |
        - Перейти в Меню - Настройки
        - Тап на пункт "Защита от выгорания экрана"
        - Тап по пункту "Выключить"
    - assert: Чекбокс становится активным у пункта "Выключить"
    - do: |
        - Перейти на экран карты
        - Построить любой маршрут
        - Подтвердить его и запустить симуляцию ведения через debug-панель
    - assert: |
        - Начинается ведение по маршруту
        - Спидометр и ограничитель скорости **непрозрачные**

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Настройка "Защита от выгорания экрана". Включать после 40 минут езды. Freedrive:
    - description: |
        Настройка DevSettings -> map -> use fast screen saver timeout  - уменьшает задержки для тестирования (вместо 40 минут нужно подождать около 1 минуты)
        Специфика работы данного эксперимента такая:
        После отмены маршрута, таймер останавливается, затем при следующем построении маршрута он стартует и только к моменту когда за последние 1мин мы будем в ведении >= 30сек должна активироваться полупрозрачность.
    - info: |
        - Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver. - включает фичу
        3 - Меню -> Настройки -> DevSettings -> map -> use fast screen saver timeout  - уменьшает задержки для тестирования (вместо 40 минут нужно подождать около 1 минуты)
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
    - do: |
        - Перейти в Меню - Настройки
        - Тап на пункт "Защита от выгорания экрана"
        - Тап по пункту "Включать после 40 минут езды"
    - assert: Чекбокс становится активным у пункта "Включать после 40 минут езды"
    - do: |
        - Перейти на экран карты
        - Построить любой маршрут
        - Подтвердить его и запустить симуляцию ведения через debug-панель
        - Сбросить маршрут, не останавливая симуляцию движения. Дождаться пока ведение перейдет в режим фридрайва
    - assert: |
        - Спидометр и ограничитель скорости в начале движения **непрозрачные**, спустя время (примерно 1 мин) спидометр и ограничитель скорости становятся **полупрозрачными**

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Настройка "Защита от выгорания экрана".Включать после 40 минут езды.Смена ориентации:
    - description: |
        Настройка DevSettings -> map -> use fast screen saver timeout  - уменьшает задержки для тестирования (вместо 40 минут нужно подождать около 1 минуты)
        Специфика работы данного эксперимента такая:
        После отмены маршрута, таймер останавливается, затем при следующем построении маршрута он стартует и только к моменту когда за последние 1мин мы будем в ведении >= 30сек должна активироваться полупрозрачность.
    - info: |
        - Для проверки фичи необходимо включить эксперименты:
        1 - Меню -> Настройки -> DevSettings -> Misc -> Fast day&night switching вкл. - автоматическая смена режима с ночного на дневной
        2 - Меню -> Настройки -> DevSettings -> map -> Enable screensaver. - включает фичу
        3 - Меню -> Настройки -> DevSettings -> map -> use fast screen saver timeout  - уменьшает задержки для тестирования (вместо 40 минут нужно подождать около 1 минуты)
        ПЕРЕЗАГРУЗИТЬ НАВИГАТОР
    - do: |
        - Перейти в Меню - Настройки
        - Тап на пункт "Защита от выгорания экрана"
        - Тап по пункту "Включать после 40 минут езды"
    - assert: Чекбокс становится активным у пункта "Включать после 40 минут езды"
    - do: |
        - Перейти на экран карты
        - Построить любой маршрут
        - Подтвердить его и запустить симуляцию ведения через debug-панель
        - Сбросить маршрут, не останавливая симуляцию движения. Дождаться пока ведение перейдет в режим фридрайва
    - assert: |
        - Спидометр и ограничитель скорости в начале движения **непрозрачные**, спустя время (примерно 1 мин) спидометр и ограничитель скорости становятся **полупрозрачными**
    - do: |
        - Сменить ориентацию девайса
    - assert: |
        - Спидометр и ограничитель скорости так и отображаются **полупрозрачными**

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi