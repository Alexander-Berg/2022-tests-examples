components: gas_payment
testing:
  - regress
integration_run:
  - tanker_sdk
  - payment_sdk

specs:
  Восстановление сессии оплаты в Авто:
    - description: |
        **На всех этапах** прерывания сессии выключением ГУ, **сессия должна восстанавливаться без дополнительных действий после включения ГУ**(ни смахивание плеера, ни т.п.)!
        Известный баг - единичные случаи, когда прерывание происходит **на первых секундах** после тапа на кнопку "Заплатить" и идет отправка заказа - тогда **сессия НЕ восстанавливается вовсе, либо восстанавливается много позже включения ГУ**, когда самостоятельно повторно открываешь карточку заправки
        Удобно для тестов использовать тестовую заправку в центре Москвы. Для ее отображения необходимо перейти: Developer Settings - Gas stations - Gas stations layer - On и тап на Switch TankerSDK to test mode и перезагрузить приложение
        Тестовая АЗС находится на Лобном месте в Москве
    - do: |
        - Заехать на тестовую заправку в Москве.
        - Дождаться предложения о заправке/открыть карточку вручную через поиск
        - Начать сессию по тапу на "Заплатить" после выбора топлива и его количества.
    - assert: Сессия начата - стартовал этап Отправки заказа (текст “Убедитесь, что пистолет вставлен”)
    - do: |
        - **Прервать сессию выключением ГУ на этапе Отправки заказа** (текст "Убедитесь, что пистолет вставлен")
        - Включить ГУ.
    - assert: |
        **Сессия восстанавливается** - карточка заправки открывается и отображает актуальное состояние сессии на текущий момент
    - do: |
        - Повторить шаг 1
        - Прервать сессию выключением ГУ **на этапе Заправки(сообщение "Заправляемся").**
    - assert: |
        **Сессия восстанавливается** - карточка заправки открывается и отображает актуальное состояние сессии на текущий момент
    - do: |
        - Повторить шаг 1
        - Прервать сессию выключением ГУ **на этапе Оплаты заказа/Ожидания подтверждения**(текст "Оплата заказа/Ожидания подтверждения")
    - assert: |
        **Сессия восстанавливается** - карточка заправки открывается и отображает актуальное состояние сессии на текущий момент
    - do: |
        - Повторить шаг 1
        - Прервать сессию выключением ГУ **на этапе Запуска колонки(текст "Запуск колонки")**
    - assert: |
        **Сессия восстанавливается** - карточка заправки открывается и отображает актуальное состояние сессии на текущий момент
    - do: |
        - Повторить шаг 1
        - Прервать сессию выключением ГУ **на этапе Показа ошибки(см. файл 01 либо "Недостаточно средств")**
    - assert: |
        **Сессия восстанавливается** - карточка заправки открывается и отображает актуальное состояние сессии на текущий момент
    - do: Провести проверки восстановления сессии заправки в связке с телефоном.

    - platforms:
        - t3am
    - testing:
        - acceptance_navi


  Привязка карты оплаты:
    - description: |
        Проверяем привязку карты для оплаты Яндекс.Заправок.
        Привязку можно осуществить двумя способами:
        - В карточке Заправки
        - В разделе Меню - Яндекс.Заправки - Способ оплаты
    - info: Пользователь авторизован
    - do: Перейти в Меню -> Яндекс.Заправки -> Способ оплаты
    - assert: |
        - Открывается раздел "Способ оплаты"
        - Отображается список привязанных банковских карт к аккаунту (если такие есть)
        - Отображается пункт "Добавить карту"
        - В правом верхнем углу раздела присутствует кнопка "Править"
    - do: Тап на пункт "Добавить карту"
    - assert: Отображается форма для ввода данных банковской карты
    - do: |
        - Ввести данные существующей банковской карты с неотрицательным балансом
        - Тап на кнопку "Добавить"
    - assert: |
        - Появляется экран с сообщением "Пожалуйста подождите"
        - Отображается экран проверки 3DSecure (экран с вводом кода из смс от банка)
    - do:  Ввести код из смс
    - assert: |
        - Появляется тост с сообщением "Карта добавлена"
        - В списке привязанных карт отображается только что добавленная карта

    - platforms:
        - ios
        - t3am
        - android


  Удаление карты оплаты:
    - description: Проверяем удаление привязанной карты для оплаты Яндекс.Заправок
    - info: |
        - Пользователь авторизован
        - К аккаунту привязана карта оплаты
    - do: Перейти в Меню -> Яндекс.Заправки -> Способ оплаты
    - assert: |
        - Открывается раздел "Способ оплаты"
        - Отображается список привязанных банковских карт к аккаунту (если такие есть)
        - Отображается пункт "Добавить карту"
        - В правом верхнем углу раздела присутствует кнопка "Править"
    - do: Тап на кнопку "Править"
    - assert: |
        - Происходит переход в режим редактирования списка карт
        - Рядом с каждой картой появляется красная иконка удаления
    - do: Тап на иконку удаления рядом с любой картой
    - assert: |
        **Android:** Карта исчезает из списка доступных для оплаты
        **iOS:** Появляется дополнительная кнопка "Удалить" по тапу на котороую карта исчезает из списка доступных для оплаты

    - platforms:
        - ios
        - t3am
        - android


  Восстановление сессии оплаты. Этап показа ошибки.:
    - description: |
        В этом кейсе проверяем поведение карточки Заправки после перезапуска приложения на этапе показа ошибки.
        Информация о тестировании Яндекс.Заправок
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения.
        Для проверки **нужно**:
        Подменить местоположение на тестировочную АЗС POST. Она располагается в Москве ул.Ильинка 4 (координаты 55.754152, 37.625284). При открытии тестировочной АЗС у карточки АЗС отображается **заголовок «Тестировочная»**
    - info: |
        1 - Включить тестовый слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Перезагрузить приложение
        2 - Местоположение пользователя определяется на территории полигона АЗС с постоплатой (ул.Ильинка 4, Москва)
         (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
    - do: Выбрать любую колонку в карточке заправки
    - assert: Происходит переход к разделу выбора вида топлива, способа оплаты и суммы/объема заправки
    - do: |
        - Выбрать любой тип топлива и объем/сумму заправки
        - Тап на кнопку "Оплатить"
    - assert: Происходит переход к процессу отправки заказа
    - do: Тап на кнопку "Отменить"
    - assert: |
        - Через некоторое время (на реальных заправках оно может составлять несколько десятков секунд) происходит отмена заказа
        - В карточке заправки отображается страница с ошибкой
    - do: |
        - Выгрузить приложение из мультизадачности
        - Запустить приложение
    - assert: |
        - Приложение запускается
        - Карточка заправки **не открывается**.

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Восстановление сессии оплаты. Авиарежим.:
    - description: |
        В этом кейсе проверяем поведение карточки Заправки после перезапуска приложения при включенном авиарежиме на девайсе.
        Информация о тестировании Яндекс.Заправок
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения.
        Для проверки **нужно**
        1 - Подменить местоположение на регион с высокой плотностью заправок (например, МСК, СПБ, Воронеж и т.д.)
        Либо
        2 - Подменить местоположение на тестировочную АЗС. Она располагается на Лобном месте на Красной площади в Москве `(координаты N 55.753211 E 37.622504)`.
        При открытии тестировочной АЗС у карточки АЗС отображается заголовок Тестировочная
    - info:
        1 - Включить тестовый слой
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Перезагрузить приложение
        2 - Местоположение пользователя определяется на территории полигона АЗС с оплатой (Лобное место Красной площади, Москва)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
    - do: Выбрать любую колонку в карточке заправки
    - assert: Происходит переход к разделу выбора вида топлива, способа оплаты и суммы/объема заправки
    - do: |
        - Выбрать любой тип топлива и объем/сумму заправки
        - Тап на кнопку "Оплатить"
    - assert: Происходит переход к процессу отправки заказа
    - do: |
        - Дождаться начала этапа заливки топлива (счетчика литров)
        - Выгрузить приложение из мультизадачности
        - Включить на девайсе авиарежим
        - Запустить приложение
    - assert: |
        - Приложение запускается
        - Карточка заправки **не открывается**.

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Процесс оплаты Заправок:
    - description: |
        Была реализована возможность оплаты Заправки дистанционным способом через приложение.
        Для нахождения АЗС поддерживающих оплату, необходимо выполнить поиск по категории "АЗС Яндекс.Заправки":
        -  тап на иконку лупы в таббаре
        -  тап на иконку "АЗС Яндекс.Заправки"
        **Кейс можно проверить на тестовой заправке.** Для этого необходимо:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Перезагрузить приложение
        Включить заправочный слой - Произвести поиск по категории АЗС.ЯндексЗаправки
        Подменить местоположение на тестировочную АЗС POST на Лобном месте. Она располагается в Москве ул.Ильинка 4 (координаты 55.754152, 37.625284)
    - info: |
        - Местоположение пользователя должно находиться на территории полигона АЗС, поддерживающей оплату через Навигатор
        - Пользователь авторизован
        - Привязана карта для оплаты. Проверить или привязать карту можно следующим образом:
        Тап на иконку “Настройки” в таббаре
        Тап на пункт Яндекс.Заправки
        Тап на пункт “Способ оплаты”
        Тап на Добавить карту
        - Открыта карточка АЗС. (Найти любое тестовое АЗС с оплатой, открыть её карточку тап на “заправиться”).
        - Выбрана любая колонка . **(выбрать 6 колонку)**
        - Выбран объем "2 литра"
    - do: Тап “Оплатить”
    - assert: Происходит переход на страницу процесса оплаты
    - do: |
        - Дождаться выдачи ошибки "Заказ отменен" (в некоторых случаях ошибка не будет показана, а с карты снимется указанная выше сумма, эта сумма вернется на карточку в течении трех дней)
        - Тап на “Попробовать еще раз”
    - assert: |
        Происходит переход на начальный экран карточки “Заправки” с выбором колонок

    - platforms:
        - ios
        - android
        - t3am
        - autochip
        - second_run_hu
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Интерфейс для оплаты на заправках (постоплата):
    - info: |
        - Включить настройки:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas stations layer - > ON
        Меню - Настройки - Developer settings - Gas Stations layer uses geo search - > OFF
        2 - **ОБЯЗАТЕЛЬНО** сделать подмену местоположения на тестировочную АЗС с постоплатой: `55.754158, 37.625264` (местоположение Москва, Красная площадь)
        3 - Перезагрузить навигатор
        4 - Пользователь **НЕ** авторизован
    - do: |
        Тап на колонку в таббаре
        Тап на пин  тестировочная(POST) на Красной площади в Москве ул.Ильинка д.4
    - assert: Открывается экран с выбором колонки
    - do: Сменить ориентацию девайса на альбомную
    - assert: Отображается экран в выбором колонки, верстка не ломается
    - do: |
        Выбрать колонку
        Выбрать вид топлива
        Указать количество топлива
        Тап Оплатить
    - assert: Открывается экран для авторизации

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Оплата с активированным промокодом на заправках c постоплатой:
    - info: |
        Пользователь авторизован
        - Включить настройки:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas stations layer - > ON
        Меню - Настройки - Developer settings - Gas Stations layer uses geo search - > OFF
        **ОБЯЗАТЕЛЬНО** сделать подмену местоположения на тестировочную АЗС с постоплатой: `55.754158, 37.625264` (местоположение Москва, Красная площадь)
        Перезагрузить навигатор
        Активировать промокод (Меню- Я.Заправки - Скидки и бонусы - Ввести промокод), можно воспользоваться промокодами: TST010422,TST020422,TST030422,TST040422,TST050422,TST060422,TST070422,TST080422,TST090422,TST100422,TST110422,TST120422,TST130422,TST140422
        *Не инициируйте оплату заправки с активированным тестовым промкодом, т.к. перестанет отображаться сообщение о активированном купоне*
        Открыта карточка АЗС тестировочная(POST) на Красной площади в Москве ул.Ильинка д.4
    - do: |
        Выбрать колонку
        Выбрать вид топлива
        Указать количество топлива
        Тап Оплатить
    - assert: |
        Открывается форма оплаты чекаут
        Сверху появился баннер с информацией об активированом промокоде и размере скидки,
        В форме оплаты чекаут кнопка Подтвердить с данными о сумме заказа без скидки и со скидкой
        **Производить оплату не надо! На данном этапе отменить оплату, закрыв экран!**

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Процесс оплаты с активированным промокодом:
    - info: |
        Для тестирования восстановления сессии оплаты **НУЖНО использовать Тестировочную АЗС, которая находится на Лобном месте Красной площади, Москва**
        Для включения тестового слоя и его работы после перезапуска приложения надо включить следующие настройки:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas stations layer - > ON
        Меню - Настройки - Developer settings - Gas Stations layer uses geo search - > OFF
        **Перезагрузить приложение**
        Активирован промокод TST191120, TST2807, TST280721, TST2807211, TST2807212
        Меню -> ЯндексЗаправки ->Скидки и бонусы ->Ввести промокод
        Местоположение пользователя определяется на территории полигона АЗС с оплатой
        Выбрать колонку,вид топлива, указать кол-во топлива
    - do: |
        Тап Оплатить
        Тап на баннер "Скидки и бонусы" над карточкой АЗС.
    - assert: Идет переход в раздел меню  "Скидки и бонусы".

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Оплата Google Pay:
    - description: |
        На устройствах без настроенного Google Pay данного вида оплаты не должно быть в способах оплаты.
        1.04.2020 - Перешли на продовый GPay. Он доступен только разработчикам сейчас.
        Для того, чтобы этот вариант оплаты появился, нужно за доступом обратиться к Роману Прудникову @rprudnikov
        При включении данной настройки, пропадет  предупреждение, что ты не на азс и режим разработчика отключает часть проверок. Это считается нормой!
    - do: |
        Тап на Яндекс.Заправку
        Выбрать колонку
    - assert: Открыто экран выбора топлива
    - do: |
        Тап на способ оплаты
        Выбрать Google Pay
    - assert: |
        Происходит возврат на экран выбора топлива
        Выбран способ оплаты Google Pay
    - do: |
        Выбрать количество литров или сумму топлива
        Тап "Оплатить"
    - assert: Открывается экран GPay с возможностью привязки карты/привязанными картами
    - do: |
        Привязать карту (если она не привязана) - _лучше пробовать на тестовой заправке и не привязывать личную карту_
        Тап на кнопку "Продолжить"
    - assert: |
        Начинается процесс оплаты топлива
        На 31.03.2020 - оплата не проходит, заказ отменяется даже на тестовой заправке.

    - platforms:
        - android


  Оценка качества обслуживания на заправке:
    - info: |
        Для включения тестового слоя и его работы после перезапуска приложения надо включить следующие настройки:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Включить заправочный слой - Произвести поиск по категории АЗС.ЯндексЗаправки
        Местоположение Тестировочная  (Москва, Красная площадь, Лобное место)
    - do: Пройти сценарий заправки (выбрать колонку, тип и кол-во топлива, тап на Оплатить)
    - assert:
        После успешной заправки открывается экран “Оценить обслуживание”.
        В нем есть чек, чаевые заправщику и звезды.
    - do: Поставить оценку
    - assert: |
        Выбранное количество звезд активируются
        Появлются теги со свитчером
    - do: Проставить любые теги
    - assert: Свитчер переключается в положение "включен"
    - do: Изменить оценку на другое количество звезд
    - assert: Все свитчеры переключаются в положение "выключен"

    - platforms:
        - t3am
        - ios
        - android
    - tags:
        - assessors


  Оценка качества обслуживания на заправке (чаевые - выбор заправщика):
    - info: |
        Developer settings - Gas Stations - Switch to Test Mode
        Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Местоположение Тестировочная  (Москва, Красная площадь, Лобное место)
    - do: В карточке заправки выбрать любую колонку
    - assert: Открывается экран выбора типа топлива
    - do: Выбрать любое топливо
    - assert: Открывается экран выбора количества топлива
    - do: Выбрать любое количество и тап "Оплатить"
    - assert: |
        После успешной заправки открывается экран “Оценить обслуживание”.
        В нем есть чек, чаевые заправщику и звезды.
    - do: Выбрать чаевые
    - assert: Открывается вебвью "Чаевые заправщику" с вводом номера телефона и списком имен заправщиков
    - do: Ввести номер телефона и тап на кнопку "подтвердить"
    - assert: |
        Вебвью закрывается.
        На экране отображается экран оценить обслуживание с кнопкой "отправить" чаевые заправщику
        Под кнопками с суммами чаевых есть пункт с введенным номером
        Под номером телефона есть пункт "Способ оплаты"
    - do: Тап по номеру телефона заправщика
    - assert: Открывается вебвью "Чаевые заправщику" с вводом номера телефона и списком имен заправщиков
    - do: Тап по любому имени из списка
    - assert: |
        Вебвью закрывается.
        На экране отображается экран оценить обслуживание с кнопкой "отправить" чаевые заправщику
        Под кнопками с суммами чаевых есть пункт с именем и последними цифрами номера заправщика
        Под именем есть пункт "Способ оплаты"

    - platforms:
        - t3am
        - ios
        - android
    - tags:
        - assessors


  Оценка качества обслуживания на заправке (чаевые - способ оплаты):
    - info: |
        Developer settings - Gas Stations - Switch to Test Mode
        Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Местоположение Тестировочная  (Москва, Красная площадь, Лобное место)
    - do: В карточке заправки выбрать любую колонку
    - assert: Открывается экран выбора типа топлива
    - do: Выбрать любое топливо
    - assert: Открывается экран выбора количества топлива
    - do: Выбрать любое количество и тап "Оплатить"
    - assert: |
        После успешной заправки открывается экран “Оценить обслуживание”.
        В нем есть чек, чаевые заправщику и звезды.
    - do: Выбрать чаевые
    - assert: Открывается вебвью "Чаевые заправщику" с вводом номера телефона и списком имен заправщиков
    - do: Ввести номер телефона и тап на "Подтвердить" / Выбрать имя из списка
    - assert: |
        Вебвью закрывается.
        На экране отображается экран оценить обслуживание с кнопкой "отправить" чаевые заправщику
        Под кнопками с суммами чаевых есть пункт с именем/введенным номером
        Под именем/номером телефона есть пункт "Способ оплаты"
    - do: Тап по "Способ оплаты"
    - assert: |
        Открывается форма с доступными способами оплаты:
        GooglePay на Android, ApplePay на iOS
        привязанные к аккаунту карты, если есть (не тестовые!)
        пункт "Другая карта"
    - do: Тап по "Другая карта"
    - assert: Появляется форма ввода данных карты "Добавление карты"
    - do: Тап по стрелочке назад в заголовке
    - assert: Происходит возврат в "Способ оплаты"
    - do: |
        Выбрать любой доступный способ
        Тап по "Выбрать"
    - assert: |
        Форма "Способ оплаты" закрывается
        На экране отображается экран оценить обслуживание с кнопкой "отправить" чаевые заправщику
        Выбранный способ отображается в пункте "Способ оплаты"
    - do: Тап "Отправить"
    - assert: Открывается экран с успешной отправкой чаевых
    - do: Изменить положение девайса в положение лэндскейп
    - assert: Экран завершения заказа не сбрасывается при смене ориентации

    - platforms:
        - t3am
        - ios
        - android
    - tags:
        - assessors


  Закрытие чека  (оценка качества обслуживания на заправке) по кнопке):
    - info: |
        Для включения тестового слоя и его работы после перезапуска приложения надо включить следующие настройки:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Включить заправочный слой - Произвести поиск по категории АЗС.ЯндексЗаправки
        Местоположение Тестировочная (Москва, Красная площадь, Лобное место)
    - do: Пройти сценарий заправки (выбрать колонку, тип и кол-во топлива, тап на Оплатить)
    - assert: |
        После успешной заправки открывается экран "Оценить обслуживание".
        В нем есть чек, чаевые заправщику и звезды.
    - do: Тап на кнопку закрыть
    - assert: экран закрывается

    - platforms:
        - t3am
        - ios
        - android
    - tags:
        - assessors


  Запрос авторизации при взаимодействии с Заправкой через пункт Способ оплаты:
    - description: |
        При неавторизованном пользователе и попытке оплаты Заправки любым способом, либо добавления личной информации (привязки карты для оплаты) Навигатор должен инициировать процесс авторизации
        Для проверки кейса **нужно** подменить местоположение девайса на любую АЗС с оплатой.
    - info: |
        - Пользователь неавторизован
        **НО** _В рамках кейса нужно будет в шаге 3 авторизоваться пользователем, имеющим привязанные карты для оплаты_
        - Местоположение пользователя **должно находиться на территории любого полигона АЗС с оплатой.**
        (для этого можно произвести поиск по категории Яндекс Заправки, скопировать координаты любой АЗС и подменить местоположение девайса на скопированные координаты. Пример АЗС с оплатой:
        https://yandex.ru/maps/org/rosneft/122855688884/?ll=37.580906%2C54.156915&z=17 - координаты 37.580906, 54.156915
        https://yandex.ru/maps/org/rosneft/224751200146/?ll=37.618082%2C54.242338&z=17 - координаты 37.618082, 54.242338
        https://yandex.ru/maps/org/yeka/84150722849/?ll=37.647736%2C55.777472&z=17 - координаты 37.647736, 55.777472
        https://yandex.ru/maps/org/rosneft/148354456029/?ll=37.640830%2C55.746372&z=17  - координаты 37.640830, 55.746372 )
    - do: |
        - Открыть карточку заправки
        - Тап "Заправиться"
        - Выбрать любую колонку
        - Выбрать любое топливо
    - assert: |
        - Происходит переход в карточке Заправки к этапу выбора объема топлива
        - Если пользователь впервые открыл экран выбора объема топлива - то покажется экраны обучения
    - do: Тап на "Оплатить"
    - assert: Происходит переход к окну авторизации
    - do: Авторизоваться пользователем, имеющим привязанные карты для оплаты
    - assert: |
        - Происходит возвращение к карточке Заправки
        - Если экран оплаты был открыт впервые - покажется соглашение
        - В области "Способ оплаты" отображается привязанная карта

    - platforms:
        - ios
        - t3am
        - android


  Восстановление сессии оплаты:
    - description: |
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения. Для проверки **надо**:
        - Подменить местоположение на регион с высокой плотностью заправок (например, МСК, СПБ, Воронеж и т.д.)
        Либо
        - Подменить местоположение на тестировочную АЗС. Она располагается на Лобном месте на Красной площади в Москве `(координаты N 55.753211 E 37.622504)`. При открытии тестировочной АЗС у карточки АЗС отображается **заголовок «Тестировочная»**
    - info: |
        - Пользователь авторизован
        - Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        - Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        - Открыта карточка заправки Тестировочной АЗС
    - do: Выбрать колонку номер 1 в карточке заправки
    - assert: Происходит переход к разделу выбора вида топлива
    - do: |
        - Выбрать любой тип топлива
        - Выбрать объем/сумму заправки
        - Тап на кнопку "Оплатить"
    - assert: |
        - Если пользователь не просматривал экраны с выбором топлива и оплатой - будут показаны обучающие экраны и лицензионное соглашение
        - Происходит переход к процессу отправки заказа
    - do: |
        - Дождаться начала этапа заливки топлива (счетчика литров)
        - Выгрузить приложение из мультизадачности
        - Снова запустить приложение
    - assert: |
        - Приложение запускается
        - Открывается карточка Заправки на этапе заливки топлива

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi
    - integration_run:
        - tanker_sdk
        - payment_sdk


  Заправки. Отображение экранов заправочной карточки:
    - info: |
        - Пользователь авторизован
        - Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode - ON
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start - ON
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer - ON
        Меню - Настройки - Developer settings -> Gas stations -> Gas design v2 - OFF
        Меню - Настройки - Developer settings -> Gas stations -> Gas design v2 develop - OFF
        Перезагрузить приложение
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения. Для проверки **нужно** воспользоваться  тестировочной АЗС.
        Тестировочная АЗС располагается на Лобном месте на Красной площади в Москве `(координаты N 55.753211 E 37.622504)`
        При открытии тестировочной АЗС у карточки АЗС отображается **заголовок «Тестировочная»**
    - do: Открыта карточка заправки Тестировочной АЗС
    - assert: Открытую карточку АЗС можно свернуть в минимальное состояние свайпом вниз
    - do: |
        - Выбрать любую колонку в карточке заправки
        - Карточку выбора вида топлива, способа оплаты и суммы/объема заправки попробовать свернуть/развернуть свайпом вниз
    - assert: Открытую карточку выбора вида топлива, способа оплаты и суммы/объема можно свернуть в минимальное состояние свайпом вниз
    - do: |
        - Перейти на экран выбора объема или суммы заправки
        - Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Открытый экран выбора объема (или суммы заправки) можно свернуть в минимальное состояние свайпом вниз
    - do: |
        Перейти на экран выбора способы оплаты
        Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Открытый экран выбора выбора способы оплаты можно свернуть в минимальное состояние свайпом вниз
    - do: |
        Дождаться начала этапа заливки топлива (счетчика литров)
        Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Экран Заправки на этапе заливки топлива **НЕ** свайпается
    - do: |
        Выгрузить приложение из мультизадачности
        Снова запустить приложение
    - assert: |
        Приложение запускается
        Открывается карточка Заправки на этапе заливки топлива
        Карточку заправки на этапе заливки топлива невозможно закрыть свайпом вниз
    - do: |
        Дождаться окончания заправочной сессии, чтобы отобразился экран с чеком и кнопкой "Закрыть"
        Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Открытый экран с чеком можно свернуть в минимальное состояние свайпом вниз

    - platforms:
        - motrex
        - autochip
        - second_run_hu
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Заправки - Новый дизайн. Отображение экранов заправочной карточки:
    - info: |
        - Пользователь авторизован
        - Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode - ON
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start - ON
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer - ON
        Перезагрузить приложение
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения. Для проверки **нужно** воспользоваться  тестировочной АЗС.
        Тестировочная АЗС располагается на Лобном месте на Красной площади в Москве `(координаты N 55.753211 E 37.622504)`
        При открытии тестировочной АЗС у карточки АЗС отображается **заголовок «Тестировочная»**
    - do: Открыта карточка заправки Тестировочной АЗС
    - assert: Открытую карточку АЗС можно свернуть в минимальное состояние свайпом вниз
    - do: |
        Выбрать любую колонку в карточке заправки
        Карточку выбора вида топлива попробовать свернуть/развернуть свайпом вниз
    - assert: Открытую карточку выбора вида топлива можно свернуть в минимальное состояние свайпом вниз
    - do: |
        Выбрать любой вид топлива
        Перейти на экран выбора объема или суммы заправки
        Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Открытый экран выбора объема (или суммы заправки) можно свернуть в минимальное состояние свайпом вниз
    - do: |
        Перейти на экран выбора способы оплаты, тапом по кнопке Оплатить
        Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Открытый экран выбора выбора способы оплаты можно свернуть в минимальное состояние свайпом вниз
    - do: |
        Тап на кнопку "Подтвердить"
        Дождаться начала этапа заливки топлива (счетчика литров)
        Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Экран Заправки на этапе заливки топлива **НЕ** свайпается
    - do: |
        Выгрузить приложение из мультизадачности
        Снова запустить приложение
    - assert: |
        Приложение запускается
        Открывается карточка Заправки на этапе заливки топлива
        Карточку заправки на этапе заливки топлива невозможно закрыть свайпом вниз
    - do: |
        Дождаться окончания заправочной сессии, чтобы отобразился экран с чеком, чаевыми заправщику и звездами
        Попробовать свернуть/развернуть свайпом вниз
    - assert: |
        Открытый экран с чеком можно свернуть в минимальное состояние свайпом вниз

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Логирование Заправок - Процесс успешной оплаты(АЗС новый UI):
    - description: |
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения. Для проверки **нужно** воспользоваться  тестировочной АЗС.
        Тестировочная АЗС располагается на Лобном месте на Красной площади в Москве `(координаты N 55.753211 E 37.622504)`
        При открытии тестировочной АЗС у карточки АЗС отображается **заголовок «Тестировочная»**
    - info: |
        - Включить настройки:
        Меню -> Настройки -> Dev Settings -> Gas stations -> Force switch to Test Mode
        Меню -> Настройки -> Dev Settings -> Gas stations -> Switch TankerSDK to test mode on app start
        - Перезапустить приложение
        - Выполнить подмену местоположения на расположение Тестировочной АЗС  (Москва, Красная площадь, Лобное место  - `(координаты N 55.753211 E 37.622504)`)
        - Перезагрузить приложение
        - Включить заправочный слой (произвести поиск по АЗС с оплатой - ЯндексЗаправки)
        - Подключить девайс к программе для снятия логов (напр, для Android - AndroidStudio, для IOS - XCode)
        - Авторизоваться в приложении
        **При первом открытие карточки логи такого формата не приходят!**
    - do: Открыть карточку заправки
    - assert: |
        - Открывается карточка заправки
        - В логах отображается событие gas-station-card.opened с параметром open_type = geocard_poi
    - do: Свернуть карточку в минимальное состояние свайпом вниз
    - assert: |
        Карточка сворачивается в минимальное состояние
        В логах отображается событие gas-station-card.level-changed с параметрами вида:
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-station-card.level-changed
        ....Attributes: [
        ........level: small
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        ] где level это состояние карточки, а station_id номер заправки
    - do: Раскрыть карточку из минимального состояния в максимальное свайпом вверх
    - assert: |
        Карточка раскрывается
        В логах отображается событие gas-station-card.level-changed с параметрами вида:
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-station-card.level-changed
        ....Attributes: [
        ........level: full
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        ] где level это состояние карточки, а station_id номер заправки
    - do: |
        - Выбрать любую колонку
    - assert: |
        В логах приходит событие **gas-stations.select_column** с примерным видом:

        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.select_column
        ....Attributes: [
        ........order_id: 7e09b723f0e8445f98f0761df5030232
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        ]
    - do: Выбрать вид топлива тапом на любую строку с типом топлива
    - assert: |
        - В логах приходит событие: **gas-stations.fuel** примерного вида:
        ::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.fuel
        ....Attributes: [
        ........offer: a95_premium
        ........order_id: 7e09b723f0e8445f98f0761df5030232
        ........station_id: 46e2059185f44d61b6aa578b1415ec49

        _Строка "offer:..." - Выбор марки топлива до заказа_
    - do: |
        - Свайпом вверх/вниз по ползунку с топливом изменить кол-во/сумму топлива
    - assert: |
        - В логах приходит событие: **gas-stations.select_cost** примерного вида:
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.select_cost
        ....Attributes: [
        ........order_id: 7e09b723f0e8445f98f0761df5030232
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        ]
    - do: Тап на кнопку "Оплатить"
    - do: Тап на номер банковской карты
    - assert: |
        - Открывается "экран выбора способа оплаты"
        - В логах приходит событие: **gas-stations.select_payment** примерного вида:
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.select_payment
        ....Attributes: [
        ........order_id: 7e09b723f0e8445f98f0761df5030232
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        ]
    - do: |
        - Тап на кнопку "Подтвердить" на экране выбора способа оплаты
    - assert: |
        Начинается процесс заправки.
        После успешной заправки в логи приходит события **"gas-stations.order_success"** вида:
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.order_fueling
        ....Attributes: [
        ........order_id: 7e09b723f0e8445f98f0761df5030232
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.order_success
        ....Attributes: [
        ........fuel: a95_premium
        ........order_cost: 56,98
        ........order_id: 7e09b723f0e8445f98f0761df5030232
        ........order_type: liters
        ........station: Тестировочная АЗС
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        ]

    - platforms:
        - t3am
        - ios
        - android
    - tags:
        - assessors
        - metric
    - testing:
        - acceptance_navi


  Оплата заправки при авиарежиме:
    - info: |
        - Открыть любую заправку (тапом по пои АЗС либо тап на меню -> тап Яндекс Заправки -> тап на любой пин АЗс с оплатой)
        - Тап "Заправиться" в карточке заправки
        - Тап на любую колонку
        - Выбрать любой тип топлива
    - do: |
        Отключить интернет либо включить авиарежим
        Тап на кнопку оплатить
    - assert: |
        Открывается экран с ошибкой отсутствия сети.
    - do: |
        - Включить интернет/отключить авиарежим
        - Тап по кнопке "Повторить"
    - assert: |
        Подгружается информация страницы "Способ оплаты"

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Стандартная оплата заправки:
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезапустить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Открыта карточка заправки Тестировочной АЗС
    - do: Выбрать любую колонку в карточке заправки
    - assert: Происходит переход к разделу выбора вида топлива
    - do: |
        Выбрать любой тип топлива
        Выбрать объем/сумму заправки (лучше выбрать малый объем, для быстрого прохождениия кейса)
        Тап на кнопку "Оплатить"
    - assert: Открывается форма оплаты (чекаут)
    - do: |
        Тап подтвердить
        Дождаться начала этапа заливки топлива (счетчика литров)
    - assert: |
        Видна анимация заливки топлива
        Зависаний и крешей / вылета приложений нет
    - do: Дождаться окончания анимации заливки топлива
    - assert: |
        После успешной заправки открывается экран "Оценить обслуживание".
        В нем есть чек, чаевые заправщику и звезды

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Процесс заправки и тап по кнопке back:
    - description: |
        В этом кейсе проверяем игнорирование кнопки back в момент залива топлива.
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения.
        Для проверки **нужно**:
        - Подменить местоположение на тестировочную АЗС. Она располагается на Лобном месте на Красной площади в Москве `(координаты N 55.753211 E 37.622504)`. При открытии тестировочной АЗС у карточки АЗС отображается **заголовок «Тестировочная»**
    - info: |
        - Пользователь авторизован
        - Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Gas stations in tab bar
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        - Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "Подъехать" к тестовой АЗС с помощью дебаг-панели)
        - Открыта карточка заправки Тестировочной АЗС
    - do: Выбрать любую колонку в карточке заправки
    - assert: Происходит переход к разделу выбора вида топлива, способа оплаты и суммы/объема заправки
    - do: |
        - Выбрать любой тип топлива и объем/сумму заправки
        - Тап на кнопку "Оплатить"
    - assert: Происходит переход к процессу отправки заказа
    - do: |
        - Дождаться начала этапа заливки топлива (счетчика литров)
        - Тап по кнопке "back" на девайсе
    - assert: |
        - Игнорируется нажатие кнопки Back на девайсе в момент заливки топлива

    - platforms:
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Выбор способа оплаты:
    - info: |
        Пользователь авторизован
        У пользователя есть подписка на Я.Плюс
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Открыта карточка тестировочной АЗС, выбрана колонка, тип топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Открывается новая форма оплаты (чекаут)
        В Блоке "Меня заправляет" размещена иконка заправщика с подписью "Меня заправляет".
        Далее есть кнопка "Выбрать" для выбора заправщика из списка или ввода его номера телефона
        Также выводится не более 3 заправщиков с позывными.
    - do: Тап на "Способ оплаты"
    - assert: |
        Открывается экран "Способ оплаты"
        На экране отображаются все привязанные карты к аккаунту ( в нашем случае к тестингу), другие возможные способы оплаты (СБП, Бизнес-аккаунт) , также есть возможность добавить банковскую карту и добавить бизнес-счет.
    - do: Выбрать любой из возможных способов оплаты
    - assert: |
        Экран "Способ оплаты" закрывается.
        Отображается новая форма оплаты (чекаут), в блоке "Способ оплаты" отображается выбранный способ.
        Также вверху экрана может отображаться мини-баннер (зависит от выбранного способа оплаты)

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Постоплатная АЗС с выбором заправщика на экране "Чек":
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Сувенирный двор)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Тап на пин Тестировочная (POST)
    - do: |
        Тап "Заправиться"
        Выбрать любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается форма оплаты (чекаут).
    - do: |
        Не выбирать заправщика
        Тап на кнопку "Подтвердить"
    - assert: |
        Открывается экран чека.
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: Открывается экран "Выберите заправщика", на котором можно ввести номер телефона заправщика либо выбрать из предложенных саджестов
    - do: Тап по любому заправщику
    - assert: |
        Экрана "Выбор заправщика" закрывается, открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых, указаны данные заправщика, есть блок со способами оплаты и кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Постоплатная АЗС с вводом номера заправщика на экране "Чек":
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Сувенирный двор)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Тап на пин Тестировочная (POST)
    - do: |
        Тап "Заправиться"
        Выбрать любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается новая форма оплаты (чекаут).
    - do: |
        Не выбирать заправщика
        Тап на кнопку "Подтвердить"
    - assert: |
        Открывается экран чека.
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: Открывается экран "Выберите заправщика", на котором можно ввести номер телефона заправщика либо выбрать из предложенных саджестов
    - do: Ввести номер заправщика
    - do: Тап на кнопку "Подтвердить"
    - assert: |
        Экрана "Выбор заправщика" закрывается, открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых, указаны данные заправщика, есть блок со способами оплаты и кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Постоплатная АЗС c выбором заправщика:
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Сувенирный двор)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
    - do: |
        Тап на пин Тестировочная (POST)
        Тап "Заправиться"
        Выбрать любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается форма оплаты (чекаут).
    - do: |
        Выбрать заправщика из предложенных
        Тап на кнопку "Подтвердить"
    - assert: |
        Происходит оплата топлива
        После окончания открывается экран чека
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран ранее)
        - способы оплаты
        Кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Постоплатная АЗС c вводом номера заправщика:
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Сувенирный двор)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
    - do: |
        Тап на пин Тестировочная (POST)
        Тап "Заправиться"
        Выбрать любую колонку
    - assert: |
        Начинается процесс залива топлива
        После окончания налива открывается форма оплаты (чекаут).
    - do: |
        Ввести номер телефона заправщика через тап на кнопку "Выбрать"
        Тап "Подтвердить"
    - assert: |
        Происходит оплата топлива
        После окончания открывается экран чека
        В Блоке "Чаевые заправщику" по умолчанию выбран саджест "Без чаевых"
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран ранее)
        - способы оплаты
        Кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Предоплатная АЗС с выбором заправщика:
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Открыта карточка АЗС с оплатой
        Выбрать колонку и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Открывается форма оплаты (чекаут)
    - do: |
        Выбрать заправщика из предложенных
        Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран в предыдущем шаге)
        - способами оплаты
        Кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Новая форма оплаты (чекаут). Предоплатная АЗС с вводом номера заправщика:
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Открыта карточка АЗС с оплатой
        Выбрать колонку и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Открывается новая форма оплаты (чекаут)
    - do: |
        Ввести  номер телефона заправщика через тап на кнопку "Выбрать"
        Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму чаевых
    - assert: |
        Выбранная сумма выделяется,
        В блоке "Чаевые заправщику" появляются поля:
        - данные заправщика (который был выбран в предыдущем шаге)
        - способами оплаты
        Кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Предоплатная АЗС с выбором заправщика на экране "Чек":
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Открыта карточка АЗС с оплатой
        Выбрать колонку и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Открывается форма оплаты (чекаут)
    - do: |
        Не выбирать заправщика
        Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму
    - assert: |
        Открывается экран "Выберите заправщика", на котором можно ввести номер телефона заправщика либо выбрать из предложенных саджестов
    - do: Тап по любому заправщику
    - assert: |
        Экрана "Выбор заправщика" закрывается, открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых, указаны данные заправщика, есть блок со способами оплаты и кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Форма оплаты (чекаут). Предоплатная АЗС с вводом номера заправщика на экране "Чек":
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
        Открыта карточка АЗС с оплатой
        Выбрать колонку и вид топлива
    - do: Тап на кнопку "Оплатить" на карточке АЗС
    - assert: |
        Открывается форма оплаты (чекаут)
    - do: |
        Не выбирать заправщика
        Тап на кнопку "Подтвердить"
    - assert: |
        Происходит процесс залива топлива
        После окончания открывается экран чека
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму
    - assert: |
        Открывается экран "Выберите заправщика", на котором можно ввести номер телефона заправщика либо выбрать из предложенных саджестов
    - do: Ввести номер заправщика
    - do: Тап на кнопку подтвердить
    - assert: |
        Экрана "Выбор заправщика" закрывается, открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых, указаны данные заправщика, есть блок со способами оплаты и кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Полный цикл оплаты заправки способом СБП на предоплатных АЗС РИТ:
    - info: |
        Пользователь авторизован
        Включены настройки: Меню - Настройки - Developer settings -  Misc - Debug config enabled - On
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (Москва, Красная площадь, Лобное место)
        Открыта карточка заправки АЗС РИТ
        У пользователя установление банкосвкое приложение с возможностью СБП
        Баланс карты , которая будет использована для оплаты больше 0 (оплата происходит реальная, с возвратом за возвратом приходить к https://staff.yandex-team.ru/natalya-ovs)
    - do: Выбрать любую колонку в карточке заправки
    - assert: Происходит переход к разделу выбора вида топлива
    - do: |
        Выбрать любой тип топлива
        Выбрать объем/сумму заправки (лучше выбрать малый объем, для быстрого прохождениия кейса)
        Учесть сумму запрвки с суммой на карте
        Тап на кнопку "Оплатить"
    - assert: Открывается форма с выбором способа оплаты
    - do: |
        Выбрать СБП как способ оплаты
        Выбрать банкосвкое приложение , к которой привязана карта для оплаты
    - assert: Происходит переход в банкоское приложение
    - do: |
        Оплатить заправку в банкосвком приложении
        Вернуться в приложение
    - asssert: Происходит переход к процессу отправки заказа
    - do: Дождаться начала этапа заливки топлива (счетчика литров)
    - assert: |
        Видна анимация заливки топлива
        Зависаний и крешей / вылета приложений нет
    - do: Дождаться окончания анимации заливки топлива
    - assert: |
        После успешной заправки открывается экран "Оценить обслуживание".
        В нем есть чек, чаевые заправщику и звезды
    - do: На экране чека в блоке "Чаевые заправщику" выбрать любую сумму
    - assert: Открывается экран "Выберите заправщика", на котором можно ввести номер телефона заправщика либо выбрать из предложенных саджестов
    - do: Тап по любому заправщику
    - assert: |
        Экрана "Выбор заправщика" закрывается, открывается экран чека
        В блоке "Чаевые заправщику" выбрана сумма чаевых, указаны данные заправщика, есть блок со способами оплаты и кнопка "Оплатить"

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Полный цикл оплаты заправки способом СБП на постоплатных АЗС РИТ:
    - info: |
        Пользователь авторизован
        Включены настройки: Меню - Настройки - Developer settings -  Misc - Debug config enabled - On
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (Москве ул.Ильинка д.4)
        Открыта карточка заправки АЗС РИТ(POST)
        У пользователя установление банкосвкое приложение с возможностью СБП
        Баланс карты , которая будет использована для оплаты больше 0 (оплата происходит реальная, с возвратом за возвратом приходить к https://staff.yandex-team.ru/natalya-ovs)
    - do: Выбрать любую колонку в карточке заправки
    - assert: |
        Автоматический выбирается количество топлива и сумма
        Открывается форма для выбора способа оплаты заправки
    - do: |
        Выбрать СБП как способ оплаты
        Выбрать банковское приложение , к которой привязана карта для оплаты
    - assert: Происходит переход в банкоское приложение
    - do: |
        Оплатить заправку в банкосвком приложении
        Вернуться в приложение
    - assert: |
        После успешной заправки открывается экран "Оценить обслуживание".
        В нем есть чек, чаевые заправщику и звезды

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi


  Логирование Заправок - Процесс оплаты (Неуспешная оплата):
    - description: |
        Данный кейс **НЕВОЗМОЖНО** пройти без подмены местоположения. Для проверки **нужно** воспользоваться  тестировочной АЗС.
        Тестировочная АЗС располагается на Лобном месте на Красной площади в Москве `(координаты N 55.753211 E 37.622504)`
        При открытии тестировочной АЗС у карточки АЗС отображается **заголовок «Тестировочная»**
    - info: |
        - Включить настройки:
        Меню -> Настройки -> Dev Settings -> Gas stations -> Force switch to Test Mode
        Меню -> Настройки -> Dev Settings -> Gas stations -> Switch TankerSDK to test mode on app start
        - Перезапустить приложение
        2 - Перезагрузить приложение
        3 - Подменить местоположение девайса на Тестировочную АЗС `(координаты N 55.753211 E 37.622504)` - (Москва, Красная площадь, Лобное место )
        4 - Подключить девайс к программе для снятия логов (напр, для Android - AndroidStudio, для IOS - XCode)
        **Кейс проходить на debug сборках**
    - do: |
        На открытой карточке заправки
        - Выбрать 4 колонку (6 в новом дизайне)
        - Выбрать вид топлива тапом на иконку топлива
        - Выбрать способ оплаты (если он не выбран)
        - Выбрать кол-во литров/сумму и тап на кнопку “Выбрать”
        - Тап на кнопку “Оплатить” на карточке заправки
        **Дождаться отмены заказа**
    - assert: |
        - Выводится сообщение об отмене заказа
        - В логах приходит событие **"gas-stations.order_error"** примерного вида:
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.order_error
        ....Attributes: [
        ........order_id: b69abca9980f4fe1ad05aacef095477c
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ........Заказ отменен: Минимальная сумма заказа: 45.00₽
        ....]
        ]
    - do: Тап на кнопку "попробовать еще раз"
    - assert: |
        В логах приходит событие **gas-stations.retry_order** примерного вида:
        yandex::maps::navikit::report:: <info>:
        Event received: [
        ....Name: gas-stations.retry_order
        ....Attributes: [
        ........order_id: d771a8b3affb424b86e13befdc48dc83
        ........station_id: 46e2059185f44d61b6aa578b1415ec49
        ....]
        ]

    - platforms:
        - t3am
        - ios
        - android
    - tags:
        - assessors
        - metric
    - testing:
        - acceptance_navi


  Чекаут. На чеке отображается блок Чаевые запращику:
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        Открыта форма оплаты чекаут
    - do: В блоке "Меня заправляет" тап на любого заправщика
    - assert: В блоке "Меня заправляет" отображается выбранный заправщик
    - do: Тап "Оставить чаевые""
    - assert: Открылось мини-вебвью "Чаевые заправщику" с выбором суммы
    - do: Выбрать "Без чаевых"
    - assert: |
        Закрылось мини-вебвью "Чаевые заправщику" с выбором суммы
        Свитчер в неактивном состоянии
    - do: Тап "Подтвердить"
    - do: Дождаться завершения заправки
    - assert: Открывается экран чека с блоком "Чаевые заправщику"

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Чекаут. На чеке не отображается блок Чаевые запращику:
    - info: |
        Пользователь авторизован
        Включены тестовые заправки и заправочный слой:
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Меню - Настройки - Developer settings - Gas Stations - Gas Stations layer
        Перезагрузить приложение
        Местоположение пользователя определяется на территории полигона АЗС с оплатой (тестировочная АЗС- Москва, Красной площади, Лобное место)
        Открыта форма оплаты чекаут
    - do: В блоке "Меня заправляет" тап на любого заправщика
    - assert: В блоке "Меня заправляет" отображается выбранный заправщик
    - do: Тап "Оставить чаевые""
    - assert: Открылось мини-вебвью "Чаевые заправщику" с выбором суммы
    - do: Выбрать любую сумму
    - assert: |
        Закрылось мини-вебвью "Чаевые заправщику" с выбором суммы
        Свитчер переключился в активное состояние
        Отображается надпись "Переведем X руб по завершении заказа"
    - do: Тап "Подтвердить"
    - do: Дождаться завершения заправки
    - assert: Открывается экран чека без блока "Чаевые заправщику"

    - tags:
        - assessors
    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Работа эксперимента gas_stations_restore при авторизации:
    - info: |
        Пользователь не авторизован
        Устройство подключено ко внутренний сети через Charles
        В дебаг инфо отображается эксперимент gas_stations_restore=enabled
        Если эксперимента нет, нужно попросить включить его у менеджеров
        Приложение не запущено
    - do: Запустить приложение
    - assert: |
        Открылся экран "Карта"
    - do: Раскрыть ручку https://app.tanker.yandex.net в Charles 
    - assert: В списке отображаемых папок отсутствует папка "order"
    - do: Авторизоваться в приложение
    - assert: |
        Пользователь залогинен
        В ручке https://app.tanker.yandex.net появилась папка "order"
    - do: Раскрыть папку "order"
    - assert: Отображается запрос "restore"

    - tags:
        - not_suitable_for_farm
    - platforms:
        - ios
        - android


  Работа эксперимента gas_stations_restore при запуске приложения:
    - info: |
        Пользователь авторизован
        Устройство подключено ко внутренний сети через Charles
        В дебаг инфо отображается эксперимент gas_stations_restore=enabled
        Если эксперимента нет, нужно попросить включить его у менеджеров
        Приложение не запущено
    - do: Запустить приложение
    - assert: |
        Открылся экран "Карта"
    - do: Раскрыть ручку https://app.tanker.yandex.net в Charles 
    - assert: В списке отображаемых папок присутсвует папка "order"
    - do: Раскрыть папку "order"
    - assert: Отображается запрос "restore"

    - tags:
        - not_suitable_for_farm
    - platforms:
        - ios
        - android


  Работа эксперимента gas_stations_restore при выгрузке приложения во время налива топлива:
    - info: |
        Пользователь авторизован
        Устройство подключено ко внутренний сети через Charles
        В дебаг инфо отображается эксперимент gas_stations_restore=enabled
        Если эксперимента нет, нужно попросить включить его у менеджеров
        1 - Включить тестовый слой
        Меню - Настройки - Developer settings - Gas Stations - Switch to Test Mode
        Меню - Настройки - Developer settings - Gas Stations - Switch TankerSDK to test mode on app start
        Перезагрузить приложение
        2 - Местоположение пользователя определяется на территории полигона АЗС с оплатой (Лобное место Красной площади, Москва)
        (достаточно "подъехать" к тестовой АЗС с помощью дебаг-панели)
    - do: Выбрать любую колонку в карточке заправки
    - assert: Происходит переход к разделу выбора вида топлива, способа оплаты и суммы/объема заправки
    - do: |
        - Выбрать любой тип топлива и объем/сумму заправки
        - Тап на кнопку "Оплатить"
    - assert: Происходит переход к процессу отправки заказа
    - do: |
        - Дождаться начала этапа заливки топлива (счетчика литров)
        - Выгрузить приложение из мультизадачности
    - assert: |
        - Процесс заливки начался
        - Приложение закрылось
    - do: Запустить приложение
    - assert: |
        - Открывается экран "Карта"
        - Отображается карточка залива топлива
        - В Charles отображается ручка https://app.tst.tanker.yandex.net - "Order"
    - do: Раскрыть папку "order"
    - assert: Отображается запрос "restore"

    - tags:
        - not_suitable_for_farm
    - platforms:
        - ios
        - android
