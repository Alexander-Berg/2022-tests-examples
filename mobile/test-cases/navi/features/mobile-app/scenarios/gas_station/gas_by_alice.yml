components: gas_by_alice
testing:
  - regress
integration_run:
  - tanker_sdk
  - alice

specs:
  Аннотации Алисы о Заправках при заезде на АЗС:
    - do: Построить маршрут через территорию АЗС с оплатой
    - assert: Маршрут построился
    - do: Запустить симуляцию со скоростью меньше 25 км/ч
    - do: Свернуть приложение
    - d0: Дождаться аннотации Алисы о Заправках
    - do: Развернуть приложение
    - assert: Открывается карточка Заправки

    - platforms:
        - ios
        - t3am
        - android
    - tags:
        - assessors


  Закрытие заправочного слоя при поиске через Алису:
    - do: Тап на иконку колонки в таббаре
    - assert: |
        - Показан слой с пинами заправок, в которых есть оплата из навигатора
        - Вместо кнопки с алисой - кнопка закрытия заправочного слоя
    - do: Вызвать Алису
    - do: Произвести голосовой поиск
    - assert: |
        - Заправочный слой выключается.
        - На карте отображается искомый результат

    - platforms:
        - ios
        - android
        - t3am
    - tags:
        - assessors
        - not_suitable_for_farm
    - testing:
        - acceptance_navi


  Аннотации Алисы о Заправках при заезде на АЗС (on exp):
    - do: |
        - Использовать интенты:
          [collapsed-image](https://jing.yandex-team.ru/files/midway/download-1-1.png){title=QR-код}
        
          `yandexnavi://add_exp?navi_feature_gas_station_alice_voice=enabled`
        - Включить: Меню -> Настройки -> Звуки и оповещения -> Уведомления на заправках
        - Перезапустить приложение
    - do: Построить маршрут через территорию АЗС с оплатой
    - do: Запустить симуляцию со скоростью меньше 25 км/ч
    - do: Дождаться заезда на территорию АЗС
    - assert: |
        - Открывается карточка заправки на экране выбора колонки
        - Звучит аннотация Алисы о Заправках
   
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Аннотации Алисы о Заправках при заезде на АЗС при выключенных уведомлениях (on exp):
    - do: |
        - Использовать интенты:
          [collapsed-image](https://jing.yandex-team.ru/files/midway/download-1-1.png){title=QR-код}
        
          `yandexnavi://add_exp?navi_feature_gas_station_alice_voice=enabled`
        - Выключить: Меню -> Настройки -> Звуки и оповещения -> Уведомления на заправках
        - Перезапустить приложение
    - do: Построить маршрут через территорию АЗС с оплатой
    - do: Запустить симуляцию со скоростью меньше 25 км/ч
    - do: Дождаться заезда на территорию АЗС
    - assert: |
        - Открывается карточка заправки на экране выбора колонки
        - Не звучит аннотация Алисы о Заправках

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Аннотации Алисы о Заправках при заезде на АЗС (off exp):
    - do: |  
        - Использовать интенты:
          [collapsed-image](https://jing.yandex-team.ru/files/midway/download-2-3.png){title=QR-код}
        
          `yandexnavi://add_exp?navi_feature_gas_station_alice_voice=disabled`
        - Перезапустить приложение
    - do: Построить маршрут через территорию АЗС с оплатой
    - do: Запустить симуляцию со скоростью меньше 25 км/ч
    - assert: |
        - Открывается карточка заправки на экране выбора колонки
        - Не звучит аннотация Алисы о Заправках
    - platforms:
        - ios
        - android
    - tags:
        - assessors


  #Отмена Заправки Алисой с частичными данными:
   # - info: |
    #    Пользователь авторизован. К аккаунту привязана карта
     #   Местоположение пользователя на территории полигона любой АЗС с оплатой
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- do: Назвать только сумму для заправки
    #- assert: Алиса запрашивает недостающие данные
    #- do: Назвать недостающие данные
    #- assert: После названных данных алиса переходит к этапу подтверждения введенной информации
    #- do: Тап на команду "Нет"
    #- assert: |
    #   Открывается карточка Заправки
    #   В карточке заправки отображаются введенные в диалоге с Алисой данные

    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors


  #Успешная заправка Алисой с частичными данными:
   # - info: |
    #    Пользователь авторизован. К аккаунту привязана карта
     #   Местоположение на территории полигона любой АЗС с оплатой
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- do: Назвать только сумму для заправки
    #- assert: Алиса запрашивает недостающие данные
    #- do: Назвать недостающие данные
    #- assert: После названных данных алиса переходит к этапу подтверждения введенной информации
    #- do: Тап на команду "Да"
    #- assert: Происходит переход к этапу оплаты и непосредственно заправки

    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors


  #Вызов Алисы вне заправочного полигона:
   # - info: |
    #    Пользователь авторизован
     #   Местоположение вне территории полигона любой АЗС с оплатой
    #- do: Вызвать Алису
    #- do: Сказать "Заправь меня"
    #- assert: Алиса отвечает, что сейчас заправиться не получится.

    #- platforms:
     #   - ios
     #   - t3am
     #   - android
    #- tags:
     #   - assessors


  #Полный сценарий отмены заправки Алисой без данных:
   # - info: |
    #    Пользователь авторизован.
     #   К аккаунту привязана карта
      #  Местоположение пользователя находится на территории полигона любой АЗС с оплатой
    #- do: Открыть карточку организации АЗС
    #- do: Перевести ее в минимальный режим свайпом вниз
    #- assert: Карточка в минимальном состоянии
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- assert: |
     #   Алиса запускает сценарий заправки и запрашивает номер колонки
      #  В садджестах указаны все колонки, находящиеся на АЗС
    #- do: Сказать любой номер колонки
    #- assert: Выполняется переход к этапу выбора бензина
    #- do: Выбрать вид тапом по садджесту в плашке Алисы
    #- assert: Происходит переход на этап выбора суммы/объема заправки
    #- do: Сказать желаемую сумму/объем
    #- assert: Происходит переход к этапу подтверждения введенных результатов
    #- do: Тап на команду "Нет"
    #- assert: |
     #   Плашка Алисы закрывается
      #  Открывается карточка Заправки
       # Значения суммы/объема, вида топлива и колонки соответствуют введенным ранее значениям

   # - platforms:
    #    - ios
     #   - t3am
      #  - android
    #- tags:
     #   - assessors


  #Полный сценарий успешной Заправки Алисой без данных:
   # - info: |
    #    Пользователь авторизован
     #   К аккаунту привязана карта
      #  Местоположение на территории полигона любой АЗС с оплатой
    #- do: Открыть карточку организации АЗС
    #- do: Перевести ее в минимальный режим свайпом вниз
    #- assert: Карточка в минимальном состоянии
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- assert: |
     #   Алиса запускает сценарий заправки и запрашивает номер колонки
      #  В садджестах указаны все колонки, находящиеся на АЗС
    #- do: Сказать любой номер колонки
    #- assert: Выполняется переход к этапу выбора бензина
    #- do: Выбрать вид тапом по садджесту в плашке Алисы
    #- assert: Происходит переход на этап выбора суммы/объема заправки
    #- do: Сказать желаемую сумму/объем
    #- assert: Происходит переход к этапу подтверждения введенных результатов
    #- do: Тап на команду "Да"
    #- assert: |
    #    Плашка Алисы закрывается
     #   Открывается карточка Заправки
      #  Начинается процесс отправки заказа

    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors


  #Заправка Алисой. Авторизация с непривязанной картой:
   # - info: |
    #    Пользователь неавторизован
     #   Местоположение на территории полигона любой АЗС с оплатой
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- assert: |
     #   Алиса предлагает авторизоваться в приложении
      #  Открывается экран авторизации
    #- do: Авторизоваться под любым пользователем с непривязанной картой для оплаты
    #- assert: |
     #   Авторизация происходит успешно
      #  Происходит переход на экран "Карта"
    #- do: Сказать "Заправь меня"
    #- do: Пройти этапы ввода колонки, вида топлива, суммы/объема
    #- assert: |
     #   После запроса всех данных Алиса предлагает привязать к аккаунту карту для оплаты
      #  Открывается карточка Заправки
       # Значения суммы/объема, вида топлива и колонки соответствуют введенным ранее значениям

    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors


  #Заправка Алисой. Авторизация с привязанной картой:
   # - preconditions: |
    #    Пользователь неавторизован
     #   Местоположение на территории полигона любой АЗС с оплатой
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- assert: |
     #   Алиса предлагает авторизоваться в приложении
      #  Открывается экран авторизации
    #- do: Авторизоваться под любым пользователем с привязанной картой для оплаты
    #- assert: |
     #   Авторизация происходит успешно
      #  Происходит переход на экран "Карта"
    #- do: Сказать "Заправь меня"
    #- do: Пройти этапы ввода колонки, вида топлива, суммы/объема
    #- assert: |
     #   После запроса всех данных Алиса переходит к подтверждению данных
       
    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors


  #Заправка Алисой с полными данными:
   # - info: |
    #    Пользователь авторизован
     #   Местоположение пользователя находится на территории полигона любой АЗС с оплатой
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня на 3 колонке,92 бензином, на 1000 рублей"
    #- assert: |
     #   Алиса переходит к этапу подтверждения заказа

    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors


  #Заправка Алисой. Некорректные данные колонки:
  #  - info: |
   #     Пользователь авторизован
    #    Подменить местоположение девайса на Тестовую АЗС по адресу: Москва, лобное место
    #- do: |
     #   - Использовать интенты:
      #    [collapsed-image](https://jing.yandex-team.ru/files/midway/download-3-1.png){title=QR-код}
        
       #   `yandexnavi://add_exp?navi_feature_gas_stations_force_test_mode=enabled`
        #- Перезагрузить приложение
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- do: Ввести номер колонки, отсутствующий на данной АЗС
    #- assert: Алиса отвечает, что колонки с данным номером на АЗС нет и просит ввести номер колонки еще раз.

    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors


  #Заправка Алисой. Некорректные данные обьема:
   # - info: |
    #    Пользователь авторизован
     #   Подменить местоположение девайса на Тестовую АЗС по адресу: Москва, лобное место
    #- do: |
     #   - Использовать интенты:
      #    [collapsed-image](https://jing.yandex-team.ru/files/midway/download-3-1.png){title=QR-код}
        
       #   `yandexnavi://add_exp?navi_feature_gas_stations_force_test_mode=enabled`
        #- Перезагрузить приложение
    #- do: Вызвать Алису любым способом
    #- do: Сказать "Заправь меня"
    #- do: Ввести номер существующей колонки
    #- do: Выбрать любой вид бензина
    #- assert: |
     #   - Колонка успешно выбирается
      #  - Топливо выбирается
       # - Алиса просить выбрать обьем топлива/сумму
    #- do: Назвать 750 литров
    #- assert: Алиса отвечает что не может заправить такое количество топлива и просит повторить еще раз

    #- platforms:
     #   - ios
      #  - t3am
       # - android
    #- tags:
     #   - assessors