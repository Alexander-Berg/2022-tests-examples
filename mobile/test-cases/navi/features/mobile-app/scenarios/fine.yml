components: fine
testing:
  - regress
integration_run:
  - fine

specs:
  Добавление первого СТС для авторизованного пользователя:
    - description: |
        Тестовые: 
        водительское удостоверение 77MB 84 77 34
        свидетельство о регистрации 77 XT 850022
    - info: |
        Пользователь авторизован
        У пользователя нет добавленных документов
        Наличие СТС с неоплаченными штрафами (можно запросить в чате оплат)
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение        
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: |
        - Отображется экран с двумя незаполненными полями "Номер СТС", "Номер ВУ"
        - Кнопка "Проверить" задизейблина
    - do: В поле "Номер СТС" ввести существующий СТС со штрафами
    - assert: |
        - Номер отображается в поле ввода
        - Кнопка "Проверить"  стала активной
    - do: Тап "Проверить"
    - assert: Отображается список штрафов по документу
    - do: Тап на "Настройки" (шестерёнка в правом верхнем углу) -> "Машины и водители"
    - assert: Введеный ранее СТС добавлен в список документов пользователя

    - platforms:
      - ios
      - android


  Изменение документа для авторизованного пользователя:
    - info: |
        Пользователь авторизован    
        У пользователя есть добавленные документы
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение        
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: Тап на “Настройки” (шестерёнка в правом верхнем углу) -> “Машины и водители”
    - assert: Отображается список добавленных документов 
    - do: Тап на любой  документ
    - assert: Открывается детальная информация по документу
    - do: Изменить название на "my car" и тап кнопку "Сохранить"
    - assert: |
        - Закрывается экран с детальной информацией по документу
        - Открывается список добавленных документов
    - do: Тап "назад" к настройкам,  еще раз "назад" к списку документов
    - assert: |
        - Отображается экран со списком штрафов по добавленным документам
        - Документ, который редактировали имеет название "my car"

    - platforms:
      - ios
      - android


  Удаление документа для авторизованного пользователя:
    - info: |
        Пользователь авторизован
        У пользователя есть добавленные документы
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение    
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: Тап на “Настройки” (шестерёнка в правом верхнем углу) -> “Машины и водители”
    - assert: Отображается список добавленных документов 
    - do: Тап на любой документ
    - assert: Открывается детальная информация по документу
    - do: Тап на кнопку "Удалить" 
    - assert: |
        - Открывается диалог подтверждения удаления документа
        - В диалговом окне кнопки "Нет, оставьте" и "Удалить"
    - do: Тап на "Удалить" в диалоговом окне
    - assert: |
        - Закрываются диалоговое экран и детальная карточка
        - Показан экран "Машины и водители"
        - На этом экране отсутствует только что удалённый документ
    - do: Тап “назад” к настройкам, еще раз “назад” к списку документов
    - assert: |
        - Отображается экран со списком штрафов по добавленным документам
        - Документ, удалённый ранее, отсутствует

    - platforms:
      - ios
      - android


  Добавление ВУ для авторизованного пользователя:
    - info: |
        Пользователь авторизован      
        У пользователя есть добавленные документы
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: Тап на “Настройки” (шестерёнка в правом верхнем углу) -> “Машины и водители”
    - assert: Отображается список добавленных документов 
    - do: Тап на кнопку "Добавить" в правом верхнем углу
    - assert: |
        - Поверх экрана "Машины и водители" показываются 2 кнопки:
        - "Добавить машину" и "Добавить водителя"
    - do: Тап на кнопку "Добавить водителя"
    - assert: Открывается экран добавления водителя
    - do: |
        - Ввести номер ВУ "45 ОУ 123456" и имя "Иван Петрович"
        - Тап на кнопку "Сохранить"
    - assert: |
        - Экран добавления водителя закрывается
        - Отображается список добавленных авто и водителей
        - Новый документ добавлен
    - do: Тап “назад” к настройкам, еще раз “назад” к списку документов
    - assert: Добавленный документ присутствует на экране со списком штрафов 

    - platforms:
      - ios
      - android


  Оплатить штраф привязанной картой:
    - info: |
        Пользователь авторизован       
        У пользователя есть добавленные документы со штрафами
        У пользователя есть привязанная карта
        Пользователь дал доступ кошельку (Штрафы ГИБДД - Тап на штраф - Тап на "Заплатить" - Тап на "Ю money" - Войти в кошелек)
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: |
        - Тап на любой штраф
        - Тап на "Заплатить"
    - assert: Открывается список привязанных карт и пункт - “новая карта”
    - do: Тап на привязанную карту
    - assert: Открывается экран с **суммой оплаты = штраф + комиссия**
    - do: Тап на "Оплатить"
    - assert: Отображается экран успеха
    - do: Возвращаемся на список штрафов
    - assert: В списке штрафов отсутствует оплаченный штраф

    - platforms:
      - ios
      - android


  Оплатить штраф новой картой без привязки:
    - info: |
        Пользователь авторизован       
        У пользователя есть добавленные документы
        У пользователя нет привязанных карт
        Пользователь дал доступ кошельку
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: |
        - Тап на любой штраф
        - Тап на "Заплатить"
    - assert: Отображаются способы оплаты 
    - do: Выбрать пункт "Новая карта"
    - assert: Отображается экран ввода данных
    - do: |
        Ввести
        * номер карты, срок действия карты и cvc
        **Убрать** галочку привязки
        Тап на кнопку "Дальше"
    - assert: Отображается экран подтверждения данных
    - do: Тап на "Заплатить"
    - assert: Отображается экран успеха
    - do: Вернуться на экран штрафов
    - assert: В списке штрафов отсутствует оплаченный штраф
    - do: Авторизоваться тем же аккаунтом на портале Я.Паспорт
    - assert: У пользователя отсутствуют в привязанные банковские карты

    - platforms:
      - ios
      - android


  Пуш с уведомлением о новых штрафах:
    - info: |
        Пользователь авторизован
        У пользователя есть добавленные документы
        Пользователь дал доступ кошельку
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: Тап на "настройки"
    - assert: Отображаются настройки
    - do: Тап на "Уведомления"
    - assert: Открывается экран с выбором "Пуш и письма" и "Только письма"
    - do: Выбрать "Пуш и письма", закрываем приложение
    - do: Попросить принудительно отравить пуш о новом штрафе
    - assert: |
        - Пришёл пуш о новом штрафе
        - Письмо о штрафе НЕ пришло
    - do: Тап по пришедшему пушу
    - assert: Открываются детали штрафа

    - platforms:
      - ios
      - android


  Отправка запросов при выборе "Пуш и письма" или "Только письма":
    - info: |
        Пользователь авторизован
        У пользователя есть добавленные документы
        Пользователь дал доступ кошельку
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
        Подключить девайс к Charles
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: Тап на "настройки"
    - assert: Отображаются настройки
    - do: Тап на "Уведомления"
    - assert: Открывается экран с пунктами "Пуш и письма" и "Только письма"
    - do: Выбрать "Только письма"
    - assert: |
        - В чарльзе отправляется запрос https://money.yandex.ru/api/v1/data/app/databases/usersettings/deltas/
        - В запросе есть параметр:
         `change_type` : `set`,
                  `value" : `{
                    `boolean` : `false`
                    `type` : `boolean`
                  }`
    - do: Тап на "Уведомления"
    - assert: Открывается экран с пунктами “Пуш и письма” и “Только письма”
    - do: Выбрать “Пуш и письма”
    - assert: |
        - В чарльзе отправляется запрос https://money.yandex.ru/api/v1/data/app/databases/usersettings/deltas/
        - В запросе есть параметр:
        “change_type” : “set”,
        “value” : {
        “boolean” : true,
        “type” : “boolean”
        }

    - platforms:
      - ios
      - android


  Добавление первых двух документов для авторизованного пользователя:
    - info: |
        Пользователь авторизован
        У пользователя нет добавленных документов
        Наличие СТС с неоплаченными штрафами (можно запросить в чате оплат)
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображется экран с двумя незаполненными полями "Номер СТС", "Номер ВУ"
    - do: |
        В поле "Номер СТС" ввести имеющийся СТС 
        В поле "номер ВУ" ввести ВУ (например 04 ОО 123456)
        Тап на кнопку "Проверить" 
    - assert: |
        - Отображается список штрафов по обоим документам.
        - Документы корректно добавлены
    - do: |
        - Перейти в меню настроек штрафов
        - Тап на "авто и водители"
    - assert: У пользователя добавлен в список документов, включающий введеные СТС и ВУ в соотвествующие разделы "Водители" и "Машины"

    - platforms:
      - ios
      - android


  Обработка ошибок при недостатке средств:
    - info: |
        Пользователь авторизован
        У пользователя есть добавленные документы
        У пользователя есть привязанная карта на которой недостаточно средств для оплаты  штрафа
        Пользователь дал доступ кошельку
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: |
        - Тап на любой штраф
        - Тап на "Заплатить"
    - assert: Отображаются способы оплаты 
    - do: Тап на привязанную карту
    - assert: Отображается контракт
    - do: |
        Ввести:
        * cvc
        Тап на кнопку "Заплатить"
    - assert: Отображается экран с ошибкой "Не удалось"

    - platforms:
      - ios
      - android


  ApplePay. Сценарий оплаты штрафа неавторизованным пользователем (позитив):
    - info: |
        В приложение Wallet на iPhone добавлена (токенизирована) карта, с которой требуется провести платеж ApplePay.
        **На карте хвататет средств** для оплаты штрафа.
        На iPhone добавлен отпечаток пальца.
        В навигаторе пользователь **неавторизован.**
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на “Штрафы ГИБДД” в Меню
    - assert: Открывается экран оплаты штрафов с двумя полями "Номер СТС" и "Номер ВУ"
    - do: Ввести в поле СТС валидный номер СТС (например, 3438160292)
    - assert: Поле валидируется, как корректное. Серая полоса под полем становится желтой.
    - do: Тап по кнопке "Проверить штрафы"
    - assert: Осуществляется поиск штрафов, открывается экран "Штрафы ГИБДД", где отображаются все найденные штрафы. В верху экрана отображается предложение пользователю войти в аккаунт.
    - do: Тап "Заплатить" на первом найденном штрафе.
    - assert: |
        Открывается экран "Способы оплаты":
        - Банковская карта
        - Apple Pay
    - do: Тап по способу оплаты "Apple Pay"
    - assert: Открывается экран "Оплата" с суммой платежа, комиссией, двумя полями - "ФИО плательщика" и "Эл.почта". Отображается неактивная кнопка "Заплатить".
    - do: |
        Ввести:
        * фио плательщика
        * почту к которой есть доступ (для получения квитанции)
    - assert: Данные вводятся корректно
    - do: Тап кнопку "Заплатить"
    - assert: Открывается экран подтверждения платежа Apple Pay 
    - do: Выбрать карту, предварительно добавленную в Wallet для проведения платежа, прислонить отпечаток пальца.
    - assert: Открывается экран с успехом платежа

    - platforms:
      - ios


  ApplePay. Сценарий оплаты штрафа неавторизованным пользователем (негатив):
    - info: |
        В приложение Wallet на iPhone добавлена (токенизирована) карта, с которой требуется провести платеж ApplePay. 
        **На карте 0 рублей**, что является недостаточным для совершения платежа.
        На iPhone добавлен отпечаток пальца.
        В навигаторе пользователь **неавторизован.**
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на “Штрафы ГИБДД” в Меню
    - assert: Открывается экран оплаты штрафов с двумя полями "Номер СТС" и "Номер ВУ"
    - do: Ввести в поле СТС валидный номер СТС (например, 3438160292)
    - assert: Поле валидируется, как корректное. Серая полоса под полем становится желтой.
    - do: Тап по кнопке "Проверить штрафы"
    - assert: Осуществляется поиск штрафов, открывается экран "Штрафы ГИБДД", где отображаются все найденные штрафы. В верху экрана отображается предложение пользователю войти в аккаунт.
    - do: Тап "Заплатить" на первом найденном штрафе.
    - assert: |
        Открывается экран "Способы оплаты":
        - Банковская карта
        - Apple Pay
    - do: Тап по способу оплаты "Apple Pay"
    - assert: Открывается экран "Оплата" с суммой платежа, комиссией, двумя полями - "ФИО плательщика" и "Эл.почта". Отображается неактивная кнопка "Заплатить".
    - do: |
        Ввести:
        * фио плательщика
        * почту к которой есть доступ (для получения квитанции)
    - assert: Данные вводятся корректно
    - do: Тап кнопку "Заплатить"
    - assert: Открывается экран подтверждения платежа Apple Pay 
    - do: Выбрать карту, предварительно добавленную в Wallet для проведения платежа, прислонить отпечаток пальца.
    - assert: Открывается экран с неуспехом платежа

    - platforms:
      - ios


  ApplePay. Сценарий оплаты штрафа авторизованным пользователем (позитив):
    - info: |
        В приложение Wallet на iPhone добавлена (токенизирована) карта, с которой требуется провести платеж ApplePay. 
        **На карте хватает средств** для оплаты штрафа.
        На iPhone добавлен отпечаток пальца.
        В навигаторе пользователь **авторизован.**
        В аккаунт пользователя на Яндексе уже добавлен любой документ, по которому осуществляется поиск штрафов.
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на “Штрафы ГИБДД” в Меню
    - assert: Открывается экран “Штрафы ГИБДД”, где отображаются все найденные штрафы. 
    - do: Тап "Заплатить" на первом найденном штрафе.
    - assert: |
        Открывается экран "Способы оплаты":
        - Банковская карта
        - Apple Pay
    - do: Тап по способу оплаты "Apple Pay"
    - assert: Открывается экран "Оплата" с суммой платежа, комиссией, двумя полями - "ФИО плательщика" и "Эл.почта". Отображается неактивная кнопка "Заплатить".
    - do: |
        Ввести:
        * фио плательщика
        * почту к которой есть доступ (для получения квитанции)
    - assert: Данные вводятся корректно
    - do: Тап кнопку "Заплатить"
    - assert: Открывается экран подтверждения платежа Apple Pay 
    - do: Выбрать карту, предварительно добавленную в Wallet для проведения платежа, прислонить отпечаток пальца.
    - assert: Открывается экран с успехом платежа

    - platforms:
      - ios


  ApplePay. Сценарий оплаты штрафа авторизованным пользователем (негатив):
    - info: |
        В приложение Wallet на iPhone добавлена (токенизирована) карта, с которой требуется провести платеж ApplePay. 
        **На карте 0 рублей**, что является недостаточным для совершения платежа.
        На iPhone добавлен отпечаток пальца.
        В навигаторе пользователь **авторизован**.
        В аккаунт пользователя на Яндексе уже добавлен любой документ, по которому осуществляется поиск штрафов.
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение       
    - do: Тап на “Штрафы ГИБДД” в Меню
    - assert: Открывается экран “Штрафы ГИБДД”, где отображаются все найденные штрафы
    - do: Тап "Заплатить" на первом найденном штрафе.
    - assert: |
        Открывается экран "Способы оплаты":
        - Банковская карта
        - Apple Pay
    - do: Тап по способу оплаты "Apple Pay"
    - assert: Открывается экран "Оплата" с суммой платежа, комиссией, двумя полями - "ФИО плательщика" и "Эл.почта". Отображается неактивная кнопка "Заплатить".
    - do: |
        Ввести:
        * фио плательщика
        * почту к которой есть доступ (для получения квитанции)
    - assert: Данные вводятся корректно
    - do: Тап кнопку "Заплатить"
    - assert: Открывается экран подтверждения платежа Apple Pay 
    - do: Выбрать карту, предварительно добавленную в Wallet для проведения платежа, прислонить отпечаток пальца.
    - assert: Открывается экран с неуспехом платежа

    - platforms:
      - ios


  Сценарий оплаты штрафа неавторизованным пользователем с помощью новой карты (неуспех):
    - info: | 
        В навигаторе пользователь неавторизован.
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение 
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: |
        - Открывается экран оплаты штрафов с двумя полями "Номер СТС" и "Номер ВУ"
        - Кнопка проверить не активна
    - do: Тап по полю Номер СТС
    - assert: |
        - Курсор устанавливается в поле "Номер СТС"
        - Открывается клавиатура
        - Описание поля перемещается  в заголовок (анимация)
    - do: Ввести в поле СТС валидный номер СТС (например, 3438160292)
    - assert: Кнопка "Проверить" стала активной
    - do: Тап по кнопке "Проверить"
    - assert: Осуществляется поиск штрафов, открывается экран "Штрафы ГИБДД", где отображаются все найденные штрафы.
    - do: Тап по строке с любым штрафом.
    - assert: Открывается тело штрафа с кнопкой Заплатить
    - do: Тап "Заплатить"
    - assert: |
        Открывается экран "Способы оплаты" с пунктами "Ю Money" и добавление Банковской карты
    - do: |
        Тап по "Новая карта"
        Ввести в соответствующие поля корректные данные тестовой банковской карты (номер, срок действия, cvc), которые валидируется приложением, но не валидируется сервером.
        К качестве номера карты можно использовать номер 4444 4444 4444 4448
    - assert: |
        - Поля корректно заполняются, данные сохранены
        - Кнопка "Дальше" становится активной
    - do: Тап кнопку "Дальше"
    - assert: Открывается экран "Оплата штрафа" с суммой штрафа+комиссия, полями откуда (с номером введенной карты) и полем ввода электронного адреса для получения квитанции, с кнопкой "Заплатить"
    - do: Тап "Заплатить"
    - assert: Открывается экран с сообщением об ошибке Не получилось и кнопкой Закрыть
    - do: Тап Закрыть
    - assert: Осуществляется переход на страницу со списком штрафов **или** на экран "Оплата штрафа"

    - platforms:
      - ios
      - android


  Проверка отсутствия пункта меню "Штрафы ГИБДД" на ГУ:
    - description: |
        Штрафы ГИБДД отключены на следующих ГУ: ГУ geely, ГУ Motrex, ГУ Т3 АМ, ГУ Тойота
        Задачи, в которых было реализовано отключение Штрафов ГИБДД:
        - https://st.yandex-team.ru/MOBNAVI-14889 (ГУ Мотрекс)
        - https://st.yandex-team.ru/MOBNAVI-14414
        - https://st.yandex-team.ru/MOBNAVI-13561
    - do: Тап Меню
    - assert: Отсутствует пункт Меню Штрафы ГИБДД

    - platforms:
      - motrex
      - geely
      - carsharing_t3
      - t3am
      - autochip
      - first_run_hu
    - testing:
      - acceptance_navi


  Оплата штрафа авторизованным пользователем:
    - description: |
        Проверяем процесс оплаты штрафа авторизованным пользователем.
        Стоит оплачивать только минимальные штрафы - 250 рублей
        Узнать СТС со штрафами можно у коллег из команды SDK Парковок и Штрафов
        Тестовый акк: ParkingDaFine / Qazwsx1100
    - info: |
        Установлена локаль ru_RU на девайсе.
        Пользователь авторизован
        Найден СТС, ВУ или номер постановления, которое содержит штраф.
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Перейти в Меню - Штрафы ГИБДД
    - assert: |
        - Открывается экран "Штрафы ГИБДД"
        - Отображается список авто и количество штрафов на нем
        - Присутствует кнопка "Заплатить по постановлению"
    - do: Выбрать любой активный штраф
    - assert: |
        - Открывается подробная информация о штрафе
    - do: Ввести любое ФИО в строку "ФИО плательщика"
    - assert: Кнопка "Заплатить +сумма" становится активна
    - do: Тап на "Заплатить" 
    - assert: |
        - Происходит переход на экран "Оплата"
        - Отображается способы оплаты "Банковская карта" и "Ю money"
    - do: Тап на вариант "Банковская карта"
    - assert: |
        Происходит переход на экран “Оплата”
        Отображается форма для ввода данных для оплаты

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi


  Оплата штрафа Ю Money(500, 512, 808):
    - info: |
        В кошельке хватает средств для оплаты штрафа.
        У пользователя нет сохраненных документов.
        Пользователь авторизован
        Пользователь НЕ давал доступ к кошельку
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Открывается экран оплаты штрафов с двумя полями “Номер СТС” и “Номер ВУ”
    - do: |
        Ввести валидный СТС
        Тап по кнопке “Проверить штрафы”
    - assert: Осуществляется поиск штрафов, открывается экран “Штрафы ГИБДД”, где отображаются все найденные штрафы.
    - do: Тап на штраф
    - assert: Открывается экран с информацией по штрафу
    - do: Тап на “Заплатить”
    - assert: |
        iOS:
        Открывается экран “Способы оплаты”:
        - “Ю Money”
        - Банковская карта
        - ApplePay (ios)
        
        Android:
        Открывается экран “Способы оплаты”:
        - “Ю Money”
        - Банковская карта
    - do: Тап по пункту “Ю Money”
    - assert: Открывается webview с запросом доступа к кошельку пользователя, авторизованного в навигаторе
    - do: Подтвердить доступ с помощью СМС/TOTP/Push
    - assert: |
        Появляется спиннер
        Открывается экран “Способы оплаты”
        - Отображается баланс кошелька пользователя
        - Отображаются привязанные карты
        - Отображается пункт “Новая карта”
    - do: Выбрать “Ю Money”
    - assert: |
        Открывается экран успеха платежа с кнопкой: “Вернуться”
        На почту привязанную к кошельку пришло уведомление об оплате
    - do: |
        В браузере авторизоваться в "Ю Money" на портале
        Перейти в историю платежей
    - assert: В истории отображается оплаченный штраф и доступна детальная информация по оплате

    - platforms:
      - ios
      - android


  Оплата Штрафа неавторизованным пользователем без последующей авторизации с новой картой (504, 506, 806, 511):
    - info: | 
        Пользователь не авторизован
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на “Штрафы ГИБДД в Меню
    - assert: Отображается экран с двумя незаполненными полями “Номер СТС”, “Номер ВУ”
    - do: Тап на "У меня бумажное постановление"
    - assert: |
        - Открывается экарн с полем ввода "Номер постановления"
        - Кнопка "Продолжить" не активна
        - Кнопка "Сканировать QR или штрихкод" 
    - do: |
        Ввести номер постановления по действующему штрафу
        Тап по кнопке Продолжить
    - assert: Открывается экран с детальной информацией по штрафу
    - do: Тап Заплатить
    - assert: |
        iOS:
        Открывается экран “Способы оплаты”:
        - Банковская карта
        - ApplePay (ios)
        
        Android:
        - Открывается экран “Оплата” с суммой платежа, комиссией, двумя полями: “ФИО плательщика” и “Эл.почта”. Отображается неактивная кнопка “Заплатить”.
        - Поле “эл.почта” НЕ ЗАПОЛНЕНО.
    - do: В поле ФИО плательщика ввести данные (н-р “Федотов Федот Федотович”)
    - assert: Данные вводятся
    - do: Ввести валидную почту, к которой есть доступ. (Для получения квитанций)
    - assert: Данные вводятся
    - do: Ввести в соответствующие поля корректные данные банковской карты (номер, срок действия, cvc)
    - assert: |
        Поля корректно заполняются, данные сохранены
        кнопка “Заплатить” становится активной, раскрашиваясь в желтый
    - do: Тап “Заплатить”
    - assert: |
        Открывается экран успеха платежа с кнопками: “Авторизоваться” и “Вернуться”
        На почту пришла квитанция об оплате
    - do: Тап "Вернуться"
    - assert: |
        Оплаченный штраф не отображается в списке штрафов

    - platforms:
      - ios
      - android


  Оплата штрафа авторизованным пользователем новой картой с привязкой:
    - info: |
        * Пользователь авторизован
        * У пользователя есть добавленные документы
        * У пользователя нет привязанных карт
        * Пользователь дал доступ кошельку
        * Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        * Перезагрузить приложение
    - do: Тап на "Штрафы ГИБДД" в Меню
    - assert: Отображается список штрафов по добавленным документам
    - do: |
        Тап на “заплатить по постановлению"
        Ввести номер постановления по действующему штрафу и Тап “Продолжить”
    - assert: Открывается экран с детальной информацией по штрафу
    - do: Тап кнопку “Заплатить”
    - assert: Отображается доступные способы оплаты
    - do: Тап "Новая карта"
    - assert: Отображается контракт
    - do: |
        Ввести:
        * номер карты
        * срок действия карты, cvc 
        **Поставить галочку с привязкой** 
        Тап "Дальше"
    - assert: Отображается экран с суммой оплаты, картой и полем ввода электронной почты
    - do: |
        Ввести почту, куда придёт платёжное поручение
        Тап на "Оплатить"
    - assert: Отображается экран успеха
    - do: |
        Авторизоваться в Яндекс.Паспорте этим же аккаунтом
    - assert: Банковская карта, которой оплатили штраф есть в списке привязанных

    - platforms:
      - ios
      - android


  Перенос данных с неавторизованного пользователя:
    - info: | 
        Пользователь не авторизован
        Выключить эксперимент Developer Settings > Misc > Fines through webview > Off
        Перезагрузить приложение
    - do: Тап на “Штрафы ГИБДД” в Меню
    - assert: Отображается экран с двумя незаполненными полями “Номер СТС”, “Номер ВУ”
    - do: |
        В поле “Номер СТС” ввести имеющийся СТС
        В поле “номер ВУ” ввести ВУ (например 04 ОО 123456)
        Тап на кнопку “Проверить”
    - assert: |
        Отображается список штрафов по обоим документам
        Документы корректно добавлены
    - do: |
        Авторизоваться в навигаторе
        Тап на "Штрафы ГИБДД"
        Тап на шестерёнку
        Тап на “Машины и водители”
    - assert: В списке документов имеются введеные во 2 шаге СТС и ВУ

    - platforms:
      - ios
      - android


  Открытие вебвью оплаты штрафов для авторизованного пользователя:
    - info: |
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Открыть меню
    - do: Тап на настройки
    - do: Тап на Developer settings
    - do: Тап на Misc
    - do: Включить эксперимент Fines through webview 
    - do: Перезагрузить приложение
    - do: Авторизоваться
    - do: Открыть меню
    - do: Тап на "Штрафы ГИБДД" 
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_navi      


  Открытие диалога авторизации после тапа на "Штрафы ГИБДД" (пользователь неавторизован):
    - info: |
        Пользователь неавторизован
        Открыт главный экран приложения
    - do: Открыть меню
    - do: Тап на настройки
    - do: Тап на Developer settings
    - do: Тап на Misc
    - do: Включить эксперимент Fines through webview 
    - do: Перезагрузить приложение
    - do: Открыть меню
    - do: Тап на "Штрафы ГИБДД" 
    - assert: Открывается диалог авторизации с текстом "Войдите в аккаунт, чтобы посмотреть или оплатить штрафы" и кнопками «Отмена» и «Войти»
    - do: Тап на “Отмена»
    - assert: | 
        Диалог авторизации скрывается
        Отображается меню

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_navi


  Открытие вебвью оплаты штрафов для неавторизованного пользователя:
    - info: |
        Пользователь неавторизован
        Открыт главный экран приложения
    - do: Открыть меню
    - do: Тап на настройки
    - do: Тап на Developer settings
    - do: Тап на Misc
    - do: Включить эксперимент Fines through webview 
    - do: Перезагрузить приложение
    - do: Открыть меню
    - do: Тап на "Штрафы ГИБДД"
    - assert: Открывается диалог авторизации с текстом "Войдите в аккаунт, чтобы посмотреть или оплатить штрафы" и кнопками «Отмена» и «Войти»  
    - do: Тап на Войти
    - assert: Отображается экран авторизации
    - do: Добавить или выбрать аккаунт из списка и авторизоваться
    - assert: |
        Пользователь авторизован
        Открывается вебвью оплаты штрафов с двумя незаполненными полями “Номер СТС”, “Номер ВУ"   

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - acceptance_navi


  Открытие вебвью оплаты штрафов через интент авторизованным пользователем:
    - info: |
        Пользователь авторизован
        Открыт главный экран приложения
    - do: Открыть меню
    - do: Тап на настройки
    - do: Тап на Developer settings
    - do: Тап на Misc
    - do: Включить эксперимент Fines through webview
    - do: Выгрузить приложение
    - do: |
        Прокинуть интент:
          [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/qrcod_peF.png){title=QR-код}

          `yandexnavi://show_ui/menu/fines` 
    - assert: Открывается вебвью  оплаты штрафов  с двумя незаполненными полями “Номер СТС”, “Номер ВУ"

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - regress      

      
  Открытие вебвью оплаты штрафов через интент неавторизованным пользователем:
    - info: |
        Пользователь неавторизован
        Открыт главный экран приложения
    - do: Открыть меню
    - do: Тап на настройки
    - do: Тап на Developer settings
    - do: Тап на Misc
    - do: Включить эксперимент Fines through webview
    - do: Выгрузить приложение
    - do: |
        Прокинуть интент:
          [collapsed-image](https://jing.yandex-team.ru/files/vmnpopkova/qrcod_peF.png){title=QR-код}

          `yandexnavi://show_ui/menu/fines` 
    - assert: Открывается диалог авторизации с текстом "Войдите в аккаунт, чтобы посмотреть или оплатить штрафы" и кнопками «Отмена» и «Войти»
    - do: Тап на Войти
    - assert: Отображается экран авторизации
    - do: Добавить или выбрать аккаунт из списка и авторизоваться
    - assert: |
        Пользователь авторизован
        Открывается вебвью оплаты штрафов с двумя незаполненными полями “Номер СТС”, “Номер ВУ"   

    - platforms:
      - ios
      - android
    - tags:
      - assessors
    - testing:
      - regress         