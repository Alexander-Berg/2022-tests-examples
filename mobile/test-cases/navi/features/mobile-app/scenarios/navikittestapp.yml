components: navikittestapp
platforms:
  - android
  - ios
tags:
  - assessors

specs:
  Плашка маневра на карте в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: Построить маршрут в любую точку
    - do: Отзумить карту, чтобы в левом верхнем углу карты отображалась плашка следующего маневра
    - do: Тап на плашку маневра
    - assert: |
        Происходит призум к маневру на карте
        Отображается плашка указывающая на маневр на маршруте


  Построение маршрута в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: Построить маршрут и подтвердить его 
    - do: Лонг-тап в любой точке карты
    - assert: На экране отображается поп-ап "Build route!"
    - do: Тап "to" в диалоговом окне
    - assert: |
        Маршрут построен


  Ведение по маршруту в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: Построить маршрут в любую точку на карте
    - do: Тап на "Overview - Start Guidance"
    - assert: |
          Маршрут подтвердился
          Появилась плашка ЕТА
    - do: Тап на "Simulation - Route"
    - assert: Запущено движение по маршруту
    - do: Тап "Simulation - Stop simulation"
    - assert: Симуляция останавливаться, курсор возвращается на реальное местоположение


  Ведение во фридрайв в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: Построен маршрут в любую точку
    - do: Запустить симуляцию движения тапом по кнопке "Simulation - Start simulation"
    - assert: Курсор начинает двигаться по маршруту
    - do: Не сбрасывая симуляцию закрыть ЕТА тапом по крестику 
    - assert: Маршрут сброшен, курсор продолжает двигаться по маршруту 


  Зум карты в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: Несколько раз нажимать на кнопку зума "+"
    - assert: Карта приближается
    - do: Несколько раз нажимать на кнопку зума "-"
    - assert: Карта отдаляется


  Настройка "Избегать платные дороги" в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: Настройка платных дорог в положении "Avoid tolls on"
    - do: Построить маршрут на котором будет платная дорога, например Москва. - Санкт-Петербург
    - assert: Маршрут построился с учетом платных дорог, на маршруте отображаются пины платных дорог
    - do: Сбросить маршрут
    - do: Тапом перевести настройку платных дорог в выключено "Avoid tolls off"
    - do: Построить маршрут из шага 1
    - assert: |
        Маршрут построен без платных дорог
        Пины платных дорог отсутствуют на маршруте


  Выбор маршрута в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: Построить маршрут в любую точку на котором будут альтернативы
    - assert: Маршрут построен, на маршруте есть альтернативы
    - do: Тап на балун маршрутов
    - assert: |
        Маршрут стал активен
        В балуне отображается длина маршрута, цвет балуна меняется
    - do: Тап на полилинию другого маршрута
    - assert: Маршрут становится активным


  Режим обзора в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: Построить маршрут в любую точку и запустить ведение
    - assert: Начинается ведение по маршруту
    - do: Тап на кнопку " overview - overview on"
    - assert: |
        Градусник ЕТА исчезает
        На карте отображаются альтернативные маршруты у альтернативных маршрутов отображаются балуны со временем 


  Режим фолловинга:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
        Построить маршрут в любую точку и запустить ведение тапом по "Simulation - Route"
    - do: Отскролить карту так чтобы курсор остался за экраном и подождать
    - assert: Происхоид призум к курсору, камера следует за курсором


  Съезд на альтернативу в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: Построить маршрут в любую точку на котором будут альтернативные маршруты
    - assert: |
        Маршрут построен
        Есть несколько вариантов маршрута
    - do: Запустить симуляцию движения по маршруту
    - assert: Курсор начинает двигаться по выбранному маршруту
    - do: Выбрать активным маршрутом альтернативу
    - assert: Первоначальный маршрут стал альтернативой
    - do: Подождать пока курсор вернется на первоначальный маршрут
    - assert: Альтернатива стала активным маршрутом


  Сьезд с маршрута в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: Построить маршрут в любую точку
    - do: Запустить симуляцию движения по маршруту
    - assert: Курсор начинает двигаться по выбранному маршруту
    - do: Не сбрасывая симуляции построить маршрут в другую точку
    - assert: |
        Новый маршрут построен
        В момент съезда с первоначального маршрута звучит аннотация "Маршрут перестроен" маршрут перестраивается
        (Движение все равно будет продолжаться по первоначальному маршруту! Багом не является, это особенность симуляции движения!!!!)


  ДС на карте по маршруту в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: |
        Построить маршрут, на линии которого будут располагаться Дорожные события.
        Запустить симуляцию движения
    - assert: На маршруте отображаются только основные иконки ДС - Камеры/Аварии/Перекрытия/Дорожные работы
    - do: Двигаться по маршруту
    - assert: |
        При прохождении ДС, иконка исчезает
        При приближении к ДС камера звучит аннотация о превышении скорости если скорость превышена, знак ограничения скорости окрашивается в красный и пульсирует


  ДС во фри драйв в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: |
        Построить маршрут в любую точку имеющий на маршруте разные типы ДС
        Запустить симуляцию движения по маршруту
    - do: Сбросить маршрут, не останавливая симуляции
    - assert: |
        ДС, находящиеся на Предполагаемом маршруте, становятся выделенными
        Отображаются только основные ДС камеры/плохая дорога/перекрытия/дорожные работы
    - do: Проехать через ДС на маршруте
    - assert: |
        ДС перестает быть выделенным
        При приближении к ДС "камера" (если скорость превышена) знак ограничения скорости окрашивается в красный, звучит аннотация на скорость, ДС начинает пульсировать


  Карта в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: Перемещать карту
    - assert: Стабильная работа приложения. Карта нормально скролится движением пальца
    - do: |
        Проверить, что на карте отображаются: светофоры, пины зданий, остановки - нетапабельны
    - assert: Светофоры, пины зданий, остановки отображаются на карте, друг на друга не накладываются, при тапе ничего не происходит


  Балуны маршрутов в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: Построить маршрут в любую точку, чтобы были альтернативные маршруты
    - assert: |
        У каждого маршрута отображается балун со временем
        Балуны друг друга не перекрывают
    - do: Вращать карту
    - assert: |
        Балуны меняют свое отображение вместе с картой
        Друг друга не перекрывают


  Балуны маневров по маршруту в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: Настройка "Maneuver balloon on road" в положении Off
    - do: |
        Построить маршрут в любую точку 
        Запустить ведение
    - assert: Курсор начинает двигаться по маршруту
    - do: Тап на балун маневра в углу экрана
    - assert: |
        Происходит призум на место следующего маневра
        Балун переметился на линию маршрута, нога балуна указывает на точку ближайшего маневра
        Содержание балуна то же, что и в углу
    - do: Сбросить маршрут
    - do: Изменить настройку "Maneuver balloon on road" в положение On
    - do: Построить любой маршрут и запустить ведение по нему
    - assert: Курсор начинает двигаться по маршруту
    - do: Тап на балун маневра в углу экрана
    - assert: |
        Происходит призум на место следующего маневра
        Балун остается в углу экрана, не перемещается на маршрут


  Скрытие балунов на карте в NavikitTestApp:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: |
        Настройка "Maneuver balloon on road" в положении Off
        Построить маршрут в любую точку и запустить ведение по нему
    - do: Тап по балуну маневра в углу экрана
    - assert: Балун маневра перемещается на линию по маршруту
    - do: Тап по карте
    - assert: |
        Балун маневра перемещается в угол экрана
        ~через 5 секунд балун маневра перемещается обратно на линию маршрута


  Слой маршрутов и ДС на карте:
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - info: |
        Кнопка "V - H" находится кнопками зума. Находится в состоянии "On"
    - do: Построить маршрут в любую точку и запустить ведение по нему
    - assert: Маршрут отображается на карте
    - do: Тап по кнопке "V"
    - assert: |
        Кнопка переходит в состояние OFF
        На карте больше не отображается маршрут, ДС, светофоры перестают быть выделеными, баллуны (кроме того что закреплен в углу)
    - do: Тап по кнопке "H"
    - assert: Маршрут снова отображается на карте


  Нумерация маршрутов:
    - description:
        Проверка производится через тестовое приложение Navikit Test App
    - info: При выборе маршрута снизу должно появляться сообщение `Route line tap with index = тут_номер_маршрута` . Нумерация маршрутов начинается с 0.
        На iOS никаких сообщений появляться не должно, но при этом само приложение не должно падать.
    - do: Построить маршрут в любую точку так чтобы отобрадалось несколько маршрутов. Тапом по **линии** маршрутов выбрать любой неактивный
    - assert: Маршрут становится активным. Внизу отображается надпись Route line tap with index = тут_номер_маршрута
    - do: Тапом по **балуну** маршрута выбрать любой неактивный маршрут
    - assert: Маршрут становится активным. Внизу отображается надпись Route line tap with index = тут_номер_маршрута


  Построение маршрута точкой "Отсюда":
    - description: |
        Проверка производится через тестовое приложение Navikit Test App
    - do: Лонг-тап в любой точке карты (отличной от своего местоположения)
    - assert: На экране отображается окошко с кнопками
    - do: Тап "from"
    - assert: Отображается окошкой с сообщением о необходимости поставить точку "to" (на ios - будет посередине, на android - маленькое внизу)
    - do: Лонг-тап в любой точке карты (отличной от своего местопложения и точки from), в открывшемся окошке тап "to"
    - assert: Построился маршрут от точки from к точке to, которые были установлены ранее