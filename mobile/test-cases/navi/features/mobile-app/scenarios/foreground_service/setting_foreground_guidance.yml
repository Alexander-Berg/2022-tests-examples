components: setting_foreground_guidance
testing:
  - regress

specs:

  Фоновое ведение. Отключение подсказок в фоновом режиме в системных настройках:
    - do: |
        Меню -> Настройки -> Навигация -> Работа в фоне - С маршрутом - Вкл
        Меню -> Настройки -> Навигация -> Работа в фоне - Без маршрута - Вкл
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Подсказки в фоновом режиме -> off 
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Фоновое ведение -> on
    - do: |
        Построить маршрут с большим количеством поворотов и ДС
        Запустить симуляцию ведения через debug-панель
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости, полосности не появляются
        В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости, полосности

    - platforms:
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Фоновое ведение. Отключение фонового ведения в системных настройках:
    - do: |
        Меню -> Настройки -> Навигация -> Работа в фоне - С маршрутом - Вкл
        Меню -> Настройки -> Навигация -> Работа в фоне - Без маршрута - Вкл
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Подсказки в фоновом режиме -> on
    - do: |
        Построить маршрут с большим количеством поворотов и ДС
        Запустить симуляцию ведения через debug-панель
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости, полосности не появляются
        В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости, полосности

    - platforms:
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Фоновое ведение. Отключение фонового ведение и подсказок в фоновом режиме в системных настройках:
    - do: |
        Меню -> Настройки -> Навигация -> Работа в фоне - С маршрутом - Вкл
        Меню -> Настройки -> Навигация -> Работа в фоне - Без маршрута - Вкл
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Подсказки в фоновом режиме -> off
    - do: |
        Построить маршрут с большим количеством поворотов и ДС
        Запустить симуляцию ведения через debug-панель
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости, полосности не появляются
        В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости, полосности

    - platforms:
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Фоновое ведение. Отключение подсказок в фоновом режиме в системных настройках (freedrive):
    - do: |
        Меню -> Настройки -> Навигация -> Работа в фоне - С маршрутом - Вкл
        Меню -> Настройки -> Навигация -> Работа в фоне - Без маршрута - Вкл
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Подсказки в фоновом режиме -> off 
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Фоновое ведение -> on
    - do: |
        Построить маршрут с большим количеством поворотов и ДС
        Запустить симуляцию ведения через debug-панель
        Сбросить маршрут, не сбрасывая симуляцию движения 
        Дождаться переход в freedrive
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости, полосности не появляются
        В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости, полосности

    - platforms:
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Фоновое ведение. Отключение фонового ведения в системных настройках (freedrive):
    - do: |
        Меню -> Настройки -> Навигация -> Работа в фоне - С маршрутом - Вкл
        Меню -> Настройки -> Навигация -> Работа в фоне - Без маршрут - Вкл
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Подсказки в фоновом режиме -> on
    - do: |
        Построить маршрут с большим количеством поворотов и ДС
        Запустить симуляцию ведения через debug-панель
        Сбросить маршрут, не сбрасывая симуляцию движения 
        Дождаться переход в freedrive
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости, полосности не появляются
        В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости, полосности

    - platforms:
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Фоновое ведение. Отключение фонового ведение и подсказок в фоновом режиме в системных настройках (freedrive):
    - do: |
        Меню -> Настройки -> Навигация -> Работа в фоне - С маршрутом - Вкл
        Меню -> Настройки -> Навигация -> Работа в фоне - Без маршрут - Вкл
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Фоновое ведение -> off 
        Системные настройки телефона -> Приложения -> Навигатор -> Уведомления -> Подсказки в фоновом режиме -> off
    - do: |
        Построить маршрут с большим количеством поворотов и ДС
        Запустить симуляцию ведения через debug-панель
        Сбросить маршрут, не сбрасывая симуляцию движения 
        Дождаться переход в freedrive
    - do: Свернуть приложение
    - assert: |
        Отсутствуют голосовые аннотации
        Heads-up оповещения о предстоящих маневрах, камерах контроля скорости, полосности не появляются
        В шторке отсутствуют оповещения от приложения о предстоящих маневрах, о камерах контроля скорости, полосности

    - platforms:
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Фоновое ведение. Настройка:
    - do: |
       - Меню - Настройки - Навигация - Работа в фоне - С маршрутом - Вкл
       - Меню - Настройки - Навигация - Работа в фоне - Без маршрута - Вкл
    - do: |
       - Изменить настройки на: "С маршрутом" и "Без маршрута" - Выкл
    - assert: Настройка "Фоновое ведение" выключена
    - do: Открыть главный экран приложения
    - assert: Открыт главный экран приложения
    - do: Перейти Меню - Настройки - Навигация
    - assert: Настройки "С маршрутом" и "Без маршрута" выключены
    - do: Перезапустить приложение
    - do: Перейти Меню - Настройки - Навигация
    - assert: Настройки "С маршрутом" и "Без маршрута" выключены
    - do: |
       - Изменить настройки на: "С маршрутом" и "Без маршрута" - Вкл
    - assert: Настройка "Фоновое ведение" включена

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi
    - tags:
        - assessors