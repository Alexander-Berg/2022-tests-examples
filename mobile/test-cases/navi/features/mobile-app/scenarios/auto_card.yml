components: auto_card
testing:
  - regress

specs:
  Добавление даты окончания ОСАГО (iOS):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        Список машин - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется возможность добавить дату окончания ОСАГО. При тапе на "Добавить дату окончания" поверх карточки авто открывается датапикер. Для сохранения выбранной даты надо тап на "Сохранить"
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в Навигаторе
        - Добавлена машина
        - Дата окончания ОСАГО не проставлена в карточке автомобиля
        - Открыто Меню Навигатора
    - do: Тап на машину (под аватаркой и именем пользователя)
    - assert: |
        - Открывается карточка автомобиля
        - В разделе "ОСАГО" кнопка с заголовком "Дата окончания" и подписью "Добавить дату окончания"
    - do: Тап на кнопку "Добавить дату окончания"
    - assert: |
        - Текст "Добавить дату окончания" в карточке авто не меняется
        - Поверх карточки авто открывается датапикер:
            - вертикальный ряд с числами 01-31
            - вертикальный ряд с месяцами
            - вертикальный ряд с годом
            - кнопка "Сохранить"
    - do: Выбрать дату в датапикере
    - assert: Выбранная дата отображается только в датапикере
    - do: Тап на "Сохранить"
    - assert: |
        - Закрывается датапикер
        - Дата под кнопкой "Дата окончания" поменялась на дату из шага 3
    - do: Тап на стрелочку "Назад"
    - assert: |
        - Закрывается карточка автомобиля
        - Показан экран Меню навигатора
        - Под аватаркой и именем пользователя серая кнопка с маркой + моделью машины и гос номером
    - do: Тап на кнопку машины
    - assert: |
        - Открывается карточка автомобиля
        - В разделе “ОСАГО” кнопка с заголовком “Дата окончания” и датой из шага 3

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Удаление карточки ОК (iOS):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        **Список машин** - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется удаление карточки автомобиля из аккаунта. Удалить автомобиль можно из карточки авто. Кнопка удаления появляется в режиме редактирования (карандаш около крестика в навбаре карточки авто)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена 1 машина
        - Открыта карточка автомобиля
        - Включен режим редактирования
    - do: Тап на кнопку "Удалить информацию" внизу карточки авто
    - assert: |
        - Появляется поп-ап:
            - Текст: “Удалить информацию о машине?”
            - Кнопки  “Нет” и “Удалить”
    - do: Тап на "Нет"
    - assert: |
        - Закрывается поп-ап
        - Показана карточка авто
    - do: Повторить шаги 1-2, выбрав "Удалить"
    - assert: |
        - Закрывается поп-ап
        - В шапке показана информационная плашка с названием "Информация удаляется" и троббером загрузки
        - После удаления показана информационная плашка с зеленой галочкой и названием: "информация удалена"
    - do: Дождаться автоматического закрытия карточки авто (~3-5 сек)
    - assert: |
        - Карточка авто закрылась
        - Показано меню навигатора
        - Список машин исчез (убрался индикатор страниц в виде точек, невозможен скрол кнопок авто)
        - Под аватаркой и именем пользователя белая кнопка "Добавить машину"
    - do: Тап на "Добавить машину"
    - assert: Открывается экран ввода VIN или гос номера

    - platforms:
      - ios
    - tags:
        - assessors


  Изменение даты окончания ОСАГО (Android):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        В этом кейсе проверяется возможность изменения даты окончания ОСАГО. Данный функционал возможен в режиме редактирования карточки авто. Для включения этого режима необходимо тап на иконку карандаша в навбаре карточки авто.
        Режим редактирования позволяет изменить дату окончания ОСАГО, СТС и цвет, а так же удалить автомобиль с аккаунта
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина
        - Дата окончания ОСАГО выбрана в карточке автомобиля
        - Открыта карточка автомобиля
    - do: Тап на значок карандаша в правом верхнем углу рядом с крестиком
    - assert: Карточка авто переходит в режим редактирования
    - do: Тап на кнопку "ОСАГО" с выбранной датой
    - assert: |
        - Поверх карточки авто открывается датапикер:
            - в шапке год, день недели и число с месяцем (дата совпадает с датой в карточке авто)
            - календарь с выбранной датой (дата совпадает с датой в карточке авто)
            - кнопки "Отмена" и "ОК"
    - do: Выбрать дату, отличную от даты из предусловия
    - assert: Выбранная дата отображается в шапке датапикера
    - do: Тап на “Отмена”
    - assert: |
        - Закрывается датапикер
        - Под кнопкой ОСАГО дата из предусловия
    - do: Повторить шаги 2-4, выбрав “ОК”
    - assert: |
        - Закрывается датапикер
        - Дата из предусловия в кнопке "ОСАГО" поменялась на новую дату, выбранную в датапикере
    - do: Тап на "Сохранить" в навбаре
    - assert: |
        - Карточка авто выходит из режима редактирования
        - Дата окончания ОСАГО такая же как в шаге 5

    - platforms:
      - android
    - tags:
        - assessors


  Добавление даты окончания ОСАГО (Android):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        В этом кейсе проверяется возможность добавить дату окончания ОСАГО
        На данный момент никакого функционала это не привносит, но возможность такая есть
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина
        - Дата окончания ОСАГО не проставлена в карточке автомобиля
        - Открыто Меню навигатора
    - do: Тап на машину (под аватаркой и именем пользователя)
    - assert: |
        - Открывается карточка автомобиля
        - В разделе "Информация о машине" кнопка с заголовком "ОСАГО" и подписью "Добавить дату окончания"
    - do: Тап на надпись "Добавить дату окончания"
    - assert: |
        - Поверх карточки авто открывается датапикер:
            - в шапке год, день недели и число с месяцем (дата совпадает с датой на устройстве)
            - календарь с выбранной датой (дата совпадает с датой на устройстве)
            - кнопки "Отмена" и "ОК"
    - do: Выбрать другую дату на календаре
    - assert: Выбранная дата отображается в заголовке датапикера
    - do: Тап на "Отмена"
    - assert: |
        - Закрывается датапикер
        - Под кнопкой ОСАГО синяя надпись "Добавить дату окончания"
    - do: Повторить шаги 2-4, выбрав "ОК"
    - assert: |
        - Закрывается датапикер
        - Надпись "Добавить дату окончания" поменялась на дату, выбранную в датапикере

    - platforms:
      - android
    - tags:
        - assessors


  Удаление карточки ОК (Android):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        Список машин - кнопки машин под аватаркой пользователя (список скролится вправо, за раз показывается одна кнопка)
        В этом кейсе проверяется удаление карточки автомобиля из аккаунта. Удалить автомобиль можно из карточки авто. Кнопка удаления появляется в режиме редактирования (карандаш около крестика в навбаре карточки авто)
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена 1 машина
        - Открыта карточка автомобиля
        - Включен режим редактирования
    - do: Тап на "Удалить информацию"
    - assert: |
        - Появляется поп-ап:
            - Текст: “Удалить информацию о машине?”
            - Кнопки  “Нет” и “Удалить”
    - do: Тап на "Нет"
    - assert: |
        - Закрывается поп-ап
        - Показана карточка авто
    - do: Повторить шаги 2-3, выбрав "Удалить"
    - assert: |
        - Закрывается поп-ап
        - В шапке показана информационная плашка с названием "Информация удаляется" и троббером загрузки
        - После удаления показана информационная плашка с зеленой галочкой и названием: "информация удалена"
        - После показа плашки об успешном удалении через ~1-2 сек карточка закрывается автоматически
        - После закрытия карточки - показана главный экран навигатора (карта)
    - do: Открыть меню навигатора
    - assert: |
        - Открывается меню навигатора
        - Под аватаркой и именем пользователя серая кнопка "Добавить машину"
    - do: Тап на "Добавить машину"
    - assert: Открывается экран ввода VIN или гос номера

    - platforms:
      - android
    - tags:
        - assessors


  Изменение даты окончания ОСАГО (iOS):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        В этом кейсе проверяется возможность изменения даты окончания ОСАГО. Данный функционал возможен в режиме редактирования карточки авто. Для включения этого режима необходимо тап на иконку карандаша в навбаре карточки авто.
        Режим редактирования позволяет изменить дату окончания ОСАГО, СТС и цвет, а так же удалить автомобиль с аккаунта
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в Навигаторе
        - Добавлена машина
        - Дата окончания ОСАГО выбрана в карточке автомобиля
        - Открыта карточка автомобиля
    - do: Тап на значок карандаша в правом верхнем углу рядом с крестиком
    - assert: Карточка авто переходит в режим редактирования
    - do: Тап на кнопку "Дата окончания" с выбранной датой в блоке "ОСАГО"
    - assert: |
        - Поверх карточки авто открывается датапикер с 3 рядами вертикальных чисел:
            - заголовок "Дата окончания ОСАГО"
            - крестик для закрытия
            - календарь с выбранной датой (дата совпадает с датой в карточке авто)
            - кнопка "Сохранить"
    - do: Выбрать дату, отличную от даты из предусловия
    - assert: Дата отображается в датапикере
    - do: Тап на крестик
    - assert: |
        - Закрывается датапикер
        - Под кнопкой "Дата окончания" дата из предусловия
    - do: Повторить шаги 2-4, выбрав “Сохранить”
    - assert: |
        - Закрывается датапикер
        - Дата из предусловия в кнопке "Дата окончания" поменялась на новую дату, выбранную в датапикере
    - do: Тап на "Сохранить" в навбаре
    - assert: |
        - Карточка авто выходит из режима редактирования
        - Дата окончания ОСАГО изменилась на дату, выбранную в 5 шаге

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Изменение цвета в карточке авто (цвет есть в калорпикере):
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        В этом кейсе проверяется возможность изменения цвета в карточке авто. Данный функционал возможен в режиме редактирования карточки авто. Для включения этого режима необходимо тап на иконку карандаша в навбаре карточки авто.
        Режим редактирования позваляет изменить дату окончания ОСАГО, СТС и цвет, а так же удалить автомобиль с аккаунта
        - Если цвет при добавлении авто есть в калорпикере, то напротив активный чекбокс
        - Если цвет при добавлении авто отсутствует в калорпикере, то напротив неактивный чекбокс
        - Для сохранения выбора необходима тап "Готово" в калорпикере
        Цвета в калорпикере: чёрный, серый, серебристый, белый, красный, розовый, оранжевый, золотой, жёлтый, зелёный, голубой, синий, фиолетовый, пурпурный, коричневый, бежевый
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина
        - Открыта карточка автомобиля
        - Под кнопкой "цвет" написан цвет, который есть в калорпикере
        - Включен режим редактирования (карандаш в навбаре)
    - do: Тап на кнопку "Цвет"
    - assert: |
        - Поверх карточки авто открывается калорпикер:
            - в шапке заголовок "Цвет" и крестик
            - список цветов с иконками этого цвета
            - стоит активный чекбокс около одного из цветов, совпадающего с цветом в карточке авто
            - кнопка "Сохранить"
    - do: Тап на цвет из калопикера, около которого не активный чекбокс
    - assert: |
        - Около выбранного цвета появляется активный чекбокс
        - Около старого цвета чекбокс становится не активным
    - do: Тап на "Сохранить"
    - assert: |
        - Закрывается калорпикер
        - Цвет под кнопкой “Цвет” менякется на цвет из шага 2
    - do: Тап на стрелочку "Назад"
    - assert: |
        - Закрывается карточка авто
        - Показано меню навигатора
    - do: Тап на кнопку автомобился
    - assert: |
        - Открывается карточка авто
        - Под кнопкой "Цвет" написан цвет из шага 3

    - platforms:
      - android
    - tags:
        - assessors


  Изменение номера СТС:
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        В этом кейсе проверяется возможность изменения номера СТС. Данный функционал возможен в режиме редактирования карточки авто. Для включения этого режима необходимо тап на иконку карандаша в навбаре карточки авто.
        Режим редактирования позваляет изменить дату окончания ОСАГО, СТС и цвет, а так же удалить автомобиль с аккаунта
        Для появления СТС в карточке авто необходимо:
        - добавить фейковое авто через dev settings -> Ya.Auto -> Insert Ya.Money car
        - тап на "Проверить на отзывные кампании"
        - добавить авто найденное авто
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина с СТС (способ в Description)
        - Открыта карточка автомобиля с СТС
        - Включен режим редактирования
    - do: Тап на кнопку "Номер СТС"
    - assert: |
        - Поверх карточки авто открывается экран редактирования СТС:
            - экран прижат к клавиатуре
            - заголовок "Номер СТС"
            - крестик для закрытия
            - поле ввода СТС с маской _XX XX XXXXXX_
            - в поле ввода значение из карточки авто
            - кнопка "Сохранить"
    - do: Ввести другое значение СТС
    - assert: |
        - Значение отображается в поле ввода
        - Кнопка "Сохранить" активная
    - do: Тап на крестик
    - assert: |
        - Закрывается экран редактирования
        - Значение под "Номер СТС" не изменилось
    - do: Повторить шаги 1-3, выбрав “Сохранить”
    - assert: |
        - Закрывается датапикер
        - Значение под “Номер СТС” изменилось на значение из шага 2
        - Возможен конфликт **(!)**

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Экран редактирования номера СТС в android:
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        В этом кейсе проверяется возможность изменения номера СТС. Данный функционал возможен в режиме редактирования карточки авто. Для включения этого режима необходимо тап на иконку карандаша в навбаре карточки авто.
        Режим редактирования позваляет изменить дату окончания ОСАГО, СТС и цвет, а так же удалить автомобиль с аккаунта
        Для появления СТС в карточке авто необходимо:
        - добавить фейковое авто через dev settings -> Ya.Auto -> Insert Ya.Money car
        - тап на "Проверить на отзывные кампании"
        - добавить найденное авто
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина с СТС (способ в Description)
        - Открыта карточка автомобиля с СТС
        - Включен режим редактирования
    - do: Тап на кнопку "Номер СТС"
    - assert: |
        - Поверх карточки авто открывается экран редактирования СТС:
            - экран не прижат к клавиатуре
            - заголовок "Номер СТС"
            - крестик для закрытия
            - в поле ввода значение из карточки авто
            - кнопка "Сохранить"
            - в поле ввода СТС присутствует маска _XX XX XXXXXX_
    - do: Стереть несколько цифр
    - assert: |
        - На месте цифр в поле ввода появляются 0
        - Кнопка "Сохранить" задизейблeна
    - do: |
        Ввести значения в поле ввода:
        
        - abCD123456
        - 1234абвГДЕ
        - 123456789
        - !?"@*.,№-+ (на Android не вводятся, на iOS вводятся)
    - assert: |
        - Все значения разбиты на блоки 2 знака, пробел, 2 знака, пробел, 6 знаков
        - Во всех случаях кнопка "Сохранить" задизейблена
    - do: Стереть и ввести в поле ввода 123456789011111
    - assert: |
        - Все цифры поcле 0 не пишутся в поле ввода
        - Кнопка "Сохранить" активна

    - platforms:
      - android
    - tags:
        - assessors


  Экран редактирования номера СТС в ios:
    - description: |
        **ОК** - отзывные компании (открываются по тапу на кнопку "Добавить авто")
        В этом кейсе проверяется возможность изменения номера СТС. Данный функционал возможен в режиме редактирования карточки авто. Для включения этого режима необходимо тап на иконку карандаша в навбаре карточки авто.
        Режим редактирования позволяет изменить дату окончания ОСАГО, СТС и цвет, а так же удалить автомобиль из аккаунта.
        Для появления СТС в карточке авто необходимо:
        - добавить фейковое авто через dev settings -> Ya.Auto -> Insert Ya.Money car
        - тап на "Проверить на Отзывные кампании"
        - добавить найденное авто
    - info: |
        - СИМ-карта русская или отсутствует
        - Локаль ru-ru
        - Пользователь находится на территории РФ
        - Пользователь авторизован в навигаторе
        - Добавлена машина с СТС (способ в Description)
        - Открыта карточка автомобиля с СТС
        - Включен режим редактирования
    - do: Тап на кнопку "Номер СТС"
    - assert: |
        - Поверх карточки авто открывается экран редактирования СТС:
            - экран прижат к клавиатуре
            - заголовок "Номер СТС"
            - крестик для закрытия
            - в поле ввода значение из карточки авто
            - кнопка "Сохранить"
            - поле ввода СТС отсутствует маска _XX XX XXXXXX_
    - do: Стереть несколько цифр
    - assert: |
        - Цифры стираются, 0 в поле ввода не проставляются
        - Кнопка "Сохранить" задизейблена
    - do: |
        Ввести значения в поле ввода:
        
        - abCD123456
        - 1234абвГДЕ
        - 123456789
        - !?"@*.,№-+
    - assert: |
        - Символы не разделяются на блоки
        - Во всех случаях кнопка "Сохранить" задизейблена
    - do: Стереть и ввести в поле ввода 123456789011111
    - assert: |
        - ограничение в 10 символов отсутствует
        - Кнопка "Сохранить" неактивна

    - platforms:
      - ios
    - tags:
        - assessors