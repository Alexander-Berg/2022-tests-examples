components: introscreeen
testing:
  - regress

specs:
  Intro не отображается при рестарте активити после обновления:
    - description: Проверка единоразового показа интроскринов после обновления.
    - info: |
        На девайсе установлена предыдущая версия приложения.
        Включить в настройках девайса Setttings -> Developers -> Do not keep activities -> On
        Установить приложение
    - do: Запустить приложение Навигатор
    - assert: |
        Отображается экран Карта
        Интро-скрины отображаются
    - do: Пролистать интро-скрины
    - assert: Происходит переход к экрану Карта (м 10.5)
    - do: Свернуть приложение Навигатор тапом по хардвардной кнопке Home
    - assert: Приложение находится в фоне.
    - do: Запустить приложение Навигатор
    - assert: |
        Отображается экран Карта
        Интро-скрины заново не отображаются
    - do: В настройках девайса **выключить** Setttings -> Developers -> Do not keep activities -> **Off**

    - platforms:
      - android
    - tags:
      - assessors


  Рекламный СП. Лончскрин:
    - description: |
        Реклама на лончскрине отображается сразу после запуска Навигатора. На лончскрине появляется логотип и название приложения, а внизу располагается рекламная часть.
        На Андроид после регистрации в игре, может не появится лонскрин, для этого нужно в настройках девайса - приложения - остановить приложение и потом запустить навик "в холодную"
    - info: |
        - Локаль девайса, соответствует региону, в котором рекламируется СП
        - 3ий запуск приложения
        - Если на  момент тестирования нет активных кампаний по данной сущности, можно взять тестовые из тикета https://st.yandex-team.ru/MOBNAVI-19059, а именно:
        **Перед началом тестирования:**
        - включить Dev.Set - Ad - Force Datatesting - On
        - Dev settings → Misc → Debug config enabled ON
        - прокинуть интент:
        `yandexnavi://add_exp?navi_special_project_splash_screen_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - Перезагрузить приложение несколько раз  (реклама может отобразиться только через несколько запусков)
        В новой версии тест-палм кейс можно прокрутить в сторону чтобы увидеть интент полностью! Скопировав лишь часть интента нужная настройка не будет включена!
        - **НА СЕНТЯБРЬ 2020 ИГРА ЕСТЬ НА ЛОКАЛИ tr_TR** **Тойота** и представляет собой красную машинку внизу загрузочного экрана (тот, который черный со стрелкой навика)!!! Поэтому, для появления лончскрина необходимо:
        - Установить локаль tr_TR
        - Девайс в портретной ориентации
    - do: |
        - Запустить Навигатор
        - Перейти в пункт Меню 
    - assert: В меню присутствует баннер регистрации в игре
    - do: Зарегестрироваться через баннер
    - assert: |
        - Регистрация проходит
        - Баннер регистрации меняется на баннер статистики
    - do: |
        **Примечание для Android:** На Андроид после регистрации в игре, может не появится лонскрин, для этого нужно в настройках девайса - приложения - остановить приложение и потом запустить навик "в холодную"
        Для  IOS достаточно просто перезапустить навигатор.
    - assert: Лончскрин соответствует СП, реклама присутствует.
    - do: Перезапустить Навигатор в альбомной ориентации
    - assert: Лончскрин соответствует СП, реклама присутствует. Может представлять собой просто брендированную подпись
    - do: |
        - Изменить локаль девайса на любую поддерживаемую, кроме локали с данным СП
        - Перезапустить Навигатор
    - assert: При запуске приложения брендированный лончскрин не отображается

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Сплешскрина для бара. Проверка на повторность показа:
    - description: |
        **Цель проверки**: Проверить что сплешскрин не появляется повторно
        На январь 2019 сплешскрин показывается на 3ий запуск
        Внешний вид:
        http://jing.yandex-team.ru/files/nikdemin/2017-08-08_1712.png - Сплешскрин для бара
        http://jing.yandex-team.ru/files/nikdemin/2017-08-08_1713.png - Бар (находится в шторке)
        Языки:
        - сплешскрин: ru, en, by, tr, uk, kz (=ru) (зависит от языка на девайсе)
        - бар: русский (в том числе для казахского), украинский, белорусский, турецкий, английский (в том числе для всех остальных локалей)
        **Сплешскрин с Турции убран** (хотя бар по-прежнему можно установить вручную)
        Условия показа сплешскрина.
        1. Страна не турция и Навигатор запущен не на голове (без Я.Авто).
        2. У нас есть местоположение.
        3. Находимся на экране с картой – просто экран с картой без всякого ведения.
        4. Нет установленного маршрута.
        5. Не подключены к projected.
        6. Проект не для Linux'а (голова в машине без Я.Авто, а просто на Линуксе).
        7. Не в Я.Авто.
        8. Нет рекламы для промобаннера (баннер, который появляется сверху и просит установить Я.Браузер или Едадил например).
        9. Не было никаких интро скринов на старте.
        10. Эксперименты загрузились (не загрузятся если на сервере случилась ошибка или интентера нет)
        **Известное поведение (=считаем ожидаемым):**
        Для показа сплешскрина есть дополнительное условие, чтобы туториалы не показывались и чтобы скорость была строго 0км/ч)
        Возможно, как раз из-за скорости не у всех проверка срабатывает, т.к. gps иногда показывает скорость 1-5 км/ч даже когда на месте стоишь
    - info: |
        **Для показана сплешскрина необходимо удалить с устройства все приложения от Яндекса**
        **КЕЙС ТОЛЬКО ДЛЯ ANDROID**
    - do: |
        - Запустить Навигатор, пройти все интроскрины, выгрузить
        - Повторить
        - Запустить Навигатор снова (получится 3ий запуск)
        - Перейти с экрана "Карта" в Меню/Поиск и обратно несколько раз
    - assert: Появляется сплешскрин предлагающий установить бар на устройство
    - do: |
        - Выбрать любое действие со сплешскрином
        - Перезапустить навигатор
    - assert: Сплешскрин повторно не отображается

    - platforms:
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi
    - integration_run:
      - searchlib


  Интроскрин Login for saving registered location:
    - description: |
        Интроскрин появился в версии 4.10
        Для турецких пользователей (tr_TR) создали интроскрин, чтобы научить их входить в систему, чтобы не потерять свои зарегистрированные местоположения.
        Страны-участницы ЕС: Австрия, Болгария, Бельгия, Британское Королевство, Германия, Венгрия, Греция, Италия, Испания, Дания, Ирландия, Литва, Латвия, Кипр, Мальта, Нидерланды, Люксембург, Словения, Словакия, Польша, Финляндия, Франция, Португалия, Румыния, Хорватия, Швеция, Чехия, Эстония.
        [Внешний вид интроскрина](https://jing.yandex-team.ru/files/kreyer/photo_2019-10-07_17-10-11.jpg)
    - info: |
        Установить на устройстве локаль (язык системы) соответствующей Европейскому
        Сделать подмену местоположения в Европейской стране
    - do: |
        - Первый запуск приложения
        - Свернуть-развернуть приложение на открытом интроскрине
        - Выгрузить приложение и запустить его снова
        - Перейти по всем гиперссылкам на интроскрине
    - assert: |
        - Крэши при уходе в фон и возврате из него отсутствуют
        - Крэши при выгрузки приложения отсутствуют, если интроскрин не был пройден, он показывается на **каждый последующий запуск**
        - Ссылки ведут на соответствующие им правовые документы. Документы локализованы для языков: русский, турецкий, украинский, французский, английский. Для всех неподдерживаемых языков, правовые документы показывается **на английском языке**

    - platforms:
      - ios
      - android


  Интроскрины на ГУ:
    - description: На ГУ должны автоматически выдаваться все разрешения и, соответственно, отсутствовать интроскрины.
    - do: |
        Выполнить чистую установку приложения
        Запустить приложение
    - assert: При запуске отсутствуют интроскрины про доступы (местоположение, микрофон)

    - platforms:
      - motrex
      - geely
      - vaz
      - nissan
      - t3am
      - autochip
      - first_run_hu
    - testing:
      - acceptance_navi


  Закрытие интроскрина регистрации в игре кнопкой:
    - description: |
        На данный момент регистрация в игре с пользователем через интроскрин реализована для Турецкого СП Тойота.
    - info: |
        - Приложение установлено.
        - Установлена локаль tr_TR
        - **Пользователь не регистрировался и не взаимодействовал с другими сущностями СП** (в случае с СП Тойота: пользователь не регистрировался через баннер меню)
        - 3й или более запуск  (перезапускать до появления интроскрина игры).
    - do: При появлении интроскрина тап на кнопку Понятно/Хорошо/Закрыть/Отмена (надпись может варьироваться).
    - assert: Происходит переход на карту или следующий интро.
    - do: Несколько раз перезапустить Навигатор.
    - assert: Интроскрин не появляется больше

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi


  Регистрация в игре через Интроскрин:
    - description: |
        На данный момент регистрация в игре с пользователем через интроскрин реализована для Турецкого СП Тойота.
    - info: |
        - Приложение установлено.
        - Установлена локаль tr_TR
        - **Пользователь не регистрировался и не взаимодействовал с другими сущностями СП** (в случае с СП Тойота: пользователь не регистрировался через баннер меню)
        - 3й или более запуск  (перезапускать до появления интроскрина игры).
    - do: При появлении интроскрина тап на кнопку Установить/Подробнее/Играть (надпись может варьироваться).
    - assert: Происходит переход на вебвью регистрации в игре.
    - do: Пройти регистрацию и после этого выгрузить приложение.
    - assert: Регистрация проходит. Не сбрасывается при перезагрузке. Интро больше НЕ показывается.

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi


  Логирование показа Интроскрина СП:
    - info: |
        - Dev. Set. -> Ad -> Force datatesting environment - On
        - Dev. Set. -> Misc -> Debug config enabled - On
        - Использовать интенты:
          [collapsed-image](https://jing.yandex-team.ru/files/mikhail-vin/download-13.54b2ee2.png){title=QR-код}

          `yandexnavi://add_exp?navi_special_project_launch_intro_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - Перезапустить прилодежение
        - Устройство подключено к компу для снятия логов.
        - Dev. Set. -> Misc -> Reset shown introscreens
    - do: Перезгружать навигатор до тех пор, пока не отобразится интроскрин из описания
    - assert: При запуске отобразился инстроскрин, в логи приходит событие `intro.page-shown` с параметром page `intro_test_pack`

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Логирование главной кнопки в спецпроектном интроскрине:
    - info: |
        - Dev. Set. -> Ad -> Force datatesting environment - On
        - Dev. Set. -> Misc -> Debug config enabled - On
        - Использовать интенты:
          [collapsed-image](https://jing.yandex-team.ru/files/mikhail-vin/download-13.54b2ee2.png){title=QR-код}

          `yandexnavi://add_exp?navi_special_project_launch_intro_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - Перезапустить прилодежение
        - Устройство подключено к компу для снятия логов.
        - Dev. Set. -> Misc -> Reset shown introscreens
    - do: |
         Перезагружать навигатор до тех пор, пока не отобразится интроскрин из описания
         Тап на главную кнопку ok/OK-knopka на интроскрине
    - assert: |
         Открывается вебвью с браузером на странице yandex.ru
         В логи приходит событие `intro.primary-button-pressed` с параметром page `intro_test_pack`

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - metric


  Логирование второстепенной кнопки в спецпроектном интроскрине:
    - info: |
        - Dev. Set. -> Ad -> Force datatesting environment - On
        - Dev. Set. -> Misc -> Debug config enabled - On
        - Использовать интенты:
          [collapsed-image](https://jing.yandex-team.ru/files/mikhail-vin/download-13.54b2ee2.png){title=QR-код}

          `yandexnavi://add_exp?navi_special_project_launch_intro_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - Перезапустить прилодежение
        - Устройство подключено к компу для снятия логов.
        - Dev. Set. -> Misc -> Reset shown introscreens
    - do: |
        - Перезагружать навигатор до тех пор, пока не отобразится интроскрин из описания
        - Тап на второстепенную кнопку «Cancel-knopka» на интроскрине
    - assert: |
        - Открывается вебвью с браузером на странице ya.ru
        - В логи приходит событие `intro.secondary-button-pressed` с параметром page `intro_test_pack`

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - metric


  Логирование кнопки закрытия в спецпроектном интроскрине:
    - info: |
        - Dev. Set. -> Ad -> Force datatesting environment - On
        - Dev. Set. -> Misc -> Debug config enabled - On
        - Использовать интенты:
          [collapsed-image](https://jing.yandex-team.ru/files/mikhail-vin/download-13.54b2ee2.png){title=QR-код}

          `yandexnavi://add_exp?navi_special_project_launch_intro_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - Перезапустить прилодежение
        - Устройство подключено к компу для снятия логов.
        - Dev. Set. -> Misc -> Reset shown introscreens
    - do: |
        - Перезагружать навигатор до тех пор, пока не отобразится интроскрин из описания
        - Тап на кнопку закрытия «Close-knopka» на интроскрине
    - assert: |
        - Интроскрин закрывается
        - В логи приходит событие `intro.close-button-pressed` с параметром page `intro_test_pack`

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - metric


  Интроскрин Благодарность за разрешение использования местоположения для Android 10 и 11:
    - description: |
        В данном кейсе надо проверить что на 10 - 11ых андроидах с включенным доступом к фоновой локации появляется благодарсвенный интроскрин.
        Включить такой доступ можно, если на начальном интроскрине с запросом на разрешение определять местоположение тап кнопку "Разрешать всегда"
    - info: |
        Свежескачанная сборка навигатора.
        Приложение ни разу не запускалось.
    - do: Запустить Навигатор
    - assert: |
        Отображаются интроскрины первого запуска приложения.
    - do: На интроскрине с запросом Данные о местоположении тап по "Без проблем" и дать "Разрешение в любом режиме"/"Разрешать всегда"
    - assert: |
        Происходит переход на следующие интроскрины.
    - do: |
        После того, как были пройденны все интроскрины происходит переход на карту.
        Забросить интент adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_feature_gratitude_bg_location_intro_enabled=enabled"
    - assert: Отображается интроскрин включения эксперимента
    - do: Перезапустить Навигатор
    - assert: При запуске приложение наблюдаем интроскрин "Спасибо, что дали доступ к местоположению" c кнопкой Хорошо
    - do: Тап по кнопке Хорошо.
    - assert: Происходит переход на карту навигатора или следующий интроскрин.

    - platforms:
      - android
    - tags:
        - assessors


  Отсутствие интроскрина Благодарности за разрешение использования местоположения для Android 10 и 11:
    - description: |
        В данном кейсе надо проверить что на 10 - 11ых андроидах с выключенным доступом к фоновой локации отсутствует благодарсвенный интроскрин.
        Не давать такой доступ можно, если на начальном интроскрине с запросом на разрешение определять местоположение тап кнопку "Отклонить"
    - info: |
        Свежескачанная сборка навигатора.
        Приложение ни разу не запускалось.
    - do: Запустить Навигатор
    - assert: |
        Отображаются интроскрины первого запуска приложения.
    - do: На интроскрине с запросом Данные о местоположении тап по "Без проблем" и выбрать "Отклонить"
    - assert: |
        Происходит переход на следующие интроскрины.
    - do: |
        После того, как были пройденны все интроскрины происходит переход на карту.
        Забросить интент adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_feature_gratitude_bg_location_intro_enabled=enabled"
    - assert: Отображается интроскрин включения эксперимента
    - do: Перезапустить Навигатор
    - assert: При запуске приложение интроскрин "Спасибо, что дали доступ к местоположению" c кнопкой Хорошо ОТСУТСВУЕТ.

    - platforms:
      - android
    - tags:
        - assessors


  Интроскрин Благодарность за разрешение использования местоположения для Android 9 и ниже:
    - description: |
        В данном кейсе надо проверить что на 9 и ниже андроидах с включенным доступом к фоновой локации появляется благодарсвенный интроскрин.
        Включить такой доступ можно, если на начальном интроскрине с запросом на разрешение определять местоположение тап кнопку "Разрешить"
    - info: |
        Свежескачанная сборка навигатора.
        Приложение ни разу не запускалось.
    - do: Запустить Навигатор
    - assert: |
        Отображаются интроскрины первого запуска приложения.
    - do: На интроскрине с запросом Данные о местоположении тап по "Без проблем" и дать "Разрешить"
    - assert: |
        Происходит переход на следующие интроскрины.
    - do: |
        После того, как были пройденны все интроскрины происходит переход на карту.
        Забросить интент adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_feature_gratitude_bg_location_intro_enabled=enabled"
    - assert: Отображается интроскрин включения эксперимента
    - do: Перезапустить Навигатор
    - assert: При запуске приложение наблюдаем интроскрин "Спасибо, что дали доступ к местоположению" c кнопкой Хорошо
    - do: Тап по кнопке Хорошо.
    - assert: Происходит переход на карту навигатора или следующий интроскрин.

    - platforms:
      - android
    - tags:
        - assessors


  Отсутствие интроскрина Благодарности за разрешение использования местоположения для Android 10 и 11 при даче разрешения только при использовании:
    - description: |
        В данном кейсе надо проверить что на 10 - 11ых андроидах с включенным доступом только при использовании отсутствует благодарсвенный интроскрин.
        Дать такой доступ можно, если на начальном интроскрине с запросом на разрешение определять местоположение тап кнопку "Разрешать только во время использования приложения"
    - info: |
        Свежескачанная сборка навигатора.
        Приложение ни разу не запускалось.
    - do: Запустить Навигатор
    - assert: |
        Отображаются интроскрины первого запуска приложения.
    - do: На интроскрине с запросом Данные о местоположении тап по "Без проблем" и выбрать кнопку "Только во время использования приложения".
    - assert: |
        Происходит переход на следующие интроскрины.
    - do: |
        После того, как были пройденны все интроскрины происходит переход на карту.
        Забросить интент adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_feature_gratitude_bg_location_intro_enabled=enabled"
    - assert: Отображается интроскрин включения эксперимента
    - do: Перезапустить Навигатор
    - assert: При запуске приложение интроскрин "Спасибо, что дали доступ к местоположению" c кнопкой Хорошо ОТСУТСВУЕТ.

    - platforms:
      - android
    - tags:
        - assessors


  Отсутствие интроскрина Благодарности за разрешение использования местоположения для Android 9 и ниже:
    - description: |
        В данном кейсе надо проверить что на 9 и ниже андроидах с выключенным доступом к локации отсутствует благодарственный интроскрин.
        Не давать такой доступ можно, если на начальном интроскрине с запросом на разрешение определять местоположение тап на кнопку "Отклонить"
    - info: |
        Свежескачанная сборка навигатора.
        Приложение ни разу не запускалось.
    - do: Запустить Навигатор
    - assert: |
        Отображаются интроскрины первого запуска приложения.
    - do: На интроскрине с запросом Данные о местоположении тап по "Без проблем" и выбрать "Отклонить"
    - assert: |
        Происходит переход на следующие интроскрины.
    - do: |
        После того, как были пройденны все интроскрины происходит переход на карту.
        Забросить интент adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_feature_gratitude_bg_location_intro_enabled=enabled"
    - assert: Отображается интроскрин включения эксперимента
    - do: Перезапустить Навигатор
    - assert: При запуске приложение интроскрин "Спасибо, что дали доступ к местоположению" c кнопкой Хорошо ОТСУТСВУЕТ.

    - platforms:
      - android
    - tags:
        - assessors


  Интроскрин для подключения плюса неавторизованным пользователям при выгруженом навигаторе + логирование:
    - description: |
        Показывать окошко про плюс для неавторизованного пользователя при подключении к АА через интроскрин на девайсе.
    - info: |
        Проверка на ДЕБАГ сборке.
        Для IOS домик плюса еще не подключен, поэтому предварительно надо включить эксперимент yandexnavi://add_exp?navi_feature_init_plus_sdk=enabled.
        Пользователь неавторизован.
        Навигатор выгружен.
        Девайс подключен к инструменту для снятия логов.
    - do: Пробросить интент yandexnavi://show_ui/map/plus_intro (для IOS) и adb shell am start -a android.intent.action.VIEW -d "yandexnavi://show_ui/map/plus_intro" (Android)
    - assert: |
        Запускается навигатор.
        В зависимости от запуска могут быть другие интроскрины, после прохождения которых появляется интроскрин с предложением подключить Яндекс.Плюс, а может открыться и сразу интроскрин с подключением Яндекс.Плюс.
        Интроскрин содержит две кнопки: Подключить/Закрыть.
        В логах наблюдаем события Yandex Plus introscreen (их может быть несколько типа, Yandex Plus introscreen service config, Yandex Plus introscreen config with version 1, Yandex Plus introscreen not found...)
        Если навик не запущен, то при запуске навика с интентом может открыться как интро, так и домик плюса - это нормально, но об этом нужно сообщить)

    - platforms:
      - android
      - ios
    - tags:
        - assessors
    - testing:
      - acceptance_navi
    - integration_run:
      - android_auto


  Интроскрин для подключения плюса неавторизованным пользователям. Кнопка Закрыть:
    - description: |
        Показывать окошко про плюс для неавторизованного пользователя при подключении к АА через интроскрин на девайсе.
    - info: |
        Проверка на ДЕБАГ сборке.
        Для IOS домик плюса еще не подключен, поэтому предварительно надо включить эксперимент yandexnavi://add_exp?navi_feature_init_plus_sdk=enabled.
        Пользователь неавторизован.
        Навигатор запущен.
    - do: Пробросить интент yandexnavi://show_ui/map/plus_intro (для IOS) и adb shell am start -a android.intent.action.VIEW -d "yandexnavi://show_ui/map/plus_intro" (Android)
    - assert: |
        В зависимости от запуска могут быть другие интроскрины, после прохождения которых появляется интроскрин с предложением подключить Яндекс.Плюс, а может открыться и сразу интроскрин с подключением Яндекс.Плюс.
    - do: Тап по кнопке Закрыть.
    - assert: Происходит переход на карту Навигатора

    - platforms:
      - android
      - ios
    - tags:
        - assessors
    - testing:
      - acceptance_navi
    - integration_run:
      - android_auto


  Интроскрин для подключения плюса неавторизованным пользователям с дальнейшей авторизацией не+ аккаунтом. Кнопка Подключить:
    - description: |
        Показывать окошко про плюс для неавторизованного пользователя при подключении к АА через интроскрин на девайсе.
    - info: |
        Проверка на ДЕБАГ сборке.
        Данный кейс проверять пока что только на Android, так как на IOS домик не реализован и будет крешить.
        Включить эксперимент интентом yandexnavi://add_exp?navi_feature_init_plus_sdk=enabled (IOS) и adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_feature_init_plus_sdk=enabled" (Android)
        Пользователь неавторизован.
        Местоположение Россия
        Навигатор запущен.
    - do: Пробросить интент yandexnavi://show_ui/map/plus_intro (для IOS) и adb shell am start -a android.intent.action.VIEW -d "yandexnavi://show_ui/map/plus_intro" (Android)
    - assert: В зависимости от запуска могут быть другие интроскрины, после прохождения которых появляется интроскрин с предложением подключить Яндекс.Плюс, а может открыться и сразу интроскрин с подключением Яндекс.Плюс.
    - do: Тап по верхней кнопке Подключить.
    - assert: Открывается WebView авторизации/регистрации
    - do: Авторизоваться неплюсовым аккаунтом.
    - assert: Происходит авторизация в Навигаторе. Появляется домик Плюс с кнопкой Попробовать бесплатно.

    - platforms:
      - android
      - ios
    - tags:
        - assessors
    - testing:
      - acceptance_navi
    - integration_run:
      - android_auto


  Отсутствие Интроскрина обновления приложения :
    - info: |
        Локаль tr_TR
        Dev settings → Misc → Debug config enabled ON
        Установить интент:
        для ios:
        `yandexnavi://add_exp?navi_special_project_launch_intro_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%22navi_update_intro_ios%22%2C%22configuration%22%3A%7B%22weight%22%3A1.0%7D%7D%5D`
        для android:
        `yandexnavi://add_exp?navi_special_project_launch_intro_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%22navi_update_intro_android%22%2C%22configuration%22%3A%7B%22weight%22%3A1.0%7D%7D%5D`
        Перезагрузить приложение
    - do: Перезапустить приложение несколько раз
    - assert: Не отображается интроскрин "Кажется, пора обновиться"

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Показ интроскрина заправок. Карты лояльности:
    - info: |
        - Выполнить чистую установку приложения
        - Пройти интроскрины на пермишены (местоположение, микрофон, уведомления)
        - Авторизоваться
        - Включить настройки:
           Developer settings -> Gas stations -> Gas stations intro screen -> On
           Developer settings -> Gas stations -> Switch TankerSDK to test mode on app start -> On
        - Перезагрузить приложение
    - do: |
        - Перезагрузить приложение еще раз
    - assert: |
        - Показывается интроскрин Карт лояльности (Бонусы сетей АЗС всегда с вами. Вы можете получать их и за заправки в Навигаторе. Только заранее добавьте карты лояльности в Меню>Яндекс.Заправки>Скидки и бонусы)
        - На Интроскрине присутсвуют две кнопки - "Добавить карты сейчас" и "Не сейчас"
    - do: |
        - Тап Не Сейчас
    - assert: |
        - Происходит переход на главный экран приложения
    - do: |
        - Перезапустить приложение
    - assert: |
        - Интроскрин не показывается

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Заправочный интроскрин. Карты лояльности. Кнопка "Добавить карты сейчас":
    - info: |
        - Выполнить чистую установку приложения
        - Пройти интроскрины на пермишены (местоположение, микрофон, уведомления)
        - Авторизоваться
        - Включить настройки:
           Developer settings -> Gas stations -> Gas stations intro screen -> On
           Developer settings -> Gas stations -> Switch TankerSDK to test mode on app start -> On
        - Перезагрузить приложение
    - do: |
        - Перезагрузить приложение еще раз
    - assert: |
        - Показывается интроскрин Карт лояльности (Бонусы сетей АЗС всегда с вами. Вы можете получать их и за заправки в Навигаторе. Только заранее добавьте карты лояльности в Меню>Яндекс.Заправки>Скидки и бонусы)
        - На Интроскрине присутсвуют две кнопки - "Добавить карты сейчас" и "Не сейчас"
    - do: |
        - Тап "Добавить карты сейчас"
    - assert: |
        - Происходит переход в меню Я.Заправок "Скидки и бонусы"
    - do: |
        - Перезапустить приложение
    - assert: |
        - Интроскрин не показывается

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Показ информационного интроскрина:
    - info: |
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=0.0007` , где 0.0007 - 1 минута, если не успеваете, поменять время в интенте
    - do: Открыть приложение 
    - assert: |
        - Отображается интроскрин с фразой "Ваш Навигатор перестанет работать через N дней"
        - Вверху присутствует крестик 
        - Отображается кнопка "Перейти в Яндекс.Карты" (если карты установлены), если Я.Карты не установлены, отображается кнопка "Установить Яндекс.Карты"
        - Отображается надпись "Если есть вопросы, напишите нам"
    - do: Тап на "Если есть вопросы, напишите нам"
    - assert: Открывается вебвью с обратной связью
    - do: Вернуться к интроскрину
    - do: Тап на крестик
    - assert: |
        - Интроскрин закрывается
        - Приложение работает стабильно

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Показ интроскрина с отсчетом времени:
    - info: |
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=0.0007`, где 0.0007 - 1 минута, если не успеваете, поменять время в интенте
        - Перезапустить приложение после показа 1-го интроскрина
    - do: Открыть приложение 
    - assert: |
        - Отображается интроскрин с отсчетом времени
        - Отображается кнопка "Перейти в Яндекс.Карты" (если карты установлены), если Я.Карты не установлены, отображается кнопка "Установить Яндекс.Карты"
        - Отображается надпись "Если есть вопросы, напишите нам"
        - Вверху присутствует крестик 
    - do: Тап на "Если есть вопросы, напишите нам"
    - assert: Открывается вебвью с обратной связью
    - do: Вернуться к интроскрину
    - do: Тап на крестик
    - assert: |
        - Интроскрин закрывается
        - Приложение работает стабильно

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Показ блокирующего интроскрина:
    - info: |
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=0.0007` , где 0.0007 - 1 минута, если не успеваете, поменять время в интенте
        - Перезапустить приложение после показа 2-го интроскрина и перед открытием приложения подождать 10-15 секунд
    - do: Открыть приложение 
    - assert: |
        - Отображается блокирующий интроскрин: "Навигатор больше не работает"
        - Вверху отсутствует крестик 
        - Отображается кнопка "Перейти в Яндекс.Карты" (если карты установлены), если Я.Карты не установлены, отображается кнопка "Установить Яндекс.Карты"
        - Отображается надпись "Если есть вопросы, напишите нам"
    - do: Тап на "Если есть вопросы, напишите нам"
    - assert: Открывается вебвью с обратной связью
    - do: Вернуться к интроскрину
    - assert: |
        - Отсутствует крестик
        - Закрыть интроскрин невозможно

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Условия показа, когда Я.Карты установлены:
    - info: |
        - Яндекс.Карты установлены
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=0.0007` , где 0.0007 - 1 минута, если не успеваете, поменять время в интенте
        - Открыт любой из 3-х интроскринов
    - do: Открыть приложение 
    - assert: |
        - Отображается интроскрин
        - Отображается кнопка "Перейти в Яндекс.Карты"
        - Отображается надпись "Если есть вопросы, напишите нам"
    - do: Тап на "Перейти в Яндекс.Карты" 
    - assert: |
        - Открывается приложение Яндекс.Карт
        - Приложение работает стабильно
    - do: Вернуться к интроскрину
    - assert: Интроскрин отображается
  

  Показ информационного интроскрина установки Яндекс Карт только для Яндексоидов. Авторизация в Стафф-аккаунт:
    - info: |
        Пройти тест-кейс могут только офисники
        Пользователь авторизован в Стафф-аккаунт
        До этого интро о прекращении работы Навигатора не отображалось
    - do: Включить дебаг-конфиг (Dev settings -> Misc -> Debug config enabled -> ON)
    - do: Перезапустить Нави
    - do: |
        Установить интенты:
        yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=30 [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/navi_feature_blocking_intro_with_countdown%3D30.jpg)
        yandexnavi://add_exp?navi_feature_blocking_intro_staff_only=enabled [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/navi_feature_blocking_intro_staff_only%3Denabled.jpg)
    - do: Перезапустить Нави
    - assert: |
        Отображается интро с информацией о прекращении работы Навигатора и предложением загрузить Яндекс Карты
        Присуствует кнопка закрытия интро
    - do: Закрыть интро
    - do: Перезапустить Нави
    - assert: Информационное интро установки Яндекс.Карт не отображается

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Условия показа, когда Я.Карты не установлены:
    - info: |
        - Яндекс.Карты не установлены
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=0.0007` , где 0.0007 - 1 минута, если не успеваете, поменять время в интенте
        - Открыт любой из 3-х интроскринов
    - do: Открыть приложение
    - assert: |
        - Отображается интроскрин
        - Отображается кнопка "Установить Яндекс.Карты"
        - Отображается надпись "Если есть вопросы, напишите нам"
    - do: Тап на "Установить в Яндекс.Карты"
    - assert: Происходит переход в магазин приложений
    - do: Вернуться к интроскрину
    - assert: Интроскрин отображается

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Закрытие интроскринов экспериментом:
    - info: |
        - Эксперимент может закрыть только 1 и 2 интроскрин
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=30`
    - do: Открыть приложение 
    - assert: |
        - Отображается первый интроскрин
        - Отображается кнопка "Установить Яндекс.Карты" или "Перейти в Я.Карты"
        - Отображается надпись "Если есть вопросы, напишите нам"
    - do: Закрыть приложение
    - do: Изменить время на устройстве на 3 дня вперед
    - do: Подождать 10-15 секунд и открыть приложение
    - assert: Отображается интроскрин с оставшимся кол-вом времени
    - do: Прокинуть интент - `yandexnavi://reset_exp?navi_feature_blocking_intro_with_countdown`
    - do: Закрыть интроскрин на крестик
    - assert: |
        - Интроскрин закрывается
        - Появляется интро о прокидывании интента
    - do: Перезагрузить приложение несколько раз
    - assert: Интроскрин не отображается
 
    - testing:
        - acceptance_navi


  Показ информационного интроскрина установки Яндекс Карт только для Яндексоидов. Смена Аутстафф-аккаунта на Стафф-аккаунт:
    - info: |
        Пройти тест-кейс могут только офисники
        Пользователь авторизован в Аутстафф-аккаунт
        До этого интро о прекращении работы Навигатора не отображалось
    - do: Включить дебаг-конфиг (Dev settings -> Misc -> Debug config enabled -> ON)
    - do: Перезапустить Нави
    - do: |
        Установить интенты:
        yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=0.0007 [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/add_exp%3Fnavi_feature_blocking_intro_with_countdown%3D0.0007.jpg)
        yandexnavi://add_exp?navi_feature_blocking_intro_staff_only=enabled [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/navi_feature_blocking_intro_staff_only%3Denabled.jpg)
    - do: Перезапустить Нави
    - assert: НЕ отображается интро с информацией о прекращении работы Навигатора и предложением загрузить Яндекс Карты
    - do: Авторизоваться в Стафф-аккаунт
    - do: Перезапустить Нави
    - assert: |
        Отображается интро с информацией о прекращении работы Навигатора и предложением загрузить Яндекс Карты
        Присуствует кнопка закрытия интро
    - do: Закрыть интро
    - do: Перезапустить Нави с интервалом в 1 минуту
    - assert: Появилось интро с обратным отсчётом до прекращения работы Навигатора
    - do: Закрыть интро
    - do: Выйти из Стафф-аккаунта
    - do: Перезапустить Нави
    - assert: |
        Отображается интро с обратным отсчётом до закрытия Навигатора
        (В зависимости от интервала перезапуска может отображаться блокирующее интро вместо обратного отсчёта)

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Логика отключения интроскрина экспериментом:
    - info: |
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=1`
        - Отображается интроскрин с оставшимся кол-вом времени
    - do: Изменить время на устройстве на 2 часа вперед
    - do: Перезапустить приложение
    - assert: Отображается интроскрин с измененным кол-вом времени
    - do: Прокинуть интент - `yandexnavi://reset_exp?navi_feature_blocking_intro_with_countdown`
    - do: Закрыть интроскрин на крестик
    - assert:  Появляется интро о прокидывании интента
    - do: Прокинуть интент `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=1`
    - assert: Отображается интро о прокидывании интента
    - do: Перезапустить приложение 2 раза
    - assert: |
        - Отображается интроскрин с оставшимся кол-вом времени
        - Отсчет времени на интроскрине начался заново
   
    - testing:
        - acceptance_navi


  Отсуствие показа интроскрина установки Яндекс Карт при авторизации в Аутстафф-аккаунт:
    - info: |
        Пользователь авторизован в любой аккаунт, кроме аккаунта офисного сотрудника
        До этого интро о прекращении работы Навигатора не отображалось
    - do: Включить дебаг-конфиг (Dev settings -> Misc -> Debug config enabled -> ON)
    - do: Перезапустить Нави
    - do: |
        Установить интенты:
        yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=30 [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/navi_feature_blocking_intro_with_countdown%3D30.jpg)
        yandexnavi://add_exp?navi_feature_blocking_intro_staff_only=enabled [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/navi_feature_blocking_intro_staff_only%3Denabled.jpg)
    - do: Перезапустить Нави
    - assert: НЕ отображается интро с информацией о прекращении работы Навигатора и предложением загрузить Яндекс Карты
    - do: Перезапустить Нави несколько раз
    - assert: Информационное интро о прекращении работы Навигатора НЕ появилось

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Логика интроскрина с отсчетом времени:
    - info: |
        - Dev. Settings - Misc - Debug Config enabled
        - Прокинуть интент: `yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=30`
    - do: Открыть приложение 
    - assert: |
        - Отображается первый интроскрин
        - Отображается кнопка "Установить Яндекс.Карты" или "Перейти в Я.Карты"
        - Отображается надпись "Если есть вопросы, напишите нам"
    - do: Закрыть приложение
    - do: Изменить время на устройстве на день вперед
    - do: Зайти в приложение
    - assert: Интроскрин не отображается
    - do: Изменить время на устройстве еще на 2 дня вперед
    - do: Подождать 10-15 секунд и открыть приложение
    - assert: Отображается интроскрин с оставшимся кол-вом времени
    - do: Изменить время на устройстве на месяц вперед 
    - do: Подождать 10-15 секунд и открыть приложение
    - assert: |
        - Отображается блокирующий интроскрин
        - Закрыть интроскрин невозможно
       
    - testing: 	
        - acceptance_navi


  Отсуствие показа интроскрина установки Яндекс Карт без авторизации:
    - info: |
        Пользователь неавторизован
        До этого интро о прекращении работы Навигатора не отображалось
    - do: Включить дебаг-конфиг (Dev settings -> Misc -> Debug config enabled -> ON)
    - do: Перезапустить Нави
    - do: |
        Установить интенты:
        yandexnavi://add_exp?navi_feature_blocking_intro_with_countdown=30 [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/navi_feature_blocking_intro_with_countdown%3D30.jpg)
        yandexnavi://add_exp?navi_feature_blocking_intro_staff_only=enabled [Сканировать QR](https://jing.yandex-team.ru/files/vikelvar/navi_feature_blocking_intro_staff_only%3Denabled.jpg)
    - do: Перезапустить Нави
    - assert: |
        НЕ отображается интро с информацией о закрытии Навигатора и предложении загрузить карты
    - do: Перезапустить Нави несколько раз
    - assert: Информационное интро о закрытии Навигатора НЕ появилось

    - platforms:
        - android
        - ios
    - tags:
        - assessors
    - testing:
        - acceptance_navi
