components: speccial_project
testing:
  - regress

specs:
  СП с коржиком. Отображение коржика при наличии и отсутствии Интернета:
    - info: |
        Одним из шагов кейса является проверка появления события в логах. Рекомендуется заранее подключить девайс через провод к Android studio/Console для IOS.
        **Настройки:**
        Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        Developer Settings -> Ad -> Status branding ->  Status branding speed limits - On
        Developer Settings -> Ad -> Status branding ->  Force status branding - On
        Developer Settings -> Ad -> FDE -> вкл
        Если на момент тестирования отсутствует активная рекламная кампания с коржиком, то коржик нужно дополнительно включить с помощью интента:
        `yandexnavi://add_exp?navi_special_project_status_branding_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        Для Android использовать команду: `adb shell am start -a android.intent.action.VIEW -d “НУЖНЫЙ ИНТЕНТ”`
        Перезапустить Навигатор:
        Для появления коржика нужно:
        - Построить маршрут через пробку (по времени длина пробки не менее 5 минут)
        - Запустить симуляцию движения
        - Двигаться с маленькой скоростью (ниже 20 км/ч)
        Конкретного места для показа нет, должен ловится в любом городе при наличии пробки, стоит пробовать ловить по Москве
    - do: Дождаться появление коржика
    - assert: Над градусником ETA появляется рекламная сущность.
    - do: Тап по коржику.
    - assert: В зависимости от типа коржика открывается WebView или интроскрин
    - do: |
        - Закрыть интроскрин/вебвью.
        - Дождаться появления коржика.
        - Отключить сеть.
        - Тап по коржику.
    - assert: В зависимости от типа коржика открывается WebView или интроскрин

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Рекламный СП. Брендированная категория поиска:
    - do: У пользователя определено местоположение
    - do: Открыть экран Поиска - Категории, проверить отображение брендированной категории поиска
    - assert: |
        - категория поиска отображается
        - категория поиска отображается на своем месте (если оно фиксированное)
        - иконка категории выглядит ожидаемо, текст не съехал
    - do: Тап по брендированной категории поиска
    - assert: |
        - происходит переход на карту
        - отображаются соответствующие категории организации
        - пин результата поиска этой организации брендирован
    - do: |
        Проверить выполнение условий наличия/отсутствия данной категории на экране поиска (например, российские категории отсутствуют при местонахождении в Турции)
        После смены Региона/Местоположения девайса категории появляются или исчезают только после перезапуска приложения
    - assert: Условия выполняются

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Игры с пользователем:
    - description: |
        С октября 2019 в спец.проектах появилась новая сущность - игра. Она имеет три статуса:
        - Пользователь заходит в приложение и не зарегестрирован в игре - 'inactive'.
        - Пользователь зарегестрировался в игре статус обновляется на 'active'.
        - К окончанию игрового периода, заявленного заказчиком, статус меняется на 'finish'.
        **Предварительно (при наличии) желательно уточнить на какой локали и какая игра актуальна**
    - info: |
        - Пользователь не проходил этап регистрации в игре, т.е. статус на момент начала тестирования - 'inactive'
        - Девайс подключен к компу для снятия логов
        - Локаль и местоположение указаны те на которых имеется игра
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Меню - Настройки - Developer Setting - Ad  - Force datatesting environment - OFF
    - do: Запустить навигатор и перейти в пункт Меню
    - assert: |
        В пункте меню **показывается баннер** регистрации в игре. Может работать в ротационном режиме с другими баннерами.
        По показу баннера в меню возникает событие **menu.banner.show с параметром reportingId**.
    - do: Тап на баннер регистрации.
    - assert: |
        Нажатие на баннер **открывает вебвью** с формой для регистрации (это может быть как просто страница с принятием условий, так и полноценная регистрационная анкета). После регистрации и начала участия в рекламной кампании, статус в игре меняется на 'active'.  Баннер регистрации в меню либо меняется на баннер статистики, либо больше не отображается вообще.
        По открытию через тап по баннеру webview приходит событие **menu.banner.click** с параметром webview.
    - do: |
        Тап на баннер статистики (если таковой имеется).
    - assert: Открывается вебвью **УЖЕ** участника игры.
    - do: Зайти в Dev.settings/Ad/Game manager status и включить свитчер Switch to Finish.
    - assert: |
        Происходит тестовый переход в статус 'finish'. Баннер статистики меняется на финальный баннер (с результатами игры) либо финальный баннер появляется, если до этого баннер статистки был не предусмотрен, либо может и вовсе отсутствовать. Все сущности СП переходят в состояние Финальный.
        При этом тап по одной из них возвращает нас в серверный статус, т.е. ‘active’,  т.е. после тапа по финальному баннеру, открывается вебвью статистики, после возвращения в меню, баннер/кнопка снова становится статистикой.

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
        - metric


  Привязка статуса СП Игра к UUID:
    - description: |
        СП сущность игра три статуса:
        - Пользователь не зарегестрирован в игре - ‘inactive’.
        - Пользователь зарегестрировался в игре - ‘active’.
        - К окончанию игрового периода, заявленного заказчиком, статус меняется на ‘finish’.
        Необходимо проверить, что статус привязан к UUID (к данному конкретному девайсу).
        Основной сущность для регистрации в игре является рекламный баннер в меню.
    - info: |
        Пользователь не авторизован.
        Взять сборку для прохождения, которая не является последней в данной ветке (необходимо для шага с обновлением).
        **Предварительно (при наличии) желательно уточнить на какой локали и какая игра актуальна**
    - do: Запустить навигатор и зарегистрироваться в игре через соответствующую сущность.
    - assert: |
        **В зависимости от условий**, рекламные сущности СП переходят в статус Active (например, баннер регистрации в меню изменился на баннер статистики), тап по которым открывает вебвью с информацией для зарегистрированного пользователя.
    - do: |
        - Свернуть Навигатор.
        - Выгрузить Навигатор.
    - assert: |
        - Регистрация в СП сохранилась.
        - Регистрация в СП сохранилась.
    - do: Войти в аккаунт Яндекса в Навигаторе.
    - assert: Регистрация в СП сохранилась.
    - do: Повторить **шаг 2**
    - do: Обновить Навигатор. Для этого нужно запустить установку более новой сборки, предварительно НЕ удаляя данную версию Навигатора .
    - do: Запустить Навигатор, проверить статус СП.
    - assert: Регистрация в СП сохранилась.
    - do: Удалить Навигатор и установить заново.
    - assert: Регистрация сбрасывается.

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi


  Рекламный СП. Баннер в меню + логирование:
    - description: Кейс проходим, если рекламный баннер есть в меню (его может не быть). **Тогда следует взять из тикета слинкованного с кейсом**
    - info: |
        Кейс следует пройти на нескольких устройствах с экранами разного размера.
        Запуск Навигатора хотя бы второй после выгрузки.
        - Прокинуть интент:
        [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/download%20(10).7d9f822.png){title=QR-код}

         `yandexnavi://add_exp?navi_special_project_banner_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - Перезапустить приложение
    - do: Открыть экран Меню
    - assert: |
        - Баннер показывается
        - В логи приходит **событие menu.banner.show**
    - do: Посмотреть на шрифты и картинки на баннере
    - assert: |
        Тексты не наезжают друг на друга
        Картинки не растянуты
    - do: Тап на кнопку на баннере и на сам баннер
    - assert: |
        - Открывается рекламный вебвью/интро/запускается навык
        - В логи приходит событие **menu.banner.click**
    - do: Перевернуть экран в лэндскейп и повторить шаги 1-3
    - assert: |
        Баннер показывается,
        Тексты не наезжают друг на друга. Картинки не растянуты
        После тапа по кнопке открывается рекламный вебвью/интро/запускается навык

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
        - metric


  Рекламный СП. Баннер в меню с открытием вебвью и браузера:
    - description: |
        Кейс проходим, если в меню есть рекламный баннер, по тапу на который открывается вебвью с поиском (может не быть баннера в меню, либо его вид может быть иным)
        Также необходимо уточнить, какой url приводит к открытию браузера (случайный поисковый результат будет открыт в том же вебвью)
    - info: |
        Кейс следует пройти на нескольких устройствах с экранами разного размера.
        Запуск Навигатора хотя бы второй после выгрузки.
    - do: Открыть экран Меню
    - assert: Баннер показывается
    - do: Посмотреть на шрифты и картинки на баннере
    - assert: |
        Тексты не наезжают друг на друга
        Картинки не растянуты
    - do: Тап на кнопку на баннере и на сам баннер
    - assert: Открывается рекламный вебвью с поисковой строкой
    - do: |
        - Ввести поисковый запрос таким образом, чтобы в результатах отобразился url, приводящий к открытию браузера
        - Тап на этот url
    - assert: Сайт открывается в браузере
    - do: Вернуться в Навигатор любым способом
    - assert: |
        - Навигатор не был закрыт, в него можно вернуться
        - Открыто вебвью

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi


  Рекламный СП. Поведение БМ при перестроении маршрута:
    - description: |
        **Цель:** Проверить, что БМ не покажется, если пользователь уже находится на маршруте
        Условия для показа брендированного маршрута (БМ):
        - состоит из 2 точек (от и до)
        - до этого не было маршрута (то есть нельзя построить брендированный маршрут, находясь на маршруте)
        - доля серого маршрута 20%
        - доля желтого маршрута 20%
        - доля красного маршрута 10%
        - доля коричневого маршрута 5%
        - дистанция от 1 до 1000 км
        - доступ до проезда игнорируется
        - маршрут строился online
        - маршрут самый быстрый из предложенных
        При отсутствии реального БМ, можно включить тестовый с помощью **интентов**
         - `yandexnavi://add_exp?navi_overview_ads_priority_for_RU=brand_route`
        - `yandexnavi://add_exp?navi_special_project_brand_route_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22megafon_bm%22%2C%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D`
        - отключение кулдауна БМ - `yandexnavi://add_exp?navi_special_project_common_brand_route_cooldown_seconds=60`
        - Dev.settings -> AD -> FDE вкл
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Перезапустить навигатор.
        Для Android использовать команду: adb shell am start -a android.intent.action.VIEW -d “НУЖНЫЙ ИНТЕНТ”
        Построить маршрут в случае неуспеха несколько раз
    - info: |
        Перезапустить приложение 2-3 раза (чтобы подтянулись эксперименты)
        Предварительно найти брендированный маршрут, удовлетворяющий условиям показа
    - do: |
        - Построить маршрут в любую точку, запустить ведение по нему
        - Перестроить маршрут, удовлетворяющий показу брендированного маршрута
    - assert: Плашка брендированного маршрута не показывается

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Рекламный СП. Брендированный маршрут + смена ориентации:
    - info: |
        - Перезапустить приложение 2-3 раза (чтобы подтянулись эксперименты)
        - Использовать интенты:
            [collapsed-image](https://jing.yandex-team.ru/files/mikhail-vin/download.15b44fa.png){title=QR-код}

            `yandexnavi://add_exp?navi_special_project_common_brand_route_cooldown_seconds=60&navi_overview_ads_priority_for_RU=brand_route&navi_special_project_brand_route_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Dev.settings -> AD -> FDE вкл
        - Перезапустить навигатор.
    - do: |
        Построить маршрут
    - assert: |
        - Маршрут построен, над экраном обзора маршрута отображается плашка с рекламой и лого бренда
    - do: Изменить ориентацию девайса
    - assert: |
        - БМ скрывается

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi


  СП с коржиком. UI и смена ориентации :
    - description: |
        **Коржик** - рекламный элемент, возникающий над градусником ETA, когда пользователь стоит в пробке.
        **Логика отображения:**
        - Есть верхняя и нижняя границы скорости
        При скорости меньше нижней (дефолт - 20км/ч) границы определенный промежуток времени (дефолт - 2с) и соблюдении стандартных условий должно показаться брендирование
        - При скорости между нижней и верхней границами состояние не должно изменяться (если не нарушались иные условия)
        - При скорости выше верхней (дефолт - 25км/ч) границы определенный промежуток времени (дефолт - 5с) должно скрыться брендирование
    - info: |
        **Настройки:**
        Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        Developer Settings -> Ad -> Status branding ->  Status branding speed limits - On
        Developer Settings -> Ad -> Status branding ->  Force status branding - On
        Developer Settings -> Ad -> Force datatesting environment -> вкл
        Если на момент тестирования отсутствует активная рекламная кампания с коржиком, то коржик нужно дополнительно включить с помощью интента:
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/sp2.png){title=QR-код}

        `yandexnavi://add_exp?navi_special_project_status_branding_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        Перезапустить Навигатор:
        **Для появления коржика нужно:**
        - Построить маршрут через пробку (длина пробки не менее 5 минут по времени)
        - Запустить симуляцию движения (Двигаться с маленькой скоростью (ниже 20 км/ч))
        Конкретного места для показа нет, должен ловится в любом городе при наличии пробки, стоит пробовать ловить по Москве
    - do: |
        Дождаться появления коржика
    - assert: Слева над  над градусником ETA появляется рекламная картинка. Чаще всего, под картинкой находится также плашка с текстом рекламы, которая может через несколько секунд смениться на плашку с информацией о длине пробки
    - do: Несколько раз сменить ориентацию устройства.
    - assert: |
        Коржик по-прежнему показывается. Верстка не едет.
        _На  Android коржик может скрыться. (инфа в прилинкованном баге)_
    - do: Тап по коржику
    - assert: Открывается WebView или интроскрин (в зависимости от рекламной кампании)
    - do: Закрыть WebView
    - assert: |
        WebView закрывается
        Коржик по-прежнему показывается
    - do: Скрыть коржик тапом по карте
    - assert: |
        - Рекламный элемент (коржик) скрывается
        - Появляются кнопки (таббар, кнопки зума, кнопки пробки/парковки, кнопка вызова Алисы, кнопка установки ДС, кнопка "положение севера", кнопка "определения местоположения")

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi


  СП с коржиком. Проверка логики появления и скрытия коржика + логирование:
    - description: |
        **Коржик** - рекламный элемент, возникающий над градусником ETA, когда пользователь стоит в пробке.
        **Логика отображения:**
        - Есть верхняя и нижняя границы скорости
        При скорости меньше нижней (дефолт - 20км/ч) границы определенный промежуток времени (дефолт - 2с) и соблюдении стандартных условий должно показаться брендирование
        - При скорости между нижней и верхней границами состояние не должно изменяться (если не нарушались иные условия)
        - При скорости выше верхней (дефолт - 25км/ч) границы определенный промежуток времени (дефолт - 5с) должно скрыться брендирование
    - info: |
        Одним из шагов кейса является проверка появления события в логах. Рекомендуется заранее подключить девайс через провод к Android studio/Console для IOS.
        **Настройки:**
        Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        Developer Settings -> Ad -> Status branding ->  Status branding speed limits - On
        Developer Settings -> Ad -> Status branding ->  Force status branding - On
        Developer Settings -> Ad -> FDE -> вкл
        Если на момент тестирования отсутствует активная рекламная кампания с коржиком, то коржик нужно дополнительно включить с помощью интента:
        `yandexnavi://add_exp?navi_special_project_status_branding_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        Для Android использовать команду: adb shell am start -a android.intent.action.VIEW -d “НУЖНЫЙ ИНТЕНТ”
        Перезапустить Навигатор:
        **Для появления коржика нужно:**
        - Построить маршрут через пробку (длина пробки не менее 5 минут по времени)
        - Запустить симуляцию движения (Двигаться с маленькой скоростью (ниже 20 км/ч))
        Конкретного места для показа нет, должен ловится в любом городе при наличии пробки, стоит пробовать ловить по Москве
    - do: Дождаться появление коржика
    - assert: Над градусником ETA появляется рекламная сущность.
    - do: Тап по коржику.
    - assert: |
        В зависимости от типа коржика открывается WebView или интроскрин
        При тапе по коржику в логах приходит событие **status-branding.clicked**  с параметром **reporting_id**.
    - do: Закрыть вебвью/интроскрин
    - assert: Вебвью/интроскрин закрывается, коржик не отображается
    - do: |
        - Дождаться появление коржика
        - Закрыть коржик тапом по карте
    - assert: |
        - Рекламный элемент (коржик) скрывается
        - Появляются кнопки (таббар, кнопки зума, кнопки пробки/парковки, кнопка вызова Алисы, кнопка установки ДС, кнопка "положение севера", кнопка "определения местоположения")
        - При скрытии коржика в логах приходит событие **status-branding.hidden**
    - do: |
        - Дождаться появление коржика
        - Скрыть ЕТА любым способом, например, открыть лонгтап меню или меню поиска по категориям.
    - assert: Рекламный элемент (коржик) скрывается
    - do: |
        - Открыть гео-карточку любого объекта.
        - Свернуть карточку в минимальное состояние.
        - Подождать момента, когда должен появиться коржик.
    - assert: Коржик не показывается.
    - do: |
        - Для проверки шага выставить настройки:
        Developer Settings -> Ad -> FDE -> вкл
        Developer Settings -> Ad -> Status branding -> Status branding speed limits - **ON**
        Developer Settings -> Ad -> Status branding -> Force status branding - **OFF**
        Прокинуть интент на кулдаун:
        `yandexnavi://add_exp?navi_special_project_all_test_pack_project_status_branding_cooldown_seconds=1`
        ПЕРЕЗАГРУЗИТЬ навигатор
        -  Построить маршрут через пробку (длина пробки не менее 5 минут по времени)
        Запустить симуляцию движения (Двигаться с маленькой скоростью (ниже 20 км/ч))
        - Дождаться появления коржика
        - Увеличить скорость движения (выше 25 км/ч)
    - assert: |
        - Рекламный элемент (коржик) скрывается
        - При скрытии коржика в логах приходит событие **status-branding.hidden**

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
        - metric


  Рекламный СП. Брендированный маршрут + переключение между вариантами маршрутов:
    - info: |
        - Перезапустить приложение 2-3 раза (чтобы подтянулись эксперименты)
        **Настройки:**
        - При отсутствии реального БМ, можно включить тестовый с помощью **интентов**
        `yandexnavi://add_exp?navi_overview_ads_priority_for_RU=brand_route`
        `yandexnavi://add_exp?navi_special_project_brand_route_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22megafon_bm%22%2C%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D`
        - отключение кулдауна БМ - `yandexnavi://add_exp?navi_special_project_common_brand_route_cooldown_seconds=60`
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Dev.settings -> AD -> FDE вкл
        - Перезапустить навигатор.
        Для Android использовать команду: `adb shell am start -a android.intent.action.VIEW -d` “НУЖНЫЙ ИНТЕНТ”
    - do: |
        Построить маршрут
    - assert: |
        - Маршрут построен, над экраном обзора маршрута отображается плашка с рекламой и лого бренда
    - do: |
        - Переключаться между вариантами маршрута
    - assert: |
        БМ исчезает после переключения между вариантами маршрута

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Рекламный СП. Брендированный маршрут UI:
    - info: |
        **Настройки:**
        - При отсутствии реального БМ, можно включить тестовый с помощью **интентов**
        Использовать интенты:
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/brand_route.png){title=QR-код}

        `yandexnavi://add_exp?navi_overview_ads_priority_for_RU=brand_route`

        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/sp.png){title=QR-код}

        `yandexnavi://add_exp?navi_special_project_brand_route_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22megafon_bm%22%2C%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D`
        Отключить кулдаун БМ
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/cooldown.png){title=QR-код}

        `yandexnavi://add_exp?navi_special_project_common_brand_route_cooldown_seconds=60`
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Dev.settings -> AD -> FDE вкл
        - Перезапустить навигатор.
        Ориентация девайса - портрет
    - do: |
        - Построить маршрут
    - assert: |
        - Маршрут построен, над экраном обзора маршрута отображается плашка с рекламой и лого бренда
        - Верстка не едет
    - do: |
        - Сбросить маршрут
    - do: |
        - Подождать минуту
    - do: |
        - Изменить ориентацию девайса на лендскейп
    - do: |
        - Построить маршрут
    - assert: |
        - Маршрут построен, над экраном обзора маршрута отображается плашка с рекламой и лого бренда
        - UI БМ подстраивается под ориентацию экрана. Верстка не едет

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Рекламный СП. Брендированный маршрут + логирование:
    - info: |
        - Одним из шагов кейса является проверка появления события в логах. Рекомендуется заранее подключить девайс через провод к Android studio/Console для IOS.
        - Перезапустить приложение 2-3 раза (чтобы подтянулись эксперименты)
        **Настройки:**
        - При отсутствии реального БМ, можно включить тестовый с помощью **интентов**
        `yandexnavi://add_exp?navi_overview_ads_priority_for_RU=brand_route`
        `yandexnavi://add_exp?navi_special_project_brand_route_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        - отключение кулдауна БМ - `yandexnavi://add_exp?navi_special_project_common_brand_route_cooldown_seconds=60`
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Dev.settings -> AD -> FDE вкл
        - Перезапустить навигатор.
        Для Android использовать команду: `adb shell am start -a android.intent.action.VIEW -d` “НУЖНЫЙ ИНТЕНТ”
    - do: |
        Построить маршрут
    - assert: |
        - Маршрут построен, над экраном обзора маршрута отображается плашка с рекламой и лого бренда
        - В логи приходит событие `route.brand-route-visibility` с параметром `visible: true`
    - do: Тап по баннеру брендированного маршрута (если он СП и подразумевает тапабельность сущности).
    - assert: |
        - Открывается интроскрин/вебвью/etc (На девайсах вебвью/интроскрин отображается только в портретной ориентации, на планшетах в портретной и альбомной)
        - В логи приходит событие `route.brand-route-click`
        При открытии интроскрина также приходит событие: `intro.page-shown` с параметром `page: intro_test_pack`
    - do: Закрыть интроскрин/вебвью/etc
    - assert: |
        - Интроскрин/вебвью/etc закрывается,
        - Происходит возврат к карте, БМ остается отображаться над экраном обзора
    - do: |
        - Закрыть БМ любым способом
    - assert: |
        БМ скрывается.
        В логи приходит событие `route.brand-route-visibility` с параметром `visible: false`

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - metric


  Рекламный СП. Брендированный маршрут + отображение интроскрина на запуске:
    - description: |
        - Необходимо помать интроскрин из БМа до интроскрина при запуске.
        - Внешний вид спецпроектного интроскрина (https://jing.yandex-team.ru/files/natalya-ovs/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%201.jpg)
    - info: |
        - Одним из шагов кейса является проверка появления события в логах. Рекомендуется заранее подключить девайс через провод к Android studio/Console для IOS.
        - Перезапустить приложение 2-3 раза (чтобы подтянулись эксперименты)
        Настройки
        - При отсутствии реального БМ, можно включить тестовый с помощью **интентов**
        Использовать интенты:
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/brand_route.png){title=QR-код}

        `yandexnavi://add_exp?navi_overview_ads_priority_for_RU=brand_route`
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/sp1.png){title=QR-код}

        `yandexnavi://add_exp?navi_special_project_brand_route_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        Отключить кулдаун БМ
        [collapsed-image](https://jing.yandex-team.ru/files/kuznetsova22/cooldown.png){title=QR-код}

        `yandexnavi://add_exp?navi_special_project_common_brand_route_cooldown_seconds=60`
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Dev.settings -> AD -> FDE вкл
        - Перезапустить навигатор.
        Для включения тестового интроскрина используем интент:
        `yandexnavi://add_exp?navi_special_project_launch_intro_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22all_test_pack_project%22%2C%20%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D%0A`
        Перезапустить навигатор.
        Для Android использовать команду: `adb shell am start -a android.intent.action.VIEW -d` “НУЖНЫЙ ИНТЕНТ”
    - do: |
        Построить маршрут
    - assert: |
        - Маршрут построен, над экраном обзора маршрута отображается плашка с рекламой и лого бренда
    - do: Тап на БМ
    - assert: |
        - Открывается интроскрин
    - do: Выгрузить навигатор и запустить его
    - assert: |
        - При открытии навигатора отображается интроскрин (выглядеть должен аналогично тому, что открылся из БМ. Макет в описании кейса)

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Рекламный СП. Баннер в меню. Проверка URL:
    - description: |
        Кейс проходим, если в меню есть рекламный баннер, по тапу на который открывается вебвью с поиском
    - info: |
        Кейс следует проходить на debug сборках
        Пользователь авторизован
        Прокинуть интент:
            [collapsed-image](https://jing.yandex-team.ru/files/shindzhev/download%20(11).9baa676.png){title=QR-код}

            `yandexnavi://add_exp?navi_special_project_banner_rotation_configurations_for_RU=%5B%7B%22project_name%22%3A%20%22mts_ecosystem%22%2C%22configuration%22%3A%20%7B%20%22weight%22%3A%201.0%20%7D%7D%5D`
        Перезапустить навигатор
    - do: Открыть экран меню
    - assert: Баннер показывается
    - do: |
        Отключить интернет
        Тап по баннеру
    - assert: |
        На Android:
        Происходит переход в браузер
        Страница браузера не загружается
        На IOS :
        Появляется уведомление с ошибкой и кнопкой «ОК»
    - do: |
        Выйти из вебвью тапом по крестику
        Включить интернет
        Зайти в меню
        Тап на баннер
    - assert:
        Идет загрузка вебвью. Вебвью  не откроется - это ОК

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Чек-лист для МТС:
    - info: |
        Проверки производить на тестовых полигонах: https://yandex.ru/maps/-/CCUibYxtdA
        У каждого полигона своя тематика и фраза. Всего тематик 4
        Для каждой тематики свой уникальный "невидимый в меню" курсор.
        Тематики полигона и курсоры:
        Красный - Кино, курсор: серая машинка
        Желтый - Книги, курсор: красная машина
        Зеленый - Музыка, курсор: синя машина
        Розовый - Жизнь, курсор: автобус
    - do: |
        - В меню отображается баннер МТС
        - Если пользователь не дал согласие на участие в игре, то при движении через полигон ничего не будет происходить
        - При тапе на баннер открывается вебвью, после авторизации в игре вебвью и баннер меняют свой вид
        - В меню отображается только базовый курсор
        - При въезде в полигон звучит аннотация и меняется курсор на соответствующий этому полигону
        - После смены на брендированный курсор, он отображается в меню
        - При смене курсора полигона он скрывается и выбрать больше нельзя
        - Если случается прерывание аннотации, то после окончания прерывания повторно она не произносится
        - при следующем въезде в полигон аннотация снова проигрывается
        - Если пользователь с активным статусом игры меняет курсор на любой другой (стандартный напр), то при проезде через полигон ничего не происходит
        - Посещённый полигон, для которого закончила играть аннотация регистрируется на webview проекта
        - С активной игрой и установленным ГК игра работать не будет

    - platforms:
        - ios
        - android
