components: search
testing:
  - regress

specs:
  Экран «Поиск». Поиск с помощью клавиатуры(android <5):
    - do: |
        Открыть экран поиска тапом на иконку лупы в таббаре
        Тап по текстовому полю
    - assert: |
        Происходит переход на таб «История»
        Активируется клавиатура
        Поисковое поле в фокусе, мигает текстовый курсор
        Справа от текстового поля рядом с кнопкой микрофончика отображается кнопка “Отмена”
        (на локали en микрофончик не отображается)
    - do: Начать вводить название улицы, несколько первых букв (например, Ленина)
    - assert: Ввод с клавиатуры работает
    - do: Выбрать подсказку из саджеста где не будет номера дома
    - assert: После использования подсказки из саджеста, автоматически проставляется пробел, для дальнейшего ввода дома
    - do: Тап Найти
    - assert: Происходит переход на экран Карта, где отображается результат поиска и открыта карточка организации

    - tags:
        - assessors
    - integration_run:
        - search


  Экран «Поиск». Поиск с помощью голоса (Алиса):
    - info: |
        - Кейс проходить на Android <5
        - Настройки - раздел "Звуки и оповещения" - Алиса - Вкл
    - do: |
        - Открыть экран поиска тапом на иконку лупы в таббаре
        - Тап по кнопке голосового ввода
    - assert: В нижней 1/3 экрана открывается панель Алисы
    - do: Проговорить любой адрес/место/название организации
    - assert: На Карте отображаются результаты поиска в виде синих пинов


    - integration_run:
      - speechkit
      - search
    - tags:
      - not_suitable_for_farm
      - assessors


  SearchLib в Навигаторе. Аппаратные кейсы.:
    - description: |
        Для выполнения шагов нужно прейти в настройки ОС, выбрать навигатор в разделе Приложения.
    - info: Установлен поисковый бар от навигатора в панели уведомлений
    - do: Принудительно остановить Навигатор
    - assert: Бар исчезает, при следующем открытии приложения бар появляется снова
    - do: Очистить данные Навигатора
    - assert: |
        Бар исчезает
        При следующем открытии приложения (возможно, нужно два запуска, т.к. со второго запуска сплеш) появляется сплеш, через который можно включить бар.
    - do: Очистить кэша приложения
    - assert: Бар не пропал, всё работает как обычно

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Поисковая выдача по маршруту.:
    - do: |
        Выключить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-27%20в%2011.39.08.png){title=QR-код}

        `yandexnavi://add_exp?navi_feature_common_menu_manager=disabled`
    - do: Перезапустить приложение
    - do: Построить маршрут любым способом и подтвердить его
    - do:
        Тап на иконку лупы в таббаре
        Осуществить поиск по категории
    - assert: Отображаемые пины приближены к маршруту
    - do: Сменить ориентацию устройства
    - assert: При смене ориентации пины могут измениться, но всё равно должны быть приближены к маршруту
    - do: Поскроллить карту, изменить зум
    - assert: |
        - Пины приближены к маршруту
        - Если карта была смещена за пределы отображения маршрута, то поисковые пины могут показаться без привязки к маршруту
    - do: Перейти на экран Обзора маршрута тапом на кнопку в таббаре
    - assert: Результаты поиска приближены к маршруту

    - platforms:
      - ios
      - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
      - acceptance_navi
    - integration_run:
      - mapkit
      - search


  Поисковая выдача по маршруту через компонент CommonMenuManager:
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-27%20в%2011.35.27.png){title=QR-код}

        `yandexnavi://add_exp?navi_feature_common_menu_manager=enabled`
    - do: Перезапустить приложение для активации эксперимента
    - do: Построить маршрут любым способом и подтвердить его
    - do:
        Тап на иконку лупы в таббаре
        Осуществить поиск по категории
    - assert: Отображаемые пины приближены к маршруту
    - do: Сменить ориентацию устройства
    - assert: При смене ориентации пины могут измениться, но всё равно должны быть приближены к маршруту
    - do: Поскроллить карту, изменить зум
    - assert: |
        - Пины приближены к маршруту
        - Если карта была смещена за пределы отображения маршрута, то поисковые пины могут показаться без привязки к маршруту
    - do: Перейти на экран Обзора маршрута тапом на кнопку в таббаре
    - assert: Результаты поиска приближены к маршруту

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_navi
    - integration_run:
        - mapkit
        - search


  SearchLib в Навигаторе. Проверка вкл/выкл поисковой строки:
    - info: |
        Поисковая строка в панели уведомлений не установлена
        Не установлено ни одного приложения Yandex.
    - do: |
        Поймать предложение установить "Поиск в область уведомления” на ~3 запуск навигатора.
    - assert: |
        Отображается предложение добавить “Поиск в область уведомления”.
    - do: Тап Добавить
    - assert: Поисковая строка добавлена в панель уведомлений
    - do: |
        Перейти в Меню -> Настройки -> Карта и интерефейс -> Другие настройки
        Выключить свитчер Поиск в панели уведомлений
    - assert: Поиск убрался из шторки
    - do: Включить свитчер Поиск в панели уведомлений
    - assert: Поиск снова появился в шторке

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Бар. Тап по бару с трендами:
    - description: |
        Проверка тапов по бару с включенными трендами
        https://jing.yandex-team.ru/files/veran1ka/screencast_2017-09-15_17-34-29.mp4
        Тренды только для  ru_RU
        СЕРП - страница результатов поиска
    - do: Установить бар из Навигатора (Меню -> Настройки -> Карта и интерфейс -> Другие настройки -> Поиск в панели уведомлений либо через серчлибу)
    - assert: Бар отображается в шторке, в поисковой строке отображается тренд
    - do: Тап по кнопке Найти
    - assert: Редирект в Браузер на СЕРП с запросом
    - do: |
        Вернуться к бару в шторке, тап по полю поиска
        (такое же поведение при тапе на информеры)
    - assert: Открывается поисковый экран SearchLib с историей запросов или трендовыми запросами, без введенного в поле поиска текста трендового запроса

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Бар. Голосовой поиск:
    - description: Проверка голосового поиска в баре
    - do: Установить бар из Навигатора (Меню -> Настройки -> Карта и интерфейс -> Другие настройки -> Поиск в панели уведомлений либо через серчлибу)
    - assert: Бар отображается в шторке
    - do: Открыть шторку и тап в баре по Спичкиту
    - assert: |
        Открывается Спичкит
        Если вы используете устройство с Android 6+ вам откроется системное разрешение, где вы должны разрешить приложению записывать аудио. Только после этого вам откроется спичкит
    - do: Произнесите голосовой запрос (например “сколько весит слон”, “кинопоиск”, “камера”)
    - assert: Редирект в Браузер на СЕРП с введенным голосовым запросом

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Виджет. Переход по информерам:
    - description: |
        Виджеты Навигатора доступны в дебаг** и НЕ доступны в release/dev и др. НЕ дебаг сборках.
        Для локального включения на Андроиде:
        `adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_searchlib_splash_type=widget"`
    - info: |
        Добавлены места Дом/Работа
        На девайсе установлены ЯБраузер, Погода и Яндекс Карты
    - do: |
        Вынести виджет навигатора на главный экран
    - assert: Виджет вынесен на рабочий стол
    - do: Тап по информерам
    - assert: |
        информер Погоды - переход в ЯБраузер к погоде
        информер Пробок - переход в Навигатор (если виджет вынесен не из приложения Навигатор, то переходи в Карты)
        информер Курса валют (евро, доллар) - переход в ЯБраузер к курсам валют
        информер Новостей - переход в ЯБраузер к новостям
        информер Часов - переход в Часы для установки будильника
        информер Заряда батареи - переход в Настройки к статистике использования батареи
        только для Навигатора
        информер Дом-Работа - переход в Навигатор на карту (если введены точки Дом и Работа) или переход в Навигатор на экран задания точек Дом и Работа

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Виджет. Голосовой поиск:
    - description: |
        Виджеты Навигатора доступны в дебаг и НЕ доступны в release/dev и др. НЕ дебаг сборках.
        Видео-пример: https://jing.yandex-team.ru/files/treshka/котики.mp4
        Для включения локально виджета:
        `adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_searchlib_splash_type=widget"`
    - do: Вынести виджет навигатора на главный экран
    - assert: Виджет вынесен на рабочий стол
    - do: Нажмите на спичкит в посковой строке виджета
    - assert: |
        Откроется спичкит
        Если вы используете устройство с Android 6+ вам откроется системное резрешение, где вы должны разрешить приложению записывать аудио. Только после этого вам откроется спичкит
    - do: Произнесите поисковой запрос и дождитесь окончания прослушивания
    - assert: Откроется браузер (либо поисковое приложение Яндекс) с произнесённым поисковым запросом и поисковой выдачей

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Виджет. Поиск:
    - description: |
        Поиск в виджете включает в себя:
        - поиск по навигационникам (ведет на конкретный сайт https://jing.yandex-team.ru/files/veran1ka/Screen_Capture_2019-04-16_14-42-26.png)
        - поиск по приложениям https://jing.yandex-team.ru/files/treshka/камера-1.mp4
        - полнотекстовый саджест
        - пословный саджест
        - история запросов
        ---
        СЕРП - страница результатов поиска
        Для включения локально виджета:
        `adb shell am start -a android.intent.action.VIEW -d "yandexnavi://add_exp?navi_searchlib_splash_type=widget"`
    - do: Вынести виджет навигатора на главный экран
    - assert: Виджет вынесен на рабочий стол
    - do: Тап на поисковую строку и ввести любой поисковой запрос
    - assert: Отображаются саджесты по данному поисковому запросу
    - do: Нажмите по полнотекстовому саджесту в результатах поиска
    - assert: Переход на СЕРП в браузер с запросом в поисковой строке

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Обновление со старой версии на новую в виджете:
    - description: Виджеты **доступны в дебаг** и НЕ доступны в release/dev и др. НЕ дебаг сборках.
    - info: Установлена предыдущая запинованная версия навигатора
    - do: Вынести виджет навигатора на главный экран
    - assert: Виджет вынесен на рабочий стол
    - do: Произвести несколько поисковых запросов в строке поиска в виджете
    - assert: Результаты поиска из виджета записались в историю поиска из виджета
    - do: Измените количество или состав информеров
    - assert: Изменения применились в виджете
    - do: Обновиться до последней сборки навигатора
    - assert: В виджете сохранилась история запросов и сохранился порядок и/или количество информеров

    - platforms:
      - android
    - integration_run:
      - searchlib
    - tags:
      - not_suitable_for_farm
      - assessors


  Категория поиска "Дежурная аптека" для Турции:
    - description: |
        - Кейс проходить на Android <5 и на ГУ
        Внешний вид значка "Дежурная аптека"  (значок располагается рядом со значком "Аптека"):
        - на турецком языке
        ![image](https://jing.yandex-team.ru/files/warmtwinkle/%D0%B7%D0%BD%D0%B0%D1%87%D0%BA%D0%B8%20%D1%82%D1%83%D1%80%D1%86%D0%B8%D1%8F%20%D1%8F%D0%B7%20%D1%82%D1%83%D1%80%D0%B5%D1%86%D0%BA%D0%B8%D0%B8%CC%86.jpg)
        - на английском языке
        ![image](https://jing.yandex-team.ru/files/warmtwinkle/%D0%B7%D0%BD%D0%B0%D1%87%D0%BA%D0%B8%20%D1%82%D1%83%D1%80%D1%86%D0%B8%D1%8F%20%D1%8F%D0%B7%D1%8B%D0%BA%20%D0%B0%D0%BD%D0%B3%D0%BB.jpg)
        - на русском языке
        ![image](https://jing.yandex-team.ru/files/warmtwinkle/%D0%B7%D0%BD%D0%B0%D1%87%D0%BA%D0%B8%20%D1%82%D1%83%D1%80%D1%86%D0%B8%D1%8F%20%D1%8F%D0%B7%D1%8B%D0%BA%20%D1%80%D1%83%D1%81%D1%81%D0%BA.jpg)
    - info: |
        **Условия появления  значка:**
        - регион на девайсе - Турция (язык может быть любым)
        - местонахождение - Стамбул, Ankara, Antalya, Bursa, Kocaeli
        Установить локаль tr_TR, подменить координаты на Стамбул. Запустить приложение. Выгрузить приложение. Запустить приложение повторно.
    - do: Зайти в Категории Поиска.
    - assert: Значок "Дежурная аптека" отображается рядом со значком "Аптека"( В поиске мяк  нет)
    - do: Тап по значку "Дежурная аптека"
    - assert: На карте появляются пины. При масштабировании карты или движении по маршруту подгружаются дополнительные пины.
    - do: Тап по пину
    - assert: Открывается карточка организации, в категории указано "Аптека"
    - do: Повторить Step 1-3 с местоположением в одном из перечисленных городов Ankara, Antalya, Bursa, Kocaeli.
    - assert: Функционал "Дежурные Аптеки" доступен

    - platforms:
      - nissan
      - android
    - testing:
      - acceptance_navi
    - integration_run:
      - search
    - tags:
      - not_suitable_for_farm
      - assessors


  Смена иконок категорий для Турции:
    - description: |
        **Цель проверки** Проверить изменение иконок категорий для турции.
        **Смена иконок происходит только по языку**
    - info: |
        - Установить локаль tr_TR
        - Подменить местоположение на Турцию
    - do: Перейти на экран "Поиск" тапом по иконке Лупы в таббаре
    - assert: В категориях вместо привычных иконок "аптеки" и "Больницы" отображаются буквы "E" и "H"
    - do: Произвести поиск по любой из указанных категорий
    - assert: Осуществляется переход на карту с результатами поиска по категории

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi
    - integration_run:
      - search


  Отображение бабблов результатов поиска:
    - info: |
        Баббл - это надпись около поискового пина:
        ![image](https://jing.yandex-team.ru/files/lyamina/Баббл.PNG?)
        В онлайн-режиме у баббла есть заголовок и подстрочник
        В офлайн-режиме -  только заголовок
        Установлена дневная тема приложения
    - do: |
        - Перейти на экран "Поиск" тапом по иконке Лупы в таббаре
        - Тап на любую категорию
    - assert: |
        - Произошел переход на экран карты
        - На карте отображаются пины результатов поиска
        - Снизу плавно выдвинулась карточка с результатами поиска
    - do: Изменить зум и вращать карту
    - assert: |
        При вращении карты бабблы тоже поворачиваются, оставаясь читабельными
        Бабблы не налезают друг на друга - при попытке пересечения, один из бабблов исчезает
    - do: Изменить ориентацию девайса
    - assert: |
        - При смене ориентации девайса бабблы продолжают отображаться
        - Их ориентация тоже меняется

    - platforms:
      - geely
      - carsharing_t3
      - ios
      - android
      - t3am
      - motrex
      - autochip
    - tags:
        - assessors
        - mapkit_ready
    - testing:
      - acceptance_navi
    - integration_run:
      - mapkit


  Отображение бабблов результатов поиска с оффлайн кешами:
    - info: |
        Баббл - это надпись около поискового пина:
        ![image](https://jing.yandex-team.ru/files/lyamina/Баббл.PNG?)
        Баббл отображается на любом зуме
        В офлайн-режиме - только заголовок
    - do: |
        - Перейти в Меню - Загрузка карт
        - Скачать кеш области местоположения
    - assert: Карта скачана
    - do: |
        - Включить авиарежим на девайсе
        - Перейти на экран "Поиск" тапом по иконке Лупы в таббаре
        - Тап на любую категорию
    - assert: |
        - Произошел переход на экран карты
        - На карте отображаются пины результатов поиска
        - Снизу плавно выдвинулась карточка с результатами поиска
    - do: Изменить зум и вращать карту
    - assert: |
        - При вращении карты бабблы тоже поворачиваются, оставаясь читабельными
        - Бабблы не налезают друг на друга - при попытке пересечения, один из бабблов исчезает
    - do: Изменить ориентацию девайса
    - assert: |
        - При смене ориентации девайса бабблы продолжают отображаться
        - Их ориентация тоже меняется

    - platforms:
        - geely
        - carsharing_t3
        - ios
        - android
        - t3am
        - motrex
        - autochip
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_navi
    - integration_run:
        - mapkit


  Отсутствие ДС при осуществлении поиска:
    - description: |
        - при осуществлении поиска без маршрута - не отображаются **UserPoi (ДС и Камеры)**
        - при осуществлении поиска с маршрутом и на окне обзора - UserPoi отображаются
    - info: |
        - карта maprit
        - включен эксперимент с войной пинов (в Developer settings Mapkit scale factor enabled - on)
        - маршрута нет
        - включено отображение ДС на карте
    - do: Произвести поиск по любой категории
    - assert: |
        Отображаются результаты поиска
        UserPoi отсутствуют
    - do: |
        Построить маршрут
        Произвести поиск
    - assert: |
        Отображаются результаты поиска
        UserPoi  отсутствуют
    - do: |
        Построить маршрут
        Тап поехали
        Произвести поиск
    - assert: |
        Отображаются результаты поиска
        UserPoi - отображаются

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - integration_run:
      - search


  Поиск. Категории:
    - info: Кейс проходить на Android<5 и на ГУ
    - do: |
        - Перейти на экран "Поиск" тапом по иконке Лупы в таббаре
        - Тап на любую категорию
    - assert: |
        - Произошел переход на экран карты
        - На карте отображаются пины результатов поиска
        - Пин организации больше остальных
        - Снизу плавно выдвинулась карточка организации
    - do: Скроллить карту в разных направлениях, не нажимая при этом на другие пины результатов поиска
    - assert: |
        По мере сдвига карты показываются новые результата поиска
        Карточка организации не скрывается
    - do: Тап по карте
    - assert: Карточка скрывается. Пины результатов поиска не удаляются с карты
    - do: Тап на любой пин
    - assert: |
        Пин, на который произвелось нажатие, выделяется
        Снизу выдвигается карточка с названием организации , ее адресом и кнопкой "Поехали"
    - do: Закрыть карточку результата поиска
    - assert: Карточка закрывается, на карте отображаются результаты поиска
    - do: Тап на кнопку сброса результатов (кнопка с символом Х)
    - assert: Результаты поиска исчезли с карты

    - platforms:
      - renault
      - geely
      - vaz
      - carsharing_t3
      - nissan
      - android
      - t3am
      - motrex
      - autochip
      - first_run_hu
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Поиск по введенной категории:
    - info: Кейс проходить на Android<5 и на ГУ
    - do: |
        Перейти на экран “Поиск” тапом по иконке Лупы в таббаре
        Тап на поле ввода “Поиск”
    - assert: |
        Курсор установлен на поисковую строку
        Появилась клавиатура
        Произошел автоматический переход на таб “История”
    - do: |
        Начать вводить “магазин”
        Выбрать пункт из предложенных с большим количеством результатов
    - assert: |
        - Происходит переход на экран “Карта”
        - На карте отображаются результаты поиска
        - Снизу выдвигается карточка результата поиска, его адресом и кнопкой “Поехали”
    - do: Закрыть карточку результата поиска
    - assert: Карточка закрылась, на карте отображаются результаты поиска
    - do: Тап на кнопку сброса результатов (кнопка с символом Х)
    - assert: Результаты поиска исчезли с карты

    - platforms:
      - renault
      - geely
      - vaz
      - carsharing_t3
      - nissan
      - android
      - t3am
      - motrex
      - autochip
      - first_run_hu
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Поиск из истории:
    - info: |
        - Кейс проходить на Android<5 и на ГУ
        - В истории поиска должны быть результаты (предварительно должен быть осуществлен поиск по категории или адресу)
    - do: |
        Открыть экран “Поиск” по значку Лупы в таббаре
        Свайпом влево или тапом по табу “История” перейти на таб “История”
    - assert: Отображается список выполненных ранее поисковых запросов
    - do: Тап на любую строку, содержащуюся в истории поиска
    - assert: |
        - Происходит переход на экран “Карта”
        - На карте отображаются результат поиска, соответствующий запросу из таба “История”
        - Снизу выдвигается карточка результата поиска, с его адресом и кнопкой “Поехали”
    - do: |
        Закрыть карточку результата поиска
        Тап на кнопку сброса результатов (кнопка с символом Х)
        ![вид кнопки](https://jing.yandex-team.ru/files/fedonina71/photo_2021-02-25%2016.37.48.jpeg)
    - assert: Результаты поиска исчезли с карты

    - platforms:
      - renault
      - geely
      - vaz
      - carsharing_t3
      - nissan
      - android
      - t3am
      - motrex
      - autochip
      - first_run_hu
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Контейнерный UI. Горизонтальные свайпы внутри контейнеров.:
    - info: |
        - Кейс проходить на Android<5
    - do: |
        Перейти на экран поиска тапом на иконку лупы в таббаре
        Движением от правого края экрана влево перейти в раздел "История".
        Аналогичным движением отлевого края - вправо вернуться на экран "Категории".
    - assert: |
        - Происходит сдвиг право/влево
        - Анимация плавная (без рывков)
    - do: Повторить предыдущий шаг для экрана "Мои места", осуществляя переход между "Сохраненные" и "Недавние"
    - assert: |
        - Происходит сдвиг право/влево
        - Анимация плавная (без рывков)

    - platforms:
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Контейнерный UI. Закрытие контейнера.:
    - info: Открыть любой контейнер (перейти на экран поиска/моих мест/меню)
    - do: Закрыть контейнер движением вниз, коснувшись верхней части контейнера с заголовком раздела.
    - assert: Из любого раздела после закрытия контейнера происходит возврат на экран карты.
    - do: |
        **Шаг для Android**
        Перейти на экран меню, закладок или поиска
        Закрыть контейнер тапом по back.
    - assert: Из любого раздела после закрытия контейнера происходит возврат на экран карты.

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Отображение бабблов поисковой выдачи (Спутник):
    - info: |
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
        Баббл - это надпись около поискового пина:
        ![image](https://jing.yandex-team.ru/files/lyamina/Баббл.PNG?)
        Баббл отображается  на любом зуме.
        В онлайн-режиме у баббла есть заголовок и подстрочник, в офлайн-режиме - только заголовок
    - do: |
        - Перейти в Меню - Настройки - Вид карты и установить вариант "Спутник"
        - Перейти на экран "Поиск" тапом по иконке Лупы в таббаре
        - Тап на любую категорию
    - assert: |
        - Произошел переход на экран карты
        - На карте отображаются пины результатов поиска
        - Снизу плавно выдвинулась карточка организации
    - do: Изменить зум и вращать карту
    - assert: |
        - При вращении карты, бабблы тоже поворачиваются и остаются читабельными
        - Бабблы не налезают друг на друга и отображаются полностью
    - do: Выполнить скролл карты
    - assert: |
        - Появляются новые пины результатов поиска
        - Бабблы не налезают друг на друга и отображаются полностью

    - platforms:
      - motrex
      - geely
      - carsharing_t3
      - ios
      - android
      - t3am
    - tags:
        - assessors
        - mapkit_ready
    - testing:
      - acceptance_navi
    - integration_run:
      - mapkit


  Отображение бабблов поисковой выдачи. Offline (Спутник):
    - info: |
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
        Баббл - это надпись около поискового пина:
        ![image](https://jing.yandex-team.ru/files/lyamina/Баббл.PNG?)
        Баббл отображается  на любом зуме.
        В онлайн-режиме у баббла есть заголовок и подстрочник, в офлайн-режиме - только заголовок
    - do: |
        Перейти в Меню - Загрузка карт
        Скачать кеш области местоположения
        Включить авиарежим на девайсе
    - assert: Карта скачана
    - do: |
        - Перейти в Меню - Настройки - Вид карты и установить вариант "Спутник"
        - Перейти на экран "Поиск" тапом по иконке Лупы в таббаре
        - Тап на любую категорию
    - assert: |
        - Произошел переход на экран карты
        - На карте отображаются пины результатов поиска
        - Снизу плавно выдвинулась карточка организации
    - do: Изменить зум и вращать карту
    - assert: |
        - При вращении карты, бабблы тоже поворачиваются и остаются читабельными
        - Бабблы не налезают друг на друга и отображаются полностью
        - В бабблах отсутсвует вторая строка (информация о скидках и режиме работы)
    - do: Выполнить скролл карты
    - assert: |
        - Появляются новые пины результатов поиска
        - Бабблы не налезают друг на друга и отображаются полностью

    - platforms:
        - motrex
        - geely
        - carsharing_t3
        - ios
        - android
        - t3am
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_navi
    - integration_run:
        - mapkit


  Разное состояние поисковых пинов:
    - info: |
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
        Поисковый пин имеет несколько видов, меняется при зумировании:
        - пыль (маленькая синяя точка)
        - полноразмерный (большая точка с рубричной иконкой внутри)
    - do: |
        Тап по иконке лупы в таббаре
        Тап на категорию Бары
    - assert: |
        Открыта карта с результатами поиска
        Полноразмерные пины на переднем плане
    - do: Тап по синему (не рекламному) пину
    - assert: Пин становится активным, меняет цвет большого пина на красный
    - do: Тап по свободному месту на карте
    - assert: |
        Пин вернулся к неактивному состоянию
        Цвет изменен на бледно-синий (организация просмотрена)
    - do: Тап по серому пину (организация закрыта)
    - assert: Пин становится активным (цвет активного пина - серый)
    - do: Тап по свободному месту на карте
    - assert: |
        Пин вернулся к неактивному состоянию
        Цвет не изменился (пин остался серым)
    - do: Тап по пину, посещенной ранее организации
    - assert: Пины в активном состоянии синие (не бледно-синий)
    - do: Зумить карту
    - assert: |
        - при приближении пины из пыли переходят в полноразмерное состояние
        - пыль по цвету соответствует цвету пинов

    - platforms:
      - motrex
      - autochip
      - android
      - ios
    - testing:
      - acceptance_navi
    - integration_run:
      - mapkit
    - tags:
        - assessors
        - mapkit_ready


  Состояния поисковых пинов - Геопродукт:
    - info: |
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
        Геопродуктовые пины (зеленые) не изменяют состояние в зависимости от посещения
    - do: |
        Перейти на экран Поиск тапом на иконку лупы в таббаре
        Тап на любую не брендированную категорию
    - assert: |
        - Происходит переход на экран Карта
        - Отображаются результаты поиска
    - do: Тап по зеленому геопродуктовому пину
    - assert: |
        - Пин переходит в выделенное состояние
        - Цвет пина - зеленый
    - do: Тап по свободному месту на карте
    - assert: |
        - Пин вернулся к неактивному состоянию
        - Цвет пина не изменился

    - platforms:
      - ios
      - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
      - acceptance_navi
    - integration_run:
      - mapkit


  Состояния поисковых пинов - Синий пин:
    - info: |
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
    - do: |
        Перейти на экран Поиск тапом на иконку лупы в таббаре
        Тап на любую категорию
    - assert: |
        - Происходит переход на экран Карта
        - Отображаются результаты поиска
    - do: Тап по синему (не рекламному) пину
    - assert: |
        - Пин переходит в выделенное состояние
        - Открывается карточка организации, по которой был выполнен тап
    - do: Тап по свободному месту на карте
    - assert: |
        - Пин вернулся к неактивному состоянию
        - Цвет этого пина изменен на серо-синий
    - do: Тап по пину, посещенной ранее организации
    - assert: Пин в выделенном состоянии синий (не серо-синий)

    - platforms:
      - geely
      - carsharing_t3
      - ios
      - t3am
      - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
      - acceptance_navi
    - integration_run:
      - mapkit


  Состояния поисковых пинов - Организация закрыта:
    - info: |
        - Кейс проходить на Android <5 и на ГУ
        Поисковый пин имеет несколько видов, меняется при зумировании:
        - пыль (маленькая синяя точка)
        - полноразмерный (большая точка с рубричной иконкой внутри)
        Если организация закрыта на данный момент - пин серый
        Геопродуктовые пины (зеленые) не изменяют состояние в зависимости от посещения
        Брендированные пины (с иконкой организации) после посещения становятся бледными
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
    - do: |
        Перейти на экран Поиск тапом на иконку лупы в таббаре
        Тап на любую категорию
    - assert: |
        - Происходит переход на экран Карта
        - Отображаются результаты поиска
    - do: Тап по серому пину (организация закрыта)
    - assert: |
        - Пин переходит в выделенное состояние
        - Цвет пина - серый
    - do: Тап по свободному месту на карте
    - assert: |
        - Пин вернулся к неактивному состоянию
        - Цвет пина изменился на темно-синий

    - platforms:
      - geely
      - carsharing_t3
      - t3am
      - android
    - tags:
        - assessors


  Состояния поисковых пинов - Брендированный пин:
    - info: |
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
        Брендированные пины (с иконкой организации) после посещения становятся бледными
    - do: |
        Перейти на экран Поиск тапом на иконку лупы в таббаре
        Тап на любую категорию, например "Где поесть"
    - assert: |
        - Происходит переход на экран Карта
        - Отображаются результаты поиска
    - do: Тап по брендированному пину
    - assert: |
        - Пин переходит в выделенное состояние
        - В пине отображается логотип организации
    - do: Тап по свободному месту на карте
    - assert: |
        Пин вернулся к неактивному состоянию
        Брендированный пин стал бледным. Это правило не относится к тем брендированный организациям, которые представлены в Поиске отдельными категориями (например, Макдональдс)

    - platforms:
      - ios
      - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
      - acceptance_navi
    - integration_run:
      - mapkit


  Состояния поисковых пинов - Пыль:
    - info: |
        Пыль - поисковый пин, маленькая синяя точка
        Меню - Настройки - Dev.Set - Misc - Fast day night switching - On
        Перезагрузить приложение
        Цвет пыли должен соответствовать цвету обычного пина
        В поиске МЯК при тапе на синюю пыль - цвет пина красный
        Геопродуктовая пыль (зеленая) не изменяет состояние в зависимости от посещения
    - do: |
        Перейти на экран Поиск тапом на иконку лупы в таббаре
        Тап на любую категорию
    - assert: |
        - Происходит переход на экран Карта
        - Отображаются результаты поиска
        - Часть результатов представлены в виде Пыли
    - do: Тап по синему пину Пыли
    - assert: |
        - Пин переходит в выделенное состояние
        - Открывается карточка организации, по которой был выполнен тап
    - do: Тап по свободному месту на карте
    - assert: |
        - Пин вернулся к состоянию Пыли
        - Цвет пина стал темнее
    - do: Изменять масштаб карты
    - assert: |
        - при приближении пины из пыли переходят в полноразмерное состояние
        - пыль по цвету соответствует цвету пинов
        - пину с лейблом организации соответствует пыль под цвет логотипа бренда

    - platforms:
      - geely
      - carsharing_t3
      - ios
      - t3am
      - android
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
      - mapkit


  Логирование событий при открытии экрана Поиска:
    - description: |
        Инструкция как это протестировать есть на приветственной вики-странице
        **Цель проверки:** проверить корректность логирования основных событий, проверить отсутствие "мусора" и дубликатов в логах.
        При проверке присутствия тех или иных событий в логах проверить отсутствие пустых и дублирующихся событий.
    - info: Установлена debug-сборка
    - do: Открыть экран "Поиск"
    - assert: |
        - в логах приходит одно событие: **search.appeared**
        - событие **search.appeared** приходит только при открытии экрана поиска

    - platforms:
      - motrex
      - autochip
      - geely
      - vaz
      - carsharing_t3
      - ios
      - nissan
      - t3am
      - android
    - testing:
      - acceptance_navi
    - tags:
      - assessors
      - metric


  Закрытие карточки результата поиска кнопкой "Назад":
    - info: Девайс в альбомной ориентации
    - do: |
        Тап на иконку поиска
        Произвести поиск по любой категории, например "Где поесть"
    - assert: Карточка открыта в дефолтном состоянии
    - do: Закрыть карточку кнопкой “Назад”
    - assert: |
        Карточка закрыта
        Результаты поиска не сброшены

    - platforms:
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Закрытие карточки POI свайпом (портрет):
    - info: Портретная ориентация девайса
    - do: |
        Тап на любую иконку POI на карте
        Перевести карточку в максимальное состояние свайпом вверх
    - assert: |
        Карточка открыта
    - do: |
        Перевести карточку в минимальное состояние свайпом вниз
        Закрыть карточку свайпом вниз
    - assert: Карточка закрыта

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Закрытие карточки POI кнопкой "назад" (лендскейп):
    - do: |
        Тап на любую иконку POI на карте
    - assert: |
        Карточка организации открыта
    - do: Закрыть карточку кнопкой "Назад"
    - assert: |
        Карточка закрыта

    - platforms:
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Закрытие карточки Акции тапом на крестик:
    - description: |
        **Геопродукт представляет собой зеленые пины результатов поиска** - пины, содержащие рекламный баннер с зеленым текстом в карточке организации.
        Проще всего его обнаружить выполняя поиск над крупными городами (Москва, Санкт-Петербург)
        **У поиска мяк вместо крестика будет надпись "Закрыть"**
    - info: |
        - Выполнить поиск по любой не-рекламной категории
        - Тап на иконку лупы в таббаре
        - Тап на любую не рекламную категорию
        - Тап на любой пин зеленого цвета (либо брендированный пин), содержащий кликабельный рекламный текст
        - Тап на рекламный текст Геопродукта
        (Открывается карточка Акции)
    - do: |
        Закрыть карточку Акции тапом по крестику
    - assert: |
        Карточка Акции закрывается, затемнение пропадает
        Карточка организации открыта, с ней возможно взаимодействие

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Закрытие карточки Акции свайпом:
    - do: Выполнить поиск по любой нерекламной категории, например, Где поесть/Еда
    - assert: В поисковой выдаче найти организацию с рекламной ![акцией](https://jing.yandex-team.ru/files/kiseln/Акция%20с%20МЯК.jpg)
    - do: Тап на зеленый рекламный текст в карточке организации.
    - assert: Открывается карточка Акции
    - do: Закрыть карточку Акции свайпом вниз
    - assert: |
        Карточка Акции закрывается, затемнение пропадает
        Карточка организации открыта, с ней возможно взаимодействие

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Закрытие карточки Акции свайпом (Android<5):
    - do: Выполнить поиск по любой нерекламной категории, например, Где поесть/Еда
    - assert: Осуществляется переход на карту с результатами поиска
    - do: |
        - Протапывая зеленые пины геопродуктов, найти карточку с зеленым текстом рекламы
        - Тап по тексту рекламы
    - assert: Открывается карточка Акции
    - do: Закрыть карточку Акции свайпом вниз
    - assert: |
        Карточка Акции закрывается, затемнение пропадает
        Карточка организации открыта, с ней возможно взаимодействие

    - platforms:
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Закрытие карточки Акции тапом на затемненную область карты:
    - do: Выполнить поиск по любой нерекламной категории, например, Где поесть/Еда
    - assert: В поисковой выдаче найти организацию с рекламной ![акцией](https://jing.yandex-team.ru/files/kiseln/Акция%20с%20МЯК.jpg)
    - do: Тап на зеленый рекламный текст в карточке организации.
    - assert: Открывается карточка Акции
    - do: Закрыть карточку Акции тапом по затемненной части экрана
    - assert: |
        Карточка Акции закрывается, затемнение пропадает
        Карточка организации открыта, с ней возможно взаимодействие

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi

  Закрытие карточки Акции тапом на затемненную область карты(Android<5):
    - do: Выполнить поиск по любой нерекламной категории, например, Где поесть/Еда
    - assert: Осуществляется переход на карту с результатами поиска
    - do: |
        - Протапывая зеленые пины геопродуктов, найти карточку с зеленым текстом рекламы
        - Тап по тексту рекламы
    - assert: Открывается карточка Акции
    - do: Закрыть карточку Акции тапом по затемненной части экрана
    - assert: |
        Карточка Акции закрывается, затемнение пропадает
        Карточка организации открыта, с ней возможно взаимодействие

    - platforms:
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Открытие  сайта из карточки Акции геопродукта:
    - description: |
        **Геопродукт представляет собой зеленые пины результатов поиска** - пины, содержащие рекламный баннер с зеленым текстом в карточке организации.
        Проще всего его обнаружить выполняя поиск над крупными городами (Москва, Санкт-Петербург)
    - info: |
        - Выполнить поиск по любой не-рекламной категории
        - Тап на иконку лупы в таббаре
        - Тап на любую не рекламную категорию
        - Тап на любой пин зеленого цвета (либо брендированный пин), содержащий кликабельный рекламный текст
    - do: |
        Открыть карточку Акции, в которой присутствует кнопка “Перейти на сайт”
        Тап на кнопку “Перейти на сайт”
    - assert: Открывается сайт рекламируемой организации

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Поиск при движении по маршруту с дорожными событиями:
    - info:
       Меню - Настройки - Дорожные события - Отображение - На карте - Показывать - on
       Меню - Настройки - Дорожные события - Отображение - На маршруте - Показывать  - on
    - do: Построить маршрут любым способом хотя бы с тремя ДС на нём разного типа и подтвердить его
    - assert: Начинается режим ведения
    - do: |
       Не сбрасывая маршрут тап по иконке лупы в таббаре
       Тап по любой категории поиска (например, Где поесть)
    - assert: На Карте скрываются все ДС, расположенные не на маршруте

    - platforms:
        - geely
        - vaz
        - carsharing_t3
        - ios
        - nissan
        - android
        - t3am
    - tags:
        - assessors
        - mapkit_ready
    - integration_run:
        - mapkit


  Блок действий в карточке организации:
    - info: |
        - Кейс проходить на Android <5 и на ГУ
        Пользователь не авторизован.
    - do: |
        - Перейти на экран "Поиск" тапом по иконке Лупы в таббаре
        - Тап на любую категорию
    - assert: |
        **При включенном старом поиске:**
        - Произошел переход на экран карты
        - На карте отображаются пины результатов поиска
        - Снизу плавно выдвинулась карточка организации
    - do: Раскрыть карточку свайпом вверх
    - assert: |
        - Карточка раскрывается на всю высоту экрана
        - В карточке отображается блок кнопок. Отображаются все или несколько из списка: "Позвонить"/"Сайт"/"Добавить"/"Поделиться
        - В карточке может отображаться информация об организации: Адрес, Телефон, Категории, Режим работы
        - У нижнего края карточки отображаются две кнопки "Отсюда" и "Поехали"

    - platforms:
      - geely
      - carsharing_t3
      - nissan
      - android
      - t3am
    - tags:
        - assessors
    - testing:
      - acceptance_navi


  Категория поиска "Полигон для землетрясений" для Турции:
    - description: |
        - Кейс проходить на Android <5
        Проверить отображение иконки “Полигон для землетрясений” в Категориях в окне Поиск
        Внешний вид значка:
        ![Полигон для землетрясений](https://jing.yandex-team.ru/files/natalya-ovs/en_TR-1.jpg)
        Название иконки на локали tr_TR - Toplanma Alanları; на локалях ru_TR и en_TR - Assembly area
    - info: |
        **Условия появления значка:**
        - регион на девайсе - Турция (язык может быть любым)
        - местонахождение - Турция
        - С релиза Март 2.2020 включение эксперимента в dev settings не требуется.
        Установить любую локаль из указанных: en_TR, ru_TR, tr_TR
        Подменить координаты на любой город Турции. Запустить приложение. Выгрузить приложение. Запустить приложение повторно.
    - do: Зайти в категорию поиска, тапнув на иконку лупы в тапбаре
    - assert: Значок “Полигон для землетрясений” отображается среди других иконок
    - do: Тап по иконке “Полигон для землетрясений”
    - assert: |
        На карте появляются пины ( от 1 до нескольких штук).
        В некоторых регионах может выдаваться "Нет результатов" ( в этом случае рекомендуется сменить местоположение на другой город)
    - do: Тап по пину
    - assert: Открывается карточка организации, в категории указано “Пункт сбора населения во время чрезвычайных ситуаций”

    - platforms:
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi
    - integration_run:
      - search


  Экран «Поиск». Поиск с помощью голоса:
    - info: |
        Меню - Настройки - раздел "Звук" - Алиса - выкл
    - do: |
        - Перейти на экран "Поиск" (тап на иконку лупы в тапбаре)
        - Тап по кнопке голосового ввода
    - assert: |
        В нижней 1/3 экрана открывается панель Спичкита с текстом "Как вам помочь"
    - do: Проговорить любой адрес/место/название организации
    - assert: Распознанный адрес отображается в поисковой строке

    - platforms:
      - ios
      - android
    - integration_run:
      - speechkit
      - mapkit
      - search
    - tags:
      - not_suitable_for_farm
      - assessors
      - mapkit_ready


  Поиск по введенному адресу:
    - info: |
        - Кейс проходить на Android <5 и на ГУ
    - do: |
        Перейти на экран “Поиск” тапом по иконке Лупы в таббаре
        Тап на поле ввода “Поиск”
    - assert: |
        Курсор установлен на поисковую строку
        Появилась клавиатура
        Произошел автоматический переход на таб “История”
    - do: |
        - Ввести в поисковую строку любой адрес с улицей и домом
        - Тап на поисковый саджест (подсказку под поисковой строкой)
        Может понадобиться дополнительный тап по саджесту, если производится поиск по названию улицы без указания номера дома
    - assert: |
        - Происходит переход на экран “Карта”
        - На карте отображаются результаты поиска
        - Снизу открывается карточка результата поиска в среднем состоянии, с адресом и кнопкой “Поехали”
    - do: Зумить и двигать карту (не делая тап по карте)
    - assert: |
        - Отображение пина не меняется
        - Пин не пропадает
        - Карточка результата поиска не пропадает
    - do: Закрыть карточку результата поиска
    - assert: Карточка закрывается, на карте продолжают отображаться результаты поиска
    - do: Тап на кнопку сброса результатов (кнопка с символом Х)
    - assert: Результаты поиска исчезли с карты

    - platforms:
        - renault
        - geely
        - vaz
        - carsharing_t3
        - nissan
        - android
        - t3am
        - motrex
        - autochip
        - first_run_hu
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Поиск по несуществующему адресу:
    - do: |
        Перейти на экран “Поиск” тапом по иконке Лупы в таббаре
        Тап на поле ввода “Поиск”
    - assert: |
        Курсор установлен на поисковую строку
        Появилась клавиатура
        Произошел автоматический переход на таб “История”
    - do: Ввести в поисковую строку любой несуществующий адрес
    - do: Тап "Найти"
    - assert: Навигатор выдает сообщение “Ничего не найдено” или ищет объект с похожим названием

    - platforms:
        - renault
        - geely
        - vaz
        - carsharing_t3
        - ios
        - nissan
        - android
        - t3am
        - motrex
        - autochip
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_navi
    - integration_run:
        - mapkit


  SearchLib в Навигаторе. Проверка совместимости других либ. Установка поверх навигатора:
    - info: |
        Поисковая строка не установлена.
        Навигатор не запускался
    - do: |
        На ~3 запуск навигатора дождаться появление сплешскрина с предложением установить поисковую строку в панель управления
        Тап добавить
    - assert: бар отображается в шторке
    - do: Установить Поисковое приложение "Яндекс" (из стора)
    - assert: |
        Поменялся источник бара - ранее бар был из навигатора, сейчас из приложения "Яндекс".
        ######**_Примечание:_** чтобы проверить, из какого приложения бар, нажмите на бар и удерживайте до появления нужной вам информации

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  SearchLib в Навигаторе. Проверка совместимости других либ. Установка поверх поискового приложения Яндекса:
    - description: |
        Поисковая строка не установлена.
        Навигатор не установлен
    - do: |
        - Установить Поисковое приложение "Яндекс" (из стора)
        - Бар должен автоматически добавиться в шторку при первом запуске
    - assert: Бар должен автоматически добавиться в шторку при первом запуске
    - do: |
        - Установить Навигатор
        - Удалите Поисковое приложение "Яндекс"
    - assert: |
        Поменялся источник бара - ранее бар был из приложения "Яндекс", сейчас из навигатора.
        ######**_Примечание:_** чтобы проверить, из какого приложения бар, нажмите на бар и удерживайте до появления нужной вам информации

    - platforms:
      - android
    - tags:
        - assessors
    - integration_run:
      - searchlib


  Отображение категории "АЗС Яндекс.Заправки" в поиске:
    - description: Поиск АЗС, поддерживающих дистанционную оплату через приложение
    - do: |
        - Открыть экран поиска тапом на иконку лупы в таббаре
        - Выполнить последовательно поиск по категории "АЗС", а затем ""АЗС Яндекс.Заправки""
        - Перейти на таб "История"
    - assert: В истории отображается запрос "АЗС Яндекс.Заправки"
    - do: Тап на строку "АЗС Яндекс.Заправки" в истории поиска
    - assert: Выполняется поиск по АЗС, поддерживающим оплату в приложении

    - platforms:
      - ios
      - t3am
      - android
    - tags:
        - assessors
    - integration_run:
      - tanker_sdk


  Проверка поискового suggest в оффлайне:
    - description: |
        Цель:
        проверить suggest в режиме offline.
        - Проверку производить не только в авиарежиме, но и отключить доступ к сотовым данным и эмулировать плохое соединение.
        - При проверке на разных локалях необходимо проверять локализацию единиц измерений, улиц.
    - info: Скачать кеш Московской области
    - do: |
        - В телефоне включить авиарежим
        - Выгрузить Навигатор из памяти
        - Запустить Навигатор
        - Перейти на экран поиска (таб "История")
        - В поле для ввода поискового запроса ввести символ "А"
    - assert: |
        - Отображается список с suggest на основе кеша
        - Ниже поля для ввода поискового запроса отображается сообщение: "Результаты из сохраненных данных"
    - do: |
        - Выключить авиарежим
        - Тап на плашку(плашка тапабельна полность)
    - assert: |
        - Плашка об отсутствии интернета скрылась
        - Произошел перезапрос
        - Отображается список suggest, который сформирован online
    - do: |
        - Выключить доступ к интернету
        - В поле ввода ввести второй любой символ, например "б"
    - assert: |
        - Отображается список с suggest на основе кеша
        - Ниже поля для ввода поискового запроса отображается сообщение: “Результаты из сохраненных данных”
    - do: Тап на плашку “Результаты из сохраненных данных”
    - assert: |
        - Значок-кружек справа на плашке анимирован
        - Список саджеста не перерисовывается
    - do: Тап на "Отмена"
    - assert: |
        - Произошел переход на таб "История"
        - Плашка “Результаты из сохраненных данных” не отображается

    - platforms:
        - ios
        - android
    - tags:
        - assessors


  Отображение рекламной категории в поиске для Autochip:
    - info: |
        Местоположение крупнонаселенный город(например, Москва, СПБ)
    - do: Тап на иконку лупы в тапбаре
    - assert: |
        Открыт экран поиска
        Autochip: среди категорий присутствует рекламная категория "Дилеры ММС"
        Android: среди категорий не отображается рекламная категория "Дилеры ММС"
        Другие Navi On Tap: среди категорий не отображается рекламная категория "Дилеры ММС"
    - do: (Autochip) Тап на категорию "Дилеры ММС"
    - assert: |
        Выполнен поиск по дилерам Mitsubishi
        На карте появляются пины(от 1 до нескольких штук).
        В некоторых регионах может выдаваться "Нет результатов"(в этом случае рекомендуется сменить местоположение на другой город)

    - platforms:
        - android
        - autochip
        - first_run_hu


  Тестирование в офлайне - Поиск. Кеши не скачаны.:
    - info: Офлайн кеши не скачаны
    - do: |
        Выключить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-27%20в%2011.39.08.png){title=QR-код}

        `yandexnavi://add_exp?navi_feature_common_menu_manager=disabled`
    - do: Перезапустить приложение
    - do: |
        - Включить режим «В самолёте»
        - Тап "Поиск" в таббаре
        - Тап на категорию "Где поесть"
    - assert: |
        - Над СЕРПом отображается сообщение "Нет соединения с сетью"
        - в СЕРПе, где ожидались результаты поиска отображается сообщение "Искать без интернета можно только с загруженной картой", "Загрузить карту, когда появится сеть" и кнопка "Повторить поиск"
    - do: |
        - Выключить режим "В самолете". Дождаться подключения WiFi
        - Тап "Поиск" в таббаре
        - Тап на категорию “Где поесть”
    - assert: На карте отобржаются результаты поиска по категории

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_navi
    - integration_run:
        - mapkit


  Тестирование в офлайне - Поиск по категории через компонент CommonMenuManager. Кеши не скачаны.:
    - info: Офлайн кеши не скачаны
    - do: |
        Включить эксперимент через интент [collapsed-image](https://jing.yandex-team.ru/files/vik-borisenko/Снимок%20экрана%202022-06-27%20в%2011.35.27.png){title=QR-код}

        `yandexnavi://add_exp?navi_feature_common_menu_manager=enabled`
    - do: Перезапустить приложение для активации эксперимента
    - do: |
        - Включить режим «В самолёте»
        - Тап "Поиск" в таббаре
        - Тап на категорию "Где поесть"
    - assert: |
        - Над СЕРПом отображается сообщение "Нет соединения с сетью"
        - в СЕРПе, где ожидались результаты поиска отображается сообщение "Искать без интернета можно только с загруженной картой" и кнопка "Повторить поиск"
    - do: |
        - Выключить режим "В самолете". Дождаться подключения WiFi
        - Тап "Поиск" в таббаре
        - Тап на категорию “Где поесть”
    - assert: На карте отобржаются результаты поиска по категории

    - platforms:
        - ios
        - android
    - tags:
        - assessors
        - mapkit_ready
    - testing:
        - acceptance_navi
    - integration_run:
        - mapkit


  Отображение экрана поиска при отсутствии подходящего под запрос результата:
    - info: |
        Открыт главный экран приложения
    - do: Тап на иконку поиска в таббаре
    - assert: |
        Открылся экран поиска
        Вверху экрана отображается поле для ввода поискового запроса
    - do: Тап на строку поиска
    - assert: Отображается виртуальная клавиатура
    - do: Ввести в строку поиска несуществующий адрес
    - do: Тап на кнопку "Найти"
    - assert: |
        Отображается экран "Результаты поиска"
        На экране есть текст об отсутствии найденных данных
        (iOS) На экране отображаются кнопки "Добавить организацию" и "Добавить объект"
    - do: (iOS) Тап на кнопку "Добавить организацию"
    - assert: |
        Экран поиска закрылся
        Отображается экран добавления организации
    - do: (iOS) Закрыть экран добавления организации тапом на крестик
    - assert: Отображается экран результатов поиска
    - do: (iOS) Тап на кнопку  "Добавить объект"
    - assert: |
        Экран поиска закрылся
        Отображается экран добавления объекта

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Экран поиска, ошибка соединения:
    - info: |
        Открыт главный экран приложения
        Отсутствует интернет-соединение
    - do: Тап на таб Поиск
    - assert: Открыт экран поиска
    - do: Произвести поиск по любой организации
    - assert: |
        Открыт экран Результаты поиска
        Отображается сообщение "Нет соединения с интернетом"
        Отображается сообщение "Искать без интернета можно только с загруженной картой"
        Отображается кнопка Повторить

    - platforms:
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Новый поисковой слой:
    - info: |
        Девайс подключен к устройству для снятия логов
        Открыт главный экран приложения
    - do: Включить эксперимент `Developer settings - Search - New search layer - On`
    - do: Перезагрузить приложение с выгрузкой из памяти
    - assert: Открыт главный экран приложения
    - do: Открыть экран поиска
    - do: Произвести поиск любой организации
    - assert: |
        Происходит поиск организации
        В логах отображается событие search.pins-state
    - do: Тап на пин организации на карте
    - assert: |
        Открылась карточка организации
        В логах отображается событие search.pin-tap

    - platforms:
        - android
        - ios
    - testing:
        - acceptance_navi
    - tags:
        - metric
