components: geoproduct
testing:
  - regress

specs:
  Открытие карточки акции:
    - info: Открыта карточка геопродукта
    - do: Тап на рекламный текст Геопродукта
    - assert: |
        - Открывается карточка Акции с дополнительной информацией (некоторые карточки содержат кнопку “Перейти на сайт”)
        - В вертикальной ориентации:
        На смартфонах затемняется весь экран, помимо карточки
        На планшетах затемняется только карточка организации
        - В горизонтальной ориентации:
        Ширина карточки не изменилась
        На планшетах затемняется только карточка организации
        iOS: На смартфонах затемняется только карточка
        Android: На смартфонах затемняется весь экран
    - do: Несколько раз сменить ориентацию девайса
    - assert: |
        - Карточка акции не закрывается
        - UI карточки не ломается

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
      - assessors


  Закрытие браузера из карточки Акции геопродукта:
    - info: Открыта карточка геопродукта
    - do: |
        - Тап "Перейти на сайт"
        - Изменить ориентацию девайса
        - Закрыть браузер
    - assert: |
        - Открыта карточка Акции
        - В вертикальной ориентации:
        На смартфонах затемняется весь экран, помимо карточки
        На планшетах затемняется только карточка организации
        - В горизонтальной ориентации:
        Ширина карточки не изменилась
        На планшетах затемняется только карточка организации
        iOS: На смартфонах затемняется только карточка
        Android: На смартфонах затемняется весь экран

    - platforms:
      - ios
      - android
    - tags:
      - assessors


  Сворачивание приложения с открытой карточкой Акции:
    - info: |
        - Устройство в вертикальной ориентации
        - Открыта карточка геопродукта
    - do: Открыть карточку Акции
    - assert: |
        Открыта карточка Акции
        На смартфонах затемняется весь экран, помимо карточки
        На планшетах затемняется только карточка организации
    - do: |
        Свернуть приложение
        Изменить ориентацию устройства на горизонтальную
        Развернуть приложение
    - assert: |
        Ширина карточки не изменилась
        На планшетах затемняется только карточка организации
        iOS: На смартфонах затемняется только карточка
        Android: На смартфонах затемняется весь экран

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
      - assessors


  Показ директовой рекламы в геокарточке:
    - do: |
        - Cовершить поиск (например “пластиковые окна”)
        - Найти карточку с директовой рекламой
        - Тап по директовой рекламе
    - assert: Карточка организации открывается в максимальное состояние

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
      - assessors


  Открытие карточки акции (Зеленый пин, акция с ссылкой и без картинки):
    - info: |
        - Developer settings -> Ad -> Force datatesting environment - On
        - Перезапустить приложение
    - do: |
        - Выполнить поиск по: Сонковское РайПО, Россия, Тверская область, 28Н-1527
        - Выбрать из предложенных вариантов найденную организацию
    - assert: |
        - На карте отображается зеленый пин организации
        - Карточка организации раскрыта в среднем состоянии и содержит кликабельный рекламный текст
    - do: Несколько раз сменить ориентацию девайса
    - assert: |
        - Рекламный текст не скрывается
        - Общий вид рекламного текста в карточке организации не ломается
        - Кликабельность не теряется
    - do: Тап на рекламный текст Геопродукта
    - assert: |
        - Открывается карточка Акции, которая содержит текст акции и ссылку "Перейти на сайт" и кнопку Закрыть
        - В вертикальной ориентации:
        На смартфонах затемняется весь экран, помимо карточки
        На планшетах затемняется только карточка организации
        - В горизонтальной ориентации:
        Ширина карточки не изменилась
        На планшетах затемняется только карточка организации
        iOS: На смартфонах затемняется только карточка
        Android: На смартфонах затемняется весь экран

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
      - assessors


  Смена ориентации карточки акции (Зеленый пин, обычный текст акции в карточке организации, без карточки акции):
    - info: |
        - Developer settings -> Ad -> Force datatesting environment - On
        - Developer settings -> Misc -> Fast day & night switching - On
        - Перезапустить приложение
    - do: Выполнить поиск по Съестной, Россия, Москва, поселение Клёновское, село Клёново, Центральная улица, 3А/1
    - assert: |
        - На карте отображается зеленый пин организации
        - Карточка организации раскрыта в среднем состоянии и содержит нетапабельный рекламный текст
    - do: Несколько раз сменить ориентацию девайса
    - assert: |
        - Рекламный текст не скрывается
        - Общий вид рекламного текста в карточке организации не ломается

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Смены темы при открытой карточки акции (Зеленый пин, обычный текст акции в карточке организации, без карточки акции):
    - info: |
        - Developer settings -> Ad -> Force datatesting environment - On
        - Developer settings -> Misc -> Fast day & night switching - On
        - Перезапустить приложение
    - do: Выполнить поиск по адресу Съестной, Россия, Москва, поселение Клёновское, село Клёново, Центральная улица, 3А/1
    - assert: |
        - На карте отображается зеленый пин организации
        - Карточка организации раскрыта в среднем состоянии и содержит нетапабельный рекламный текст
    - do: Дождаться смены темы приложения
    - assert: Рекламный текст подстраивается под тему

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi
    - tags:
        - assessors


  Открытие карточки акции (Зеленый пин, акция без ссылки и с картинкой):
    - info: |
        - Developer settings -> Ad -> Force datatesting environment - On
        - Перезапустить приложение
    - do: |
        - Выполнить поиск по адресу: Продукты Россия, Новгородская область, Пестовский район, Быковское сельское поселение
        - Выбрать из предложенных организацию Продукты, деревня Быково
    - assert: |
        - На карте отображается зеленый пин организации
        - Карточка организации раскрыта в среднем состоянии и содержит кликабельный рекламный текст
    - do: Несколько раз сменить ориентацию девайса
    - assert: |
        - Рекламный текст не скрывается
        - Общий вид рекламного текста в карточке организации не ломается
        - Кликабельность не теряется
    - do: Тап на рекламный текст Геопродукта
    - assert: |
        - Открывается карточка Акции, которая содержит картинку, текст акции и кнопку Закрыть
        - Экран реагирует на открытие карточки акции следующим образом:
        - В вертикальной ориентации:
        На смартфонах затемняется весь экран, помимо карточки
        На планшетах затемняется только карточка организации
        - В горизонтальной ориентации:
        Ширина карточки не изменилась
        На планшетах затемняется только карточка организации
        iOS: На смартфонах затемняется только карточка
        Android: На смартфонах затемняется весь экран

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
      - assessors


  Открытие карточки акции (Зеленый пин, без других рекламных материалов):
    - info: |
        - Developer settings -> Ad -> Force datatesting environment - On
        - Developer settings -> Misc -> Fast day & night switching - On
        - Перезапустить приложение
    - do: Выполнить поиск по адресу Магазин продуктов, Россия, Тверская область, Лихославльский район, село Толмачи, Круговая улица, 5
    - assert: |
        - На карте отображается зеленый пин организации
        - Карточка организации раскрыта в среднем состоянии и не содержит других рекламных материалов
        - Из признаков геопродукта присутствует только зеленый пин на карте

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
        - assessors


  Открытие карточки акции (Обычный пин, витрина в карточке, текстовое объявление с дисклеймером, карточка акции с картинкой и без ссылки):
    - info: |
        - Developer settings -> Ad -> Force datatesting environment - On
        - Developer settings -> Misc -> Fast day & night switching - On
        - Перезапустить приложение
    - do: |
        - Выполнить поиск по адресу ЖК Уют Россия, Вологодская обл., Череповец, ул. Наседкина, 27А
        - Выбрать соответствующую организацию
    - assert: |
        - На карте отображается обычный пин организации
        - Карточка организации раскрыта в среднем состоянии и содержит текстовое объявление с дисклеймером "Проектная декларация на рекламируемом сайте" и возможностью открыть карточку акции.
    - do: Раскрыть карточку организации и проскроллить ее вниз.
    - assert: |
        В карточке присутствует Витрина с тапабельными элементами:
        - Каталог всех товаров и услуг и (если в название товара завернута ссылка) товар из витрины (открывает браузер/сайт)
    - do: Открыть карточку Акции тапом по зеленому тексту.
    - assert: |
        - Открывается карточка акции с картинкой, текстом и кнопкой закрыть.
        - Экран реагирует на открытие карточки акции следующим образом:
        - В вертикальной ориентации:
        На смартфонах затемняется весь экран, помимо карточки
        На планшетах затемняется только карточка организации
        - В горизонтальной ориентации:
        Ширина карточки не изменилась
        На планшетах затемняется только карточка организации
        iOS: На смартфонах затемняется только карточка
        Android: На смартфонах затемняется весь экран

    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - tags:
      - assessors