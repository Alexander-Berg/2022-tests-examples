components: push
testing:
  - regress
integration_run:
  - push

specs:
  Пуш с диплинком отправленный через аппметрику:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        Для устройств на платформе iOS ID можно посмотреть, скачав на AppStore и запустив на устройстве приложение IDFA (например, https://apps.apple.com/ru/app/myidfa/id1099872451)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        Навигатор установлен и запущен несколько раз. 
        Выгружен из меню мультизадачности
    - do: |
        Отправить пуш с диплинком
        Тап на него
    - assert: Приложение открывается, выполняется отправленный диплинк

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi
    - integration_run:
        - app_metrica


  Пустой пуш отправленный через аппметрику, приложениие выгружено:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        Для устройств на платформе iOS ID можно посмотреть, скачав на AppStore и запустив на устройстве приложение IDFA (например, https://apps.apple.com/ru/app/myidfa/id1099872451)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        Навигатор установлен и запущен несколько раз.
    - do: |
        Выгрузить приложение из меню мультизадачности
        Отправить пустой пуш
        Тап на него
    - assert: Приложение открывается

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi
    - integration_run:
        - app_metrica


  Пуш с диплинком отправленный через аппметрику, приложениие свернуто:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        Для устройств на платформе iOS ID можно посмотреть, скачав на AppStore и запустив на устройстве приложение IDFA (например, https://apps.apple.com/ru/app/myidfa/id1099872451)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        Навигатор установлен и запущен несколько раз.
        Приложение свернуто
    - do: |
        Отправить пуш с диплинком
        Тап на него
    - assert: Приложение открывается, выполняется отправленный диплинк

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi
    - integration_run:
        - app_metrica


  Пустой пуш отправленный через аппметрику, приложениие свернуто:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        Для устройств на платформе iOS ID можно посмотреть, скачав на AppStore и запустив на устройстве приложение IDFA (например, https://apps.apple.com/ru/app/myidfa/id1099872451)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        Навигатор установлен и запущен несколько раз.
        Выгружен из меню мультизадачности
    - do: |
        Свернуть приложение
        Отправить пустой пуш
        Тап на него
    - assert: |
        - Приложение открывается
        - Открывается последний используемый экран

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi
    - integration_run:
        - app_metrica


  Пуш с диплинком отправленный через аппметрику, приложениие активно:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        Для устройств на платформе iOS ID можно посмотреть, скачав на AppStore и запустив на устройстве приложение IDFA (например, https://apps.apple.com/ru/app/myidfa/id1099872451)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        Навигатор установлен и запущен несколько раз.
    - do: |
        Запустить навигатор
        Отправить пуш с диплинком
        Тап на него
    - assert: Выполняется отправленный диплинк

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi
    - integration_run:
        - app_metrica


  Пустой пуш отправленный через аппметрику, приложениие активно:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        Для устройств на платформе iOS ID можно посмотреть, скачав на AppStore и запустив на устройстве приложение IDFA (например, https://apps.apple.com/ru/app/myidfa/id1099872451)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        Навигатор установлен и запущен несколько раз.
    - do: |
        Запустить навигатор
        Отправить пустой пуш
    - assert: |
        - Пуш приходит
        - Навигатор никуда не переходит (ни в какое меню)

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi
    - integration_run:
        - app_metrica


  Невалидный диплинк в пуше отправленный через аппметрику, приложениие выгружено:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        Для устройств на платформе iOS ID можно посмотреть, скачав на AppStore и запустив на устройстве приложение IDFA (например, https://apps.apple.com/ru/app/myidfa/id1099872451)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        Навигатор установлен и запущен несколько раз.
        Свернуть навигатор
    - do: |
        Отправить пуш с невалидным диплинком
        Тап на пуш
    - assert: |
        - Приложение открывается
        - Открывается главный экран карты

    - platforms:
      - ios
      - android
    - tags:
        - assessors
    - testing:
      - acceptance_navi
    - integration_run:
      - app_metrica


  Проверка пункта меню отписки от пушей по темам:
    - description: |
        - По умолчанию все свитчеры включены
        - Настройка сохраняется для телефона
        - Настройка не зависит от аккаунта
        По умолчанию пользователь подписан на все
        На iOS настройки сохраняются после сворачивания, перезапуска приложения
        Логин/ разлогин не меняют настроек, нормально ли что настройки не сохраняются для аккаунта?
        На Android после перезахода в меню отписки снова включаются все свитчеры, даже если их перед этим выключить
    - info: Пользователь **не авторизован.**
    - do: |
        Перейти в раздел Настройки -> Уведомления. Произвести изменения в списке включенных нотификаций - отключить несколько оповещений.
    - assert: По тапу на свитчер сменяется отметка соответствующего оповещения.
    - do: Выйти по back из раздела _(для Android произвести 2проверки - с выходом по интерфейсной и системной кнопке)_ -> вернуться в раздел Уведомлений.
    - assert: Сохранено состояние свитчеров до выхода по back.
    - do: |
        Произвести изменения в списке включенных нотификаций - включить/отключить несколько.
        Закрыть экран по тапу на крестик.
        Проверить сохранность внесенных шагом ранее изменений.
    - assert: |
        Меню закрыто.
        Внесенные изменения сохранились.
    - do: |
        Произвести изменения в списке включенных нотификаций - включить/отключить несколько.
        Свернуть в мультизадачность Навигатор. ( для Android проверить по кнопке Back и Home)
    - assert: Приложение свернуто в мультизадачность.
    - do: Открыть приложение, проверить соответствие внесенным ранее изменениям.
    - assert: Внесенные изменения до сворачивания сохранены.
    - do: Произвести изменения в списке включенных нотификаций - включить/отключить несколько.
    - assert: Список включает соответствующие внесенным изменения.
    - do: Выгрузить приложение.
    - assert: Процесс Я.Навигатор остановлен.
    - do: Открыть приложение, проверить соответствие внесенным ранее изменениям.
    - assert: Внесенные изменения до сворачивания сохранены.
    - do: Провести авторизацию/выход из аккаунта.
    - assert: Логин/ разлогин не меняют настроек,  настройки не сохраняются для аккаунта.

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Дефолтное состояние настроек получения пушей:
    - info: |
        - Первый запуск приложения
        - В браузере подставить uuid в ссылку сервиса СУП http://mobile.yandex.net/psuh/v2/tags/<uuid> заменив <uuid>
    - do: В браузере открыть ссылку с uuid
    - assert: |
        - Есть информация об устройстве
        - Нет раздела c "name":"theme"
    - do: На устройстве Меню -> Настройки -> Уведомления
    - assert: |
        - Отображается экран Темы пуш-оповещений
        - Отображаются переключатели:
        * Новые голоса
        * Новые функции
        * Перекрытия
        * Ситуация на маршруте
        * Промоакции
        * Балл пробок
        * Парковка
        * Отзывы о посещенных местах
        * Яндекс.Заправки
        * Скидки и акции
        * Опросы
        - Все переключатели включены

    - platforms:
        - ios
        - android
    - tags:
        - assessors
    - testing:
        - acceptance_navi


  Проверка включения получения пушей:
    - info: |
        - В браузере подставить uuid в ссылку `http://mobile.yandex.net/psuh/v2/tags/uuid`, заменив uuid
    - do: |
        - Меню -> Настройки -> Уведомления
        - Выключить все свитчеры (если и так выключены, то включить и выключить)
        - Обновить странцу с сервисом СУП в браузере
    - assert: |
        - В сервисе в разделе theme отображаются параметры выключенных пушей:
        * navi_voiceover_off
        * navi_features_off
        * navi_roadblock_off
        * navi_route_state_off
        * navi_promo_off
        * navi_traffic_off
        * navi_parking_off
        * navi_org_reviews_off
        * navi_gas_stations_off
        * navi_promotions_off
        * navi_surveys_off
        * navi_status_of_feedback_off
        * navi_address_feedback_off
        * navi_org_feedback_off
    - do: На устройстве включить несколько тем, обновить страницу в браузере
    - assert: |
        - Свитчеры меняют состояние на ВКЛ
        - В сервисе теги меняются в соответствии с включенными темами:
        * Новые голоса navi_voiceover_on
        * Новые функции navi_features_on
        * Перекрытия navi_roadblock_on
        * Ситуация на маршруте navi_route_state_on
        * Промоакции navi_promo_on
        * Балл пробок navi_traffic_on
        * Парковка navi_parking_on
        * Отзывы о посещенных местах navi_org_reviews_on
        * Яндекс.Заправки navi_gas_stations_on
        * Скидки и акции navi_promotions_on
        * Опросы navi_surveys_on
        * Статус ваших исправлений status_of_feedback
        * Предложения внести правки address_feedback
        * Добавление информации о местах org_feedback

    - platforms:
        - ios
        - android
    - testing:
        - acceptance_navi


  Отправка MapsPush:
    - description: |
        MapsPush. Подробная инструкция по тестированию данного вида пушей https://wiki.yandex-team.ru/users/tiki/navi/test-plans/push-notifications/#stepsedinstvennyjjshag. 
        Они могут приходить с задержкой в пару минут.  Эти пуши используются для штрафов и парковок.
        Форма отправки пуша https://core-send-push.maps.n.yandex.ru
        ID пользователя можно посмотреть в адресе почтового ящика (цифра перед логином без pначка &, цифр может быть разное количество у разных аккаунтов) или в дебажной информации в навигаторе
    - do: |
        Отправить на устройство MapPush из формы https://core-send-push.maps.n.yandex.ru при условиях:
        Навигатор нужно тестировать в трех состояниях:
        - приложение запущено, на экране карта/поиск/закладки
        - приложение свернуто по кнопке back/home
        - приложение выключено (свайпом из списка активных приложений)
        Устройство при этом может быть в двух состояниях:
        - активное: экран разблокирован
        - в режиме ожидания: экран заблокирован
        Отдельно стоит протестировать случай, когда пользователь обновляется со старой версии навигатора, где он был залогинен, и первый запуск обновленного навигатора происходит без сети. Тогда пуши могут начать приходить не сразу после включения сети, а после сворачивания-разворачивания навигатора.
    - assert: Во всех случаях Push приходит.

    - platforms:
      - ios
      - android


  Тестирование  тихих пушей  (silent-пуш) отправленных через метрику:
    - description: |
        **Цель:** Проверить работу навигатора после принятия пуш-уведомлений
        **Инструкция по отправке пушей:** https://wiki.yandex-team.ru/JandeksKarty/%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D0%BD%D0%B3/Navi/%D0%9A%D0%B0%D0%BA-%D0%BF%D0%BE%D1%81%D0%BB%D0%B0%D1%82%D1%8C-%D0%BF%D1%83%D1%88%D0%B8-%D0%B8%D0%B7-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-appmetrica.yandex.ru/
        За доступом (или пушами) можно обратиться к Андрею Трошину (@MapBuH)
        Для отправки пушей необходимо узнать:
        - Рекламный идентификатор:
        Для устройств на платформе Android ID можно посмотреть на самом девайсе: Настройки -> Google -> Реклама -> Ваш рекламный идентификатор)
        - UUID устройства (можно посмотреть в дебаг-инфо)
    - info: |
        - Навигатор установлен и запущен несколько раз. 
        - Выгружен из меню мультизадачности
        - Девайс подключен к устройству для просмотра логов
        **Проверять на debug сборках**
    - do: |
        Отправить тихий пуш с диплинком из AppMetric:
        - В поле доп.информации написать что-то подобное:
        `{ "yandexnavi.silent": "yandexnavi://show_ui/map" }` (скобки фигурные так же вписывать)
        - Выбрать/прописать любой диплинк
        - Тап кнопку "Протестировать"
    - assert: |
        В логах приходит событие типа:
        SilentPushReceiver: Received silent push:yandexnavi://show_ui/map*

    - platforms:
      - android
    - tags:
        - assessors
        - metric
    - testing:
      - acceptance_navi
    - integration_run:
      - app_metrica


  Проверка переключения свитчеров отписки от пушей:
    - description: |
        - По умолчанию все свитчеры включены
        - Настройка сохраняется для телефона
        - Настройка не зависит от аккаунта
        По умолчанию пользователь подписан на все
        На iOS настройки сохраняются после сворачивания, перезапуска приложения
        Логин/ разлогин не меняют настроек, нормально ли что настройки не сохраняются для аккаунта?
        На Android после перезахода в меню отписки снова включаются все свитчеры, даже если их перед этим выключить
    - info: Пользователь **не авторизован.**
    - do: Перейти в раздел Настройки -> Уведомления.
    - assert: Включены **все оповещения.**
    - do: |
        Отключить несколько оповещений
    - assert: По тапу на свитчер **сменяется отметка соответствующего оповещения.**
    - do: Включить/отключить несколько оповещений
    - assert: По тапу на свитчер сменяется отметка соответствующего оповещения

    - platforms:
      - ios
      - android
    - tags:
        - assessors


  Обработка диплинка, по которому было открыто приложение при UI диплинке интроскрина на IOS:
    - info: |
        - В данном кейсе проверяется обработка диплинка, по которому было открыто приложение, когда имеется интроскрин, содержащий UI диплинк. К таким интроскринам относятся, например, музыкальный и заправочный интроскрины, которые появляются обычно на второй запуск навигатора.
        - Свежая сборка Навигатора. Приложение ни разу не запускалось.
    - do: |
        - Запустить Навигатор.
        - Пройти интроскрины первого запуска.
    - assert: |
        - Открывается карта навигатора.
        - Креши отсутствуют.
    - do: |
        - Выгрузить Навигатор.
        - Не запуская приложение, пробросить интент, типа yandexnavi://add_exp?navi_ad_product_cooldown_zero_speed_banner=60
    - assert: |
        - Запускается Навигатор.
        - Отображаются интроскрины второго запуска.
    - do: |
        - Дождаться интроскрин Музыка в Навигаторе.
        - Тап по кнопке Слушать (в нее вшит UI: yandexnavi://show_ui/music).
    - assert: |
        - Открывается каталог Яндекс.Музыка.
        - Интроскрин обработки интента не появляется.
    - do: |
        - Перезапустить навигатор.
    - assert: |
        - Интроскрин обработки интента не появляется.

    - platforms:
       - ios
    - tags:
        - assessors


  Обработка диплинка, по которому было открыто приложение при отсутствии диплинка в интроскрине на IOS:
    - info: |
        - В данном кейсе проверяется обработка диплинка, по которому было открыто приложение, когда имеются интроскрины, несодержащие UI диплинк.
        - Свежая сборка Навигатора. Приложение ни разу не запускалось.
    - do: |
        - Не запуская приложение, пробросить интент, типа yandexnavi://add_exp?navi_ad_product_cooldown_zero_speed_banner=60
    - assert: |
        - Запускается навигатор
        - Показываются интроскрины первого запуска.
    - do: |
        - Пройти интроскрины первого запуска
    - assert: |
        - Перед открытием карты отображается интроскрин обработки интента.
        - Открывается карта навигатора.

    - platforms:
      - ios
    - tags:
        - assessors


  Локальный пуш в настройках выбора дефолтного поиска в Safari:
    - info: |
        Включить `Dev.Settings -> Misc -> Unlimit intents enabled -> On`
        Второй и более запуск навигатора
    - do: Пробросить интент `yandexnavi://open_url_with_fallback?url=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=%D0%90%20%D1%82%D0%B5%D0%BF%D0%B5%D1%80%D1%8C%20%D0%B2%D1%8B%D0%B1%D0%B5%D1%80%D0%B8%D1%82%D0%B5%20%D0%AF%D0%BD%D0%B4%D0%B5%D0%BA%D1%81&local_notification_text=%D0%9A%D0%B0%D0%BA%D0%BE%D0%B9-%D1%82%D0%BE%20%D1%82%D0%B5%D0%BA%D1%81%D1%82&client=141&signature=qCbEUSaloAPk8aActGc3VANUzaEDnapijzdS%2Fmk5XvqAYKKXkMKuiyQhplOPvMAFFsWo5UAcwP%2Bu8LNuA2Yfiw%3D%3D`
    - assert: Открываются настройки "Поисковая машина", через несколько секунд отображается пуш уведомление "А теперь выберите Яндекс" и второй строкой "какой то текст"
    - do: Закрыть настройки. Пробросить интент `yandexnavi://open_url_with_fallback?url=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=%D0%90%20%D1%82%D0%B5%D0%BF%D0%B5%D1%80%D1%8C%20%D0%B2%D1%8B%D0%B1%D0%B5%D1%80%D0%B8%D1%82%D0%B5%20%D0%AF%D0%BD%D0%B4%D0%B5%D0%BA%D1%81&client=141&signature=tERr4J6TYBv%2BXezztgedsdgzJkp4aoTJA5muahFrS3I82sdm1Wyn2G4zAtcUEHzF%2BHrle6na%2FePGtrRlZuDjRg%3D%3D`
    - assert: Открываются настройки "Поисковая машина", через несколько секунд отображается пуш уведомление "А теперь выберите Яндекс", вторая строка отсутствует

    - platforms:
        - ios
    - tags:
        - assessors


  Локальный пуш в настройках выбора дефолтного поиска в Safari(через universal link):
    - description: |
        Если при переходе по ссылке из заметок, открылись настройки и показался пуш, будет считаться ожидаемым поведением. Так как не произошла дополнительная кодировка. При дополнительной кодировке, просто открывается приложение Навигатор
    - info: |
        Не первый запуск навигатора
        Послать 2 ссылки себе на почту:
        https://yandex.ru/promo/settings/open_url?uri=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=А%20теперь%20выберите%20Яндекс&client=141&navi_signature=tERr4J6TYBv%2BXezztgedsdgzJkp4aoTJA5muahFrS3I82sdm1Wyn2G4zAtcUEHzF%2BHrle6na%2FePGtrRlZuDjRg%3D%3D
        https://yandex.com/promo/settings/open_url?uri=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=А%20теперь%20выберите%20Яндекс&client=141&navi_signature=tERr4J6TYBv%2BXezztgedsdgzJkp4aoTJA5muahFrS3I82sdm1Wyn2G4zAtcUEHzF%2BHrle6na%2FePGtrRlZuDjRg%3D%3D
    - do: Перейти с почты по ссылке `https://yandex.ru/promo/settings/open_url?uri=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=А%20теперь%20выберите%20Яндекс&client=141&navi_signature=tERr4J6TYBv%2BXezztgedsdgzJkp4aoTJA5muahFrS3I82sdm1Wyn2G4zAtcUEHzF%2BHrle6na%2FePGtrRlZuDjRg%3D%3D`
    - assert: Открываются настройки "Поисковая машина", через несколько секунд отображается пуш уведомление "А теперь выберите Яндекс"
    - do: Закрыть настройки. Перейти с почты по ссылке `https://yandex.com/promo/settings/open_url?uri=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=А%20теперь%20выберите%20Яндекс&client=141&navi_signature=tERr4J6TYBv%2BXezztgedsdgzJkp4aoTJA5muahFrS3I82sdm1Wyn2G4zAtcUEHzF%2BHrle6na%2FePGtrRlZuDjRg%3D%3D`
    - assert: Открываются настройки "Поисковая машина", через несколько секунд отображается пуш уведомление "А теперь выберите Яндекс"
    - do: Перейти с заметок по ссылке `https://yandex.ru/promo/settings/open_url?uri=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=А%20теперь%20выберите%20Яндекс&client=141&navi_signature=tERr4J6TYBv%2BXezztgedsdgzJkp4aoTJA5muahFrS3I82sdm1Wyn2G4zAtcUEHzF%2BHrle6na%2FePGtrRlZuDjRg%3D%3D`
    - assert: |
        Открывается приложение "Навигатор"
    - do: Закрыть настройки. Перейти с заметок по ссылке `https://yandex.com/promo/settings/open_url?uri=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING&local_notification_title=А%20теперь%20выберите%20Яндекс&client=141&navi_signature=tERr4J6TYBv%2BXezztgedsdgzJkp4aoTJA5muahFrS3I82sdm1Wyn2G4zAtcUEHzF%2BHrle6na%2FePGtrRlZuDjRg%3D%3D`
    - assert: |
        Открывается приложение "Навигатор"

    - platforms:
        - ios
    - tags:
        - assessors