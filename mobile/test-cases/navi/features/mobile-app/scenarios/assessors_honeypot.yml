components: assessors_ch
testing:
  - regress

specs:
## проверяем что асессор подменил местоположение, так как не всегда это условие выполняется и заводится баг
  Новые тексты на заправочном сплешскрине:
    - info: |
        Местоположение пользователя не находится в одном из списка городе:
        MOSCOW,
        SAINT_PETERSBURG,
        NIZHNY_NOVGOROD,
        CHELYABINSK,
        OMSK,
        VORONEZH,
        TYUMEN,
        RYAZAN,
        MAHACHKALA,
        KIROV,
        BRYANSK,
        MAGNITOGORSK,
        SURGUT,
        VLADIMIR
    - do: Перезагрузить приложение несколько раз
    - assert: Заправочный сплешскрин не отображается
    - do: |
        Подменить местоположение на один из указанных выше городов
        Запустить навигатор
    - assert: |
        При загрузке отображается заправочный сплешскрин с одной из надписей:
        - Заправляйтесь, в машине
        - Заправляйтесь без очередей и людей
        - Заправляйтесь онлайн
        - Заправляться из машины
    - do: |
        Подменить местоположение на любой город, которого нет в списке выше
        Запустить навигатор
    - assert: При загрузке не отображается заправочный интроскрин
    - do: |
        Подменить местоположение на любой другой город из списка
        Запустить навигатор
    - assert: |
        При загрузке отображается заправочный сплешскрин с одной из надписей:
        - Заправляйтесь, в машине
        - Заправляйтесь без очередей и людей
        - Заправляйтесь онлайн
        - Заправляться из машины

    - tags:
      - assessors
    - platforms:
      - ios
      - android
    - casetype:
      - ch


## тут проверяем что асессор перезапустил после указывания настроек приложение, и честно прокинул все интенты
  Проверка UI у GeoAd в обзоре:
    - info: |
        Для тестирования нужно в настройках сделать следующее:
        - Меню - Настройки - Developer Settings - Misc - Debug config enable - On
        - Выключить эксперименты на такси:
            - Dev. Set. -> Ad -> Show taxi ad route at second position -> Off
            - Dev. Set. -> Ad -> Show taxi ad route at third position -> Off
            - Dev. Set. -> Ad -> Show taxi ad route setting -> Off
        - Перейти в настройку: Dev. Set. -> Ad -> Setup pages ids
        - Занулить все категории тапом на кнопку "Сбросить все значения в null"
        - DevSettings -> Misc -> Fast day&night switching вкл (для автоматической смены дня/ночи)
        А так же прокинуть интенты:
        - `yandexnavi://add_exp?navi_overview_ads_priority_for_RU=overview_geo_ad,brand_route,via` - интент приоритета геоэда над БМ и Бураном.
        - `yandexnavi://add_exp?navi_ads_overview_ad_queue=geo_ad_location,geo_ad_route,direct,yas` - интент приоритета источника рекламы
        - `yandexnavi://add_exp?navi_ad_product_cooldown_overview_banner=60` - кулдаун в сек
        *Для Android использовать команду: `adb shell am start -a android.intent.action.VIEW -d “НУЖНЫЙ ИНТЕНТ”`*
        Перезапустить навигатор.
        Девайс в портретной ориентации.
    - do: Построить любой маршрут с начальной точкой в РФ
    - assert: |
        Над карточкой обзора возникает OverviewGeoAd - представлен карточкой с баннером в виде картинки в хедере с закругленными верхними краями и указанием “Реклама”.
        В зависимости от типа должен содержать заголовок(допускается неполное отображение)/дисклеймер/текст карточки фиксированного размера.
    - do: |
        Раскрыть карточку.
        Проскроллить весь текст, просмотреть карточку полностью.
    - assert: |
        Карточка представлена:
        - Баннером 
        - Текстом акции/предложения и др.
        - Контролами (экшены) в виде ссылок( обернутых текстом) - кнопки “Телефон”, “Найти на карте”,“Сохранить”
        - Дисклеймером.
        - в зависимости от кампании данных составляющих может не быть либо представлены не все.
    - do: |
        Тап по  имеющимся контролам карточки
        Наполненность карточки зависит от типа рекламной компании - проверки отображения и взаимодействие с контролами “Позвонить”/“Найти на карте”/“Сохранить”/“Посмотреть”/“На сайт” проверяется при наличии таковых.
    - assert: |
        По тапу на:
        **Позвонить** - производится переход в приложение для звонков. Номер набран и соответствует указанному в карточке. Приложение не крашится;
        **Найти на карте** - происходит поиск, маршрут (если был) не сбрасывается, по результату маршрута на карте отображается результат поиска в виде пинов;
        **Сохранить** - предложение сохраняется, кнопка сменяется на кнопку “Посмотреть”;
        **На сайт** - происходит переход на сайт.
        **Закрыть** - баннер закрывается.
    - do: |
        Сбросить маршрут
        Повернуть девайс в альбомную ориентацию
        Построить любой маршрут с начальной точкой в РФ
    - assert: |
        Над карточкой обзора возникает OverviewGeoAd - представлен карточкой с баннером в виде картинки в хедере с закругленными верхними краями и указанием “Реклама”.
        В зависимости от типа должен содержать заголовок(допускается неполное отображение)/дисклеймер/текст карточки фиксированного размера.
    - do: |
        Раскрыть карточку.
        Проскроллить весь текст, просмотреть карточку полностью.
    - assert: |
        Карточка представлена:
        - Баннером
        - Текстом акции/предложения и др.
        - Контролами (экшены) в виде ссылок( обернутых текстом) - кнопки “Телефон”, “Найти на карте”,“Сохранить”
        - Дисклеймером.
        - в зависимости от кампании данных составляющих может не быть либо представлены не все.
    - do: |
        При раскрытой карточке произвести поворот устройства с альбомной в портретную ориентацию и обратно.
    - assert: |
        Поведение GeoAd не меняется в зависимости от положения устройства
        При смене ориентации устройства отображение GeoAd не меняется, верстка "Не едет".
        Взаимодействие с GeoAd также не меняется: Контролы (экшены) в виде ссылок( обернутых текстом) - (например, кнопки “Телефон”, “Найти на карте”,“Сохранить”) работоспособные.

    - tags:
      - assessors
    - platforms:
      - ios
      - android
    - testing:
      - acceptance_navi
    - casetype:
      - ch