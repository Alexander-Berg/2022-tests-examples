// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM mbt/test/regular-test-base.ts >>>

package com.yandex.xplat.testopithecus.common

import com.yandex.xplat.common.*
import com.yandex.xplat.eventus.common.*
import com.yandex.xplat.eventus.*

public abstract class RegularTestBase<T> protected constructor(description: String, val accountType: AccountType2, suite: YSArray<TestSuite> = mutableListOf(TestSuite.Fixed)): MBTTest<T>(description, suite) {
    open override fun requiredAccounts(): YSArray<AccountType2> {
        return mutableListOf(this.accountType)
    }

    open override fun prepareAccounts(preparers: YSArray<T>): Unit {
        if (preparers.size != 1) {
            throw Error("Тесты на базе RegularTestBase должны наливать ровно один аккаунт!")
        }
        this.prepareAccount(preparers[0])
    }

    open override fun scenario(accounts: YSArray<UserAccount>, _model: AppModel?, _supportedFeatures: YSArray<FeatureID>): TestPlan {
        if (accounts.size != 1) {
            throw Error("Тесты на базе RegularTestBase должны использовать ровно один аккаунт!")
        }
        return this.regularScenario(accounts[0])
    }

    abstract fun regularScenario(account: UserAccount): TestPlan
    abstract fun prepareAccount(preparer: T): Unit
}

