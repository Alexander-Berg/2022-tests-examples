// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM mbt/walk/limits/personal-action-limits.ts >>>

package com.yandex.xplat.testopithecus.common

import com.yandex.xplat.common.*
import com.yandex.xplat.eventus.common.*
import com.yandex.xplat.eventus.*

public open class PersonalActionLimits(private var totalLimit: Int): ActionLimitsStrategy {
    private var personalLimits: YSMap<MBTActionType, Int> = mutableMapOf<MBTActionType, Int>()
    open fun setLimit(action: MBTActionType, limit: Int): PersonalActionLimits {
        this.personalLimits.set(action, limit)
        return this
    }

    open override fun check(actions: Stack<MBTAction>): Boolean {
        if (this.totalLimit <= actions.size()) {
            return false
        }
        for (actionType in this.personalLimits.keys()) {
            var count: Int = 0
            for (i in (0 until actions.size() step 1)) {
                if (actions.`get`(i).getActionType() == actionType) {
                    count += 1
                }
            }
            if (count >= this.personalLimits.`get`(actionType)!!) {
                return false
            }
        }
        return true
    }

}

