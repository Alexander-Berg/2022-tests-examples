// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM mail/backend/labeled-backend.ts >>>

import Foundation

open class MarkableImportantBackend: MarkableImportant {
  private var mailListDisplayBackend: MessageListDisplayBackend
  private var clientsHandler: MailboxClientHandler
  public init(_ mailListDisplayBackend: MessageListDisplayBackend, _ clientsHandler: MailboxClientHandler) {
    self.mailListDisplayBackend = mailListDisplayBackend
    self.clientsHandler = clientsHandler
  }

  @discardableResult
  open func markAsImportant(_ order: Int32) throws -> Void {
    let tid = self.mailListDisplayBackend.getThreadMessage(order).tid!
    let lid = self.clientsHandler.getCurrentClient().getLabelList().filter({
      (label) in
      label.type == LabelType.important
    })[0].lid
    self.clientsHandler.getCurrentClient().markThreadWithLabel(tid, lid)
  }

  @discardableResult
  open func markAsUnimportant(_ order: Int32) throws -> Void {
    let tid = self.mailListDisplayBackend.getThreadMessage(order).tid!
    let lid = self.clientsHandler.getCurrentClient().getLabelList().filter({
      (label) in
      label.type == LabelType.important
    })[0].lid
    self.clientsHandler.getCurrentClient().unmarkThreadWithLabel(tid, lid)
  }

}

