// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM mail/backend/markable-backend.ts >>>

import Foundation

open class MarkableBackend: MarkableRead {
  private var mailListDisplayBackend: MessageListDisplayBackend
  private var clientsHandler: MailboxClientHandler
  public init(_ mailListDisplayBackend: MessageListDisplayBackend, _ clientsHandler: MailboxClientHandler) {
    self.mailListDisplayBackend = mailListDisplayBackend
    self.clientsHandler = clientsHandler
  }

  @discardableResult
  open func markAsRead(_ order: Int32) throws -> Void {
    let message = self.mailListDisplayBackend.getThreadMessage(order)
    if message.tid != nil {
      self.clientsHandler.getCurrentClient().markThreadAsRead(message.tid!)
    } else {
      self.clientsHandler.getCurrentClient().markMessageAsRead(message.mid)
    }
  }

  @discardableResult
  open func markAsUnread(_ order: Int32) throws -> Void {
    let message = self.mailListDisplayBackend.getThreadMessage(order)
    if message.tid != nil {
      self.clientsHandler.getCurrentClient().markThreadAsUnread(message.tid!)
    } else {
      self.clientsHandler.getCurrentClient().markMessageAsUnread(message.mid)
    }
  }

}

