// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM tests/search-tests.ts >>>

import Foundation

open class MarkAsReadInSearch: RegularYandexMailTestBase {
  public init() {
    super.init("Search. Пометка свайпом письма прочитанным в поисковой выдаче")
  }

  open override func prepareAccount(_ mailbox: MailboxBuilder) -> Void {
    mailbox.nextMessage("subj1").nextMessage("subj2")
  }

  @discardableResult
  open override func testScenario(_ account: UserAccount) -> TestPlan {
    return self.yandexLogin(account).then(OpenSearchAction()).then(SearchAllMessagesAction()).then(MarkAsRead(0))
  }

  open override func setupSettings(_ settings: TestSettings) -> Void {
    settings.androidCase(3462).iosCase(1207)
  }

}

open class SearchMessageListViewInCompactModeTest: RegularYandexMailTestBase {
  public init() {
    super.init("Search. Отображение писем в поиске в компактном режиме")
  }

  open override func setupSettings(_ settings: TestSettings) -> Void {
    settings.androidCase(3462).iosCase(5807).ignoreOn(MBTPlatform.Android)
  }

  open override func prepareAccount(_ mailbox: MailboxBuilder) -> Void {
    mailbox.nextMessage("subj1").nextMessage("subj2").nextMessage("subj3").nextMessage("subj4")
  }

  @discardableResult
  open override func testScenario(_ account: UserAccount) -> TestPlan {
    return self.yandexLogin(account).then(OpenFolderListAction()).then(OpenSettingsAction()).then(OpenGeneralSettingsAction()).then(TurnOnCompactMode()).then(CloseGeneralSettingsAction()).then(CloseRootSettings()).then(GoToFolderAction(DefaultFolderName.inbox)).then(OpenSearchAction()).then(SearchAllMessagesAction()).then(AssertSnapshotAction(self.description))
  }

}

open class SearchAndOpenMessage: RegularYandexMailTestBase {
  public init() {
    super.init("Search. Открытие письма по запросу")
  }

  open override func setupSettings(_ settings: TestSettings) -> Void {
    settings.iosCase(612).androidCase(7403)
  }

  open override func prepareAccount(_ mailbox: MailboxBuilder) -> Void {
    mailbox.nextMessage("subj1")
  }

  @discardableResult
  open override func testScenario(_ account: UserAccount) -> TestPlan {
    return self.yandexLogin(account).then(OpenSearchAction()).then(SearchAllMessagesAction()).then(OpenMessageAction(0)).then(MessageViewBackToMailListAction())
  }

}

open class SearchAndOpenMessageIn2Pane: RegularYandexMailTestBase {
  public init() {
    super.init("Search. 2Pane. Поиск письма по запросу и открытие на просмотр")
  }

  open override func setupSettings(_ settings: TestSettings) -> Void {
    settings.iosCase(609).androidCase(7400).setTags(YSArray(DeviceType.Tab))
  }

  open override func prepareAccount(_ mailbox: MailboxBuilder) -> Void {
    mailbox.nextMessage("subj1")
  }

  @discardableResult
  open override func testScenario(_ account: UserAccount) -> TestPlan {
    return self.yandexLogin(account).then(RotateToLandscape()).then(OpenSearchAction()).then(SearchAllMessagesAction()).then(OpenMessageAction(0)).then(CloseSearchAction())
  }

}

