// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM tests/abstract-mail-tests.ts >>>

import Foundation

open class RegularYandexMailTestBase: RegularYandexTestBase<MailboxBuilder> {
  public init(_ description: String) {
    super.init(description)
  }

  @discardableResult
  open override func regularScenario(_ account: UserAccount) -> TestPlan {
    self.setDeviceTypeInModel()
    return self.testScenario(account)
  }

  @discardableResult
  open func testScenario(_ account: UserAccount) -> TestPlan {
    fatalError("Must be overridden in subclasses")
  }

  open override func prepareAccount(_ preparer: MailboxBuilder) -> Void {
    fatalError("Must be overridden in subclasses")
  }

  private func setDeviceTypeInModel() -> Void {
    let settings = TestSettings()
    self.setupSettings(settings)
    DeviceTypeModel.instance.setDeviceType(settings.hasTag(DeviceType.Tab) ? DeviceType.Tab : DeviceType.Phone)
  }

  @discardableResult
  open func yandexLogin(_ account: UserAccount) -> TestPlan {
    return self.login(account, AccountType2.Yandex)
  }

  @discardableResult
  open func login(_ account: UserAccount, _ accountType: AccountType2) -> TestPlan {
    return TestPlan.empty().then(loginAction(account, accountType))
  }

}

