{
    "core_tariff.tariff_events.test_calculation.test_aggregate_rounding": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 8,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 8,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 8,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 8,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "5",
                "ServiceID": 7,
                "UID": "test_run@7@666@5@666@0@4@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 8,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "6",
                "ServiceID": 7,
                "UID": "test_run@7@666@6@666@0@5@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 8,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "7",
                "ServiceID": 7,
                "UID": "test_run@7@666@7@666@0@6@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 8,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_calculation.test_aggregate_rounding_overflow": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "5",
                "ServiceID": 7,
                "UID": "test_run@7@666@5@666@0@4@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "6",
                "ServiceID": 7,
                "UID": "test_run@7@666@6@666@0@5@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "7",
                "ServiceID": 7,
                "UID": "test_run@7@666@7@666@0@6@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "8",
                "ServiceID": 7,
                "UID": "test_run@7@666@8@666@0@7@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "9",
                "ServiceID": 7,
                "UID": "test_run@7@666@9@666@0@8@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "10",
                "ServiceID": 7,
                "UID": "test_run@7@666@10@666@0@9@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "11",
                "ServiceID": 7,
                "UID": "test_run@7@666@11@666@0@10@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "12",
                "ServiceID": 7,
                "UID": "test_run@7@666@12@666@0@11@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "13",
                "ServiceID": 7,
                "UID": "test_run@7@666@13@666@0@12@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "14",
                "ServiceID": 7,
                "UID": "test_run@7@666@14@666@0@13@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "15",
                "ServiceID": 7,
                "UID": "test_run@7@666@15@666@0@14@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "16",
                "ServiceID": 7,
                "UID": "test_run@7@666@16@666@0@15@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "17",
                "ServiceID": 7,
                "UID": "test_run@7@666@17@666@0@16@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "18",
                "ServiceID": 7,
                "UID": "test_run@7@666@18@666@0@17@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "19",
                "ServiceID": 7,
                "UID": "test_run@7@666@19@666@0@18@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "20",
                "ServiceID": 7,
                "UID": "test_run@7@666@20@666@0@19@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "21",
                "ServiceID": 7,
                "UID": "test_run@7@666@21@666@0@20@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "22",
                "ServiceID": 7,
                "UID": "test_run@7@666@22@666@0@21@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "23",
                "ServiceID": 7,
                "UID": "test_run@7@666@23@666@0@22@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "24",
                "ServiceID": 7,
                "UID": "test_run@7@666@24@666@0@23@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "25",
                "ServiceID": 7,
                "UID": "test_run@7@666@25@666@0@24@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": -1.0,
                "tariffed_sum": -0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "26",
                "ServiceID": 7,
                "UID": "test_run@7@666@26@666@0@25@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "27",
                "ServiceID": 7,
                "UID": "test_run@7@666@27@666@0@26@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "28",
                "ServiceID": 7,
                "UID": "test_run@7@666@28@666@0@27@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "29",
                "ServiceID": 7,
                "UID": "test_run@7@666@29@666@0@28@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "30",
                "ServiceID": 7,
                "UID": "test_run@7@666@30@666@0@29@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "31",
                "ServiceID": 7,
                "UID": "test_run@7@666@31@666@0@30@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "32",
                "ServiceID": 7,
                "UID": "test_run@7@666@32@666@0@31@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "33",
                "ServiceID": 7,
                "UID": "test_run@7@666@33@666@0@32@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "34",
                "ServiceID": 7,
                "UID": "test_run@7@666@34@666@0@33@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "35",
                "ServiceID": 7,
                "UID": "test_run@7@666@35@666@0@34@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "36",
                "ServiceID": 7,
                "UID": "test_run@7@666@36@666@0@35@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.15
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "37",
                "ServiceID": 7,
                "UID": "test_run@7@666@37@666@0@36@1",
                "coeff_qty": 7.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 38,
                "tariffed_qty": 1.0,
                "tariffed_sum": 0.14
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_calculation.test_broken_price": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 7.111,
                "tariffed_sum": 7.11
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 7.222,
                "tariffed_sum": 7.23
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 6.021,
                "tariffed_sum": 6.02
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_calculation.test_broken_price_proportion": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 3.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": 10.01,
                "tariffed_sum": 3.33
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 3.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": 66655.99,
                "tariffed_sum": 22218.66
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 3.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": -66655.99,
                "tariffed_sum": -22218.66
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_calculation.test_broken_proportion": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": 1.001,
                "tariffed_sum": 1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": 100000.0,
                "tariffed_sum": 100000.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": -100000.0,
                "tariffed_sum": -100000.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_calculation.test_inaccurate_sum_calculation": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 12000.0,
                "coeff_sum": 120.25,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": 12000.0,
                "tariffed_sum": 120.25
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 12000.0,
                "coeff_sum": 120.25,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": 3600.0,
                "tariffed_sum": 36.08
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 12000.0,
                "coeff_sum": 120.25,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": 3360.0,
                "tariffed_sum": 33.67
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 12000.0,
                "coeff_sum": 120.25,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": 3360.0,
                "tariffed_sum": 33.67
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "5",
                "ServiceID": 7,
                "UID": "test_run@7@666@5@666@0@4@1",
                "coeff_qty": 12000.0,
                "coeff_sum": 120.25,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": 1680.0,
                "tariffed_sum": 16.83
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_eq": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 3,
                "tariffed_qty": 8.0,
                "tariffed_sum": 8.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_full_untariffed": {
        "events": [
            {
                "BillableEventCostCur": 1.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 1,
                "LBMessageUID": "1",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": 5.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 2,
                "LBMessageUID": "2",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": 7.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 3,
                "LBMessageUID": "3",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_no_consume_compensated": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": 6.0,
                "tariffed_sum": null
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": 60.0,
                "tariffed_sum": null
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": -66.0,
                "tariffed_sum": null
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_overflow_neg": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -3.0,
                "tariffed_sum": -3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@3",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@3",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 4,
                "tariffed_qty": 7.0,
                "tariffed_sum": 7.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_overflow_pos": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": 4.0,
                "tariffed_sum": 4.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": -3.0,
                "tariffed_sum": -3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 6,
                "tariffed_qty": 6.0,
                "tariffed_sum": 6.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 6,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@3",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 6,
                "tariffed_qty": 2.0,
                "tariffed_sum": 2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 6,
                "tariffed_qty": -2.0,
                "tariffed_sum": -2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 6,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "5",
                "ServiceID": 7,
                "UID": "test_run@7@666@5@666@0@4@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 6,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_split": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 7.0,
                "tariffed_sum": 7.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 2.0,
                "tariffed_sum": 2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": 9.0,
                "tariffed_sum": 9.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_untariffed": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 2.0,
                "tariffed_sum": 2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 4,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 4,
                "tariffed_qty": 5.0,
                "tariffed_sum": 5.0
            },
            {
                "BillableEventCostCur": 2.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 3,
                "LBMessageUID": "3",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_untariffed_eq": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": 6.0,
                "tariffed_sum": 6.0
            },
            {
                "BillableEventCostCur": 3.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 2,
                "LBMessageUID": "2",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_untariffed_overflow": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -3.0,
                "tariffed_sum": -3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 10.0,
                "tariffed_sum": 10.0
            },
            {
                "BillableEventCostCur": 2.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 3,
                "LBMessageUID": "3",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": -1.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 4,
                "LBMessageUID": "4",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completion_zero_consume_compensated": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 6.0,
                "tariffed_sum": 6.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 60.0,
                "tariffed_sum": 60.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -66.0,
                "tariffed_sum": -66.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_completions_overflow_both": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 10.0,
                "tariffed_sum": 10.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 2.0,
                "tariffed_sum": 2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -2.0,
                "tariffed_sum": -2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -10.0,
                "tariffed_sum": -10.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@3",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 10.0,
                "tariffed_sum": 10.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_null_consume": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 2,
                "tariffed_qty": 666.0,
                "tariffed_sum": null
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_null_consume_overcompletion": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": 5.0,
                "tariffed_sum": null
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": -1.0,
                "tariffed_sum": null
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": 6.0,
                "tariffed_sum": null
            },
            {
                "BillableEventCostCur": 2.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 3,
                "LBMessageUID": "3",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -7.0,
                "tariffed_sum": -7.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -4.0,
                "tariffed_sum": -4.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -9.0,
                "tariffed_sum": -9.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback_full_untariffed": {
        "events": [
            {
                "BillableEventCostCur": -6.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 1,
                "LBMessageUID": "1",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": -66.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 2,
                "LBMessageUID": "2",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback_no_consume_compensated": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": -6.0,
                "tariffed_sum": null
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": -60.0,
                "tariffed_sum": null
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": null,
                "coeff_sum": null,
                "consume_id": null,
                "tariff_dt": 4,
                "tariffed_qty": 66.0,
                "tariffed_sum": null
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback_overflow_neg": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -2.0,
                "tariffed_sum": -2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -3.0,
                "tariffed_sum": -3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -3.0,
                "tariffed_sum": -3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@3",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback_overflow_pos": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -2.0,
                "tariffed_sum": -2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -2.0,
                "tariffed_sum": -2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 2.0,
                "tariffed_sum": 2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": 2.0,
                "tariffed_sum": 2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@3",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": 2.0,
                "tariffed_sum": 2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 5,
                "tariffed_qty": -2.0,
                "tariffed_sum": -2.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "4",
                "ServiceID": 7,
                "UID": "test_run@7@666@4@666@0@3@3",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -4.0,
                "tariffed_sum": -4.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback_untariffed": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 3,
                "tariffed_qty": -3.0,
                "tariffed_sum": -3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 3,
                "tariffed_qty": -2.0,
                "tariffed_sum": -2.0
            },
            {
                "BillableEventCostCur": -2.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 2,
                "LBMessageUID": "2",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback_untariffed_overflow": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -3.0,
                "tariffed_sum": -3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 3.0,
                "tariffed_sum": 3.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 1.0,
                "tariffed_sum": 1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -1.0,
                "tariffed_sum": -1.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": -10.0,
                "tariffed_sum": -10.0
            },
            {
                "BillableEventCostCur": -3.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 3,
                "LBMessageUID": "3",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": 1.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 4,
                "LBMessageUID": "4",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_rollback_zero_consume_compensated": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -6.0,
                "tariffed_sum": -6.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": -60.0,
                "tariffed_sum": -60.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "3",
                "ServiceID": 7,
                "UID": "test_run@7@666@3@666@0@2@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 4,
                "tariffed_qty": 66.0,
                "tariffed_sum": 66.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_state_tariff_dt": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 666,
                "tariffed_qty": 222.0,
                "tariffed_sum": 222.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@2",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 666,
                "tariffed_qty": 111.0,
                "tariffed_sum": 111.0
            },
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "2",
                "ServiceID": 7,
                "UID": "test_run@7@666@2@666@0@1@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 2,
                "tariff_dt": 666,
                "tariffed_qty": 333.0,
                "tariffed_sum": 333.0
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": "123213"
        }
    },
    "core_tariff.tariff_events.test_scenarios.test_untariffed_rollback": {
        "events": [
            {
                "EffectiveServiceOrderID": 666,
                "LBMessageUID": "1",
                "ServiceID": 7,
                "UID": "test_run@7@666@1@666@0@0@1",
                "coeff_qty": 1.0,
                "coeff_sum": 1.0,
                "consume_id": 1,
                "tariff_dt": 5,
                "tariffed_qty": 10.0,
                "tariffed_sum": 10.0
            },
            {
                "BillableEventCostCur": 1.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 1,
                "LBMessageUID": "1",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": -1.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 2,
                "LBMessageUID": "2",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": -3.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 3,
                "LBMessageUID": "3",
                "ServiceID": 7
            },
            {
                "BillableEventCostCur": 5.0,
                "CurrencyID": 666,
                "EffectiveServiceOrderID": 666,
                "EventTime": 4,
                "LBMessageUID": "4",
                "ServiceID": 7
            }
        ],
        "order": {
            "EffectiveServiceOrderID": 666,
            "ServiceID": 7,
            "state": null
        }
    }
}
