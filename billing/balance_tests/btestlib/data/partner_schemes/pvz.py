# -*- coding: utf-8 -*-
__all__ = []

import functools

import util

SCHEMES = dict()

register = functools.partial(util.register, SCHEMES)

register('default_conf',
    '{"contracts": [{"firm": 111, "services": {"mandatory": [725]}, "person": {"type": {"mandatory": ["ur"]}}, "tag": "pvz", "_params": {"enable_setting_attributes": 1, "enable_validating_attributes": 1}, "ctype": "SPENDABLE"}], "thirdparty_processing": [{"service_ids": [725], "pipeline": [{"params": {"payment_type_cc_config": {"force_paysys_type_cc": "yandex"}}, "unit": "PaysysTypeCCUnit"}, "GetId", "PartnerUnit", {"params": {"contract_filters": [{"filter": {"name": "service"}}, {"filter": {"name": "partner"}}, {"filter": {"name": "transaction_dt"}}, {"filter": {"params": {"contract_type": "SPENDABLE"}, "name": "contract_type"}}]}, "unit": "ContractUnit"}, "ExtractSideTaxiPromoIDs", "AmountUnit", "SetInternal", "OEBSOrgID"]}], "close_month": [{"month_close_generator": {"params": {"completions_include_nds": false}, "name": "SpendablePartnerProductGenerator"}, "contract_tag": "pvz"}], "tests": [{"type": "transaction_pipeline", "processing": "trust", "input": [{"payment_method": "card", "tpt_paysys_type_cc": "yamoney", "nds": 0, "invoice_type": "personal_account", "currency": "RUB", "rows": [{"amount": 5000.01, "product_params": {"partner_id": "from_contract", "service_fee": 1}}], "type": "payment"}], "result": [{"partner_id": "force_partner", "person_id": "force_partner", "contract_id": "force_partner", "payment_type": "card", "transaction_type": "payment", "amount": 5000.01, "internal": 1, "set_product_id": 1, "set_invoice_eid": 1, "yandex_reward": null, "paysys_type_cc": "yandex", "product_id": "default_product_mapping.nds_0"}]}, {"type": "month_closing", "input": [{"payment_method": "card", "currency": "RUB", "nds": 0, "tpt_paysys_type_cc": "yandex", "invoice_type": "personal_account", "pad_type_id": 6, "periods": [{"month_offset": -3, "tpt_rows": [{"amount": 10, "transaction_type": "payment"}]}, {"month_offset": -2, "tpt_rows": [{"amount": 20, "transaction_type": "payment"}, {"amount": 20, "transaction_type": "payment"}]}, {"month_offset": -1, "tpt_rows": [{"amount": 20, "transaction_type": "payment"}, {"amount": 15, "transaction_type": "refund"}]}]}], "result": [{"periods": [{"month_offset": -3, "invoice": [], "acts": [{"amount": 10}]}, {"month_offset": -2, "invoice": [], "acts": [{"amount": 40}]}, {"month_offset": -1, "invoice": [], "acts": [{"amount": 5}]}]}]}]}'
)
register('sort_center_conf', '{"contracts": [{"firm": 111, "ctype": "SPENDABLE", "currency": "RUB", "tag": "sort_center", "services": {"mandatory": [1060]}, "nds": 18, "_params": {"enable_setting_attributes": 1, "enable_validating_attributes": 1}}], "thirdparty_processing": [{"service_ids": [1060], "pipeline": [{"params": {"payment_type_cc_config": {"force_paysys_type_cc": "sort_center"}}, "unit": "PaysysTypeCCUnit"}, {"params": {"shift": 1}, "unit": "GetId"}, "PartnerUnit", {"params": {"contract_filters": [{"filter": {"name": "service"}}, {"filter": {"name": "partner"}}, {"filter": {"name": "transaction_dt"}}, {"filter": {"params": {"contract_type": "SPENDABLE"}, "name": "contract_type"}}]}, "unit": "ContractUnit"}, "ExtractSideTaxiPromoIDs", "AmountUnit", "OEBSOrgID"]}], "close_month": [{"month_close_generator": {"params": {"completions_include_nds": false}, "name": "SpendablePartnerProductGenerator"}, "contract_tag": "sort_center"}], "tests": [{"type": "transaction_pipeline", "processing": "trust", "input": [{"payment_method": "card", "tpt_paysys_type_cc": "yamoney", "nds": 0, "invoice_type": "personal_account", "currency": "RUB", "rows": [{"amount": 5000.01, "product_params": {"partner_id": "from_contract", "service_fee": 1}}], "type": "payment"}], "result": [{"partner_id": "force_partner", "person_id": "force_partner", "contract_id": "force_partner", "payment_type": "card", "transaction_type": "payment", "amount": 5000.01, "internal": null, "set_product_id": 1, "set_invoice_eid": 1, "yandex_reward": null, "paysys_type_cc": "sort_center", "product_id": "default_product_mapping.nds_0"}]}, {"type": "month_closing", "input": [{"payment_method": "card", "currency": "RUB", "nds": 20, "tpt_paysys_type_cc": "yandex", "invoice_type": "personal_account", "pad_type_id": 6, "periods": [{"month_offset": -3, "tpt_rows": [{"amount": 10, "transaction_type": "payment"}]}, {"month_offset": -2, "tpt_rows": [{"amount": 20, "transaction_type": "payment"}, {"amount": 20, "transaction_type": "payment"}]}, {"month_offset": -1, "tpt_rows": [{"amount": 20, "transaction_type": "payment"}, {"amount": 15, "transaction_type": "refund"}]}]}], "result": [{"periods": [{"month_offset": -3, "invoice": [], "acts": [{"amount": 10}]}, {"month_offset": -2, "invoice": [], "acts": [{"amount": 40}]}, {"month_offset": -1, "invoice": [], "acts": [{"amount": 5}]}]}]}]}')
register('delivery_services_conf', '{"contracts": [{"firm": 111, "ctype": "SPENDABLE", "currency": "RUB", "tag": "delivery_services", "services": {"mandatory": [1100]}, "nds": 18, "_params": {"enable_setting_attributes": 1, "enable_validating_attributes": 1}}], "thirdparty_processing": [{"service_ids": [1100], "pipeline": [{"params": {"payment_type_cc_config": {"force_paysys_type_cc": "market-delivery"}}, "unit": "PaysysTypeCCUnit"}, {"params": {"shift": 1}, "unit": "GetId"}, "PartnerUnit", {"params": {"contract_filters": [{"filter": {"name": "service"}}, {"filter": {"name": "partner"}}, {"filter": {"name": "transaction_dt"}}, {"filter": {"params": {"contract_type": "SPENDABLE"}, "name": "contract_type"}}]}, "unit": "ContractUnit"}, "ExtractSideTaxiPromoIDs", "AmountUnit", "OEBSOrgID"]}], "close_month": [{"month_close_generator": {"params": {"completions_include_nds": false}, "name": "SpendablePartnerProductGenerator"}, "contract_tag": "delivery_services"}], "tests": [{"type": "transaction_pipeline", "processing": "trust", "input": [{"payment_method": "card", "tpt_paysys_type_cc": "yamoney", "nds": 0, "invoice_type": "personal_account", "currency": "RUB", "rows": [{"amount": 5000.01, "product_params": {"partner_id": "from_contract", "service_fee": 1}}], "type": "payment"}], "result": [{"partner_id": "force_partner", "person_id": "force_partner", "contract_id": "force_partner", "payment_type": "card", "transaction_type": "payment", "amount": 5000.01, "internal": null, "set_product_id": 1, "set_invoice_eid": 1, "yandex_reward": null, "paysys_type_cc": "market-delivery", "product_id": "default_product_mapping.nds_0"}]}, {"type": "month_closing", "input": [{"payment_method": "card", "currency": "RUB", "nds": 20, "tpt_paysys_type_cc": "yandex", "invoice_type": "personal_account", "pad_type_id": 6, "periods": [{"month_offset": -3, "tpt_rows": [{"amount": 10, "transaction_type": "payment"}]}, {"month_offset": -2, "tpt_rows": [{"amount": 20, "transaction_type": "payment"}, {"amount": 20, "transaction_type": "payment"}]}, {"month_offset": -1, "tpt_rows": [{"amount": 20, "transaction_type": "payment"}, {"amount": 15, "transaction_type": "refund"}]}]}], "result": [{"periods": [{"month_offset": -3, "invoice": [], "acts": [{"amount": 10}]}, {"month_offset": -2, "invoice": [], "acts": [{"amount": 40}]}, {"month_offset": -1, "invoice": [], "acts": [{"amount": 5}]}]}]}]}')
