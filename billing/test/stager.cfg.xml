<?xml version="1.0" encoding="utf-8"?>

<Stager xmlns:xi="http://www.w3.org/2001/XInclude">

    <Shared>
        <Env>
            <name>test</name>
            <httpsverify>/usr/share/yandex-internal-root-ca/YandexInternalRootCA.crt</httpsverify>
        </Env>

        <CypressFormatKwargs>
            <env>test</env>
            <component>stat_aggregator</component>
            <home>home/balance-test</home>
            <temp>tmp/balance-test</temp>
        </CypressFormatKwargs>

    </Shared>

    <Projects>
        <Project name="monitor" purpose="main"></Project>
        <Project name="monitor" purpose="emergency"></Project>

        <Project name="avia" purpose="main" proxy="hahn.yt.yandex.net">
            <CypressFormatKwargs>
                <project>avia</project>
            </CypressFormatKwargs>

            <Nodes>
                <Node id="show_log">
                    <path>//home/avia/logs/avia-show-log/$date</path>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <mtime>6 hours</mtime>
                </Node>
                <Node id="custom_shows">
                    <path>//$home/$env/$component/$project/support/custom_shows/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="custom_redir">
                    <path>//$home/$env/$component/$project/support/custom_redir/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="custom_completions">
                    <path>//$home/$env/$component/$project/support/custom_completions/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="custom_distribution">
                    <path>//$home/$env/$component/$project/support/custom_distribution/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="redir_log">
                    <path>//home/avia/logs/avia-json-redir-log/$date</path>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <mtime>6 hours</mtime>
                </Node>
                <Node id="aggregated_shows">
                    <path>//$temp/$env/$component/$project/shows/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="fraud_ips">
                    <path>//$temp/$env/$component/$project/fraud/$date/fraud-with-ip-data</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="fraud_index">
                    <path>//$temp/$env/$component/$project/fraud/$date/indexed</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="clean_completions_with_shows">
                    <path>//$temp/$env/$component/$project/vanilla-completions/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="completions_with_contract_data">
                    <path>//$temp/$env/$component/$project/precpl_contracts/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="contract_data">
                    <path>//$temp/$env/$component/$project/contract_data/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="currency_rates">
                    <path>//$temp/$env/$component/$project/currency_rates/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="products">
                    <path>//$temp/$env/$component/$project/products/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="filtr_crr">
                    <path>//$temp/$env/$component/$project/fraud/$date/crr</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="filtr_rt">
                    <path>//$temp/$env/$component/$project/fraud/$date/rt</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="filtr_yip">
                    <path>//$temp/$env/$component/$project/fraud/$date/yip</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="filtr_boic_yuid">
                    <path>//$temp/$env/$component/$project/fraud/$date/boic-yuid</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="filtr_boic_uip">
                    <path>//$temp/$env/$component/$project/fraud/$date/boic-uip</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="filtr_clck_yuid">
                    <path>//$temp/$env/$component/$project/fraud/$date/clck-yuid</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="filtr_clck_uip">
                    <path>//$temp/$env/$component/$project/fraud/$date/clck-uip</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="fraud">
                    <path>//$home/$env/$component/$project/fraud/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="errors">
                    <path>//$home/$env/$component/$project/completions_failed/$date</path>
                    <tags>SHOULD_BE_EMPTY</tags>
                </Node>
                <Node id="completions">
                    <path>//$home/$env/$component/$project/completions/$date</path>
                    <tags>OUTPUT_TABLE, SHOULD_NOT_BE_EMPTY</tags>
                    <schema>
                        <col name="shows"            type="int64" />
                        <col name="clicks"           type="int64" />
                        <col name="price"            type="string" />
                        <col name="client_id"        type="int64" />
                        <col name="contract_id"      type="int64" />
                        <col name="product_id"       type="int64" />
                        <col name="currency"         type="string" />
                        <col name="national_version" type="string" />
                    </schema>
                </Node>
                <Node id="distribution">
                    <path>//$home/$env/$component/$project/distribution/$date</path>
                    <tags>SHOULD_NOT_BE_EMPTY</tags>
                    <schema>
                        <col name="shows"            type="int64" />
                        <col name="clicks"           type="int64" />
                        <col name="bucks"            type="string" />
                        <col name="clid"             type="string" />
                        <col name="stid"             type="int64" />
                        <col name="client_id"        type="int64" />
                        <col name="national_version" type="string" />
                    </schema>
                </Node>
                <Node id="clean_completions">
                    <path>//$temp/$env/$component/$project/clean_completions/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="distinct_clients">
                    <path>//$temp/$env/$component/$project/clients/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="yandex_ips">
                    <path>//$temp/$env/$component/$project/yips/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="ips">
                    <path>//$temp/$env/$component/$project/ips/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
            </Nodes>
        </Project>

        <Project name="taxi" purpose="main" proxy="hahn.yt.yandex.net">
            <description>Яндекс.Такси</description>
            <juggler_notify_rules>https://juggler.yandex-team.ru/notification_rules/?query=rule_id=5b17ffcb2c7c440074c6e988</juggler_notify_rules>

            <CypressFormatKwargs>
                <project>taxi</project>
            </CypressFormatKwargs>

            <Nodes>
                <Node id="tl_revenues_in">
                    <path>//home/taxi/production/export/tlog/dry_revenues/$date</path>
                    <description>Входная таблица с открутками (транзакционный лог, разбитый по дням)</description>
                    <schema>
                        <col name="amount"                  type="string"   description="Сумма транзакции" />
                        <col name="clid"                    type="string"   description="ID клиента для дистрибуции" />
                        <col name="client_id"               type="string"   description="ID клиента" />
                        <col name="currency"                type="string"   description="Валюта транзакции" />
                        <col name="event_time"              type="string"   description="Дата поездки" />
                        <col name="orig_transaction_id"     type="string"   description="Исходный ID транзакции" />
                        <col name="service_transaction_id"  type="string"   description="ID транзакции сервиса" />
                        <col name="transaction_id"          type="int64"    description="Инкрементальный ID транзакции" />
                        <col name="transaction_time"        type="string"   description="Дата проведения транзакции" />
                        <col name="product"                 type="string"   description="ID продукта" />
                        <col name="service_id"              type="int64"    description="ID сервиса" />
                        <col name="transaction_type"        type="string"   description="Тип транзакции (payment, refund, ...)" />
                    </schema>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="tl_revenues_copy">
                    <path>//$home/$env/$component/$project/tl-revenues-in/$date</path>
                    <description>Копия входной таблицы с открутками (транзакционный лог) для аудита</description>
                    <schema>
                        <col name="amount"                  type="string"   description="" />
                        <col name="clid"                    type="string"   description="" />
                        <col name="client_id"               type="string"   description="" />
                        <col name="currency"                type="string"   description="" />
                        <col name="event_time"              type="string"   description="" />
                        <col name="orig_transaction_id"     type="string"   description="" />
                        <col name="service_transaction_id"  type="string"   description="" />
                        <col name="transaction_id"          type="int64"    description="" />
                        <col name="transaction_time"        type="string"   description="" />
                        <col name="product"                 type="string"   description="" />
                        <col name="service_id"              type="int64"    description="" />
                        <col name="transaction_type"        type="string"   description="" />
                    </schema>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="tl_revenues_out">
                    <description>Выходная таблица с агрегированными открутками (транзакционный лог)</description>
                    <path>//$home/$env/$component/$project/tl-revenues-out/$date</path>
                    <schema>
                        <col name="amount"           type="string"   description="" />
                        <col name="client_id"        type="int64"    description="" />
                        <col name="currency"         type="string"   description="" />
                        <col name="last_transaction" type="string"   description="" />
                        <col name="product"          type="string"   description="" />
                        <col name="service_id"       type="int64"    description="" />
                    </schema>
                    <tags>OUTPUT_TABLE, REQUIRED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="tl_distrib_out">
                    <description>Выходная таблица с агрегированными открутками дистрибуции (транзакционный лог)</description>
                    <path>//$home/$env/$component/$project/tl-distrib-out/$date</path>
                    <schema>
                        <col name="amount"           type="string"   description="" />
                        <col name="clid"             type="string"   description="" />
                        <col name="count"            type="int64"    description="" />
                    </schema>
                    <tags>OUTPUT_TABLE, REQUIRED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="custom_tl_revenues_in">
                    <path>//$home/$env/$component/$project/support/tl_revenues_in/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="custom_tl_revenues_out">
                    <path>//$home/$env/$component/$project/support/tl_revenues_out/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="custom_tl_distrib_out">
                    <path>//$home/$env/$component/$project/support/tl_distrib_out/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="currency">
                    <description>Используемые в агрегации валюты</description>
                    <path>//$temp/$env/$component/$project/currency/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="errors">
                    <description>Список ошибок</description>
                    <path>//$home/$env/$component/$project/errors/$date</path>
                    <tags>REQUIRED, SHOULD_BE_EMPTY</tags>
                </Node>
            </Nodes>
        </Project>

        <Project name="blue_market" purpose="main" proxy="hahn.yt.yandex.net">
            <description>Синий маркет</description>
            <juggler_notify_rules>https://juggler.yandex-team.ru/notification_rules/?query=rule_id=5b17ffcb2c7c440074c6e988</juggler_notify_rules>

            <CypressFormatKwargs>
                <project>blue_market</project>
            </CypressFormatKwargs>

            <Nodes>
                <Node id="tl_revenues_in">
                    <path>//home/market/testing/mbi/billing/tlog/revenues/$date</path>
                    <description>Входная таблица с открутками (транзакционный лог, разбитый по дням)</description>
                    <schema>
                        <col name="amount"                  type="string"   description="Сумма транзакции" />
                        <col name="client_id"               type="string"   description="ID клиента" />
                        <col name="currency"                type="string"   description="Валюта транзакции" />
                        <col name="event_time"              type="string"   description="Дата обилливания" />
                        <col name="transaction_id"          type="int64"    description="Инкрементальный ID транзакции" />
                        <col name="transaction_time"        type="string"   description="Дата проведения транзакции" />
                        <col name="product"                 type="string"   description="Продукт" />
                        <col name="service_id"              type="int32"    description="ID сервиса" />
                        <col name="transaction_type"        type="string"   description="Тип транзакции (payment, refund, ...)" />
                        <col name="aggregation_sign"        type="int32"    description="Знак агрегации" />
                        <col name="ignore_in_balance"       type="boolean"  description="Игнорировать в балансе" />
                        <col name="nds"                     type="int32"    description="Признак НДС" />
                    </schema>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <ignore-missing>False</ignore-missing>
                </Node>
                <Node id="tl_revenues_copy">
                    <path>//$home/$env/$component/$project/tl-revenues-in/$date</path>
                    <description>Копия входной таблицы с открутками (транзакционный лог) для аудита</description>
                    <schema>
                        <col name="amount"                  type="string"   description="" />
                        <col name="client_id"               type="string"   description="" />
                        <col name="currency"                type="string"   description="" />
                        <col name="event_time"              type="string"   description="" />
                        <col name="transaction_id"          type="int64"    description="" />
                        <col name="transaction_time"        type="string"   description="" />
                        <col name="product"                 type="string"   description="" />
                        <col name="service_id"              type="int32"    description="" />
                        <col name="transaction_type"        type="string"   description="" />
                        <col name="aggregation_sign"        type="int32"    description="" />
                        <col name="ignore_in_balance"       type="boolean"  description="" />
                        <col name="nds"                     type="int32"    description="" />
                    </schema>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="tl_revenues_out">
                    <description>Выходная таблица с агрегированными открутками (транзакционный лог)</description>
                    <path>//$home/$env/$component/$project/tl-revenues-out/$date</path>
                    <schema>
                        <col name="amount"           type="string"   description="" />
                        <col name="nds"             type="int32"    description="" />
                        <col name="client_id"        type="int64"    description="" />
                        <col name="currency"         type="string"   description="" />
                        <col name="last_transaction" type="int64"   description="" />
                        <col name="product"          type="string"   description="" />
                        <col name="service_id"       type="in32"    description="" />
                    </schema>
                    <tags>OUTPUT_TABLE, REQUIRED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="errors">
                    <description>Список ошибок</description>
                    <path>//$home/$env/$component/$project/errors/$date</path>
                    <tags>REQUIRED, SHOULD_BE_EMPTY</tags>
                </Node>
            </Nodes>
        </Project>

        <Project name="blue_marketing_services" purpose="main" proxy="hahn.yt.yandex.net">
            <description>Маркет: биллинг маркетинговых услуг</description>
            <juggler_notify_rules>https://juggler.yandex-team.ru/notification_rules/?query=rule_id=5b17ffcb2c7c440074c6e988</juggler_notify_rules>

            <CypressFormatKwargs>
                <project>blue_marketing_services</project>
            </CypressFormatKwargs>

            <Nodes>
                <Node id="tl_revenues_in">
                    <path>//home/market/testing/mbi/billing/tlog/partner-marketing/$date</path>
                    <description>Входная таблица с открутками (транзакционный лог, разбитый по дням)</description>
                    <schema>
                        <col name="amount"                  type="string"   description="Сумма транзакции" />
                        <col name="client_id"               type="string"   description="ID клиента" />
                        <col name="currency"                type="string"   description="Валюта транзакции" />
                        <col name="event_time"              type="string"   description="Дата обилливания" />
                        <col name="transaction_id"          type="int64"    description="Инкрементальный ID транзакции" />
                        <col name="transaction_time"        type="string"   description="Дата проведения транзакции" />
                        <col name="product"                 type="string"   description="Продукт" />
                        <col name="service_id"              type="int32"    description="ID сервиса" />
                        <col name="transaction_type"        type="string"   description="Тип транзакции (payment, refund, ...)" />
                        <col name="aggregation_sign"        type="int32"    description="Знак агрегации" />
                        <col name="ignore_in_balance"       type="boolean"  description="Игнорировать в балансе" />
                        <col name="nds"                     type="int32"    description="Признак НДС" />
                    </schema>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <ignore-missing>False</ignore-missing>
                </Node>
                <Node id="tl_revenues_copy">
                    <path>//$home/$env/$component/$project/tl-revenues-in/$date</path>
                    <description>Копия входной таблицы с открутками (транзакционный лог) для аудита</description>
                    <schema>
                        <col name="amount"                  type="string"   description="" />
                        <col name="client_id"               type="string"   description="" />
                        <col name="currency"                type="string"   description="" />
                        <col name="event_time"              type="string"   description="" />
                        <col name="transaction_id"          type="int64"    description="" />
                        <col name="transaction_time"        type="string"   description="" />
                        <col name="product"                 type="string"   description="" />
                        <col name="service_id"              type="int32"    description="" />
                        <col name="transaction_type"        type="string"   description="" />
                        <col name="aggregation_sign"        type="int32"    description="" />
                        <col name="ignore_in_balance"       type="boolean"  description="" />
                        <col name="nds"                     type="int32"    description="" />
                    </schema>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="tl_revenues_out">
                    <description>Выходная таблица с агрегированными открутками (транзакционный лог)</description>
                    <path>//$home/$env/$component/$project/tl-revenues-out/$date</path>
                    <schema>
                        <col name="amount"           type="string"   description="" />
                        <col name="nds"             type="int32"    description="" />
                        <col name="client_id"        type="int64"    description="" />
                        <col name="currency"         type="string"   description="" />
                        <col name="last_transaction" type="int64"   description="" />
                        <col name="product"          type="string"   description="" />
                        <col name="service_id"       type="in32"    description="" />
                    </schema>
                    <tags>OUTPUT_TABLE, REQUIRED</tags>
                    <ignore-missing>True</ignore-missing>
                </Node>
                <Node id="errors">
                    <description>Список ошибок</description>
                    <path>//$home/$env/$component/$project/errors/$date</path>
                    <tags>REQUIRED, SHOULD_BE_EMPTY</tags>
                </Node>
            </Nodes>
        </Project>

        <Project name="cloud" purpose="main" proxy="hahn.yt.yandex.net">
            <CypressFormatKwargs>
                <project>cloud</project>
            </CypressFormatKwargs>

            <Metadata>
                <meta id="compl_url">https://billing.private-api.cloud-preprod.yandex.net:16465/billing/v1/private/balanceReports?startDate=$date&amp;endDate=$date</meta>
                <meta id="client_id">2000508</meta>
                <!-- a-vasin: В тесте нам не нужно ходить в эту ручку, потому что мы сами
                     подкладываем данные в табличку в YT -->
                <!-- <meta id="tvm_alias">yc-billing</meta> -->
            </Metadata>

            <Nodes>
                <Node id="marketplace_in">
                    <description>Данные маркетплейса от сервиса</description>
                    <path>//home/cloud_analytics/export/marketplace/yc-billing-export-revenue-reports/$date</path>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <mtime>6 hours</mtime>
                    <required>False</required> <!-- deprecated, can be removed after release 2.190 -->
                    <ignore-missing>True</ignore-missing>
                    <schema>
                        <col name="date"                        type="string" description="Дата события" />
                        <col name="publisher_balance_client_id" type="string" description="Идентификатор клиента" />
                        <col name="total"                       type="string" description="Сумма откруток" />
                    </schema>
                </Node>
                <Node id="marketplace_out">
                    <path>//$home/$env/$component/$project/marketplace/$date</path>
                    <tags>OUTPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY</tags>
                    <required>False</required> <!-- deprecated, can be removed after release 2.190 -->
                    <ignore-missing>True</ignore-missing>
                    <schema>
                        <col name="client_id" type="int64"  description="Идентификатор клиента" />
                        <col name="total"     type="string" description="Агрегированная сумма откруток" />
                    </schema>
                </Node>
                <Node id="events_src">
                    <description>Открутки, полученные от сервиса</description>
                    <path>//home/cloud/billing/balance_cloud_completions_preprod/$date</path>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <mtime>3 hours</mtime>
                    <schema>
                        <col name="product_id" type="string" description="Идентификатор продукта" />
                        <col name="project_id" type="string" description="Идентификатор проекта" />
                        <col name="amount"     type="string" description="Сумма откруток" />
                    </schema>
                </Node>
            	<Node id="events">
                    <description>Скопированные открутки</description>
                    <path>//$home/$env/$component/$project/events/$date</path>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <mtime>3 hours</mtime>
                </Node>
                <Node id="timeline">
                    <path>//$temp/$env/$component/$project/timeline/$date</path>
                    <tags>REQUIRED, SHOULD_NOT_BE_EMPTY</tags>
                    <schema>
                        <col name="contract_id" type="int64"  description="Идентификатор договора" />
                        <col name="client_id"   type="int64"  description="Идентификатор клиента" />
                        <col name="finish_dt"   type="string" description="Дата окончания интервала" />
                        <col name="project_id"  type="string" description="Идентификатор проекта" />
                        <col name="start_dt"    type="string" description="Дата начала интервала" />
                    </schema>
                </Node>
                <Node id="completions">
                    <description>Агрегированные открутки events</description>
                    <path>//$home/$env/$component/$project/completions/$date</path>
                    <tags>REQUIRED, SHOULD_NOT_BE_EMPTY</tags>
                    <schema>
                        <col name="amount"      type="string" description="Агрегированная сумма откруток" />
                        <col name="contract_id" type="int64"  description="Идентификатор договора" />
                        <col name="product_id"  type="string" description="Идентификато продукта" />
                        <col name="project_id"  type="string" description="Идентификатор проекта" />
                    </schema>
                </Node>
                <Node id="distinct_projects">
                    <description>Список проектов из events</description>
                    <path>//$temp/$env/$component/$project/distinct_projects/$date</path>
                    <tags>OPTIONAL</tags>
                    <schema>
                        <col name="project_id"  type="string" description="Идентификатор используемого проекта" />
                    </schema>
                </Node>
                <Node id="errors">
                    <description>Ошибки агрегации</description>
                    <path>//$home/$env/$component/$project/errors/$date</path>
                    <tags>OUTPUT_TABLE, SHOULD_BE_EMPTY</tags>
                </Node>
                <Node id="custom_timeline">
                    <description>Таймлайн для маппинга проектов к договорам</description>
                    <path>//$home/$env/$component/$project/support/custom_timeline/$date</path>
                    <tags>OPTIONAL</tags>
                    <schema>
                        <col name="contract_id" type="int64" />
                        <col name="client_id"   type="int64" />
                        <col name="finish_dt"   type="string" />
                        <col name="project_id"  type="string" />
                        <col name="start_dt"    type="string" />
                    </schema>
                </Node>
                <Node id="custom_completions">
                    <path>//$home/$env/$component/$project/support/custom_completions/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="custom_marketplace_in">
                    <path>//$home/$env/$component/$project/support/custom_marketplace_in/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="custom_marketplace_out">
                    <path>//$home/$env/$component/$project/support/custom_marketplace_out/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
            </Nodes>
        </Project>

        <Project name="hosting_service" purpose="main" proxy="hahn.yt.yandex.net">
            <CypressFormatKwargs>
                <project>hosting_service</project>
            </CypressFormatKwargs>

            <Nodes>
                <Node id="events_src">
                    <description>Открутки, полученные от сервиса</description>
                    <path>//home/cloud/billing/balance_hosting_completions_preprod/$date</path>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <mtime>3 hours</mtime>
                    <schema>
                        <col name="product_id" type="string" description="Идентификатор продукта" />
                        <col name="project_id" type="string" description="Идентификатор проекта" />
                        <col name="amount"     type="string" description="Сумма откруток" />
                    </schema>
                </Node>
            	<Node id="events">
                    <description>Скопированные открутки</description>
                    <path>//$home/$env/$component/$project/events/$date</path>
                    <tags>INPUT_TABLE, REQUIRED, SHOULD_NOT_BE_EMPTY, SHOULD_BE_UPDATED</tags>
                    <mtime>3 hours</mtime>
                </Node>
                <Node id="timeline">
                    <path>//$temp/$env/$component/$project/timeline/$date</path>
                    <tags>REQUIRED, SHOULD_NOT_BE_EMPTY</tags>
                    <schema>
                        <col name="contract_id" type="int64"  description="Идентификатор договора" />
                        <col name="client_id"   type="int64"  description="Идентификатор клиента" />
                        <col name="finish_dt"   type="string" description="Дата окончания интервала" />
                        <col name="project_id"  type="string" description="Идентификатор проекта" />
                        <col name="start_dt"    type="string" description="Дата начала интервала" />
                    </schema>
                </Node>
                <Node id="completions">
                    <description>Агрегированные открутки events</description>
                    <path>//$home/$env/$component/$project/completions/$date</path>
                    <tags>REQUIRED, SHOULD_NOT_BE_EMPTY</tags>
                    <schema>
                        <col name="amount"      type="string" description="Агрегированная сумма откруток" />
                        <col name="contract_id" type="int64"  description="Идентификатор договора" />
                        <col name="product_id"  type="string" description="Идентификато продукта" />
                        <col name="project_id"  type="string" description="Идентификатор проекта" />
                    </schema>
                </Node>
                <Node id="distinct_projects">
                    <description>Список проектов из events</description>
                    <path>//$temp/$env/$component/$project/distinct_projects/$date</path>
                    <tags>OPTIONAL</tags>
                    <schema>
                        <col name="project_id"  type="string" description="Идентификатор используемого проекта" />
                    </schema>
                </Node>
                <Node id="errors">
                    <description>Ошибки агрегации</description>
                    <path>//$home/$env/$component/$project/errors/$date</path>
                    <tags>OUTPUT_TABLE, SHOULD_BE_EMPTY</tags>
                </Node>
            </Nodes>
        </Project>

        <Project name="drive" purpose="main" proxy="hahn.yt.yandex.net">
            <CypressFormatKwargs><project>drive</project></CypressFormatKwargs>
            <Nodes>
                <Node id="partner_products">
                    <path>//$temp/$env/$component/$project/partner_products/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="sorted_aggregations">
                    <path>//$temp/$env/$component/$project/sorted_aggregations/$date</path>
                    <tags>OPTIONAL</tags>
                </Node>
                <Node id="aggregations">
                    <path>//home/carsharing/production/billing/transactions/$date</path>
                    <tags>INPUT_TABLE</tags>
                </Node>
                <Node id="calculations">
                    <path>//$home/$env/$component/$project/calculations/$date</path>
                    <tags>OUTPUT_TABLE</tags>
                </Node>
            </Nodes>
        </Project>

        <Project name="eda" purpose="main" proxy="hahn.yt.yandex.net">
            <CypressFormatKwargs>
                <project>eda-dwh</project>
            </CypressFormatKwargs>

            <Nodes>
                <Node id="billing_export_commissions">
                    <path>//home/taxi-dwh-dev/lesikv/eda-dwh/export/yandex-balance/billing_export_commissions/$date</path>
                    <tags>INPUT_TABLE</tags>
                </Node>

                <Node id="completions">
                    <path>//$home/$env/$component/$project/completions/$date</path>
                    <tags>OUTPUT_TABLE</tags>
                </Node>
            </Nodes>
        </Project>

    </Projects>
</Stager>
