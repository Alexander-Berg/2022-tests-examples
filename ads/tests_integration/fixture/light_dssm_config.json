{
    "model_yt_dir": "//home/ads/tzar/ci/test_data/light_dssm_config",
    "system": {
        "num_downloaders": 10,
        "num_parsers": 1,
        "gpu_concurrency": 1
    },
    "model": {
        "nn": {
            "learning_rate": 0.0001
        },
        "features": {
            "external": [
                "VisitStatesFeatures",
                "IsClick"
            ],
            "embeddings": {
                "default_algo": "adam",
                "default_algo_params": {
                    "lr": 0.0001,
                    "ttl": 336
                },
                "features": [
                    {
                        "dim": 64,
                        "name": "UserRegionID"
                    },
                    {
                        "dim": 64,
                        "name": "UserBestInterests"
                    },
                    {
                        "dim": 64,
                        "name": "UserLast10CatalogiaCategories"
                    },

                    {
                        "dim": 64,
                        "name": "BannerID"
                    },
                    {
                        "dim": 64,
                        "name": "BannerBMCategoryID"
                    },
                    {
                        "dim": 64,
                        "name": "BannerTexts",
                        "features": [
                            "BannerTitleTokenLemma",
                            "BannerTextTokenLemma"
                        ],
                        "algo": "rmsprop_norm",
                        "algo_params": {
                            "ttl": 712,
                            "lr": 0.003
                        }
                    },
                    {
                        "name": "PageID",
                        "dim": 64
                    },
                    {
                        "name": "ImpID",
                        "dim": 64
                    },
                    {
                        "name": ["PageID", "ImpID"],
                        "dim": 64
                    }
                ]
            }
        },
        "user": {
            "network_type": "generic_feed_forward",
            "network_impl": {
                "network_type": "weightnorm_embedding",
                "out_features": 50,
                "depth": 10,
                "width": 64,
                "split_depth": 3
            },
            "normalizers": {
                "VisitStatesFeatures": {
                    "type": "logarithmic_scaled",
                    "dim": 7
                }
            },
            "external_feature_dims": {
                "VisitStatesFeatures": 7
            },
            "features": [
                "UserRegionID",
                "UserBestInterests",
                "UserLast10CatalogiaCategories",
                "VisitStatesFeatures"
            ]
        },
        "banner": {
            "network_type": "generic_feed_forward",
            "network_impl": {
                "network_type": "weightnorm_embedding",
                "out_features": 50,
                "depth": 10,
                "width": 64,
                "split_depth": 3
            },
            "features": [
                "BannerID",
                "BannerBMCategoryID",

                "BannerTitleTokenLemma",
                "BannerTextTokenLemma",

                "PageID",
                "ImpID",
                ["PageID", "ImpID"]
            ]
        }
    },
    "train_data": {
        "datetime_format": "%Y%m%d%H%M",
        "start_date": "202104160000",
        "end_date": "202104161000",
        "table": "//home/ads/tzar/ci/test_data/raw_logs_concatenated_torch_mb1024",
        "targets": [
            "IsClick"
        ]
    },
    "evaluation": {
        "eval_confs": [
            {
                "name": "train",
                "keys": ["HitLogID", "BannerID", "ShowTime"],
                "table": "//home/ads/tzar/ci/test_data/raw_logs_concatenated_torch_mb1024",
                "datetime_format": "%Y%m%d%H%M",
                "start_date": "202104160500",
                "end_date": "202104161000",
                "shifts": [1]
            }
        ]
    },
    "ttl_filter": {
        "frequency": 30
    },
    "snapshotter": {
        "frequency": 7200
    }
}
